{"version":3,"file":"helix-platform-admin-components.js","sources":["../../../../libs/platform/admin/components/admin.constant.ts","../../../../libs/platform/admin/components/services/admin-common-settings.service.ts","../../../../libs/platform/admin/components/services/admin-file-utility.service.ts","../../../../libs/platform/admin/components/admin-common-settings-editor/admin-common-settings-editor.component.ts","../../../../libs/platform/admin/components/admin-common-settings-editor/admin-common-settings-editor.component.html","../../../../libs/platform/admin/components/admin-common-settings-blade/admin-common-settings-blade.component.ts","../../../../libs/platform/admin/components/admin-common-settings-blade/admin-common-settings-blade.component.html","../../../../libs/platform/admin/components/admin-common-settings/admin-common-settings.component.ts","../../../../libs/platform/admin/components/admin-common-settings/admin-common-settings.component.html","../../../../libs/platform/admin/components/services/admin-settings-explorer.service.ts","../../../../libs/platform/admin/components/admin-settings-explorer/admin-settings-explorer.types.ts","../../../../libs/platform/admin/components/admin-settings-explorer/admin-settings-explorer.component.ts","../../../../libs/platform/admin/components/admin-settings-explorer/admin-settings-explorer.component.html","../../../../libs/platform/admin/components/admin-components-routing.module.ts","../../../../libs/platform/admin/components/application-issues/application-issues.constant.ts","../../../../libs/platform/admin/components/application-issues/application-issues.service.ts","../../../../libs/platform/admin/components/application-issues/issue-details/issue-details.component.ts","../../../../libs/platform/admin/components/application-issues/issue-details/issue-details.component.html","../../../../libs/platform/admin/components/application-issues/close-duplicate-issues/close-duplicate-issues.component.ts","../../../../libs/platform/admin/components/application-issues/close-duplicate-issues/close-duplicate-issues.component.html","../../../../libs/platform/admin/components/application-issues/submit-issue-to-support/submit-issue-to-support.component.ts","../../../../libs/platform/admin/components/application-issues/submit-issue-to-support/submit-issue-to-support.component.html","../../../../libs/platform/admin/components/application-issues/application-issues.component.ts","../../../../libs/platform/admin/components/application-issues/application-issues.component.html","../../../../libs/platform/admin/components/application-issues/application-issues-registration.module.ts","../../../../libs/platform/admin/components/approval-configuration/approval-configuration.constant.ts","../../../../libs/platform/admin/components/approval-configuration/approval-configuration.service.ts","../../../../libs/platform/admin/components/approval-configuration/approval-expression-configurator/approval-expression-configurator.class.ts","../../../../libs/platform/admin/components/approval-configuration/flow-approvers-selector/organization-data-page.service.ts","../../../../libs/platform/admin/components/approval-configuration/flow-approvers-selector/support-organization-data-page.service.ts","../../../../libs/platform/admin/components/approval-configuration/flow-approvers-selector/flow-approvers-selector.component.ts","../../../../libs/platform/admin/components/approval-configuration/flow-approvers-selector/flow-approvers-selector.component.html","../../../../libs/platform/admin/components/approval-configuration/approval-flow-configuration/approval-flow-configuration.component.ts","../../../../libs/platform/admin/components/approval-configuration/approval-flow-configuration/approval-flow-configuration.component.html","../../../../libs/platform/admin/components/approval-configuration/record-registration/field-definition-picker/field-definition-picker.service.ts","../../../../libs/platform/admin/components/approval-configuration/record-registration/field-definition-picker/field-definition-picker.component.ts","../../../../libs/platform/admin/components/approval-configuration/record-registration/field-definition-picker/field-definition-picker.component.html","../../../../libs/platform/admin/components/approval-configuration/record-registration/record-registration.component.ts","../../../../libs/platform/admin/components/approval-configuration/record-registration/record-registration.component.html","../../../../libs/platform/admin/components/approval-configuration/self-approval-configuration/approval-mapping-data-page.service.ts","../../../../libs/platform/admin/components/approval-configuration/self-approval-configuration/self-approval-configuration.component.ts","../../../../libs/platform/admin/components/approval-configuration/self-approval-configuration/self-approval-configuration.component.html","../../../../libs/platform/admin/components/approval-configuration/approval-configuration-editor/approval-configuration-editor.component.ts","../../../../libs/platform/admin/components/approval-configuration/approval-configuration-editor/approval-configuration-editor.component.html","../../../../libs/platform/admin/components/approval-configuration/record-definition-registration-data-page.service.ts","../../../../libs/platform/admin/components/approval-configuration/associated-record-field-name.pipe.ts","../../../../libs/platform/admin/components/approval-configuration/approval-configuration.component.ts","../../../../libs/platform/admin/components/approval-configuration/approval-configuration.component.html","../../../../libs/platform/admin/components/approval-configuration/approval-configuration-registration.module.ts","../../../../libs/platform/admin/components/approval-notifications/approval-notifications.constant.ts","../../../../libs/platform/admin/components/approval-notifications/approval-notifications-data-page.service.ts","../../../../libs/platform/admin/components/approval-notifications/approval-notifications.service.ts","../../../../libs/platform/admin/components/approval-notifications/approval-notifiction-expression-configurator/approval-notification-expression-configurator.class.ts","../../../../libs/platform/admin/components/connection-mapping/common/connection-mapping.constant.ts","../../../../libs/platform/admin/components/approval-notifications/approval-notification-editor/approval-notification-editor.component.ts","../../../../libs/platform/admin/components/approval-notifications/approval-notification-editor/approval-notification-editor.component.html","../../../../libs/platform/admin/components/approval-notifications/approval-notifications.component.ts","../../../../libs/platform/admin/components/approval-notifications/approval-notifications.component.html","../../../../libs/platform/admin/components/approval-notifications/approval-notifications-registration.module.ts","../../../../libs/platform/admin/components/bmc-service-cloud-account/bmc-service-cloud-account.component.ts","../../../../libs/platform/admin/components/bmc-service-cloud-account/bmc-service-cloud-account.component.html","../../../../libs/platform/admin/components/bmc-service-cloud-account/bmc-service-cloud-account-registration.module.ts","../../../../libs/platform/admin/components/chatbots/chatbots.component.ts","../../../../libs/platform/admin/components/chatbots/chatbots.component.html","../../../../libs/platform/admin/components/chatbots/chatbots-registration.module.ts","../../../../libs/platform/admin/components/cognitive-consumption/cognitive-consumption.types.ts","../../../../libs/platform/admin/components/cognitive-consumption/cognitive-consumption.constant.ts","../../../../libs/platform/admin/components/cognitive-consumption/cognitive-consumption.service.ts","../../../../libs/platform/admin/components/cognitive-consumption/components/download-report-modal/download-report-modal.component.ts","../../../../libs/platform/admin/components/cognitive-consumption/components/download-report-modal/download-report-modal.component.html","../../../../libs/platform/admin/components/cognitive-consumption/components/cognitive-consumption-notification-history-modal/cognitive-consumption-notification-history-modal.component.ts","../../../../libs/platform/admin/components/cognitive-consumption/components/cognitive-consumption-notification-history-modal/cognitive-consumption-notification-history-modal.component.html","../../../../libs/platform/admin/components/cognitive-consumption/components/cognitive-consumption-notification-modal/cognitive-consumption-notification-modal.component.ts","../../../../libs/platform/admin/components/cognitive-consumption/components/cognitive-consumption-notification-modal/cognitive-consumption-notification-modal.component.html","../../../../libs/platform/admin/components/cognitive-consumption/components/cognitive-consumption-chart/cognitive-consumption-chart.component.ts","../../../../libs/platform/admin/components/cognitive-consumption/components/cognitive-consumption-chart/cognitive-consumption-chart.component.html","../../../../libs/platform/admin/components/cognitive-consumption/components/cognitive-consumption-group/cognitive-consumption-group.component.ts","../../../../libs/platform/admin/components/cognitive-consumption/components/cognitive-consumption-group/cognitive-consumption-group.component.html","../../../../libs/platform/admin/components/cognitive-consumption/cognitive-consumption.component.ts","../../../../libs/platform/admin/components/cognitive-consumption/cognitive-consumption.component.html","../../../../libs/platform/admin/components/cognitive-consumption/cognitive-consumption-registration.module.ts","../../../../libs/platform/admin/components/cognitive-search/cognitive-search.constant.ts","../../../../libs/platform/admin/components/cognitive-search/cognitive-search-project-data-page.service.ts","../../../../libs/platform/admin/components/cognitive-search/cognitive-search-collection-data-page.service.ts","../../../../libs/platform/admin/components/cognitive-search/cognitive-search-editor/cognitive-search-editor.component.ts","../../../../libs/platform/admin/components/cognitive-search/cognitive-search-editor/cognitive-search-editor.component.html","../../../../libs/platform/admin/components/cognitive-search/cognitive-search.component.ts","../../../../libs/platform/admin/components/cognitive-search/cognitive-search.component.html","../../../../libs/platform/admin/components/cognitive-search/cognitive-search-registration.module.ts","../../../../libs/platform/admin/components/cognitive-service/cognitive-service.constant.ts","../../../../libs/platform/admin/components/cognitive-service/cognitive-service-system-configuration-data-page.service.ts","../../../../libs/platform/admin/components/cognitive-service/cognitive-service.service.ts","../../../../libs/platform/admin/components/cognitive-service/components/chatbot/cognitive-service-chatbot.component.ts","../../../../libs/platform/admin/components/cognitive-service/components/chatbot/cognitive-service-chatbot.component.html","../../../../libs/platform/admin/components/cognitive-service/components/administration-credentials/cognitive-service-administration-credentials.component.ts","../../../../libs/platform/admin/components/cognitive-service/components/administration-credentials/cognitive-service-administration-credentials.component.html","../../../../libs/platform/admin/components/cognitive-service/components/connections/cognitive-service-connections.component.ts","../../../../libs/platform/admin/components/cognitive-service/components/connections/cognitive-service-connections.component.html","../../../../libs/platform/admin/components/cognitive-service/components/onboard/cognitive-service-onboard.component.ts","../../../../libs/platform/admin/components/cognitive-service/components/onboard/cognitive-service-onboard.component.html","../../../../libs/platform/admin/components/cognitive-service/components/regions/cognitive-service-regions.component.ts","../../../../libs/platform/admin/components/cognitive-service/components/regions/cognitive-service-regions.component.html","../../../../libs/platform/admin/components/cognitive-service/components/summarization/cognitive-service-summarization.component.ts","../../../../libs/platform/admin/components/cognitive-service/components/summarization/cognitive-service-summarization.component.html","../../../../libs/platform/admin/components/cognitive-service/components/tone-analyzer/cognitive-service-tone-analyzer.component.ts","../../../../libs/platform/admin/components/cognitive-service/components/tone-analyzer/cognitive-service-tone-analyzer.component.html","../../../../libs/platform/admin/components/cognitive-service/cognitive-service.component.ts","../../../../libs/platform/admin/components/cognitive-service/cognitive-service.component.html","../../../../libs/platform/admin/components/cognitive-service/cognitive-service-registration.module.ts","../../../../libs/platform/admin/components/cognitive-training/cognitive-training.types.ts","../../../../libs/platform/admin/components/cognitive-training/cognitive-training.constant.ts","../../../../libs/platform/admin/components/cognitive-training/cognitive-training.service.ts","../../../../libs/platform/admin/components/cognitive-training/cognitive-training-utils.service.ts","../../../../libs/platform/admin/components/cognitive-training/components/chatbot-data-set-blade/chatbot-data-set-blade.component.ts","../../../../libs/platform/admin/components/cognitive-training/components/chatbot-data-set-blade/chatbot-data-set-blade.component.html","../../../../libs/platform/admin/components/cognitive-training/components/file-data-set-blade/file-data-set-blade.component.ts","../../../../libs/platform/admin/components/cognitive-training/components/file-data-set-blade/file-data-set-blade.component.html","../../../../libs/platform/admin/components/cognitive-training/components/interactive-evaluation-blade/interactive-evaluation-blade.component.ts","../../../../libs/platform/admin/components/cognitive-training/components/interactive-evaluation-blade/interactive-evaluation-blade.component.html","../../../../libs/platform/admin/components/cognitive-training/components/record-data-set-expression-configurator/record-data-set-expression-configurator.class.ts","../../../../libs/platform/admin/components/cognitive-training/components/record-data-set-blade/record-data-set-blade.component.ts","../../../../libs/platform/admin/components/cognitive-training/components/record-data-set-blade/record-data-set-blade.component.html","../../../../libs/platform/admin/components/cognitive-training/components/cognitive-training-record-grid/cognitive-training-record-grid.component.ts","../../../../libs/platform/admin/components/cognitive-training/components/cognitive-training-record-grid/cognitive-training-record-grid.component.html","../../../../libs/platform/admin/components/cognitive-training/cognitive-training.component.ts","../../../../libs/platform/admin/components/cognitive-training/cognitive-training.component.html","../../../../libs/platform/admin/components/cognitive-training/cognitive-training-registration.module.ts","../../../../libs/platform/admin/components/comaround-knowledge/comaround-knowledge.constant.ts","../../../../libs/platform/admin/components/comaround-knowledge/comaround-knowledge.component.ts","../../../../libs/platform/admin/components/comaround-knowledge/comaround-knowledge.component.html","../../../../libs/platform/admin/components/comaround-knowledge/comaround-knowledge-registration.module.ts","../../../../libs/platform/admin/components/connection-mapping/common/connection-mapping.types.ts","../../../../libs/platform/admin/components/connection-mapping/common/connection-mapping.component.ts","../../../../libs/platform/admin/components/connection-mapping/common/connection-mapping.component.html","../../../../libs/platform/admin/components/connection-mapping/common/connection-mapping.module.ts","../../../../libs/platform/admin/components/connection-mapping/connector-mapping/connector-mapping.component.ts","../../../../libs/platform/admin/components/connection-mapping/connector-mapping/connector-mapping.component.html","../../../../libs/platform/admin/components/connection-mapping/connector-mapping/connector-mapping-registration.module.ts","../../../../libs/platform/admin/components/connection-mapping/data-source-mapping/data-source-mapping.component.ts","../../../../libs/platform/admin/components/connection-mapping/data-source-mapping/data-source-mapping.component.html","../../../../libs/platform/admin/components/connection-mapping/data-source-mapping/data-source-mapping.module.ts","../../../../libs/platform/admin/components/connection-mapping/web-api-mapping/web-api-mapping.component.ts","../../../../libs/platform/admin/components/connection-mapping/web-api-mapping/web-api-mapping.component.html","../../../../libs/platform/admin/components/connection-mapping/web-api-mapping/web-api-mapping-registration.module.ts","../../../../libs/platform/admin/components/connector-configuration/connector-configuration.constant.ts","../../../../libs/platform/admin/components/connector-configuration/connector-configuration-data-page.service.ts","../../../../libs/platform/admin/components/connector-configuration/connectors-data-page.service.ts","../../../../libs/platform/admin/components/connector-configuration/connector-configuration.service.ts","../../../../libs/platform/admin/components/connector-configuration/connector-configuration-editor/connector-configuration-editor.component.ts","../../../../libs/platform/admin/components/connector-configuration/connector-configuration-editor/connector-configuration-editor.component.html","../../../../libs/platform/admin/components/connector-configuration/connector-configuration.component.ts","../../../../libs/platform/admin/components/connector-configuration/connector-configuration.component.html","../../../../libs/platform/admin/components/connector-configuration/connector-configuration-registration.module.ts","../../../../libs/platform/admin/components/data-source-connections/custom-data-source-provider-picker/custom-data-source-provider-picker.component.ts","../../../../libs/platform/admin/components/data-source-connections/custom-data-source-provider-picker/custom-data-source-provider-picker.component.html","../../../../libs/platform/admin/components/data-source-connections/data-source-connections.constant.ts","../../../../libs/platform/admin/components/data-source-connections/data-source-connection-general.component.ts","../../../../libs/platform/admin/components/data-source-connections/data-source-connection-general.component.html","../../../../libs/platform/admin/components/data-source-connections/custom-data-source-provider-data-page.service.ts","../../../../libs/platform/admin/components/data-source-connections/data-source-connection-properties.component.ts","../../../../libs/platform/admin/components/data-source-connections/data-source-connection-properties.component.html","../../../../libs/platform/admin/components/data-source-connections/data-source-connections.service.ts","../../../../libs/platform/admin/components/data-source-connections/data-source-connections.component.ts","../../../../libs/platform/admin/components/data-source-connections/data-source-connections.component.html","../../../../libs/platform/admin/components/data-source-connections/data-source-connections-registration.module.ts","../../../../libs/platform/admin/components/email-profiles/email-profiles.constant.ts","../../../../libs/platform/admin/components/email-profiles/create-email-profile/create-email-profile.component.ts","../../../../libs/platform/admin/components/email-profiles/create-email-profile/create-email-profile.component.html","../../../../libs/platform/admin/components/email-profiles/email-profiles.service.ts","../../../../libs/platform/admin/components/email-profiles/email-profiles.component.ts","../../../../libs/platform/admin/components/email-profiles/email-profiles.component.html","../../../../libs/platform/admin/components/email-profiles/email-profiles-registration.module.ts","../../../../libs/platform/admin/components/functional-roles/functional-role.service.ts","../../../../libs/platform/admin/components/functional-roles/functional-role-editor/functional-role-editor.component.ts","../../../../libs/platform/admin/components/functional-roles/functional-role-editor/functional-role-editor.component.html","../../../../libs/platform/admin/components/functional-roles/functional-roles.constant.ts","../../../../libs/platform/admin/components/functional-roles/functional-roles.component.ts","../../../../libs/platform/admin/components/functional-roles/functional-roles.component.html","../../../../libs/platform/admin/components/functional-roles/functional-roles-registration.module.ts","../../../../libs/platform/admin/components/hkm-access-mapping/hkm-access-mapping.service.ts","../../../../libs/platform/admin/components/hkm-access-mapping/hkm-access-map-editor/hkm-access-map-editor.component.ts","../../../../libs/platform/admin/components/hkm-access-mapping/hkm-access-map-editor/hkm-access-map-editor.component.html","../../../../libs/platform/admin/components/hkm-access-mapping/hkm-access-mapping.types.ts","../../../../libs/platform/admin/components/hkm-access-mapping/hkm-access-mapping.component.ts","../../../../libs/platform/admin/components/hkm-access-mapping/hkm-access-mapping.component.html","../../../../libs/platform/admin/components/hkm-access-mapping/hkm-access-mapping-registration.module.ts","../../../../libs/platform/admin/components/iframe-security/iframe-security.constant.ts","../../../../libs/platform/admin/components/iframe-security/iframe-security.service.ts","../../../../libs/platform/admin/components/iframe-security/iframe-security.component.ts","../../../../libs/platform/admin/components/iframe-security/iframe-security.component.html","../../../../libs/platform/admin/components/iframe-security/iframe-security-registration.module.ts","../../../../libs/platform/admin/components/ipaas/ipaas-base-apis/ipaas-base-apis.types.ts","../../../../libs/platform/admin/components/ipaas/ipaas-base-apis/ipaas-base-apis.constant.ts","../../../../libs/platform/admin/components/ipaas/ipaas-base-apis/api-editor/api-editor-base.class.ts","../../../../libs/platform/admin/components/ipaas/jitterbit-apis/jitterbit-apis.service.ts","../../../../libs/platform/admin/components/ipaas/jitterbit-apis/jitterbit-api-editor.component.ts","../../../../libs/platform/admin/components/ipaas/ipaas-base-apis/api-editor/api-editor.component.html","../../../../libs/platform/admin/components/ipaas/ipaas-base-apis/ipaas-base-apis.service.ts","../../../../libs/platform/admin/components/ipaas/ipaas-base-apis/group-editor/group-editor.component.ts","../../../../libs/platform/admin/components/ipaas/ipaas-base-apis/group-editor/group-editor.component.html","../../../../libs/platform/admin/components/ipaas/ipaas-base-apis/ipaas-base-apis.component.ts","../../../../libs/platform/admin/components/ipaas/ipaas-base-apis/ipaas-base-apis.component.html","../../../../libs/platform/admin/components/ipaas/jitterbit-apis/jitterbit-apis.component.ts","../../../../libs/platform/admin/components/ipaas/jitterbit-apis/jitterbit-apis.component.html","../../../../libs/platform/admin/components/ipaas/ipaas-base-apis/ipaas-base-apis.module.ts","../../../../libs/platform/admin/components/ipaas/jitterbit-apis/jitterbit-apis-registration.module.ts","../../../../libs/platform/admin/components/ipaas/ipaas-base-configuration/ipaas-base-configuration.component.ts","../../../../libs/platform/admin/components/ipaas/ipaas-base-configuration/ipaas-base-configuration.component.html","../../../../libs/platform/admin/components/ipaas/ipaas-base-configuration/ipaas-base-configuration.module.ts","../../../../libs/platform/admin/components/ipaas/jitterbit-configuration/jitterbit-configuration.component.ts","../../../../libs/platform/admin/components/ipaas/jitterbit-configuration/jitterbit-configuration.component.html","../../../../libs/platform/admin/components/ipaas/jitterbit-configuration/jitterbit-configuration-registration.module.ts","../../../../libs/platform/admin/components/ipaas/mulesoft-apis/mulesoft-apis.service.ts","../../../../libs/platform/admin/components/ipaas/mulesoft-apis/mulesoft-api-editor.component.ts","../../../../libs/platform/admin/components/ipaas/mulesoft-apis/mulesoft-apis.component.ts","../../../../libs/platform/admin/components/ipaas/mulesoft-apis/mulesoft-apis.component.html","../../../../libs/platform/admin/components/ipaas/mulesoft-apis/mulesoft-apis-registration.module.ts","../../../../libs/platform/admin/components/ipaas/mulesoft-configuration/mulesoft-configuration.types.ts","../../../../libs/platform/admin/components/ipaas/mulesoft-configuration/mulesoft-configuration.component.ts","../../../../libs/platform/admin/components/ipaas/mulesoft-configuration/mulesoft-configuration.component.html","../../../../libs/platform/admin/components/ipaas/mulesoft-configuration/mulesoft-configuration-registration.module.ts","../../../../libs/platform/admin/components/issue-reporting-configuration/issue-reporting-configuration.constant.ts","../../../../libs/platform/admin/components/issue-reporting-configuration/issue-reporting-configuration.service.ts","../../../../libs/platform/admin/components/issue-reporting-configuration/issue-reporting-configuration.component.ts","../../../../libs/platform/admin/components/issue-reporting-configuration/issue-reporting-configuration.component.html","../../../../libs/platform/admin/components/issue-reporting-configuration/issue-reporting-configuration-registration.module.ts","../../../../libs/platform/admin/components/manage-tenant/manage-tenant.service.ts","../../../../libs/platform/admin/components/manage-tenant/manage-tenant.types.ts","../../../../libs/platform/admin/components/manage-tenant/tenant-editor/tenant-editor.component.ts","../../../../libs/platform/admin/components/manage-tenant/tenant-editor/tenant-editor.component.html","../../../../libs/platform/admin/components/manage-tenant/manage-tenant.component.ts","../../../../libs/platform/admin/components/manage-tenant/manage-tenant.component.html","../../../../libs/platform/admin/components/manage-tenant/manage-tenant-registration.module.ts","../../../../libs/platform/admin/components/outgoing-mailbox-status/outgoing-mailbox-status-data-page.service.ts","../../../../libs/platform/admin/components/outgoing-mailbox-status/outgoing-mailbox-status.constant.ts","../../../../libs/platform/admin/components/outgoing-mailbox-status/outgoing-mailbox-status.component.ts","../../../../libs/platform/admin/components/outgoing-mailbox-status/outgoing-mailbox-status.component.html","../../../../libs/platform/admin/components/outgoing-mailbox-status/outgoing-mailbox-status-registration.module.ts","../../../../libs/platform/admin/components/permissions-policy-header/permissions-policy-header.component.ts","../../../../libs/platform/admin/components/permissions-policy-header/permissions-policy-header.component.html","../../../../libs/platform/admin/components/permissions-policy-header/permissions-policy-header-registration.module.ts","../../../../libs/platform/admin/components/real-time-translation/real-time-translation.constant.ts","../../../../libs/platform/admin/components/real-time-translation/real-time-translation.component.ts","../../../../libs/platform/admin/components/real-time-translation/real-time-translation.component.html","../../../../libs/platform/admin/components/real-time-translation/real-time-translation-registration.module.ts","../../../../libs/platform/admin/components/role-permissions/role-permissions.constant.ts","../../../../libs/platform/admin/components/role-permissions/role-permissions.service.ts","../../../../libs/platform/admin/components/role-permissions/role-editor/role-editor.component.ts","../../../../libs/platform/admin/components/role-permissions/role-editor/role-editor.component.html","../../../../libs/platform/admin/components/role-permissions/role-permission.types.ts","../../../../libs/platform/admin/components/role-permissions/role-permissions.component.ts","../../../../libs/platform/admin/components/role-permissions/role-permissions.component.html","../../../../libs/platform/admin/components/role-permissions/role-permissions-registration.module.ts","../../../../libs/platform/admin/components/rsso-oauth/rsso-oauth.constant.ts","../../../../libs/platform/admin/components/rsso-oauth/rsso-oauth-configuration.service.ts","../../../../libs/platform/admin/components/rsso-oauth/rsso-oauth.component.ts","../../../../libs/platform/admin/components/rsso-oauth/rsso-oauth.component.html","../../../../libs/platform/admin/components/rsso-oauth/rsso-oauth-registration.module.ts","../../../../libs/platform/admin/components/rule-pool-management/rule-pool-management.constant.ts","../../../../libs/platform/admin/components/rule-pool-management/rule-pool-data.service.ts","../../../../libs/platform/admin/components/rule-pool-management/rule-pool-management.service.ts","../../../../libs/platform/admin/components/rule-pool-management/rule-reassignment/rule-reassignment.component.ts","../../../../libs/platform/admin/components/rule-pool-management/rule-reassignment/rule-reassignment.component.html","../../../../libs/platform/admin/components/rule-pool-management/rule-pool-management.component.ts","../../../../libs/platform/admin/components/rule-pool-management/rule-pool-management.component.html","../../../../libs/platform/admin/components/rule-pool-management/rule-pool-management-registration.module.ts","../../../../libs/platform/admin/components/server-information/server-information.service.ts","../../../../libs/platform/admin/components/server-information/server-information.component.ts","../../../../libs/platform/admin/components/server-information/server-information.component.html","../../../../libs/platform/admin/components/server-information/server-information-registration.module.ts","../../../../libs/platform/admin/components/server-logs/server-logs.constant.ts","../../../../libs/platform/admin/components/server-logs/server-logs.service.ts","../../../../libs/platform/admin/components/server-logs/server-logs.component.ts","../../../../libs/platform/admin/components/server-logs/server-logs.component.html","../../../../libs/platform/admin/components/server-logs/server-logs-registration.module.ts","../../../../libs/platform/admin/components/services-provider-region/services-provider-region.constant.ts","../../../../libs/platform/admin/components/services-provider-region/services-provider-region.component.ts","../../../../libs/platform/admin/components/services-provider-region/services-provider-region.component.html","../../../../libs/platform/admin/components/services-provider-region/services-provider-region-registration.module.ts","../../../../libs/platform/admin/components/summarization-service/summarization-service.constant.ts","../../../../libs/platform/admin/components/summarization-service/summarization-service.component.ts","../../../../libs/platform/admin/components/summarization-service/summarization-service.component.html","../../../../libs/platform/admin/components/summarization-service/summarization-service-registration.module.ts","../../../../libs/platform/admin/components/summarization-testing/summarization-testing.service.ts","../../../../libs/platform/admin/components/summarization-testing/summarization-testing.component.ts","../../../../libs/platform/admin/components/summarization-testing/summarization-testing.component.html","../../../../libs/platform/admin/components/summarization-testing/summarization-testing-registration.module.ts","../../../../libs/platform/admin/components/tone-analysis-testing/tone-analysis-testing.constant.ts","../../../../libs/platform/admin/components/tone-analysis-testing/document-tone-analysis/document-tone-analysis.component.ts","../../../../libs/platform/admin/components/tone-analysis-testing/document-tone-analysis/document-tone-analysis.component.html","../../../../libs/platform/admin/components/tone-analysis-testing/user-engagement-tone-analysis/user-engagement-tone-analysis.component.ts","../../../../libs/platform/admin/components/tone-analysis-testing/user-engagement-tone-analysis/user-engagement-tone-analysis.component.html","../../../../libs/platform/admin/components/tone-analysis-testing/tone-analysis-testing.component.ts","../../../../libs/platform/admin/components/tone-analysis-testing/tone-analysis-testing.component.html","../../../../libs/platform/admin/components/tone-analysis-testing/tone-analysis-testing-registration.module.ts","../../../../libs/platform/admin/components/virtual-chat-configuration/virtual-chat-configuration.constant.ts","../../../../libs/platform/admin/components/virtual-chat-configuration/virtual-chat-configuration.component.ts","../../../../libs/platform/admin/components/virtual-chat-configuration/virtual-chat-configuration.component.html","../../../../libs/platform/admin/components/virtual-chat-configuration/virtual-chat-configuration-registration.module.ts","../../../../libs/platform/admin/components/web-api-connections/web-api-connections.constant.ts","../../../../libs/platform/admin/components/web-api-connections/web-api-connection-wizard-step-fields/web-api-connection-wizard-step-fields.component.ts","../../../../libs/platform/admin/components/web-api-connections/web-api-connection-wizard-step-fields/web-api-connection-wizard-step-fields.component.html","../../../../libs/platform/admin/components/web-api-connections/authentication-wizard-step/authentication-wizard-step.component.ts","../../../../libs/platform/admin/components/web-api-connections/authentication-wizard-step/authentication-wizard-step.component.html","../../../../libs/platform/admin/components/web-api-connections/general-wizard-step/general-wizard-step.component.ts","../../../../libs/platform/admin/components/web-api-connections/general-wizard-step/general-wizard-step.component.html","../../../../libs/platform/admin/components/web-api-connections/web-api-connections.service.ts","../../../../libs/platform/admin/components/web-api-connections/web-api-connections.component.ts","../../../../libs/platform/admin/components/web-api-connections/web-api-connections.component.html","../../../../libs/platform/admin/components/web-api-connections/web-api-connections-registration.module.ts","../../../../libs/platform/admin/components/webhook-callback-configuration/webhook-callback-configuration.constant.ts","../../../../libs/platform/admin/components/webhook-callback-configuration/webhook-callback-configuration.service.ts","../../../../libs/platform/admin/components/webhook-callback-configuration/webhook-callback-configuration-editor/webhook-callback-configuration-editor.component.ts","../../../../libs/platform/admin/components/webhook-callback-configuration/webhook-callback-configuration-editor/webhook-callback-configuration-editor.component.html","../../../../libs/platform/admin/components/webhook-callback-configuration/webhook-callback-configuration.component.ts","../../../../libs/platform/admin/components/webhook-callback-configuration/webhook-callback-configuration.component.html","../../../../libs/platform/admin/components/webhook-callback-configuration/webhook-callback-configuration-registration.module.ts","../../../../libs/platform/admin/components/search-filters/search-filters.service.ts","../../../../libs/platform/admin/components/search-filters/search-filters-editor/search-filters-editor.component.ts","../../../../libs/platform/admin/components/search-filters/search-filters-editor/search-filters-editor.component.html","../../../../libs/platform/admin/components/search-filters/search-filters.component.ts","../../../../libs/platform/admin/components/search-filters/search-filters.component.html","../../../../libs/platform/admin/components/search-filters/search-filters-registration.module.ts","../../../../libs/platform/admin/components/admin-components.module.ts","../../../../libs/platform/admin/components/helix-platform-admin-components.ts"],"sourcesContent":["import { RX_RECORD_DEFINITION } from '@helix/platform/record/api';\n\nexport const RX_ADMIN = {\n  defaultImages: {\n    'rx-theme-favicon-logo': {\n      name: 'favicon.ico',\n      type: 'image/x-icon'\n    },\n    'rx-theme-large-logo-light': {\n      name: 'company.svg',\n      type: 'image/svg+xml'\n    },\n    'rx-theme-large-logo-dark': {\n      name: 'company-dark.svg',\n      type: 'image/svg+xml'\n    },\n    'rx-theme-small-logo-light': {\n      name: 'company.svg',\n      type: 'image/svg+xml'\n    },\n    'rx-theme-small-logo-dark': {\n      name: 'company-dark.svg',\n      type: 'image/svg+xml'\n    }\n  },\n\n  settingResourceTypes: {\n    character: RX_RECORD_DEFINITION.resourceTypes.character,\n    selection: RX_RECORD_DEFINITION.resourceTypes.selection,\n    integer: RX_RECORD_DEFINITION.resourceTypes.integer,\n    decimal: RX_RECORD_DEFINITION.resourceTypes.decimal,\n    boolean: RX_RECORD_DEFINITION.resourceTypes.boolean,\n    dateOnly: RX_RECORD_DEFINITION.resourceTypes.dateOnly,\n    color: 'com.bmc.arsys.rx.admin-settings.ColorChooserFieldDefinition',\n    attachment: 'com.bmc.arsys.rx.admin-settings.AttachmentFieldDefinition',\n    secure: 'com.bmc.arsys.rx.admin-settings.SecureDataFieldDefinition'\n  }\n};\n","import { Injectable } from '@angular/core';\nimport { Validators } from '@angular/forms';\nimport { IFieldDefinition, IFieldDefinitionsById, ISelectionFieldDefinition } from '@helix/platform/record/api';\nimport {\n  IAdminComponentControl,\n  IPlainObject,\n  RxAdminSettingsService,\n  RxNotificationService\n} from '@helix/platform/shared/api';\nimport {\n  AttachmentFormControlComponent,\n  BooleanFormControlComponent,\n  ColorPickerFormControlComponent,\n  CounterFormControlComponent,\n  DateFormControlComponent,\n  SelectFormControlComponent,\n  TextFormControlComponent\n} from '@helix/platform/shared/components';\nimport { RX_MODAL, RxModalService } from '@helix/platform/ui-kit';\nimport { RxNumberUtilsService } from '@helix/platform/utils';\nimport { IRecordGridConfig, RecordGridColumnAlignment, RowSelectionMode } from '@helix/platform/view/components';\nimport { TranslateService } from '@ngx-translate/core';\nimport { cloneDeep, noop, map as _map } from 'lodash';\nimport { Observable, of } from 'rxjs';\nimport { map, switchMap } from 'rxjs/operators';\nimport { AdminCommonSettingsBladeComponent } from '../admin-common-settings-blade/admin-common-settings-blade.component';\nimport { RX_ADMIN } from '../admin.constant';\nimport { IGetRecordGridConfigParams, IOpenSettingsDetailsParams } from './admin-common-settings.types';\n\n@Injectable()\nexport class RxAdminCommonSettingsService {\n  constructor(\n    private rxAdminSettingsService: RxAdminSettingsService,\n    private translateService: TranslateService,\n    private rxNotificationService: RxNotificationService,\n    private rxModalService: RxModalService,\n    private rxNumberUtilsService: RxNumberUtilsService\n  ) {}\n\n  openSettingsDetails({\n    title,\n    componentName,\n    groups,\n    ownerKeyValue,\n    isChildSetting,\n    childOwnerKeyValue,\n    onDialogApiReady\n  }: IOpenSettingsDetailsParams): Promise<any> {\n    const isNew = isChildSetting ? !(ownerKeyValue && childOwnerKeyValue) : !ownerKeyValue;\n\n    return this.rxModalService.openDockedPanel({\n      content: AdminCommonSettingsBladeComponent,\n      size: 'lg',\n      title,\n      data: {\n        config: {\n          componentName,\n          groups,\n          ownerKeyValue,\n          isNew,\n          isChildSetting,\n          childOwnerKeyValue\n        },\n        onApiReady: (dialogApi) => {\n          onDialogApiReady?.(dialogApi);\n        }\n      }\n    });\n  }\n\n  createPropertyConfig(adminComponentControl: IAdminComponentControl): IPlainObject {\n    const config: IPlainObject = {\n      name: adminComponentControl.id,\n      isDisabled: !adminComponentControl.changePermission,\n      dataType: adminComponentControl.dataType,\n      options: {\n        label: adminComponentControl.label,\n        required: adminComponentControl.required\n      },\n      validators: []\n    };\n\n    if (adminComponentControl.required) {\n      config.validators.push(Validators.required);\n    }\n\n    if (adminComponentControl.defaultValue) {\n      config.defaultValue = adminComponentControl.defaultValue;\n    } else {\n      config.defaultValue = null;\n    }\n\n    switch (adminComponentControl.dataType) {\n      case RX_ADMIN.settingResourceTypes.selection: {\n        config.component = SelectFormControlComponent;\n\n        config.options = {\n          ...config.options,\n          options: _map(adminComponentControl.optionNamesById, (value, key) => ({\n            id: key,\n            name: value\n          })),\n          emptyOption: !adminComponentControl.required\n        };\n\n        break;\n      }\n\n      case RX_ADMIN.settingResourceTypes.secure:\n      case RX_ADMIN.settingResourceTypes.character: {\n        config.component = TextFormControlComponent;\n        config.options.isPassword = adminComponentControl.dataType === RX_ADMIN.settingResourceTypes.secure;\n\n        if (adminComponentControl.maxValue) {\n          config.options.maxLength = Number(adminComponentControl.maxValue);\n          config.validators.push(Validators.maxLength(config.options.maxLength));\n        }\n\n        if (adminComponentControl.minValue) {\n          config.options.minLength = Number(adminComponentControl.minValue);\n          config.validators.push(Validators.minLength(config.options.minLength));\n        }\n\n        break;\n      }\n\n      case RX_ADMIN.settingResourceTypes.boolean: {\n        config.component = BooleanFormControlComponent;\n        config.options.label = '';\n        config.options.description = adminComponentControl.label;\n        config.options.shouldDisplayAsCheckbox = config.options.required;\n\n        if (config.defaultValue) {\n          config.defaultValue = config.defaultValue === 'true';\n        } else if (config.options.required) {\n          config.defaultValue = false;\n        }\n\n        break;\n      }\n\n      case RX_ADMIN.settingResourceTypes.color: {\n        config.component = ColorPickerFormControlComponent;\n        config.defaultValue = config.defaultValue || null;\n\n        break;\n      }\n\n      case RX_ADMIN.settingResourceTypes.decimal:\n      case RX_ADMIN.settingResourceTypes.integer: {\n        config.component = CounterFormControlComponent;\n        config.options.allowIntegerOnly = adminComponentControl.dataType === RX_ADMIN.settingResourceTypes.integer;\n\n        if (adminComponentControl.maxValue) {\n          config.options.maxValue = Number(adminComponentControl.maxValue);\n          config.validators.push(Validators.max(Number(adminComponentControl.maxValue)));\n        }\n\n        if (adminComponentControl.minValue) {\n          config.options.minValue = Number(adminComponentControl.minValue);\n          config.validators.push(Validators.min(Number(adminComponentControl.minValue)));\n        }\n\n        if (this.rxNumberUtilsService.isFiniteNumberString(adminComponentControl.defaultValue)) {\n          config.defaultValue = Number(adminComponentControl.defaultValue);\n        }\n\n        break;\n      }\n\n      case RX_ADMIN.settingResourceTypes.dateOnly: {\n        config.component = DateFormControlComponent;\n\n        break;\n      }\n\n      case RX_ADMIN.settingResourceTypes.attachment: {\n        config.component = AttachmentFormControlComponent;\n        config.options.maxFileSize = adminComponentControl.maxValue;\n\n        break;\n      }\n\n      default: {\n        config.component = TextFormControlComponent;\n\n        break;\n      }\n    }\n\n    return config;\n  }\n\n  getRecordGridConfig({\n    componentName,\n    controls,\n    getCurrentGridFn,\n    createPermission,\n    groups,\n    bladeTitle,\n    ownerKeyValue,\n    groupName,\n    onDialogApiReady\n  }: IGetRecordGridConfigParams): Observable<IRecordGridConfig> {\n    const subUrl = ownerKeyValue ? `${groupName}/${ownerKeyValue}` : componentName;\n\n    const fieldDefinitions: (IFieldDefinition | ISelectionFieldDefinition)[] = controls.map((control) => {\n      const fieldDefinition = {\n        id: control.id,\n        resourceType: control.dataType\n      };\n\n      if (\n        control.dataType === RX_ADMIN.settingResourceTypes.selection &&\n        control.optionNamesById &&\n        control.optionLabelsById\n      ) {\n        (fieldDefinition as ISelectionFieldDefinition).optionNamesById = control.optionNamesById;\n        (fieldDefinition as ISelectionFieldDefinition).optionLabelsById = control.optionLabelsById;\n      }\n\n      return fieldDefinition;\n    });\n\n    const fieldDefinitionsById: IFieldDefinitionsById = fieldDefinitions.reduce((result, fieldDefinition) => {\n      result[fieldDefinition.id] = cloneDeep(fieldDefinition);\n\n      return result;\n    }, {});\n\n    const recordDefinition = {\n      fieldDefinitions,\n      fieldDefinitionsById\n    };\n\n    const columns = controls.map((control, index) => ({\n      index,\n      title: control.label,\n      fieldId: control.id,\n      visible: control.keySetting,\n      sortable: true,\n      filterable: false,\n      alignment: RecordGridColumnAlignment.Left\n    }));\n\n    const actionButtons = [\n      {\n        label: this.translateService.instant('com.bmc.arsys.rx.client.common.edit.label'),\n        style: 'tertiary',\n        iconCls: 'pencil',\n        actions: [\n          {\n            name: () => {\n              const currentGrid = getCurrentGridFn(groupName);\n              const selectedRow = currentGrid.api.getFirstSelectedRow();\n\n              if (createPermission) {\n                const componentOwnerKeyValue = ownerKeyValue || selectedRow.ownerKeyValue1;\n                const childOwnerKeyValue = ownerKeyValue ? selectedRow.ownerKeyValue1 : null;\n\n                this.openSettingsDetails({\n                  title: bladeTitle || groupName,\n                  componentName,\n                  groups,\n                  ownerKeyValue: componentOwnerKeyValue,\n                  isChildSetting: Boolean(groupName),\n                  childOwnerKeyValue,\n                  onDialogApiReady\n                })\n                  .then(() => {\n                    currentGrid.api.refresh().subscribe();\n                  })\n                  .catch(noop);\n              }\n            }\n          }\n        ]\n      },\n      {\n        label: this.translateService.instant('com.bmc.arsys.rx.client.common.delete.label'),\n        style: 'tertiary',\n        icon: 'trash',\n        actions: [\n          {\n            name: () => {\n              const currentGrid = getCurrentGridFn(groupName);\n              const selectedRow = currentGrid.api.getFirstSelectedRow();\n\n              if (createPermission) {\n                this.rxModalService\n                  .confirm({\n                    title: this.translateService.instant('com.bmc.arsys.rx.client.common.warning.label'),\n                    modalStyle: RX_MODAL.modalStyles.warning,\n                    message: this.translateService.instant(\n                      'com.bmc.arsys.rx.client.admin.admin-settings.delete-confirmation.message'\n                    )\n                  })\n                  .then((response) => {\n                    if (response) {\n                      this.rxAdminSettingsService\n                        .deleteComponentSettings(`${groupName || componentName}/${selectedRow.ownerKeyValue1}`)\n                        .pipe(switchMap(() => currentGrid.api.refresh()))\n                        .subscribe();\n                    }\n                  });\n              }\n            }\n          }\n        ]\n      }\n    ];\n\n    return of({\n      actionButtons: createPermission ? actionButtons : [],\n      enableRowSelection: RowSelectionMode.Single,\n      getRecordDefinition: () => of(recordDefinition),\n      getData: () =>\n        this.rxAdminSettingsService.getComponentGridData(subUrl).pipe(\n          map((data) => ({\n            data: data.rows,\n            totalSize: data.rows.length\n          }))\n        ),\n      columns,\n      enableFiltering: false,\n      useExternalFiltering: false,\n      recordIdField: 'ownerKeyValue1'\n    });\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { Observable } from 'rxjs';\nimport { last, map } from 'lodash';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class RxAdminFileUtilityService {\n  convertBase64ToFile(decodedString: string, fileName: string, fileType: string): File {\n    if (decodedString) {\n      const buffer = map(atob(decodedString), (symbol) => symbol.charCodeAt(0));\n      const uint8Array = new Uint8Array(buffer);\n\n      return new File([uint8Array], fileName, { type: fileType });\n    } else {\n      return null;\n    }\n  }\n\n  convertFileToBase64(file: File): Observable<string> {\n    return new Observable<string>((observer) => {\n      const fileReader = new FileReader();\n\n      fileReader.onloadend = () => {\n        const base64String = last((fileReader.result as string).split(','));\n\n        observer.next(base64String);\n        observer.complete();\n      };\n\n      fileReader.onerror = () => {\n        observer.next(null);\n      };\n\n      fileReader.readAsDataURL(file);\n    });\n  }\n}\n","import {\n  Component,\n  EventEmitter,\n  HostBinding,\n  Input,\n  OnInit,\n  Optional,\n  Output,\n  QueryList,\n  ViewChildren\n} from '@angular/core';\nimport {\n  IAdminComponentSetting,\n  IAdminComponentSettings,\n  IPlainObject,\n  RxAdminSettingsService,\n  RxNotificationService\n} from '@helix/platform/shared/api';\nimport { FormBuilderComponent } from '@helix/platform/shared/components';\nimport { IDialogApi, RX_MODAL, RxModalService } from '@helix/platform/ui-kit';\nimport { IRecordGridConfig, RecordGridComponent } from '@helix/platform/view/components';\nimport { TranslateService } from '@ngx-translate/core';\nimport {\n  chain,\n  cloneDeep,\n  every,\n  filter,\n  find,\n  findIndex,\n  forEach,\n  isEmpty,\n  isNull,\n  last,\n  map as _map,\n  some\n} from 'lodash';\nimport { forkJoin, Observable, of, throwError } from 'rxjs';\nimport { catchError, defaultIfEmpty, map, switchMap, tap } from 'rxjs/operators';\nimport { ICommonSettingsGroup } from '../admin-common-settings/admin-common-settings.types';\nimport { RX_ADMIN } from '../admin.constant';\nimport { RxAdminFileUtilityService } from '../services/admin-file-utility.service';\nimport { IGetRecordGridConfigParams, IOpenSettingsDetailsParams } from '../services/admin-common-settings.types';\nimport { AdaptDockedPanelComponent } from '@bmc-ux/adapt-angular';\n\n@Component({\n  selector: 'rx-admin-common-settings-editor',\n  templateUrl: './admin-common-settings-editor.component.html',\n  styleUrls: ['./admin-common-settings-editor.component.scss']\n})\nexport class AdminCommonSettingsEditorComponent implements OnInit {\n  @Input()\n  componentName: string;\n\n  @Input()\n  ownerKeyValue = '';\n\n  @Input()\n  groups: ICommonSettingsGroup[];\n\n  @Input()\n  createPermission: boolean;\n\n  @Input()\n  isNew: boolean;\n\n  @Input()\n  isChildSetting: boolean;\n\n  @Input()\n  childOwnerKeyValue: string;\n\n  @Input()\n  getRecordGridConfig: (options: IGetRecordGridConfigParams) => Observable<IRecordGridConfig>;\n\n  @Input()\n  openSettingsDetails: (options: IOpenSettingsDetailsParams) => Promise<any>;\n\n  @Output()\n  closeEditor = new EventEmitter<void>();\n\n  @Output()\n  busy = new EventEmitter<boolean>();\n\n  @Output()\n  save = new EventEmitter<void>();\n\n  @ViewChildren(RecordGridComponent)\n  recordGridInstances: QueryList<RecordGridComponent>;\n\n  @ViewChildren(FormBuilderComponent)\n  forms: QueryList<FormBuilderComponent>;\n\n  @HostBinding('class')\n  class: string;\n\n  private generalSettings: IAdminComponentSetting[];\n  private assigneeGroup: string;\n  isSettingsActionsAvailable: boolean;\n  isInDockedPanel = false;\n  private dialogApi: any;\n\n  constructor(\n    private rxAdminSettingsService: RxAdminSettingsService,\n    private rxAdminFileUtilityService: RxAdminFileUtilityService,\n    private rxNotificationService: RxNotificationService,\n    private rxModalService: RxModalService,\n    private translateService: TranslateService,\n    @Optional() adaptDockedPanelComponent: AdaptDockedPanelComponent\n  ) {\n    this.isInDockedPanel = !!adaptDockedPanelComponent;\n    this.class = this.isInDockedPanel ? 'dp-content' : '';\n  }\n\n  ngOnInit(): void {\n    let componentSettingRequest;\n\n    this.isSettingsActionsAvailable = this.isChildSetting || some(this.groups, (group) => !group.supportsMultiple);\n\n    if (!this.isChildSetting) {\n      if (!this.isNew) {\n        const componentName = this.ownerKeyValue ? `${this.componentName}/${this.ownerKeyValue}` : this.componentName;\n\n        this.busy.emit(true);\n\n        componentSettingRequest = this.rxAdminSettingsService.getComponentSettings(componentName).pipe(\n          tap((componentSettings) => {\n            this.ownerKeyValue = componentSettings.values.length ? last(componentSettings.values).ownerKeyValue1 : '';\n\n            this.generalSettings = componentSettings.values;\n            this.isNew = !Boolean(componentSettings.values.length);\n\n            if (!this.assigneeGroup && componentSettings.values.length) {\n              this.assigneeGroup = last(componentSettings.values).assigneeGroupPermission;\n            }\n\n            forEach(this.groups, (group) => {\n              if (!group.supportsMultiple && !group.isComponent) {\n                this.setGroupSettingValues(group, this.generalSettings);\n              }\n            });\n          }),\n          switchMap(() => {\n            const childSettings$ = [];\n\n            if (!this.isNew && this.ownerKeyValue) {\n              forEach(this.groups, (group) => {\n                childSettings$.push(this.setChildSettings(group));\n              });\n            }\n\n            return forkJoin(childSettings$);\n          })\n        );\n      } else {\n        forEach(this.groups, (group) => {\n          if (!group.supportsMultiple && !group.isComponent) {\n            this.setGroupSettingValues(group, []);\n          }\n        });\n      }\n    } else {\n      this.groups = cloneDeep(this.groups);\n\n      if (!this.isNew) {\n        this.busy.emit(true);\n\n        componentSettingRequest = this.rxAdminSettingsService\n          .getComponentSettings(`${this.groups[0].name}/${this.childOwnerKeyValue}`)\n          .pipe(\n            tap((childCommonSettings) => {\n              this.groups[0].settings = childCommonSettings.values;\n\n              this.setGroupSettingValues(this.groups[0], this.groups[0].settings);\n            })\n          );\n      } else {\n        this.setGroupSettingValues(this.groups[0], []);\n      }\n    }\n\n    componentSettingRequest\n      ?.pipe(\n        defaultIfEmpty(null),\n        tap(() => this.busy.emit(false)),\n        catchError((err) => {\n          this.busy.emit(false);\n\n          return throwError(err);\n        })\n      )\n      .subscribe();\n  }\n\n  addNewSetting(group: ICommonSettingsGroup): Promise<any> {\n    const currentGrid = this.getCurrentGrid(group.name);\n\n    return this.openSettingsDetails({\n      title: group.name,\n      componentName: this.componentName,\n      groups: [group],\n      ownerKeyValue: this.ownerKeyValue,\n      isChildSetting: true,\n      onDialogApiReady: (dialogApi: IDialogApi) => (this.dialogApi = dialogApi)\n    })\n      .then(() => {\n        this.dialogApi = null;\n        currentGrid.api.refresh().subscribe();\n      })\n      .catch(() => {\n        this.dialogApi = null;\n        currentGrid.api.refresh().subscribe();\n      });\n  }\n\n  private getCurrentGrid(groupName: string): RecordGridComponent {\n    const groupsWithGrid = filter(this.groups, 'supportsMultiple');\n\n    const gridIndex = findIndex(groupsWithGrid, { name: groupName });\n\n    return this.recordGridInstances.toArray()[gridIndex];\n  }\n\n  private setChildSettings(group: ICommonSettingsGroup): Observable<any> {\n    if (group.isComponent) {\n      if (group.supportsMultiple) {\n        group.recordGridConfig = this.getRecordGridConfig({\n          componentName: this.componentName,\n          controls: group.controls,\n          getCurrentGridFn: this.getCurrentGrid.bind(this),\n          createPermission: this.createPermission,\n          groups: [group],\n          bladeTitle: group.name,\n          ownerKeyValue: this.ownerKeyValue,\n          groupName: group.name,\n          onDialogApiReady: (dialogApi: IDialogApi) => (this.dialogApi = dialogApi)\n        });\n      } else {\n        return this.rxAdminSettingsService\n          .getComponentSettings(`${this.componentName}/${group.name}/${this.ownerKeyValue}`)\n          .pipe(\n            tap((childComponentSettings: IAdminComponentSettings) => {\n              group.settings = childComponentSettings.values;\n\n              this.setGroupSettingValues(group, group.settings);\n            })\n          );\n      }\n    }\n\n    return of(true);\n  }\n\n  onModelChange(model: IPlainObject, group: ICommonSettingsGroup): void {\n    group.settingValues = {\n      ...group.settingValues,\n      ...model\n    };\n  }\n\n  private setGroupSettingValues(group: ICommonSettingsGroup, componentSettings: IAdminComponentSetting[]): void {\n    const settingValues: IPlainObject = {};\n\n    forEach(group.propertyConfigs, (propertyConfig) => {\n      const componentSetting = find(componentSettings, { settingName: propertyConfig.name });\n\n      if (componentSetting) {\n        if (componentSetting.settingValue) {\n          switch (propertyConfig.dataType) {\n            case RX_ADMIN.settingResourceTypes.attachment: {\n              settingValues[componentSetting.settingName] = [\n                this.rxAdminFileUtilityService.convertBase64ToFile(\n                  componentSetting.settingValue as string,\n                  componentSetting.fileName,\n                  componentSetting.fileType\n                )\n              ];\n\n              break;\n            }\n\n            case RX_ADMIN.settingResourceTypes.boolean: {\n              settingValues[componentSetting.settingName] = componentSetting.settingValue === 'true';\n\n              break;\n            }\n\n            case RX_ADMIN.settingResourceTypes.decimal:\n            case RX_ADMIN.settingResourceTypes.integer: {\n              settingValues[componentSetting.settingName] = Number(componentSetting.settingValue);\n\n              break;\n            }\n\n            default: {\n              settingValues[componentSetting.settingName] = componentSetting.settingValue;\n\n              break;\n            }\n          }\n        } else {\n          settingValues[componentSetting.settingName] = null;\n        }\n      } else {\n        settingValues[propertyConfig.name] = propertyConfig.defaultValue;\n      }\n    });\n\n    group.settingValues = {\n      ...settingValues\n    };\n  }\n\n  private getSettingWithValue(\n    setting: IAdminComponentSetting,\n    value: string | number | File[]\n  ): Observable<IAdminComponentSetting> {\n    if (Array.isArray(value)) {\n      const file = value[0];\n\n      return this.rxAdminFileUtilityService.convertFileToBase64(file).pipe(\n        map((base64String) => {\n          setting.fileName = file.name;\n          setting.fileType = file.type;\n          setting.settingValue = base64String;\n\n          return setting;\n        })\n      );\n    } else {\n      setting.settingValue = value;\n\n      return of(setting);\n    }\n  }\n\n  saveSettings(): void {\n    const saveRequests$ = [];\n\n    if (!this.isChildSetting) {\n      if (this.isNew && this.createPermission) {\n        const generalGroups = this.groups.filter((group) => !group.isComponent);\n        let settings$ = [];\n\n        forEach(generalGroups, (group) => {\n          settings$ = settings$.concat(\n            _map(group.settingValues, (settingValue, settingName) => {\n              const propertyConfig = find(group.propertyConfigs, { name: settingName });\n\n              if (!isNull(settingValue) && propertyConfig && !propertyConfig.isDisabled) {\n                const setting: IAdminComponentSetting = {\n                  componentName: this.componentName,\n                  settingName,\n                  assigneeGroupPermission: this.assigneeGroup\n                } as IAdminComponentSetting;\n\n                return this.getSettingWithValue(setting, settingValue);\n              } else {\n                return null;\n              }\n            }).filter(Boolean)\n          );\n        });\n\n        if (settings$.length) {\n          saveRequests$.push(\n            forkJoin(settings$).pipe(\n              switchMap((settings: IAdminComponentSetting[]) =>\n                this.rxAdminSettingsService.createComponentSettings(this.componentName, settings)\n              ),\n              switchMap((ownerKeyValue: string) => {\n                const requests$: Observable<any>[] = [];\n\n                this.ownerKeyValue = ownerKeyValue;\n\n                forEach(this.groups, (group) => {\n                  requests$.push(this.setChildSettings(group));\n                });\n\n                requests$.push(\n                  this.rxAdminSettingsService.getComponentSettings(`${this.componentName}/${ownerKeyValue}`).pipe(\n                    tap((adminComponentSettings) => {\n                      this.generalSettings = adminComponentSettings.values;\n                    })\n                  )\n                );\n\n                return forkJoin(requests$).pipe(\n                  tap(() => {\n                    this.isNew = false;\n                  })\n                );\n              })\n            )\n          );\n        }\n      } else {\n        const generalGroups = this.groups.filter((group) => !group.isComponent);\n        const childGroups = this.groups.filter((group) => group.isComponent);\n\n        let generalSettings$ = [];\n\n        forEach(generalGroups, (group) => {\n          generalSettings$ = generalSettings$.concat(\n            _map(group.settingValues, (settingValue, settingName) => {\n              const propertyConfig = find(group.propertyConfigs, { name: settingName });\n\n              if (propertyConfig && !propertyConfig.isDisabled) {\n                const setting = find(this.generalSettings, { settingName });\n\n                setting.assigneeGroupPermission = this.assigneeGroup;\n\n                return this.getSettingWithValue(setting, settingValue);\n              } else {\n                return null;\n              }\n            }).filter(Boolean)\n          );\n        });\n\n        if (generalSettings$.length) {\n          saveRequests$.push(\n            forkJoin(generalSettings$).pipe(\n              switchMap((generalSettings: IAdminComponentSetting[]) =>\n                this.rxAdminSettingsService.updateComponentSettings(\n                  `${this.componentName}/${this.ownerKeyValue}`,\n                  generalSettings\n                )\n              )\n            )\n          );\n        }\n\n        let childSettings$ = [];\n\n        forEach(childGroups, (group) => {\n          if (!group.supportsMultiple) {\n            if (group.settings && group.settings.length) {\n              childSettings$ = childSettings$.concat(\n                _map(group.settingValues, (settingValue, settingName) => {\n                  const propertyConfig = find(group.propertyConfigs, { name: settingName });\n\n                  if (propertyConfig && !propertyConfig.isDisabled) {\n                    const setting = find(group.settings, { settingName });\n\n                    setting.assigneeGroupPermission = this.assigneeGroup;\n\n                    return this.getSettingWithValue(setting, settingValue);\n                  } else {\n                    return null;\n                  }\n                }).filter(Boolean)\n              );\n\n              saveRequests$.push(\n                forkJoin(childSettings$).pipe(\n                  switchMap((childSettings: IAdminComponentSetting[]) =>\n                    this.rxAdminSettingsService.updateComponentSettings(\n                      `${group.name}/${last(group.settings).ownerKeyValue1}`,\n                      childSettings\n                    )\n                  )\n                )\n              );\n            } else {\n              childSettings$ = childSettings$.concat(\n                _map(group.settingValues, (settingValue, settingName) => {\n                  const propertyConfig = find(group.propertyConfigs, { name: settingName });\n\n                  if (!isNull(settingValue) && propertyConfig && !propertyConfig.isDisabled) {\n                    const childSetting: IAdminComponentSetting = {\n                      componentName: group.name,\n                      parentComponentName: this.componentName,\n                      settingName,\n                      ownerKeyValue2: this.ownerKeyValue,\n                      assigneeGroupPermission: this.assigneeGroup\n                    } as IAdminComponentSetting;\n\n                    return this.getSettingWithValue(childSetting, settingValue);\n                  } else {\n                    return null;\n                  }\n                }).filter(Boolean)\n              );\n\n              if (childSettings$.length) {\n                saveRequests$.push(\n                  forkJoin(childSettings$).pipe(\n                    switchMap((childSettings: IAdminComponentSetting[]) =>\n                      this.rxAdminSettingsService.createComponentSettings(\n                        `${group.name}/${this.ownerKeyValue}`,\n                        childSettings\n                      )\n                    ),\n                    switchMap(() => this.setChildSettings(group))\n                  )\n                );\n              }\n            }\n          }\n        });\n      }\n    } else {\n      const childGroup = this.groups[0];\n\n      let childSettings$ = [];\n\n      if (childGroup.settings && childGroup.settings.length) {\n        childSettings$ = childSettings$.concat(\n          _map(childGroup.settingValues, (settingValue, settingName) => {\n            const propertyConfig = find(childGroup.propertyConfigs, {\n              name: settingName\n            });\n\n            if (propertyConfig && !propertyConfig.isDisabled) {\n              const setting = find(childGroup.settings, { settingName });\n\n              setting.assigneeGroupPermission = this.assigneeGroup;\n\n              return this.getSettingWithValue(setting, settingValue);\n            } else {\n              return null;\n            }\n          })\n        );\n\n        if (childSettings$.length) {\n          saveRequests$.push(\n            forkJoin(childSettings$).pipe(\n              switchMap((childSettings: IAdminComponentSetting[]) =>\n                this.rxAdminSettingsService.updateComponentSettings(\n                  `${childGroup.name}/${this.childOwnerKeyValue}`,\n                  childSettings\n                )\n              )\n            )\n          );\n        }\n      } else {\n        childSettings$ = childSettings$.concat(\n          _map(childGroup.settingValues, (settingValue, settingName) => {\n            const propertyConfig = find(childGroup.propertyConfigs, { name: settingName });\n\n            if (!isNull(settingValue) && propertyConfig && !propertyConfig.isDisabled) {\n              const setting: IAdminComponentSetting = {\n                componentName: childGroup.name,\n                parentComponentName: this.componentName,\n                ownerKeyValue2: this.ownerKeyValue,\n                settingName,\n                assigneeGroupPermission: this.assigneeGroup\n              } as IAdminComponentSetting;\n\n              return this.getSettingWithValue(setting, settingValue);\n            } else {\n              return null;\n            }\n          }).filter(Boolean)\n        );\n\n        if (childSettings$.length) {\n          saveRequests$.push(\n            forkJoin(childSettings$).pipe(\n              switchMap((childSettings: IAdminComponentSetting[]) =>\n                this.rxAdminSettingsService.createComponentSettings(\n                  `${childGroup.name}/${this.ownerKeyValue}`,\n                  childSettings\n                )\n              )\n            )\n          );\n        }\n      }\n    }\n\n    if (saveRequests$.length) {\n      this.busy.emit(true);\n\n      forkJoin(saveRequests$)\n        .pipe(\n          catchError((err) => {\n            this.busy.emit(false);\n\n            return throwError(err);\n          })\n        )\n        .subscribe(() => {\n          this.rxNotificationService.addSuccessMessage('Settings saved successfully.');\n          this.forms.forEach((form) => form.formGroup.markAsPristine());\n\n          this.busy.emit(false);\n\n          this.save.emit();\n        });\n    }\n  }\n\n  isAbleToSave(): boolean {\n    return (\n      this.forms &&\n      every(this.forms.toArray(), (form) => form.formGroup.valid) &&\n      this.forms.some((form) => form.formGroup.dirty)\n    );\n  }\n\n  resetSettings(): void {\n    this.rxModalService\n      .confirm({\n        title: this.translateService.instant('com.bmc.arsys.rx.client.common.warning.label'),\n        modalStyle: RX_MODAL.modalStyles.warning,\n        message: this.translateService.instant('com.bmc.arsys.rx.client.admin.reset-confirmation.message')\n      })\n      .then((response) => {\n        if (response) {\n          chain(this.groups)\n            .reject((group) => isEmpty(group.settingValues))\n            .forEach((group) => {\n              const settingValues = cloneDeep(group.settingValues);\n\n              forEach(group.propertyConfigs, (propertyConfig) => {\n                if (propertyConfig.dataType === RX_ADMIN.settingResourceTypes.attachment) {\n                  settingValues[propertyConfig.name] = propertyConfig.defaultValue\n                    ? [\n                        this.rxAdminFileUtilityService.convertBase64ToFile(\n                          propertyConfig.defaultValue,\n                          RX_ADMIN.defaultImages[propertyConfig.name].name,\n                          RX_ADMIN.defaultImages[propertyConfig.name].type\n                        )\n                      ]\n                    : null;\n                } else {\n                  settingValues[propertyConfig.name] = propertyConfig.defaultValue;\n                }\n              });\n\n              group.settingValues = settingValues;\n            })\n            .value();\n\n          this.forms.forEach((form) => form.formGroup.markAsDirty());\n        }\n      });\n  }\n\n  onCancel(): void {\n    this.closeEditor.emit();\n  }\n\n  canClose(): boolean {\n    return !(this.dialogApi?.isDirty() || this.forms?.some((form) => form.formGroup.dirty));\n  }\n}\n","<adapt-accordion [multiselect]=\"true\" [class.dp-body]=\"isInDockedPanel\">\n  <adapt-accordion-tab\n    *ngFor=\"let commonSettingsGroup of groups; let $index = index\"\n    [isOpen]=\"$index === 0\"\n    [title]=\"commonSettingsGroup.name\"\n    [disabled]=\"isNew && commonSettingsGroup.isComponent && !isChildSetting\"\n  >\n    <div class=\"property-controls\" *ngIf=\"!commonSettingsGroup.supportsMultiple || isChildSetting\">\n      <rx-form-builder\n        [config]=\"[{ controls: commonSettingsGroup.propertyConfigs }]\"\n        (modelChange)=\"onModelChange($event, commonSettingsGroup)\"\n        [model]=\"commonSettingsGroup.settingValues\"\n        *ngIf=\"commonSettingsGroup.settingValues\"\n      ></rx-form-builder>\n    </div>\n\n    <div *ngIf=\"commonSettingsGroup.supportsMultiple && commonSettingsGroup.recordGridConfig && !isChildSetting\">\n      <button\n        *ngIf=\"createPermission\"\n        adapt-button\n        type=\"button\"\n        class=\"px-0\"\n        btn-type=\"tertiary\"\n        (click)=\"addNewSetting(commonSettingsGroup)\"\n      >\n        <span class=\"d-icon-plus_circle\"></span>\n        {{ 'com.bmc.arsys.rx.client.admin.add-new-setting.label' | translate }}\n      </button>\n      <rx-record-grid [config]=\"commonSettingsGroup.recordGridConfig\"></rx-record-grid>\n    </div>\n  </adapt-accordion-tab>\n</adapt-accordion>\n\n<div\n  [ngClass]=\"{\n    'justify-content-start': !isInDockedPanel,\n    'justify-content-end': isInDockedPanel,\n    'dp-footer': isInDockedPanel\n  }\"\n  class=\"pt-3\"\n>\n  <button\n    adapt-button\n    *ngIf=\"isSettingsActionsAvailable && createPermission\"\n    class=\"mr-2\"\n    btn-type=\"primary\"\n    type=\"button\"\n    [disabled]=\"!isAbleToSave()\"\n    (click)=\"saveSettings()\"\n  >\n    {{ 'com.bmc.arsys.rx.client.common.save.label' | translate }}\n  </button>\n\n  <button\n    adapt-button\n    *ngIf=\"isSettingsActionsAvailable && createPermission\"\n    btn-type=\"secondary\"\n    type=\"button\"\n    (click)=\"resetSettings()\"\n  >\n    {{ 'com.bmc.arsys.rx.client.admin.reset.label' | translate }}\n  </button>\n\n  <button adapt-button class=\"ml-2\" btn-type=\"secondary\" type=\"button\" *ngIf=\"isInDockedPanel\" (click)=\"onCancel()\">\n    {{ 'com.bmc.arsys.rx.client.common.cancel.label' | translate }}\n  </button>\n</div>\n","import { Component, Injector, OnInit, ViewChild } from '@angular/core';\nimport { DismissReasons, DockedPanelContext } from '@bmc-ux/adapt-angular';\nimport { RxModalClass } from '@helix/platform/ui-kit';\nimport { cloneDeep } from 'lodash';\nimport { NEVER, Observable, Subscription } from 'rxjs';\nimport { ICommonSettingsGroup } from '../admin-common-settings/admin-common-settings.types';\nimport { RxAdminCommonSettingsService } from '../services/admin-common-settings.service';\nimport { IGetRecordGridConfigParams, IOpenSettingsDetailsParams } from '../services/admin-common-settings.types';\nimport { IRecordGridConfig } from '@helix/platform/view/components';\n\n@Component({\n  selector: 'rx-admin-common-settings-blade',\n  templateUrl: './admin-common-settings-blade.component.html',\n  styleUrls: ['./admin-common-settings-blade.component.scss']\n})\nexport class AdminCommonSettingsBladeComponent extends RxModalClass implements OnInit {\n  @ViewChild('editor')\n  adminCommonSettingsEditorComponent;\n\n  groups: ICommonSettingsGroup[];\n  isNew: boolean;\n  ownerKeyValue: string;\n  childOwnerKeyValue: string;\n  componentName: string;\n  isChildSetting: boolean;\n  busySubscription: Subscription = null;\n\n  constructor(\n    protected context: DockedPanelContext,\n    protected injector: Injector,\n    protected rxAdminCommonSettingsService: RxAdminCommonSettingsService\n  ) {\n    super(context, injector);\n\n    this.getRecordGridConfig = this.getRecordGridConfig.bind(this);\n    this.openSettingsDetails = this.openSettingsDetails.bind(this);\n  }\n\n  ngOnInit(): void {\n    super.ngOnInit();\n    const data = this.context.getData();\n\n    this.groups = cloneDeep(data.config.groups);\n    this.isNew = data.config.isNew;\n    this.ownerKeyValue = data.config.ownerKeyValue;\n    this.childOwnerKeyValue = data.config.childOwnerKeyValue;\n    this.componentName = data.config.componentName;\n    this.isChildSetting = data.config.isChildSetting;\n  }\n\n  isDirty(): boolean {\n    return this.adminCommonSettingsEditorComponent ? !this.adminCommonSettingsEditorComponent.canClose() : false;\n  }\n\n  onCloseEditor(): void {\n    this.context.dismiss(DismissReasons.CLOSE_BTN);\n  }\n\n  onBusy(isBusy: boolean): void {\n    if (isBusy) {\n      this.busySubscription = NEVER.subscribe();\n    } else {\n      this.busySubscription?.unsubscribe();\n    }\n  }\n\n  getRecordGridConfig(options: IGetRecordGridConfigParams): Observable<IRecordGridConfig> {\n    return this.rxAdminCommonSettingsService.getRecordGridConfig(options);\n  }\n\n  openSettingsDetails(options: IOpenSettingsDetailsParams): Promise<any> {\n    return this.rxAdminCommonSettingsService.openSettingsDetails(options);\n  }\n\n  onSave(): void {\n    this.context.close(null);\n  }\n}\n","<rx-admin-settings [busy]=\"busySubscription\">\n  <rx-admin-common-settings-editor\n    #editor\n    [componentName]=\"componentName\"\n    [isNew]=\"isNew\"\n    [groups]=\"groups\"\n    [isChildSetting]=\"isChildSetting\"\n    [ownerKeyValue]=\"ownerKeyValue\"\n    [childOwnerKeyValue]=\"childOwnerKeyValue\"\n    [createPermission]=\"true\"\n    [getRecordGridConfig]=\"getRecordGridConfig\"\n    [openSettingsDetails]=\"openSettingsDetails\"\n    (closeEditor)=\"onCloseEditor()\"\n    (busy)=\"onBusy($event)\"\n    (save)=\"onSave()\"\n  ></rx-admin-common-settings-editor>\n</rx-admin-settings>\n","import { Component, Input, OnDestroy, OnInit, ViewChild } from '@angular/core';\nimport { IAdminComponentDefinition, IPlainObject, RxAdminSettingsService } from '@helix/platform/shared/api';\nimport { IRecordGridConfig, RecordGridComponent } from '@helix/platform/view/components';\nimport { flatten, forEach } from 'lodash';\nimport { forkJoin, NEVER, Observable, of, ReplaySubject, Subject, Subscription } from 'rxjs';\nimport { filter, map, switchMap, take, takeUntil, tap } from 'rxjs/operators';\nimport { AdminCommonSettingsEditorComponent } from '../admin-common-settings-editor/admin-common-settings-editor.component';\nimport { RxAdminCommonSettingsService } from '../services/admin-common-settings.service';\nimport { ICommonSettingsGroup, ICommonSettingsState } from './admin-common-settings.types';\nimport { IGetRecordGridConfigParams, IOpenSettingsDetailsParams } from '../services/admin-common-settings.types';\nimport { IDialogApi, RxModalService } from '@helix/platform/ui-kit';\n\n@Component({\n  selector: 'rx-admin-common-settings',\n  templateUrl: './admin-common-settings.component.html'\n})\nexport class AdminCommonSettingsComponent implements OnInit, OnDestroy {\n  @Input()\n  componentName$: Observable<string>;\n\n  @ViewChild(RecordGridComponent)\n  recordGridComponent: RecordGridComponent;\n\n  @ViewChild(AdminCommonSettingsEditorComponent)\n  adminCommonSettingsEditorComponent: AdminCommonSettingsEditorComponent;\n\n  private componentName: string;\n  private destroyed$ = new ReplaySubject<boolean>(1);\n\n  busySubscription: Subscription;\n  state: ICommonSettingsState;\n  private dialogApi: any;\n  navigationMenuLabel: string;\n\n  constructor(\n    private rxModalService: RxModalService,\n    private rxAdminSettingsService: RxAdminSettingsService,\n    private rxAdminCommonSettingsService: RxAdminCommonSettingsService\n  ) {\n    this.getRecordGridConfig = this.getRecordGridConfig.bind(this);\n    this.openSettingsDetails = this.openSettingsDetails.bind(this);\n  }\n\n  ngOnInit(): void {\n    let busySubject: Subject<void>;\n\n    this.componentName$\n      .pipe(\n        filter(Boolean),\n        tap((componentName: string) => {\n          busySubject = new Subject<void>();\n\n          this.componentName = componentName;\n          this.state = null;\n          this.busySubscription = busySubject.pipe(take(1)).subscribe();\n        }),\n        switchMap((componentName: string) => this.rxAdminSettingsService.getComponentDefinition(componentName)),\n        tap((adminComponentDefinition: IAdminComponentDefinition) => {\n          this.navigationMenuLabel = adminComponentDefinition.header;\n        }),\n        switchMap((adminComponentDefinition: IAdminComponentDefinition) => {\n          const state: ICommonSettingsState = {\n            headerLabel: adminComponentDefinition.header,\n            createPermission: adminComponentDefinition.createPermission,\n            componentName: adminComponentDefinition.compName,\n            supportsMultiple: false,\n            commonSettingGroups: []\n          };\n\n          const commonSettingGroups$ = [];\n\n          forEach(adminComponentDefinition.groups, (group) => {\n            const propertyConfigs$ = [];\n\n            const commonSettingGroup: ICommonSettingsGroup = {\n              name: group.name,\n              supportsMultiple: group.supportsMultiple,\n              isComponent: group.component,\n              settings: []\n            } as ICommonSettingsGroup;\n\n            if (commonSettingGroup.isComponent) {\n              propertyConfigs$.push(\n                this.rxAdminSettingsService.getComponentDefinition(group.name).pipe(\n                  map((childAdminComponentDefinition) => {\n                    const childGroup = childAdminComponentDefinition.groups[0];\n\n                    if (commonSettingGroup.supportsMultiple) {\n                      commonSettingGroup.controls = childGroup.controls;\n                    }\n\n                    return childGroup.controls.map((control) =>\n                      this.rxAdminCommonSettingsService.createPropertyConfig(control)\n                    );\n                  })\n                )\n              );\n            } else {\n              forEach(group.controls, (control) => {\n                propertyConfigs$.push(of(this.rxAdminCommonSettingsService.createPropertyConfig(control)));\n              });\n            }\n\n            commonSettingGroups$.push(\n              forkJoin(propertyConfigs$).pipe(\n                map((propertyConfigs: IPlainObject[]) => {\n                  commonSettingGroup.propertyConfigs = flatten(propertyConfigs);\n\n                  return commonSettingGroup;\n                })\n              )\n            );\n          });\n\n          return commonSettingGroups$.length\n            ? forkJoin(commonSettingGroups$).pipe(\n                map((commonSettingGroups: ICommonSettingsGroup[]) => {\n                  state.commonSettingGroups = commonSettingGroups;\n\n                  if (adminComponentDefinition.supportsMultiple) {\n                    state.supportsMultiple = true;\n\n                    const controls = flatten(\n                      adminComponentDefinition.groups.filter((group) => !group.component).map((group) => group.controls)\n                    );\n\n                    state.recordGridConfig = this.rxAdminCommonSettingsService\n                      .getRecordGridConfig({\n                        componentName: state.componentName,\n                        controls,\n                        getCurrentGridFn: this.getCurrentGrid.bind(this),\n                        createPermission: state.createPermission,\n                        groups: state.commonSettingGroups,\n                        bladeTitle: state.headerLabel,\n                        ownerKeyValue: null,\n                        groupName: null,\n                        onDialogApiReady: (dialogApi: IDialogApi) => (this.dialogApi = dialogApi)\n                      })\n                      .pipe(\n                        map((recordGridConfig) => ({\n                          ...recordGridConfig,\n                          styles: 'h-auto flex-fill mw-100'\n                        }))\n                      );\n                  }\n\n                  return state;\n                })\n              )\n            : of(null);\n        }),\n        takeUntil(this.destroyed$)\n      )\n      .subscribe((state: ICommonSettingsState) => {\n        this.state = state;\n\n        busySubject.next();\n      });\n  }\n\n  ngOnDestroy(): void {\n    this.destroyed$.next(true);\n    this.destroyed$.complete();\n  }\n\n  addNewSetting(): void {\n    this.rxAdminCommonSettingsService\n      .openSettingsDetails({\n        title: this.state.headerLabel,\n        componentName: this.componentName,\n        groups: this.state.commonSettingGroups,\n        onDialogApiReady: (dialogApi: IDialogApi) => (this.dialogApi = dialogApi)\n      })\n      .then(() => {\n        this.dialogApi = null;\n        this.recordGridComponent.api.refresh().subscribe();\n      })\n      .catch(() => {\n        this.dialogApi = null;\n      });\n  }\n\n  onBusy(isBusy: boolean): void {\n    if (isBusy) {\n      this.busySubscription = NEVER.subscribe();\n    } else {\n      this.busySubscription?.unsubscribe();\n    }\n  }\n\n  getRecordGridConfig(options: IGetRecordGridConfigParams): Observable<IRecordGridConfig> {\n    return this.rxAdminCommonSettingsService.getRecordGridConfig(options);\n  }\n\n  openSettingsDetails(options: IOpenSettingsDetailsParams): Promise<any> {\n    return this.rxAdminCommonSettingsService.openSettingsDetails(options);\n  }\n\n  private getCurrentGrid(): RecordGridComponent {\n    return this.recordGridComponent;\n  }\n\n  canClose(): boolean {\n    return Boolean(this.adminCommonSettingsEditorComponent?.canClose() ?? !this.dialogApi?.isDirty());\n  }\n}\n","<rx-admin-settings [busy]=\"busySubscription\" [header]=\"state?.headerLabel || navigationMenuLabel\">\n  <div *ngIf=\"!state\" class=\"d-flex align-items-center justify-content-center h-100\">\n    <adapt-empty-state\n      [type]=\"'config'\"\n      label=\"{{ 'com.bmc.arsys.rx.client.admin.no-settings-available.message' | translate }}\"\n    ></adapt-empty-state>\n  </div>\n\n  <div *ngIf=\"state\" class=\"d-flex flex-column align-items-start flex-fill\">\n    <ng-container *ngIf=\"state.supportsMultiple\">\n      <button *ngIf=\"state.createPermission\" adapt-button type=\"button\" btn-type=\"tertiary\" (click)=\"addNewSetting()\">\n        <span class=\"d-icon-plus_circle\"></span>\n        {{ 'com.bmc.arsys.rx.client.admin.add-new-setting.label' | translate }}\n      </button>\n\n      <rx-record-grid [config]=\"state.recordGridConfig\"></rx-record-grid>\n    </ng-container>\n\n    <div class=\"flex-fill w-100\" *ngIf=\"!state.supportsMultiple\">\n      <rx-admin-common-settings-editor\n        [componentName]=\"state.componentName\"\n        [groups]=\"state.commonSettingGroups\"\n        [isNew]=\"false\"\n        [createPermission]=\"state.createPermission\"\n        [getRecordGridConfig]=\"getRecordGridConfig\"\n        [openSettingsDetails]=\"openSettingsDetails\"\n        (busy)=\"onBusy($event)\"\n      ></rx-admin-common-settings-editor>\n    </div>\n  </div>\n</rx-admin-settings>\n","import { Injectable } from '@angular/core';\nimport { AdaptTreeNodeTyped } from '@bmc-ux/adapt-angular';\nimport { IAdminNavigationMenuItem, RxAdminSettingsService } from '@helix/platform/shared/api';\nimport { uniqueId } from 'lodash';\nimport { Observable } from 'rxjs';\nimport { map } from 'rxjs/operators';\n\n@Injectable()\nexport class RxAdminSettingsExplorerService {\n  constructor(private rxAdminSettingsService: RxAdminSettingsService) {}\n\n  getNavigationTreeConfig(): Observable<AdaptTreeNodeTyped<IAdminNavigationMenuItem>[]> {\n    return this.rxAdminSettingsService.getAdminNavigationMenuItems().pipe(map(this.buildTreeNodes.bind(this)));\n  }\n\n  private buildTreeNodes(\n    administrationNavigationMenuItems: IAdminNavigationMenuItem[],\n    parent?: AdaptTreeNodeTyped<IAdminNavigationMenuItem>\n  ): AdaptTreeNodeTyped<IAdminNavigationMenuItem>[] {\n    return (administrationNavigationMenuItems || [])\n      .filter((navigationMenuItem) => navigationMenuItem.compName !== 'com.bmc.arsys.rx.settings')\n      .sort((item1, item2) => item1.label.localeCompare(item2.label))\n      .map((navigationMenuItem) => {\n        const treeMenuItem: AdaptTreeNodeTyped<IAdminNavigationMenuItem> = {\n          label: navigationMenuItem.label,\n          data: navigationMenuItem,\n          expanded: false,\n          selectable: Boolean(navigationMenuItem.guid),\n          key: uniqueId()\n        };\n\n        treeMenuItem.children =\n          navigationMenuItem.items && navigationMenuItem.items.length\n            ? this.buildTreeNodes(navigationMenuItem.items, treeMenuItem)\n            : [];\n\n        if (parent) {\n          treeMenuItem.parent = parent;\n        }\n\n        return treeMenuItem;\n      });\n  }\n}\n","export enum AdminSettingViewType {\n  RuntimeView = 'runtimeView',\n  SharedView = 'sharedView'\n}\n\nexport enum AdminSettingLinkType {\n  InBundle = 'inBundle',\n  External = 'external'\n}\n","import { ChangeDetectorRef, Component, OnDestroy, OnInit, ViewChild } from '@angular/core';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { AdaptTreeNodeTyped, TreeTexts, TreeWrap } from '@bmc-ux/adapt-angular';\nimport {\n  IAdminNavigationMenuItem,\n  IComponentCanDeactivate,\n  RX_APPLICATION,\n  RxAdminSettingsService,\n  RxBundleCacheService,\n  RxComponentCanDeactivateGuard,\n  RxGlobalCacheService,\n  RxPageTitleService\n} from '@helix/platform/shared/api';\nimport { RxUtilityModalsService } from '@helix/platform/ui-kit';\nimport { IRuntimeViewConfiguration, RxRuntimeViewRegistryService } from '@helix/platform/view/runtime';\nimport { TranslateService } from '@ngx-translate/core';\nimport { every, forEach } from 'lodash';\nimport { BehaviorSubject, combineLatest, NEVER, ReplaySubject, Subscription } from 'rxjs';\nimport { filter, pluck, takeUntil } from 'rxjs/operators';\nimport { AdminCommonSettingsComponent } from '../admin-common-settings/admin-common-settings.component';\nimport { RxAdminSettingsExplorerService } from '../services/admin-settings-explorer.service';\nimport { AdminSettingLinkType, AdminSettingViewType } from './admin-settings-explorer.types';\nimport { RxGainsightConfiguratorService } from '@helix/platform/shared/components';\n\n@Component({\n  selector: 'rx-admin-settings-explorer',\n  templateUrl: 'admin-settings-explorer.component.html',\n  styleUrls: ['./admin-settings-explorer.component.scss'],\n  providers: [RxAdminSettingsExplorerService]\n})\nexport class AdminSettingsExplorerComponent implements OnInit, OnDestroy, IComponentCanDeactivate {\n  @ViewChild(AdminCommonSettingsComponent)\n  adminCommonSettingsComponent: AdminCommonSettingsComponent;\n\n  navigationTree: AdaptTreeNodeTyped<IAdminNavigationMenuItem>[];\n  selectedTreeNodeValue: AdaptTreeNodeTyped<IAdminNavigationMenuItem>;\n  runtimeViewConfig: IRuntimeViewConfiguration;\n  adminSettingViewType = AdminSettingViewType;\n  viewType: AdminSettingViewType;\n  componentName$ = new BehaviorSubject<string>('');\n  treeWrap: TreeWrap = TreeWrap.WrapAll;\n  busySubscription: Subscription;\n\n  emptyStateLabel = this.translateService.instant(\n    'com.bmc.arsys.rx.client.admin.admin-settings-explorer.select-from-settings.label'\n  );\n\n  texts: TreeTexts = {\n    filterPlaceholder: this.translateService.instant('com.bmc.arsys.rx.client.common.search.label')\n  };\n\n  private destroyed$ = new ReplaySubject<boolean>(1);\n  private currentSettingGuid: string;\n\n  get selectedTreeNode(): AdaptTreeNodeTyped<IAdminNavigationMenuItem> {\n    return this.selectedTreeNodeValue;\n  }\n\n  set selectedTreeNode(node: AdaptTreeNodeTyped<IAdminNavigationMenuItem>) {\n    if (node.data.guid) {\n      const prevGuid = this.currentSettingGuid;\n\n      this.currentSettingGuid = node.data.guid;\n\n      this.router\n        .navigate([node.data.guid], { relativeTo: this.activatedRoute.parent })\n        .then((isNavigationSucceeded) => {\n          if (isNavigationSucceeded) {\n            this.selectedTreeNodeValue = node;\n            this.displayView(node.data);\n          } else {\n            this.currentSettingGuid = prevGuid;\n          }\n        });\n    }\n  }\n\n  constructor(\n    private rxAdminSettingsExplorerService: RxAdminSettingsExplorerService,\n    private rxAdminSettingsService: RxAdminSettingsService,\n    private rxGlobalCacheService: RxGlobalCacheService,\n    private router: Router,\n    private rxBundleCacheService: RxBundleCacheService,\n    private activatedRoute: ActivatedRoute,\n    private rxPageTitleService: RxPageTitleService,\n    private rxRuntimeViewRegistryService: RxRuntimeViewRegistryService,\n    private rxUtilityModalsService: RxUtilityModalsService,\n    private rxComponentCanDeactivateGuard: RxComponentCanDeactivateGuard,\n    private changeDetector: ChangeDetectorRef,\n    public translateService: TranslateService,\n    private rxGainsightConfiguratorService: RxGainsightConfiguratorService\n  ) {}\n\n  ngOnInit(): void {\n    this.rxComponentCanDeactivateGuard.setPageComponent(this);\n\n    combineLatest([\n      this.activatedRoute.params.pipe(pluck('settingGuid')),\n      this.rxAdminSettingsExplorerService.getNavigationTreeConfig()\n    ])\n      .pipe(\n        filter(([settingGuid, administrationNavigationTree]) => settingGuid !== this.currentSettingGuid),\n        takeUntil(this.destroyed$)\n      )\n      .subscribe(([settingGuid, administrationNavigationTree]) => {\n        if (!this.navigationTree) {\n          this.navigationTree = administrationNavigationTree;\n        }\n\n        this.currentSettingGuid = settingGuid;\n\n        if (settingGuid !== 'root' && this.navigationTree.length) {\n          this.selectedTreeNodeValue = this.findSelectedNode(settingGuid, this.navigationTree);\n\n          if (this.selectedTreeNodeValue) {\n            this.expandParentNodes(this.selectedTreeNodeValue);\n            this.displayView(this.selectedTreeNodeValue.data);\n          }\n        } else {\n          this.selectedTreeNodeValue = null;\n          this.viewType = null;\n          this.setPageTitle();\n        }\n      });\n\n    if (this.rxGlobalCacheService.applicationId === RX_APPLICATION.innovationStudioBundleId) {\n      this.rxGainsightConfiguratorService.updateGlobalContext({\n        subProductLevel1: {\n          name: 'Design'\n        },\n        subProductLevel2: {\n          name: 'Administration'\n        }\n      });\n    } else {\n      // Clear the global context for runtime administration\n      this.rxGainsightConfiguratorService.removeGlobalContext(null);\n    }\n  }\n\n  ngOnDestroy(): void {\n    this.destroyed$.next(true);\n    this.destroyed$.complete();\n    this.rxComponentCanDeactivateGuard.setPageComponent(null);\n\n    this.rxGainsightConfiguratorService.removeGlobalContext(['subProductLevel2']);\n  }\n\n  canDeactivate(): boolean {\n    if (this.adminCommonSettingsComponent) {\n      return this.adminCommonSettingsComponent.canClose();\n    } else {\n      return every(this.rxRuntimeViewRegistryService.getAll(), (runtimeView) => runtimeView.canClose());\n    }\n  }\n\n  confirmDeactivation(): Promise<boolean> {\n    return this.rxUtilityModalsService.confirmUnsavedChanges();\n  }\n\n  onBeforeLoad(): void {\n    this.busySubscription = NEVER.subscribe();\n\n    // workaround: run changeDetector to avoid the ExpressionChangedAfterItHasBeenCheckedError\n    this.changeDetector.detectChanges();\n  }\n\n  onAfterLoad(): void {\n    this.busySubscription?.unsubscribe();\n  }\n\n  private setPageTitle(componentSettingLabel?: string): void {\n    const titleParts = [\n      componentSettingLabel,\n      this.rxGlobalCacheService.applicationId === RX_APPLICATION.innovationStudioBundleId\n        ? this.translateService.instant('com.bmc.arsys.rx.client.common.administration.label')\n        : this.translateService.instant('com.bmc.arsys.rx.client.common.settings.label')\n    ];\n\n    this.rxPageTitleService.set(titleParts, this.rxGlobalCacheService.applicationId);\n  }\n\n  private findSelectedNode(\n    settingGuid: string,\n    sourceTree: AdaptTreeNodeTyped<IAdminNavigationMenuItem>[]\n  ): AdaptTreeNodeTyped<IAdminNavigationMenuItem> {\n    let selectedNode: AdaptTreeNodeTyped<IAdminNavigationMenuItem>;\n\n    forEach(sourceTree, (node) => {\n      if (node.data.guid === settingGuid) {\n        selectedNode = node;\n\n        return false;\n      } else {\n        selectedNode = this.findSelectedNode(settingGuid, node.children);\n\n        if (selectedNode) {\n          return false;\n        }\n      }\n    });\n\n    return selectedNode;\n  }\n\n  private expandParentNodes(node: AdaptTreeNodeTyped<IAdminNavigationMenuItem>): void {\n    if (node.parent) {\n      node.parent.expanded = true;\n\n      if (node.parent.parent) {\n        this.expandParentNodes(node.parent);\n      }\n    }\n  }\n\n  private displayView(adminNavigationMenuItem: IAdminNavigationMenuItem): void {\n    this.setPageTitle(adminNavigationMenuItem.label);\n    this.rxBundleCacheService.bundleId = adminNavigationMenuItem.defaultBundleScope;\n\n    if (adminNavigationMenuItem.isCustom) {\n      if (adminNavigationMenuItem.linkType === AdminSettingLinkType.InBundle) {\n        this.viewType = AdminSettingViewType.RuntimeView;\n        this.runtimeViewConfig = { viewDefinitionName: adminNavigationMenuItem.registeredModuleName };\n      } else if (adminNavigationMenuItem.linkType === AdminSettingLinkType.External) {\n        window.open(adminNavigationMenuItem.externalLink, '_blank');\n        this.viewType = null;\n\n        this.emptyStateLabel = this.translateService.instant(\n          'com.bmc.arsys.rx.client.admin.external-settings.empty-state.label'\n        );\n      }\n    } else {\n      this.componentName$.next(adminNavigationMenuItem.compName);\n      this.viewType = AdminSettingViewType.SharedView;\n    }\n  }\n}\n","<div class=\"position-relative busy-indicator\">\n  <rx-busy-indicator\n    [options]=\"{\n      busy: busySubscription,\n      loaderType: 'lineLoader',\n      delay: 250,\n      backdrop: false,\n      message: null\n    }\"\n  >\n  </rx-busy-indicator>\n</div>\n\n<adapt-sidebar [openedId]=\"0\" [adjustMainContainerWidth]=\"true\">\n  <adapt-sidebar-item\n    [iconClass]=\"'d-icon-layout_preview'\"\n    [headerTitle]=\"'com.bmc.arsys.rx.client.common.settings.label' | translate\"\n    [aria-label]=\"'com.bmc.arsys.rx.client.common.settings.label' | translate\"\n  >\n    <adapt-tree\n      *ngIf=\"navigationTree\"\n      [value]=\"navigationTree\"\n      selectionMode=\"single\"\n      [(selection)]=\"selectedTreeNode\"\n      [filter]=\"true\"\n      [texts]=\"texts\"\n      [wrap]=\"treeWrap\"\n    >\n    </adapt-tree>\n  </adapt-sidebar-item>\n\n  <div class=\"main rx-administration-settings-view\">\n    <rx-runtime-view\n      *ngIf=\"viewType === adminSettingViewType.RuntimeView\"\n      [configuration]=\"runtimeViewConfig\"\n      (beforeLoad)=\"onBeforeLoad()\"\n      (afterLoad)=\"onAfterLoad()\"\n    ></rx-runtime-view>\n\n    <rx-admin-common-settings\n      *ngIf=\"viewType === adminSettingViewType.SharedView\"\n      [componentName$]=\"componentName$\"\n    ></rx-admin-common-settings>\n\n    <div *ngIf=\"!viewType\" class=\"d-flex align-items-center justify-content-center h-100\">\n      <adapt-empty-state [type]=\"'config'\" [label]=\"emptyStateLabel\"></adapt-empty-state>\n    </div>\n  </div>\n</adapt-sidebar>\n","import { NgModule } from '@angular/core';\nimport { RouterModule, Routes } from '@angular/router';\nimport { AdminSettingsExplorerComponent } from './admin-settings-explorer/admin-settings-explorer.component';\nimport { RxComponentCanDeactivateGuard } from '@helix/platform/shared/api';\n\nconst routes: Routes = [\n  {\n    path: '',\n    redirectTo: 'root',\n    pathMatch: 'full'\n  },\n  {\n    path: ':settingGuid',\n    component: AdminSettingsExplorerComponent,\n    pathMatch: 'full',\n    canDeactivate: [RxComponentCanDeactivateGuard]\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule]\n})\nexport class AdminComponentsRoutingModule {}\n","export const RX_ISSUES = {\n  issuesRecordDefinitionName: 'Reported Errors',\n\n  issuesRecordFieldIds: {\n    operationId: 70100,\n    applicationName: 70101,\n    messageType: 70102,\n    errorNumber: 70103,\n    errorMessage: 70104,\n    caseId: 70106,\n    caseStatus: 70107,\n    relatedRecordGuid: 70108,\n    userDescription: 70109,\n    submittedToSupportDate: 70110,\n    caseGuid: 70111,\n    caseStatusRefreshDate: 70112\n  },\n\n  statusOptionValues: {\n    new: 0,\n    submitted: 1\n  },\n\n  linkExpiredError: {\n    code: 12206,\n    message: 'com.bmc.arsys.rx.client.admin.application-issues.link-expired-error.message'\n  },\n\n  notificationMessages: {\n    caseStatusRefreshed: 'com.bmc.arsys.rx.client.admin.application-issues.case-status-refreshed.message',\n    duplicateIssuesClosed: 'com.bmc.arsys.rx.client.admin.application-issues.duplicate-issues-closed.message',\n    caseSubmitted: 'com.bmc.arsys.rx.client.admin.application-issues.case-submitted.message'\n  }\n};\n","import { Injectable } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\nimport { map } from 'rxjs/operators';\nimport { IErrorReportingValue, IIssueReportingInfo, IIssuesResource } from './application-issues.types';\nimport { forkJoin, Observable } from 'rxjs';\nimport { RxSystemConfigurationService, ISystemConfiguration } from '@helix/platform/shared/api';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class RxApplicationIssuesService {\n  constructor(private httpClient: HttpClient, private rxSystemConfigurationService: RxSystemConfigurationService) {}\n\n  getIssueReportingInfo(): Observable<IIssueReportingInfo> {\n    return this.httpClient.get<IIssueReportingInfo>('/api/rx/application/oauth/token/IssueReporting');\n  }\n\n  getIssuesResource(): Observable<IIssuesResource> {\n    return forkJoin({\n      issueReportingInfo: this.getIssueReportingInfo(),\n      errorReportingInfo: this.rxSystemConfigurationService.getConfiguration(\n        'Error-Reporting-Service-Saas-Configuration'\n      )\n    }).pipe(\n      map((data) => {\n        const errorReportingValue: IErrorReportingValue = JSON.parse(data.errorReportingInfo.value as string);\n        const issuesResource: IIssuesResource = {\n          issueReportingInfo: data.issueReportingInfo,\n          errorReportingValue: errorReportingValue\n        };\n\n        return issuesResource;\n      })\n    );\n  }\n}\n","import { Component, OnInit } from '@angular/core';\nimport { DismissReasons, DockedPanelContext } from '@bmc-ux/adapt-angular';\nimport { RowDataItem } from '@bmc-ux/adapt-table';\nimport { RX_ISSUES } from '../application-issues.constant';\nimport { IPlainObject } from '@helix/platform/shared/api';\nimport { RX_RECORD_DEFINITION } from '@helix/platform/record/api';\n\n@Component({\n  selector: 'rx-issue-detail',\n  templateUrl: './issue-details.component.html'\n})\nexport class IssueDetailsComponent implements OnInit {\n  issueFields: RowDataItem;\n  fieldIds: IPlainObject;\n  coreFieldIds: IPlainObject;\n\n  constructor(private dockedPanelContext: DockedPanelContext) {}\n\n  ngOnInit(): void {\n    this.issueFields = this.dockedPanelContext.getData();\n    this.fieldIds = RX_ISSUES.issuesRecordFieldIds;\n    this.coreFieldIds = RX_RECORD_DEFINITION.coreFieldIds;\n  }\n\n  close(): void {\n    this.dockedPanelContext.close(DismissReasons.CLOSE_BTN);\n  }\n}\n","<div class=\"dp-body\">\n  <div *ngIf=\"issueFields[fieldIds.caseId]\">\n    <h6 class=\"text-tertiary\" rx-id=\"case-id\">\n      {{ 'com.bmc.arsys.rx.client.admin.application-issues.case-id.title' | translate }}\n    </h6>\n    <p class=\"text-default\">\n      {{ issueFields[fieldIds.caseId] }}\n    </p>\n    <div class=\"row\">\n      <div class=\"col-4\">\n        <h6 class=\"title-item text-tertiary\" rx-id=\"case-status\">\n          {{ 'com.bmc.arsys.rx.client.admin.application-issues.case-status.title' | translate }}\n        </h6>\n        <p class=\"text-default\">\n          {{ issueFields.selectionFieldOptionNamesById[fieldIds.caseStatus] }}\n        </p>\n      </div>\n      <div class=\"col-4\">\n        <h6 class=\"title-item text-tertiary\" rx-id=\"case-status-modified-date\">\n          {{ 'com.bmc.arsys.rx.client.admin.application-issues.case-status-refreshed-date.title' | translate }}\n        </h6>\n        <p class=\"text-default\">\n          {{ issueFields[fieldIds.caseStatusRefreshDate] | date: 'medium' }}\n        </p>\n      </div>\n      <div class=\"col-4\">\n        <h6 class=\"title-item text-tertiary\" rx-id=\"submitted-to-support-date\">\n          {{ 'com.bmc.arsys.rx.client.admin.application-issues.submitted-date.title' | translate }}\n        </h6>\n        <p class=\"text-default\">\n          {{ issueFields[fieldIds.submittedToSupportDate] | date: 'medium' }}\n        </p>\n      </div>\n    </div>\n  </div>\n  <div class=\"row\">\n    <div class=\"col-4\">\n      <h6 class=\"title-item text-tertiary\" rx-id=\"issue-status\">\n        {{ 'com.bmc.arsys.rx.client.admin.application-issues.issue-status.title' | translate }}\n      </h6>\n      <p class=\"text-default\">\n        {{ issueFields.selectionFieldOptionNamesById[coreFieldIds.status] }}\n      </p>\n    </div>\n    <div class=\"col-4\">\n      <h6 class=\"title-item text-tertiary\" rx-id=\"reported-by\">\n        {{ 'com.bmc.arsys.rx.client.admin.application-issues.reported-by.title' | translate }}\n      </h6>\n      <p class=\"text-default\">\n        {{ issueFields[coreFieldIds.createdBy] }}\n      </p>\n    </div>\n    <div class=\"col-4\">\n      <h6 class=\"title-item text-tertiary\" rx-id=\"reported-date\">\n        {{ 'com.bmc.arsys.rx.client.admin.application-issues.reported-date.title' | translate }}\n      </h6>\n      <p class=\"text-default\">\n        {{ issueFields[coreFieldIds.createdDate] | date: 'medium' }}\n      </p>\n    </div>\n  </div>\n  <h6 class=\"title-item text-tertiary\" rx-id=\"application-name\">\n    {{ 'com.bmc.arsys.rx.client.admin.application-issues.application-name.title' | translate }}\n  </h6>\n  <p class=\"text-default\">\n    {{ issueFields[fieldIds.applicationName] }}\n  </p>\n  <h6 class=\"title-item text-tertiary\" rx-id=\"error-number\">\n    {{ 'com.bmc.arsys.rx.client.admin.application-issues.error-number.title' | translate }}\n  </h6>\n  <p class=\"text-default\">\n    {{ issueFields[fieldIds.errorNumber] }}\n  </p>\n  <h6 class=\"title-item text-tertiary\" rx-id=\"error-message\">\n    {{ 'com.bmc.arsys.rx.client.admin.application-issues.error-message.title' | translate }}\n  </h6>\n  <p class=\"text-default\">\n    {{ issueFields[fieldIds.errorMessage] }}\n  </p>\n  <h6 class=\"title-item text-tertiary\" rx-id=\"short-description\">\n    {{ 'com.bmc.arsys.rx.client.admin.application-issues.user-description.title' | translate }}\n  </h6>\n  <p class=\"text-default\">\n    {{ issueFields[fieldIds.userDescription] }}\n  </p>\n  <h6 class=\"title-item text-tertiary\" rx-id=\"operation-id\">\n    {{ 'com.bmc.arsys.rx.client.admin.application-issues.operation-id.title' | translate }}\n  </h6>\n  <p class=\"text-default\">\n    {{ issueFields[fieldIds.operationId] }}\n  </p>\n  <h6 class=\"title-item text-tertiary\" rx-id=\"guid\">\n    {{ 'com.bmc.arsys.rx.client.common.guid.label' | translate }}\n  </h6>\n  <p class=\"text-default\">\n    {{ issueFields[coreFieldIds.id] }}\n  </p>\n  <div *ngIf=\"issueFields[fieldIds.relatedRecordGuid]\">\n    <h6 class=\"title-item text-tertiary\" rx-id=\"related-record-guid\">\n      {{ 'com.bmc.arsys.rx.client.admin.application-issues.related-issue-guid.title' | translate }}\n    </h6>\n    <p class=\"text-default\">\n      {{ issueFields[fieldIds.relatedRecordGuid] }}\n    </p>\n  </div>\n</div>\n<div class=\"dp-footer\">\n  <button adapt-button btn-type=\"secondary\" class=\"mr-2\" rx-id=\"close-button\" (click)=\"close()\">\n    {{ 'com.bmc.arsys.rx.client.common.close.label' | translate }}\n  </button>\n</div>\n","import { Component, OnInit, ViewChild } from '@angular/core';\nimport { RX_ISSUES } from '../application-issues.constant';\nimport { IRecordGridColumn, IRecordGridConfig, RecordGridComponent } from '@helix/platform/view/components';\nimport { RX_RECORD_DEFINITION } from '@helix/platform/record/api';\nimport { Observable, of } from 'rxjs';\nimport { AdaptDockedPanelService, DockedPanelContext } from '@bmc-ux/adapt-angular';\nimport { head, map } from 'lodash';\nimport { RxCommandFactoryService, RxNotificationService } from '@helix/platform/shared/api';\nimport { ColumnConfig, RowDataItem } from '@bmc-ux/adapt-table';\nimport { IssueDetailsComponent } from '../issue-details/issue-details.component';\nimport { IRowDataItem } from '@helix/platform/view/api';\nimport { TranslateService } from '@ngx-translate/core';\n\n@Component({\n  selector: 'rx-close-duplicate-issues',\n  templateUrl: './close-duplicate-issues.component.html'\n})\nexport class CloseDuplicateIssuesComponent implements OnInit {\n  @ViewChild('submittedIssuesGrid', { static: true })\n  submittedIssuesGrid: RecordGridComponent;\n\n  selectedIssuesData: RowDataItem[];\n  submittedIssuesGridConfiguration$: Observable<IRecordGridConfig>;\n  selectedIssuesGridColumns: ColumnConfig[] = [\n    {\n      field: `${RX_ISSUES.issuesRecordFieldIds.applicationName}`,\n      header: this.translateService.instant('com.bmc.arsys.rx.client.admin.application-issues.application-name.title')\n    },\n    {\n      field: `${RX_ISSUES.issuesRecordFieldIds.errorNumber}`,\n      header: this.translateService.instant('com.bmc.arsys.rx.client.admin.application-issues.error-number.title')\n    },\n    {\n      field: `${RX_ISSUES.issuesRecordFieldIds.errorMessage}`,\n      header: this.translateService.instant('com.bmc.arsys.rx.client.admin.application-issues.error-message.title'),\n      sortable: false\n    }\n  ];\n\n  constructor(\n    private adaptDockedPanelService: AdaptDockedPanelService,\n    private dockedPanelContext: DockedPanelContext,\n    private rxCommandFactoryService: RxCommandFactoryService,\n    private rxNotificationService: RxNotificationService,\n    private translateService: TranslateService\n  ) {}\n\n  ngOnInit(): void {\n    this.selectedIssuesData = this.dockedPanelContext.getData();\n    this.submittedIssuesGridConfiguration();\n  }\n\n  private getSubmittedIssuesGridColumns(): IRecordGridColumn[] {\n    return [\n      {\n        fieldId: `${RX_ISSUES.issuesRecordFieldIds.applicationName}`,\n        index: 0,\n        title: this.translateService.instant('com.bmc.arsys.rx.client.admin.application-issues.application-name.title')\n      },\n      {\n        fieldId: `${RX_ISSUES.issuesRecordFieldIds.errorNumber}`,\n        index: 1,\n        title: this.translateService.instant('com.bmc.arsys.rx.client.admin.application-issues.error-number.title'),\n        clickable: true,\n        actions: [\n          {\n            name: (previousActionResult: any, lastActionRow: IRowDataItem) => this.showIssueDetails(lastActionRow)\n          }\n        ]\n      },\n      {\n        fieldId: `${RX_ISSUES.issuesRecordFieldIds.errorMessage}`,\n        index: 2,\n        title: this.translateService.instant('com.bmc.arsys.rx.client.admin.application-issues.error-message.title')\n      },\n      {\n        fieldId: `${RX_RECORD_DEFINITION.coreFieldIds.createdDate}`,\n        index: 3,\n        title: this.translateService.instant('com.bmc.arsys.rx.client.admin.application-issues.reported-date.title')\n      },\n      {\n        fieldId: `${RX_ISSUES.issuesRecordFieldIds.caseId}`,\n        index: 4,\n        title: this.translateService.instant('com.bmc.arsys.rx.client.admin.application-issues.case-id.title')\n      }\n    ];\n  }\n\n  private submittedIssuesGridConfiguration(): void {\n    this.submittedIssuesGridConfiguration$ = of({\n      recordDefinitionName: RX_ISSUES.issuesRecordDefinitionName,\n      columns: this.getSubmittedIssuesGridColumns(),\n      filterExpression: `'${RX_RECORD_DEFINITION.coreFieldIds.status}' = \"${RX_ISSUES.statusOptionValues.submitted}\"`,\n      styles: 'flex-fill'\n    });\n  }\n\n  cancel(): void {\n    this.dockedPanelContext.close('');\n  }\n\n  closeSelectedIssues(): void {\n    const selection = head(this.submittedIssuesGrid.api.getSelectedRows());\n\n    this.rxCommandFactoryService\n      .forResourceType('com.bmc.arsys.rx.application.support.command.UpdateIssuesAsDuplicateCommand')\n      .execute({\n        recordId: selection[RX_RECORD_DEFINITION.coreFieldIds.id],\n        recordIds: map(this.dockedPanelContext.getData(), (record) => record[RX_RECORD_DEFINITION.coreFieldIds.id])\n      })\n      .subscribe(() => {\n        this.rxNotificationService.addSuccessMessage(\n          this.translateService.instant(RX_ISSUES.notificationMessages.duplicateIssuesClosed)\n        );\n        this.dockedPanelContext.close('close');\n      });\n  }\n\n  isCloseSelectedIssuesButtonDisabled(): boolean {\n    return this.submittedIssuesGrid.api.getSelectedRows().length === 0;\n  }\n\n  private showIssueDetails(rowData: RowDataItem): void {\n    this.adaptDockedPanelService.open({\n      title: this.translateService.instant('com.bmc.arsys.rx.client.admin.application-issues.issue-details.title'),\n      content: IssueDetailsComponent,\n      size: 'lg',\n      data: rowData\n    });\n  }\n}\n","<div class=\"dp-body d-flex flex-column\">\n  <div class=\"row\">\n    <div class=\"col-12\">\n      <h5 class=\"mt-0\">\n        {{ 'com.bmc.arsys.rx.client.admin.application-issues.selected-issues.title' | translate }}\n      </h5>\n      <adapt-table\n        rx-id=\"selected-issues-grid\"\n        [columns]=\"selectedIssuesGridColumns\"\n        [bordered]=\"true\"\n        [sortable]=\"true\"\n        [value]=\"selectedIssuesData\"\n      >\n      </adapt-table>\n    </div>\n  </div>\n  <div class=\"row flex-fill\">\n    <div class=\"col-12 d-flex flex-column\">\n      <h5>\n        {{ 'com.bmc.arsys.rx.client.admin.application-issues.duplicates.title' | translate }}\n      </h5>\n      <rx-record-grid\n        class=\"flex-fill\"\n        rx-id=\"submitted-issues-grid\"\n        #submittedIssuesGrid\n        [config]=\"submittedIssuesGridConfiguration$\"\n      ></rx-record-grid>\n    </div>\n  </div>\n</div>\n<div class=\"dp-footer\">\n  <button\n    rx-id=\"close-selected-issues-button\"\n    adapt-button\n    btn-type=\"primary\"\n    class=\"mr-2\"\n    [disabled]=\"isCloseSelectedIssuesButtonDisabled()\"\n    (click)=\"closeSelectedIssues()\"\n  >\n    {{ 'com.bmc.arsys.rx.client.admin.application-issues.close-selected.label' | translate }}\n  </button>\n  <button adapt-button btn-type=\"secondary\" rx-id=\"cancel-button\" class=\"mr-2\" (click)=\"cancel()\">\n    {{ 'com.bmc.arsys.rx.client.common.cancel.label' | translate }}\n  </button>\n</div>\n","import { Component, Injector, OnInit } from '@angular/core';\nimport { FormBuilder, FormGroup } from '@angular/forms';\nimport { ActiveModalRef } from '@bmc-ux/adapt-angular';\nimport { RX_RECORD_DEFINITION } from '@helix/platform/record/api';\nimport { RxCommandFactoryService, RxNotificationService } from '@helix/platform/shared/api';\nimport { RX_MODAL, RxModalClass, RxModalService } from '@helix/platform/ui-kit';\nimport { RxStringService } from '@helix/platform/utils';\nimport { IRowDataItem } from '@helix/platform/view/api';\nimport { TranslateService } from '@ngx-translate/core';\nimport { map } from 'lodash';\nimport { throwError } from 'rxjs';\nimport { catchError } from 'rxjs/operators';\nimport { RX_ISSUES } from '../application-issues.constant';\nimport { RxApplicationIssuesService } from '../application-issues.service';\nimport { IIssueSeverity, IIssuesResource } from '../application-issues.types';\n\n@Component({\n  selector: 'rx-submit-issue-to-support',\n  templateUrl: './submit-issue-to-support.component.html'\n})\nexport class SubmitIssueToSupportComponent extends RxModalClass implements OnInit {\n  message: string;\n  issues: IRowDataItem[];\n  issueSeverityOptions: IIssueSeverity[] = [\n    {\n      name: this.translateService.instant(\n        'com.bmc.arsys.rx.client.admin.application-issues.submit-issue-to-support.severity-critical.message'\n      ),\n      id: 1\n    },\n    {\n      name: this.translateService.instant(\n        'com.bmc.arsys.rx.client.admin.application-issues.submit-issue-to-support.severity-high.message'\n      ),\n      id: 2\n    },\n    {\n      name: this.translateService.instant(\n        'com.bmc.arsys.rx.client.admin.application-issues.submit-issue-to-support.severity-medium.message'\n      ),\n      id: 3\n    },\n    {\n      name: this.translateService.instant(\n        'com.bmc.arsys.rx.client.admin.application-issues.submit-issue-to-support.severity-low.message'\n      ),\n      id: 4\n    }\n  ];\n  submitIssueForm: FormGroup;\n  supportCentralUrl: string;\n\n  constructor(\n    private activeModalRef: ActiveModalRef,\n    private formBuilder: FormBuilder,\n    private rxApplicationIssuesService: RxApplicationIssuesService,\n    private rxCommandFactoryService: RxCommandFactoryService,\n    private rxModalService: RxModalService,\n    private rxNotificationService: RxNotificationService,\n    private rxStringService: RxStringService,\n    private translateService: TranslateService,\n    protected injector: Injector\n  ) {\n    super(activeModalRef, injector);\n  }\n\n  ngOnInit(): void {\n    super.ngOnInit();\n\n    this.submitIssueForm = this.formBuilder.group({\n      description: [],\n      severity: []\n    });\n\n    this.issues = this.activeModalRef.getData().issues;\n\n    this.rxApplicationIssuesService.getIssuesResource().subscribe((issues: IIssuesResource) => {\n      const { errorReportingValue } = issues;\n\n      this.supportCentralUrl = errorReportingValue.supportCentralUrl;\n    });\n\n    this.message = this.translateService.instant(\n      'com.bmc.arsys.rx.client.admin.application-issues.reported-issues.title',\n      { numberOfIssues: this.issues.length }\n    );\n  }\n\n  isDirty(): boolean {\n    return this.submitIssueForm.dirty;\n  }\n\n  initSearchQuery(): void {\n    if (this.issues.length >= 1) {\n      const errorMessage = this.issues[0][RX_ISSUES.issuesRecordFieldIds.errorMessage];\n      const errorNumber = this.issues[0][RX_ISSUES.issuesRecordFieldIds.errorNumber];\n      const applicationName = this.issues[0][RX_ISSUES.issuesRecordFieldIds.applicationName];\n      const searchQuery = `?fromproduct=helixplatform#q=${errorMessage}%20OR%20${errorNumber}&t=All&sort=relevancy&f:@bmcproductname=[${applicationName}]`;\n\n      window.open(this.supportCentralUrl + searchQuery);\n    }\n  }\n\n  submit(): void {\n    this.rxCommandFactoryService\n      .forResourceType('com.bmc.arsys.rx.application.support.command.CreateSupportCaseCommand')\n      .execute({\n        description: this.submitIssueForm.get('description').value,\n        recordIds: map(this.issues, RX_RECORD_DEFINITION.coreFieldIds.id),\n        severity: this.submitIssueForm.get('severity').value[0].id\n      })\n      .pipe(\n        catchError((error) => {\n          if (error.error[0].messageNumber === RX_ISSUES.linkExpiredError.code) {\n            this.rxNotificationService.addErrorMessage(RX_ISSUES.linkExpiredError.message);\n          }\n\n          return throwError(error);\n        })\n      )\n      .subscribe(() => {\n        this.rxNotificationService.addSuccessMessage(\n          this.translateService.instant(RX_ISSUES.notificationMessages.caseSubmitted)\n        );\n        this.activeModalRef.close('cancel');\n      });\n  }\n\n  optionFormatter(severity: IIssueSeverity): string {\n    return severity.name;\n  }\n\n  cancel(): void {\n    if (this.submitIssueForm.get('description')) {\n      this.rxModalService\n        .confirm({\n          title: this.translateService.instant('com.bmc.arsys.rx.client.common.warning.label'),\n          modalStyle: RX_MODAL.modalStyles.warning,\n          message: this.translateService.instant(\n            'com.bmc.arsys.rx.client.admin.application-issues.submit-issue-to-support.cancel-submission.message'\n          )\n        })\n        .then((data) => {\n          if (data) this.activeModalRef.close();\n        });\n    } else {\n      this.activeModalRef.close();\n    }\n  }\n}\n","<div class=\"modal-body pt-0\">\n  <div class=\"row bg-info\" *ngIf=\"supportCentralUrl\">\n    <button\n      adapt-button\n      rx-id=\"knowledge-articles-button\"\n      type=\"button\"\n      class=\"btn btn-secondary m-2\"\n      size=\"xtra-small\"\n      (click)=\"initSearchQuery()\"\n    >\n      <span class=\"d-icon-lightbulb_o p-2\" aria-hidden=\"true\"></span>\n      {{\n        'com.bmc.arsys.rx.client.admin.application-issues.submit-issue-to-support.knowledge-articles.title' | translate\n      }}\n    </button>\n    <span class=\"mt-3 text-default-inverse\" rx-id=\"message\">{{\n      'com.bmc.arsys.rx.client.admin.application-issues.submit-issue-to-support.search-knowledge-articles.message'\n        | translate\n    }}</span>\n  </div>\n  <div class=\"row mt-2\">\n    <div class=\"col-md-12\">\n      <p rx-id=\"message\">{{ message }}</p>\n    </div>\n  </div>\n  <form [formGroup]=\"submitIssueForm\">\n    <div class=\"row\">\n      <div class=\"col-12\">\n        <adapt-rx-textarea\n          rx-id=\"description\"\n          formControlName=\"description\"\n          label=\"Description\"\n          placeholder=\"Enter Issue Description\"\n          rows=\"7\"\n          required\n        ></adapt-rx-textarea>\n      </div>\n    </div>\n\n    <div class=\"row mt-4 mb-4\">\n      <div class=\"col-4\">\n        <adapt-rx-select\n          rx-id=\"severity\"\n          formControlName=\"severity\"\n          [options]=\"issueSeverityOptions\"\n          [optionFormatter]=\"optionFormatter\"\n          label=\"Severity\"\n          required\n        ></adapt-rx-select>\n      </div>\n    </div>\n  </form>\n</div>\n<div class=\"modal-footer\">\n  <button\n    adapt-button\n    btn-type=\"primary\"\n    class=\"mr-2\"\n    rx-id=\"submit-case-button\"\n    [disabled]=\"submitIssueForm.invalid\"\n    (click)=\"submit()\"\n  >\n    {{ 'com.bmc.arsys.rx.client.admin.application-issues.submit-issue-to-support.submit-case.label' | translate }}\n  </button>\n  <button rx-id=\"cancel-button\" adapt-button btn-type=\"secondary\" class=\"mr-2\" (click)=\"cancel()\">\n    {{ 'com.bmc.arsys.rx.client.common.cancel.label' | translate }}\n  </button>\n</div>\n","import { Component, OnInit, ViewChild } from '@angular/core';\nimport { AdaptDockedPanelService } from '@bmc-ux/adapt-angular';\nimport { RowDataItem } from '@bmc-ux/adapt-table';\nimport { RX_RECORD_DEFINITION } from '@helix/platform/record/api';\nimport { RxCommandFactoryService, RxCurrentUserService, RxNotificationService } from '@helix/platform/shared/api';\nimport { RxModalService } from '@helix/platform/ui-kit';\nimport { RxDeleteRecordsViewActionService } from '@helix/platform/view/actions';\nimport { IRowDataItem } from '@helix/platform/view/api';\nimport {\n  IRecordGridActionButton,\n  IRecordGridColumn,\n  IRecordGridConfig,\n  RecordGridComponent\n} from '@helix/platform/view/components';\nimport { TranslateService } from '@ngx-translate/core';\nimport { map, noop, some } from 'lodash';\nimport { Observable, throwError } from 'rxjs';\nimport { catchError, tap } from 'rxjs/operators';\nimport { RX_ISSUES } from './application-issues.constant';\nimport { RxApplicationIssuesService } from './application-issues.service';\nimport { IIssueReportingInfo, IIssuesResource } from './application-issues.types';\nimport { CloseDuplicateIssuesComponent } from './close-duplicate-issues/close-duplicate-issues.component';\nimport { IssueDetailsComponent } from './issue-details/issue-details.component';\nimport { SubmitIssueToSupportComponent } from './submit-issue-to-support/submit-issue-to-support.component';\n\n@Component({\n  selector: 'rx-admin-application-issues',\n  templateUrl: './application-issues.component.html',\n  styleUrls: ['./application-issues.component.scss']\n})\nexport class ApplicationIssuesAdminComponent implements OnInit {\n  @ViewChild('issuesRecordGrid')\n  issuesRecordGrid: RecordGridComponent;\n\n  issueReportingInfo: IIssueReportingInfo;\n  issuesRecordGridConfiguration$: Observable<IRecordGridConfig>;\n  isAdministrator: boolean;\n  supportCentralUrl: string;\n\n  constructor(\n    private adaptDockedPanelService: AdaptDockedPanelService,\n    private rxApplicationIssuesService: RxApplicationIssuesService,\n    private rxCommandFactoryService: RxCommandFactoryService,\n    private rxCurrentUserService: RxCurrentUserService,\n    private rxDeleteRecordsViewActionService: RxDeleteRecordsViewActionService,\n    private translateService: TranslateService,\n    private rxNotificationService: RxNotificationService,\n    private rxModalService: RxModalService\n  ) {\n    this.isAdministrator = this.rxCurrentUserService.isAdministrator();\n\n    this.issuesRecordGridConfiguration$ = new Observable((observer) => {\n      if (this.isAdministrator) {\n        observer.next({\n          recordDefinitionName: RX_ISSUES.issuesRecordDefinitionName,\n          columns: this.getIssueColumns(),\n          actionButtons: this.getActionButtons(),\n          styles: 'flex-fill'\n        });\n      }\n\n      observer.complete();\n    });\n  }\n\n  ngOnInit(): void {\n    this.rxApplicationIssuesService.getIssuesResource().subscribe((issues: IIssuesResource) => {\n      const { issueReportingInfo, errorReportingValue } = issues;\n\n      this.issueReportingInfo = issueReportingInfo;\n      this.supportCentralUrl = errorReportingValue.supportCentralUrl;\n    });\n  }\n\n  private getIssueColumns(): IRecordGridColumn[] {\n    return [\n      {\n        fieldId: `${RX_ISSUES.issuesRecordFieldIds.applicationName}`,\n        index: 0,\n        title: this.translateService.instant('com.bmc.arsys.rx.client.admin.application-issues.application-name.title')\n      },\n      {\n        fieldId: `${RX_ISSUES.issuesRecordFieldIds.errorNumber}`,\n        index: 1,\n        title: this.translateService.instant('com.bmc.arsys.rx.client.admin.application-issues.error-number.title'),\n        clickable: true,\n        actions: [\n          {\n            name: (previousActionResult: any, lastActionRow: IRowDataItem) => this.showIssueDetails(lastActionRow)\n          }\n        ]\n      },\n      {\n        fieldId: `${RX_ISSUES.issuesRecordFieldIds.errorMessage}`,\n        index: 2,\n        title: this.translateService.instant('com.bmc.arsys.rx.client.admin.application-issues.error-message.title')\n      },\n      {\n        fieldId: `${RX_RECORD_DEFINITION.coreFieldIds.createdBy}`,\n        index: 3,\n        title: this.translateService.instant('com.bmc.arsys.rx.client.admin.application-issues.reported-by.title')\n      },\n      {\n        fieldId: `${RX_RECORD_DEFINITION.coreFieldIds.createdDate}`,\n        index: 4,\n        title: this.translateService.instant('com.bmc.arsys.rx.client.admin.application-issues.reported-date.title')\n      },\n      {\n        fieldId: `${RX_RECORD_DEFINITION.coreFieldIds.status}`,\n        index: 5,\n        title: this.translateService.instant('com.bmc.arsys.rx.client.admin.application-issues.issue-status.title')\n      },\n      {\n        fieldId: `${RX_ISSUES.issuesRecordFieldIds.caseId}`,\n        index: 6,\n        title: this.translateService.instant('com.bmc.arsys.rx.client.admin.application-issues.case-id.title')\n      },\n      {\n        fieldId: `${RX_ISSUES.issuesRecordFieldIds.caseStatus}`,\n        index: 7,\n        title: this.translateService.instant('com.bmc.arsys.rx.client.admin.application-issues.case-status.title')\n      },\n      {\n        fieldId: `${RX_ISSUES.issuesRecordFieldIds.caseStatusRefreshDate}`,\n        index: 8,\n        title: this.translateService.instant(\n          'com.bmc.arsys.rx.client.admin.application-issues.case-status-refreshed-date.title'\n        )\n      },\n      {\n        fieldId: `${RX_RECORD_DEFINITION.coreFieldIds.displayId}`,\n        index: 9,\n        title: this.translateService.instant('com.bmc.arsys.rx.client.common.id.label'),\n        visible: false\n      },\n      {\n        fieldId: `${RX_RECORD_DEFINITION.coreFieldIds.id}`,\n        index: 10,\n        title: this.translateService.instant('com.bmc.arsys.rx.client.common.guid.label'),\n        visible: false\n      },\n      {\n        fieldId: `${RX_ISSUES.issuesRecordFieldIds.userDescription}`,\n        index: 11,\n        title: this.translateService.instant('com.bmc.arsys.rx.client.admin.application-issues.user-description.title'),\n        visible: false\n      },\n      {\n        fieldId: `${RX_ISSUES.issuesRecordFieldIds.operationId}`,\n        index: 12,\n        title: this.translateService.instant('com.bmc.arsys.rx.client.admin.application-issues.operation-id.title'),\n        visible: false\n      },\n      {\n        fieldId: `${RX_ISSUES.issuesRecordFieldIds.relatedRecordGuid}`,\n        index: 13,\n        title: this.translateService.instant(\n          'com.bmc.arsys.rx.client.admin.application-issues.related-issue-guid.title'\n        ),\n        visible: false\n      }\n    ];\n  }\n\n  private getActionButtons(): IRecordGridActionButton[] {\n    return [\n      {\n        label: this.translateService.instant('com.bmc.arsys.rx.client.admin.application-issues.view-details.label'),\n        style: 'tertiary',\n        disabled: () => {\n          return this.issuesRecordGrid.api.getSelectedRowCount() !== 1;\n        },\n        iconCls: 'search_plus',\n        actions: [\n          {\n            name: () => {\n              this.showIssueDetails(this.issuesRecordGrid.api.getFirstSelectedRow());\n            }\n          }\n        ]\n      },\n      {\n        label: this.translateService.instant(\n          'com.bmc.arsys.rx.client.admin.application-issues.search-knowledge-articles.label'\n        ),\n        style: 'tertiary',\n        disabled: () => {\n          return (\n            !this.supportCentralUrl ||\n            this.issuesRecordGrid.api.getSelectedRowCount() !== 1 ||\n            this.issuesRecordGrid.api.getSelectedRows()[0][RX_RECORD_DEFINITION.coreFieldIds.status] !==\n              RX_ISSUES.statusOptionValues.new\n          );\n        },\n        iconCls: 'search',\n        actions: [\n          {\n            name: () => {\n              const selectedRow = this.issuesRecordGrid.api.getSelectedRows();\n              const errorMessage = selectedRow[0][RX_ISSUES.issuesRecordFieldIds.errorMessage];\n              const errorNumber = selectedRow[0][RX_ISSUES.issuesRecordFieldIds.errorNumber];\n              const applicationName = selectedRow[0][RX_ISSUES.issuesRecordFieldIds.applicationName];\n              const searchQuery = `?fromproduct=helixplatform#q=${errorMessage}%20OR%20${errorNumber}&t=All&sort=relevancy&f:@bmcproductname=[${applicationName}]`;\n\n              window.open(this.supportCentralUrl + searchQuery);\n            }\n          }\n        ]\n      },\n      {\n        label: this.translateService.instant('com.bmc.arsys.rx.client.admin.application-issues.submit-to-bmc.label'),\n        style: 'tertiary',\n        iconCls: 'file_arrow_right',\n        disabled: () => {\n          return (\n            !this.issueReportingInfo.configured ||\n            some(this.issuesRecordGrid.api.getSelectedRows(), (record) => {\n              return record[RX_RECORD_DEFINITION.coreFieldIds.status] !== RX_ISSUES.statusOptionValues.new;\n            })\n          );\n        },\n        actions: [\n          {\n            name: () => {\n              this.rxModalService\n                .openModal({\n                  title: this.translateService.instant(\n                    'com.bmc.arsys.rx.client.admin.application-issues.submit-to-support.title'\n                  ),\n                  content: SubmitIssueToSupportComponent,\n                  size: 'default',\n                  data: {\n                    issues: this.issuesRecordGrid.api.getSelectedRows()\n                  }\n                })\n                .then((result) => {\n                  if (result) {\n                    this.issuesRecordGrid.api.refresh().subscribe();\n                  }\n                })\n                .catch(noop);\n            }\n          }\n        ]\n      },\n      {\n        label: this.translateService.instant(\n          'com.bmc.arsys.rx.client.admin.application-issues.refresh-case-status.label'\n        ),\n        style: 'tertiary',\n        iconCls: 'refresh',\n        disabled: () => {\n          return (\n            !this.issueReportingInfo.configured ||\n            some(this.issuesRecordGrid.api.getSelectedRows(), (record) => {\n              return !record[RX_ISSUES.issuesRecordFieldIds.caseId];\n            })\n          );\n        },\n        actions: [\n          {\n            name: () => {\n              const selection = this.issuesRecordGrid.api.getSelectedRows();\n\n              this.rxCommandFactoryService\n                .forResourceType('com.bmc.arsys.rx.application.support.command.UpdateSupportCaseStatusCommand')\n                .execute({ recordIds: map(selection, RX_RECORD_DEFINITION.coreFieldIds.id) })\n                .pipe(\n                  catchError((error) => {\n                    if (error.error[0].messageNumber === RX_ISSUES.linkExpiredError.code) {\n                      this.rxNotificationService.addErrorMessage(\n                        this.translateService.instant(RX_ISSUES.linkExpiredError.message)\n                      );\n                    }\n\n                    return throwError(error);\n                  }),\n                  tap(() => this.issuesRecordGrid.api.refresh().subscribe())\n                )\n                .subscribe(() => {\n                  this.rxNotificationService.addSuccessMessage(\n                    this.translateService.instant(RX_ISSUES.notificationMessages.caseStatusRefreshed)\n                  );\n                });\n            }\n          }\n        ]\n      },\n      {\n        label: this.translateService.instant(\n          'com.bmc.arsys.rx.client.admin.application-issues.close-as-duplicates.label'\n        ),\n        style: 'tertiary',\n        iconCls: 'cross_adapt',\n        disabled: () => {\n          return some(this.issuesRecordGrid.api.getSelectedRows(), (record) => {\n            return record[RX_RECORD_DEFINITION.coreFieldIds.status] !== RX_ISSUES.statusOptionValues.new;\n          });\n        },\n        actions: [\n          {\n            name: () => {\n              this.adaptDockedPanelService\n                .open({\n                  title: this.translateService.instant(\n                    'com.bmc.arsys.rx.client.admin.application-issues.close-duplicate-issues.title'\n                  ),\n                  content: CloseDuplicateIssuesComponent,\n                  data: this.issuesRecordGrid.api.getSelectedRows(),\n                  size: 'lg'\n                })\n                .then(\n                  (result) => {\n                    if (result) {\n                      this.issuesRecordGrid.api.refresh().subscribe();\n                    }\n                  },\n                  () => {}\n                );\n            }\n          }\n        ]\n      },\n      {\n        label: this.translateService.instant('com.bmc.arsys.rx.client.common.delete.label'),\n        style: 'tertiary',\n        iconCls: 'trash',\n        disabled: () => {\n          return some(this.issuesRecordGrid.api.getSelectedRows(), (record) => {\n            return record[RX_RECORD_DEFINITION.coreFieldIds.status] === RX_ISSUES.statusOptionValues.submitted;\n          });\n        },\n        actions: [\n          {\n            name: () => {\n              this.rxDeleteRecordsViewActionService\n                .execute({\n                  recordDefinitionName: RX_ISSUES.issuesRecordDefinitionName,\n                  records: this.issuesRecordGrid.api\n                })\n                .subscribe();\n            }\n          }\n        ]\n      }\n    ];\n  }\n\n  private showIssueDetails(rowData: RowDataItem): void {\n    this.adaptDockedPanelService.open({\n      title: this.translateService.instant('com.bmc.arsys.rx.client.admin.application-issues.issue-details.title'),\n      content: IssueDetailsComponent,\n      size: 'lg',\n      data: rowData\n    });\n  }\n}\n","<rx-admin-settings\n  *ngIf=\"isAdministrator\"\n  header=\"{{ 'com.bmc.arsys.rx.client.admin.application-issues.header.title' | translate }}\"\n>\n  <rx-record-grid rx-id=\"issues-grid\" #issuesRecordGrid [config]=\"issuesRecordGridConfiguration$\"></rx-record-grid>\n</rx-admin-settings>\n\n<adapt-alert\n  *ngIf=\"!isAdministrator\"\n  class=\"p-4\"\n  [config]=\"{\n    title: 'com.bmc.arsys.rx.client.admin.access-denied.title' | translate,\n    content: 'com.bmc.arsys.rx.client.admin.access-denied.message' | translate,\n    variant: 'danger'\n  }\"\n></adapt-alert>\n","import { NgModule, ComponentFactoryResolver } from '@angular/core';\nimport { ApplicationIssuesAdminComponent } from './application-issues.component';\nimport { RxViewComponentRegistryService } from '@helix/platform/view/api';\nimport { RX_APPLICATION } from '@helix/platform/shared/api';\nimport { CommonModule } from '@angular/common';\nimport { RecordGridModule } from '@helix/platform/view/components';\nimport { IssueDetailsComponent } from './issue-details/issue-details.component';\nimport { CloseDuplicateIssuesComponent } from './close-duplicate-issues/close-duplicate-issues.component';\nimport { SubmitIssueToSupportComponent } from './submit-issue-to-support/submit-issue-to-support.component';\nimport { AdaptRxTextareaModule, AdaptRxSelectModule, AdaptButtonModule, AdaptAlertModule } from '@bmc-ux/adapt-angular';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\nimport { AdaptTableModule } from '@bmc-ux/adapt-table';\nimport { AdminSettingsModule } from '@helix/platform/shared/components';\nimport { TranslateModule } from '@ngx-translate/core';\n\n@NgModule({\n  declarations: [\n    ApplicationIssuesAdminComponent,\n    IssueDetailsComponent,\n    CloseDuplicateIssuesComponent,\n    SubmitIssueToSupportComponent\n  ],\n  imports: [\n    AdaptAlertModule.forRoot(),\n    AdaptButtonModule,\n    AdaptRxSelectModule,\n    AdaptRxTextareaModule,\n    AdaptTableModule,\n    AdminSettingsModule,\n    CommonModule,\n    FormsModule,\n    ReactiveFormsModule,\n    RecordGridModule,\n    TranslateModule\n  ],\n  entryComponents: [\n    ApplicationIssuesAdminComponent,\n    IssueDetailsComponent,\n    CloseDuplicateIssuesComponent,\n    SubmitIssueToSupportComponent\n  ]\n})\nexport class ApplicationIssuesRegistrationModule {\n  constructor(\n    private componentFactoryResolver: ComponentFactoryResolver,\n    private rxViewComponentRegistryService: RxViewComponentRegistryService\n  ) {\n    rxViewComponentRegistryService.register({\n      type: 'rx-admin-application-issues',\n      componentFactory: this.componentFactoryResolver.resolveComponentFactory(ApplicationIssuesAdminComponent),\n      name: 'Application issues',\n      isPageComponent: true,\n      availableInBundles: [RX_APPLICATION.settingsBundleId]\n    });\n  }\n}\n","export const RX_APPROVAL_CONFIGURATION = {\n  selfApproval: {\n    apForm: {\n      name: 'AP:Form',\n      fields: {\n        formName: 12000,\n        formRequestId: 10014,\n        notesField: 10009,\n        requester: 10015,\n        summary: 10002,\n        field3: 10004,\n        field4: 10005,\n        field5: 10006,\n        field6: 10007,\n        field7: 61001,\n        securityLabels: 14850\n      }\n    },\n    mapping: {\n      name: 'com.bmc.arsys.rx.approval:SelfApprovalMappingV2',\n      fields: {\n        precedence: 10004,\n        qualification: 10001,\n        auditInformation: 12700,\n        recordDefinition: 10000,\n        approvalFlowName: 10002,\n        approvalFlowGuid: 10003,\n        hiddenQualification: 10006,\n        applicationBundleId: 61001\n      }\n    },\n    flowList: {\n      name: 'com.bmc.arsys.rx.approval:SelfApprovalFlowList',\n      fields: {\n        recordDefinition: 10000,\n        selfApprovalFlowName: 10001,\n        selfApprovalFlowProcessDefinitionGuid: 10002\n      }\n    }\n  },\n  flowQualificationProperty: 'approvalQualification',\n  approverQualificationProperty: 'approverQualification',\n\n  noApproverProvided: 'NO_APPROVER_PROVIDED',\n  signingCriteriaPercentageList: [50, 60, 70, 80, 90],\n  approverCriteria: {\n    oneMust: 0,\n    allMust: 1,\n    percentage: 2\n  },\n  approverTypes: {\n    functionalRole: 'functionalRole',\n    fieldIdentifying: 'fieldIdentifying',\n    people: 'people',\n\n    company: 'company',\n    org: 'org',\n    dept: 'dept',\n\n    supportCompany: 'supportCompany',\n    supportOrg: 'supportOrg',\n    supportGroup: 'supportGroup'\n  },\n  approverFields: {\n    companyField: 1000000001,\n    organizationField: 1000000010,\n    departmentField: 200000006,\n    supportOrgField: 1000000014,\n    supportGroupField: 1000000015,\n    firstName: 1000000019,\n    lastName: 1000000018,\n    remedyLoginId: 4\n  },\n  valueSeparator: '_',\n  approverSeparator: ';',\n  levelSeparator: '[:]',\n  approverFormatPrefixes: {\n    people: 'U[:]',\n    functionalRole: 'FR[:]',\n\n    company: 'COM',\n    companyOrg: 'COMORG',\n    companyOrgDept: 'COMORGDEPT',\n\n    supportCompany: 'SCOM',\n    supportCompanyOrg: 'SCOMSORG',\n    supportCompanyOrgGroup: 'SCOMSORGSGRP'\n  }\n};\n","import { HttpClient } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\nimport { Observable } from 'rxjs';\nimport {\n  IApprovalFlowGroup,\n  IApprovalFlowGroupConfigurationResponse,\n  IRecordRegistration,\n  ISelfApprovalConfiguration\n} from './approval-configuration.types';\nimport { RX_APPROVAL_CONFIGURATION } from './approval-configuration.constant';\nimport { IRecordDefinition } from '@helix/platform/record/api';\nimport { trim } from 'lodash';\nimport {\n  IDataPageResult,\n  IFunctionalRoleDescriptor,\n  RxFunctionalRoleDataPageService\n} from '@helix/platform/shared/api';\nimport { map, shareReplay } from 'rxjs/operators';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class RxApprovalConfigurationService {\n  selfApprovalApi = '/api/com.bmc.arsys.rx.approval/rx/application/approval/approvalmapping';\n  registrationApi = '/api/com.bmc.arsys.rx.approval/rx/application/approval/registration';\n  flowConfigurationApi = '/api/com.bmc.arsys.rx.approval/rx/application/approval/flowconfiguration';\n\n  functionalRoles$: Observable<IFunctionalRoleDescriptor[]>;\n\n  constructor(\n    private httpClient: HttpClient,\n    private rxFunctionalRoleDataPageService: RxFunctionalRoleDataPageService\n  ) {}\n\n  getRegisteredRecordDetails(registeredRecordDefinitionName: string): Observable<IRecordRegistration> {\n    return this.httpClient.get<any>(`${this.registrationApi}/${registeredRecordDefinitionName}`);\n  }\n\n  registerRecord(approvalRegistrationRecord: IRecordRegistration): Observable<any> {\n    return this.httpClient.post(this.registrationApi, approvalRegistrationRecord);\n  }\n\n  updateRecord(approvalRegistrationRecord: IRecordRegistration): Observable<any> {\n    return this.httpClient.put(\n      `${this.registrationApi}/${approvalRegistrationRecord.recordDefinition}`,\n      approvalRegistrationRecord\n    );\n  }\n\n  unRegisterRecord(definitionName: string): Observable<any> {\n    return this.httpClient.delete(`${this.registrationApi}/${encodeURIComponent(definitionName)}`);\n  }\n\n  createSelfApprovalConfiguration(configuration: ISelfApprovalConfiguration): Observable<any> {\n    return this.httpClient.post(this.selfApprovalApi, configuration);\n  }\n\n  updateSelfApprovalConfiguration(id: string, configuration: ISelfApprovalConfiguration): Observable<any> {\n    return this.httpClient.put(\n      `${this.selfApprovalApi}/${RX_APPROVAL_CONFIGURATION.selfApproval.mapping.name}/${id}`,\n      configuration\n    );\n  }\n\n  deleteSelfApprovalConfiguration(id: string): Observable<any> {\n    return this.httpClient.delete(\n      `${this.selfApprovalApi}/${RX_APPROVAL_CONFIGURATION.selfApproval.mapping.name}/${id}`\n    );\n  }\n\n  getFunctionalRoles(): Observable<IFunctionalRoleDescriptor[]> {\n    if (!this.functionalRoles$) {\n      this.functionalRoles$ = this.rxFunctionalRoleDataPageService\n        .get({\n          params: {\n            pageSize: -1,\n            propertySelection: ['applicationName', 'name']\n          }\n        })\n        .pipe(\n          map((response: IDataPageResult) =>\n            response.data.map((role: IFunctionalRoleDescriptor) => ({\n              id: role.id,\n              name: role.name,\n              applicationName: role.applicationName\n            }))\n          ),\n          shareReplay(1)\n        );\n    }\n\n    return this.functionalRoles$;\n  }\n\n  getApprovalFlowConfigurations(\n    registeredRecordDefinition: string\n  ): Observable<IApprovalFlowGroupConfigurationResponse> {\n    return this.httpClient.get<IApprovalFlowGroupConfigurationResponse>(\n      `${this.flowConfigurationApi}/${registeredRecordDefinition}`\n    );\n  }\n\n  updateApprovalFlowGroup(\n    flowGroupName: string,\n    flowGroupConfiguration: IApprovalFlowGroup,\n    recordDefinitionName: string\n  ): Observable<any> {\n    return this.httpClient.put(\n      `${this.flowConfigurationApi}/${encodeURIComponent(recordDefinitionName)}/flowGroupName/${encodeURIComponent(\n        flowGroupName\n      )}`,\n      flowGroupConfiguration\n    );\n  }\n\n  saveApprovalFlowGroup(flowGroupConfiguration: IApprovalFlowGroup, recordDefinitionName: string): Observable<any> {\n    return this.httpClient.post(\n      `${this.flowConfigurationApi}/${encodeURIComponent(recordDefinitionName)}/flowGroupName`,\n      flowGroupConfiguration\n    );\n  }\n\n  getApprovalFlowGroup(recordDefinitionName: string, flowGroupName: string): Observable<IApprovalFlowGroup> {\n    return this.httpClient.get<IApprovalFlowGroup>(\n      `${this.flowConfigurationApi}/${encodeURIComponent(recordDefinitionName)}/flowGroupName/${encodeURIComponent(\n        flowGroupName\n      )}`\n    );\n  }\n\n  deleteApprovalFlowGroup(flowGroupName: string, recordDefinitionName: string): Observable<any> {\n    return this.httpClient.delete(\n      `${this.flowConfigurationApi}/${encodeURIComponent(recordDefinitionName)}/flowGroupName/${encodeURIComponent(\n        flowGroupName\n      )}`\n    );\n  }\n\n  getCtmPeopleFormFields(bundleId: string): Observable<IRecordDefinition> {\n    return this.httpClient.get<IRecordDefinition>(\n      `/api/com.bmc.arsys.rx.approval/rx/application/approval/recorddefinition/people/${bundleId}`\n    );\n  }\n\n  isFunctionalRole(approver: string): boolean {\n    return approver.includes(RX_APPROVAL_CONFIGURATION.approverFormatPrefixes.functionalRole);\n  }\n\n  getFunctionalRoleGuid(approver: string): string {\n    // FR[:]AGGADG2BIX85UAQM80BBQM80BBBM9X -> AGGADG2BIX85UAQM80BBQM80BBBM9X\n    return approver.split(RX_APPROVAL_CONFIGURATION.levelSeparator)[1];\n  }\n\n  isApproverPeople(approver: string): boolean {\n    // check if approver is a User, returns true for 'U[:]abc'\n    return approver.includes(RX_APPROVAL_CONFIGURATION.approverFormatPrefixes.people);\n  }\n\n  getApproverUser(approver: string): string {\n    // 'U[:]abc' -> abc\n    return approver.split(RX_APPROVAL_CONFIGURATION.levelSeparator)[1];\n  }\n\n  isFieldIdentifyingApprover(approver: string): boolean {\n    // checks if string is surrounded by $ e.g. $Display ID$\n    return Boolean(approver.match(/\\$(.*?)\\$/g));\n  }\n\n  getFieldIdentifyingApprover(approver: string): string {\n    // $Display ID$ -> Display ID\n    return trim(approver, '$');\n  }\n\n  getLastLabel(approver: string): string {\n    // finds approver name from hierarchy format e.g. returns Payroll from COMORGDEPT[:]Calbro Services[:]Human Resources[:]Payroll\n    return approver.split(RX_APPROVAL_CONFIGURATION.levelSeparator).pop();\n  }\n\n  isCompany(approver: string): boolean {\n    // true when Approver value is prefixed by COM e.g. COM[:]Calbro Services\n    return (\n      approver.split(RX_APPROVAL_CONFIGURATION.levelSeparator)[0] ===\n      RX_APPROVAL_CONFIGURATION.approverFormatPrefixes.company\n    );\n  }\n\n  isCompanyOrg(approver: string): boolean {\n    // true when Approver value is prefixed by COMORG e.g. COMORG[:]Calbro Services[:]Human Resources\n    return (\n      approver.split(RX_APPROVAL_CONFIGURATION.levelSeparator)[0] ===\n      RX_APPROVAL_CONFIGURATION.approverFormatPrefixes.companyOrg\n    );\n  }\n\n  isCompanyOrgDept(approver: string): boolean {\n    // true when Approver value is prefixed by COMORGDEPT i.e. value is a department with hierarchy e.g. COMORGDEPT[:]Calbro Services[:]Human Resources[:]Payroll\n    return (\n      approver.split(RX_APPROVAL_CONFIGURATION.levelSeparator)[0] ===\n      RX_APPROVAL_CONFIGURATION.approverFormatPrefixes.companyOrgDept\n    );\n  }\n\n  isSupportCompany(approver: string): boolean {\n    // true when Approver value is prefixed by SCOM e.g. SCOM[:]Calbro Services\n    return (\n      approver.split(RX_APPROVAL_CONFIGURATION.levelSeparator)[0] ===\n      RX_APPROVAL_CONFIGURATION.approverFormatPrefixes.supportCompany\n    );\n  }\n\n  isSupportCompanyOrg(approver: string): boolean {\n    // true when Approver value is prefixed by SCOMSORG e.g. SCOMSORG[:]Calbro Services[:]IT Support\n    return (\n      approver.split(RX_APPROVAL_CONFIGURATION.levelSeparator)[0] ===\n      RX_APPROVAL_CONFIGURATION.approverFormatPrefixes.supportCompanyOrg\n    );\n  }\n\n  isSupportCompanyOrgGroup(approver: string): boolean {\n    // true when Approver value is prefixed by SCOMSORGSGRP e.g. SCOMSORGSGRP[:]Calbro Services[:]IT Support[:]Backoffice Support\n    return (\n      approver.split(RX_APPROVAL_CONFIGURATION.levelSeparator)[0] ===\n      RX_APPROVAL_CONFIGURATION.approverFormatPrefixes.supportCompanyOrgGroup\n    );\n  }\n}\n","import { flatten } from '@angular/compiler';\nimport { ErrorHandler, Injector } from '@angular/core';\nimport {\n  IAssociationTree,\n  IAssociationTreeNode,\n  RxAssociationNodeTreeDataPageService\n} from '@helix/platform/association/api';\nimport { IFieldDefinition, IRecordDefinition, RxRecordDefinitionCacheService } from '@helix/platform/record/api';\nimport {\n  IDataDictionary,\n  IExpressionConfigurator,\n  RxDefinitionNameService,\n  RxExpressionConfigurator\n} from '@helix/platform/shared/api';\nimport { RxTreeService } from '@helix/platform/utils';\nimport { TranslateService } from '@ngx-translate/core';\nimport { find, flow, forEach } from 'lodash';\nimport { combineLatest, forkJoin, Observable, of } from 'rxjs';\nimport { catchError, map, shareReplay, switchMap } from 'rxjs/operators';\nimport { RxApprovalConfigurationService } from '../approval-configuration.service';\nimport { IAssociationsByDefinitionName, IDataParams } from '../approval-configuration.types';\n\nexport class RxApprovalExpressionConfigurator extends RxExpressionConfigurator implements IExpressionConfigurator {\n  private translateService = this.injector.get(TranslateService);\n  private rxDefinitionNameService = this.injector.get(RxDefinitionNameService);\n  private rxRecordDefinitionCacheService = this.injector.get(RxRecordDefinitionCacheService);\n  private rxAssociationNodeTreeDataPageService = this.injector.get(RxAssociationNodeTreeDataPageService);\n  private rxTreeService = this.injector.get(RxTreeService);\n  private rxApprovalConfigurationService = this.injector.get(RxApprovalConfigurationService);\n  private errorHandler = this.injector.get(ErrorHandler);\n\n  constructor(private injector: Injector) {\n    super();\n  }\n\n  commonDataDictionary$: Observable<IDataDictionary> = of([\n    {\n      label: this.translateService.instant('com.bmc.arsys.rx.client.common.general-items.label'),\n      children: [\n        {\n          label: this.translateService.instant(\n            'com.bmc.arsys.rx.client.approval.expression-editor.data-dictionary.values.general-group.pill.current-user.title'\n          ),\n          icon: 'd-icon-dollar',\n          expression: '$USER$'\n        },\n        {\n          label: this.translateService.instant(\n            'com.bmc.arsys.rx.client.approval.expression-editor.data-dictionary.values.general-group.pill.current-date.title'\n          ),\n          icon: 'd-icon-dollar',\n          expression: '$DATE$'\n        },\n        {\n          label: this.translateService.instant(\n            'com.bmc.arsys.rx.client.approval.expression-editor.data-dictionary.values.general-group.pill.current-time.title'\n          ),\n          icon: 'd-icon-dollar',\n          expression: '$TIME$'\n        },\n        {\n          label: this.translateService.instant(\n            'com.bmc.arsys.rx.client.approval.expression-editor.data-dictionary.values.general-group.pill.current-date-time.title'\n          ),\n          icon: 'd-icon-dollar',\n          expression: '$TIMESTAMP$'\n        }\n      ]\n    }\n  ]);\n\n  approvalExpressionDataDictionary(currentRecordDefinitionName): Observable<IDataDictionary> {\n    const queryParams = {\n      recorddefinition: currentRecordDefinitionName\n    };\n\n    return combineLatest([\n      this.rxAssociationNodeTreeDataPageService.get({ params: queryParams }),\n      this.commonDataDictionary$\n    ]).pipe(\n      switchMap(([associationNodeTreeDataPage, commonDataDictionary]) => {\n        const associations = associationNodeTreeDataPage.data as IAssociationTree[];\n\n        const associatedRecordDefinitionNames = flow(\n          (approvalAssociations) =>\n            approvalAssociations.map((tree: IAssociationTree) =>\n              this.rxTreeService.flattenTree(tree, 'children').map((association: IAssociationTree) => association.value)\n            ),\n          flatten,\n          (approvalAssociations) =>\n            approvalAssociations.map((association: IAssociationTreeNode) => association.recordDefinitionName)\n        )(associations);\n\n        const definitionRequests$: Observable<IRecordDefinition>[] = [\n          this.rxRecordDefinitionCacheService.getRecordDefinition(currentRecordDefinitionName)\n        ];\n\n        forEach(associatedRecordDefinitionNames, (definitionName: string) => {\n          definitionRequests$.push(this.rxRecordDefinitionCacheService.getRecordDefinition(definitionName));\n        });\n\n        return forkJoin(definitionRequests$).pipe(\n          map((definitions) => {\n            const params: IDataParams = {\n              definitionName: currentRecordDefinitionName,\n              definitions,\n              associationsByDefinition: {\n                [currentRecordDefinitionName]: associations\n              }\n            };\n\n            return [\n              {\n                label: this.translateService.instant(\n                  'com.bmc.arsys.rx.client.approval.expression-editor.data-dictionary.values.record-definition.title'\n                ),\n                children: [\n                  {\n                    label: this.rxDefinitionNameService.getDisplayName(currentRecordDefinitionName),\n                    children: this.getRecordDefinitionDataDictionary(params)\n                  }\n                ]\n              },\n              ...commonDataDictionary\n            ];\n          })\n        );\n      }),\n      shareReplay(1)\n    );\n  }\n\n  private getRecordDefinitionDataDictionary(params: IDataParams): IDataDictionary {\n    const recordDefinition = find(params.definitions, { name: params.definitionName });\n\n    const fields: IDataDictionary = recordDefinition.fieldDefinitions.map((field: IFieldDefinition) => ({\n      label: field.name,\n      icon: 'd-icon-field_text',\n      expression: params.association\n        ? '${recordContext' +\n          `${params.parentAssociationExpression || ''}._associations.` +\n          `${params.association.value.associationDefintionGuid}.${params.association.value.nodeSide}[0].${field.id}}`\n        : `'${field.name}'`\n    }));\n\n    if (params.associationsByDefinition && params.associationsByDefinition[recordDefinition.name]) {\n      const associatedFields = this.getAssociationDataDictionary(params);\n\n      if (associatedFields.length) {\n        fields.unshift({\n          label: this.translateService.instant(\n            'com.bmc.arsys.rx.client.approval.expression-editor.data-dictionary.values.record-definition-associations.title'\n          ),\n          children: associatedFields\n        });\n      }\n    }\n\n    return fields;\n  }\n\n  private getAssociationDataDictionary(params: IDataParams): IDataDictionary {\n    const associations: IDataDictionary = [];\n\n    if (params.associationsByDefinition[params.definitionName].length) {\n      forEach(params.associationsByDefinition[params.definitionName], (association) => {\n        let parentAssociationExpression = '';\n        const nextDefinitionAssociations: IAssociationsByDefinitionName = {};\n\n        if (params.association) {\n          parentAssociationExpression = `._associations.${params.association.value.associationDefintionGuid}.${params.association.value.nodeSide}[0]`;\n        }\n\n        const currentAssociation: IAssociationTree = find(\n          params.associationsByDefinition[params.definitionName],\n          (item: IAssociationTree) => {\n            return item.value.recordDefinitionName === association.value.recordDefinitionName;\n          }\n        );\n\n        if (currentAssociation) {\n          nextDefinitionAssociations[association.value.recordDefinitionName] = currentAssociation.children;\n        }\n\n        associations.push({\n          label:\n            association.value.nodeName !== association.value.recordDefinitionName\n              ? `${this.rxDefinitionNameService.getDisplayName(\n                  association.value.recordDefinitionName\n                )} (${this.rxDefinitionNameService.getDisplayName(association.value.nodeName)})`\n              : this.rxDefinitionNameService.getDisplayName(association.value.nodeName),\n          children: this.getRecordDefinitionDataDictionary({\n            definitionName: association.value.recordDefinitionName,\n            definitions: params.definitions,\n            associationsByDefinition: nextDefinitionAssociations,\n            association,\n            parentAssociationExpression\n          }),\n          expression:\n            `\\${recordContext${parentAssociationExpression}._associations.` +\n            `${association.value.associationDefintionGuid}.${association.value.nodeSide}[0]}`\n        });\n      });\n    }\n\n    return associations;\n  }\n\n  getCtmPeopleFormFields(registeredRecordDefinitionName: string): Observable<IDataDictionary> {\n    return combineLatest([\n      this.rxApprovalConfigurationService\n        .getCtmPeopleFormFields(this.rxDefinitionNameService.getBundleId(registeredRecordDefinitionName || ''))\n        .pipe(\n          catchError((error) => {\n            this.errorHandler.handleError(error);\n\n            return of(null);\n          })\n        ),\n      this.commonDataDictionary$\n    ]).pipe(\n      map(([ctmPeopleDefinition, commonDataDictionary]) => {\n        const dictionary = [...commonDataDictionary];\n\n        if (ctmPeopleDefinition) {\n          dictionary.unshift({\n            label: this.translateService.instant(\n              'com.bmc.arsys.rx.client.approval.configuration.flow.approvers.types.people.label'\n            ),\n            children: ctmPeopleDefinition.fieldDefinitions.map((field: IFieldDefinition) => ({\n              label: field.name,\n              icon: 'd-icon-field_text',\n              expression: `'${field.name}'`\n            }))\n          });\n        }\n\n        return dictionary;\n      }),\n      shareReplay(1)\n    );\n  }\n}\n","import { Injectable, Injector } from '@angular/core';\nimport { DataPage } from '@helix/platform/shared/api';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class RxOrganizationDataPageService extends DataPage {\n  constructor(private injector: Injector) {\n    super(injector, 'com.bmc.arsys.rx.approval.application.datapage.OrganizationDataPageQuery');\n  }\n}\n","import { Injectable, Injector } from '@angular/core';\nimport { DataPage } from '@helix/platform/shared/api';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class RxSupportOrganizationDataPageService extends DataPage {\n  constructor(private injector: Injector) {\n    super(injector, 'com.bmc.arsys.rx.approval.application.datapage.SupportOrganizationDataPageQuery');\n  }\n}\n","import { Component, Injector, OnInit, QueryList, ViewChildren } from '@angular/core';\r\nimport {\r\n  ActiveModalRef,\r\n  AdaptTreeComponent,\r\n  AdaptTreeNode,\r\n  DismissReasons,\r\n  RxSelectOption,\r\n  TreeWrap\r\n} from '@bmc-ux/adapt-angular';\r\nimport {\r\n  IFieldDefinition,\r\n  IRecordDefinition,\r\n  RxRecordDefinitionCacheService,\r\n  RxRecordInstanceUtilsService,\r\n  RxRecordInstanceDataPageService\r\n} from '@helix/platform/record/api';\r\nimport {\r\n  IDataPageParams,\r\n  IDataPageResult,\r\n  IFunctionalRoleDescriptor,\r\n  RxDataPageFactoryService,\r\n  RxGlobalCacheService\r\n} from '@helix/platform/shared/api';\r\nimport {\r\n  IRxSelectWithPaginationOption,\r\n  IRxSelectWithPaginationOptionsPage,\r\n  RxSelectWithPaginationComponent\r\n} from '@helix/platform/shared/components';\r\nimport { RX_MODAL, RxModalClass, RxModalService } from '@helix/platform/ui-kit';\r\nimport { RxTreeService } from '@helix/platform/utils';\r\nimport { TranslateService } from '@ngx-translate/core';\r\nimport {\r\n  find,\r\n  flatten,\r\n  flow,\r\n  forEach,\r\n  get,\r\n  groupBy,\r\n  isUndefined,\r\n  join,\r\n  map as _map,\r\n  remove,\r\n  some,\r\n  sumBy,\r\n  take,\r\n  uniqBy\r\n} from 'lodash';\r\nimport { forkJoin, Observable, Subscription } from 'rxjs';\r\nimport { map, tap } from 'rxjs/operators';\r\nimport { RX_APPROVAL_CONFIGURATION } from '../approval-configuration.constant';\r\nimport { RxApprovalConfigurationService } from '../approval-configuration.service';\r\nimport {\r\n  IAppRoles,\r\n  IField,\r\n  IFieldResponse,\r\n  IOrgInfo,\r\n  IRole,\r\n  ISelectedApprover,\r\n  IUserInfo\r\n} from '../approval-configuration.types';\r\nimport { RxOrganizationDataPageService } from './organization-data-page.service';\r\nimport { RxSupportOrganizationDataPageService } from './support-organization-data-page.service';\r\n\r\n@Component({\r\n  selector: 'rx-flow-approvers-selector',\r\n  templateUrl: './flow-approvers-selector.component.html',\r\n  styleUrls: ['./flow-approvers-selector.component.scss']\r\n})\r\nexport class FlowApproversSelectorComponent extends RxModalClass implements OnInit {\r\n  constructor(\r\n    private rxTreeService: RxTreeService,\r\n    public activeModalRef: ActiveModalRef,\r\n    private rxModalService: RxModalService,\r\n    private translateService: TranslateService,\r\n    private rxGlobalCacheService: RxGlobalCacheService,\r\n    private rxRecordInstanceUtilsService: RxRecordInstanceUtilsService,\r\n    private rxOrganizationDataPageService: RxOrganizationDataPageService,\r\n    private rxSupportOrganizationDataPageService: RxSupportOrganizationDataPageService,\r\n    private rxApprovalConfigurationService: RxApprovalConfigurationService,\r\n    private rxRecordDefinitionCacheService: RxRecordDefinitionCacheService,\r\n    private rxRecordInstanceDataPageService: RxRecordInstanceDataPageService,\r\n    protected injector: Injector\r\n  ) {\r\n    super(activeModalRef, injector);\r\n  }\r\n\r\n  approverType: RxSelectOption;\r\n  approverTypes: RxSelectOption[] = [];\r\n\r\n  selectedApproverSelection: AdaptTreeNode[] = [];\r\n  selectedApprovers: AdaptTreeNode[] = [];\r\n\r\n  invalidMsg: string;\r\n  busy: Subscription;\r\n  hasUserInteracted: boolean;\r\n\r\n  selectedCompanies: IRxSelectWithPaginationOption[] = [];\r\n  selectedOrganizations: IRxSelectWithPaginationOption[] = [];\r\n  selectedDepartments: IRxSelectWithPaginationOption[] = [];\r\n\r\n  selectedSupportCompanies: IRxSelectWithPaginationOption[] = [];\r\n  selectedSupportOrganizations: IRxSelectWithPaginationOption[] = [];\r\n  selectedSupportGroups: IRxSelectWithPaginationOption[] = [];\r\n\r\n  loadingMore = false;\r\n  private pageSize = 50;\r\n  userSearchTextInput: string;\r\n  loadedUsers: IUserInfo[] = [];\r\n  showLoadMoreButton = true;\r\n  private startIndex: number;\r\n  treeWrap: TreeWrap = TreeWrap.WrapAll;\r\n\r\n  availableFields: IField[] = [];\r\n  availableFunctionRolesByApplication: IAppRoles[] = [];\r\n\r\n  @ViewChildren('paginationComponents')\r\n  paginationComponents: QueryList<RxSelectWithPaginationComponent>;\r\n  shouldShowTree = true;\r\n\r\n  @ViewChildren('tree')\r\n  tree: QueryList<AdaptTreeComponent>;\r\n\r\n  separatorArrow = ' > ';\r\n\r\n  companyLoaderFunc = this.companyLoader.bind(this);\r\n  organizationLoaderFunc = this.organizationLoader.bind(this);\r\n  departmentLoaderFunc = this.departmentLoader.bind(this);\r\n  supportOrganizationLoaderFunc = this.supportOrganizationLoader.bind(this);\r\n  supportGroupLoaderFunc = this.supportGroupLoader.bind(this);\r\n\r\n  isDirty(): boolean {\r\n    return this.hasUserInteracted;\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    super.ngOnInit();\r\n    this.loadUsers();\r\n    this.loadFunctionalRoles();\r\n    this.loadFieldIdentifyingApproversApprovers();\r\n\r\n    this.approverTypes = [\r\n      {\r\n        value: RX_APPROVAL_CONFIGURATION.approverTypes.company,\r\n        displayValue: this.translateService.instant(\r\n          'com.bmc.arsys.rx.client.approval.configuration.flow.approvers.types.company.label'\r\n        ),\r\n        disabled: this.activeModalRef.getData().isFieldIdentifyingApprover\r\n      },\r\n      {\r\n        value: RX_APPROVAL_CONFIGURATION.approverTypes.fieldIdentifying,\r\n        displayValue: this.translateService.instant('com.bmc.arsys.rx.client.approval.configuration.field.identifying')\r\n      },\r\n      {\r\n        value: RX_APPROVAL_CONFIGURATION.approverTypes.functionalRole,\r\n        displayValue: this.translateService.instant('com.bmc.arsys.rx.client.approval.configuration.functional.roles'),\r\n        disabled: this.activeModalRef.getData().isFieldIdentifyingApprover\r\n      },\r\n      {\r\n        value: RX_APPROVAL_CONFIGURATION.approverTypes.people,\r\n        displayValue: this.translateService.instant(\r\n          'com.bmc.arsys.rx.client.approval.configuration.flow.approvers.types.people.label'\r\n        ),\r\n        disabled: this.activeModalRef.getData().isFieldIdentifyingApprover\r\n      },\r\n      {\r\n        value: RX_APPROVAL_CONFIGURATION.approverTypes.supportCompany,\r\n        displayValue: this.translateService.instant(\r\n          'com.bmc.arsys.rx.client.approval.configuration.flow.approvers.types.support-company.label'\r\n        ),\r\n        disabled: this.activeModalRef.getData().isFieldIdentifyingApprover\r\n      }\r\n    ];\r\n\r\n    this.invalidMsg = this.translateService.instant(\r\n      'com.bmc.arsys.rx.client.approval.configuration.field.identifying.warning'\r\n    );\r\n\r\n    this.approverType = [\r\n      find(this.approverTypes, {\r\n        value: this.activeModalRef.getData().isFieldIdentifyingApprover\r\n          ? RX_APPROVAL_CONFIGURATION.approverTypes.fieldIdentifying\r\n          : RX_APPROVAL_CONFIGURATION.approverTypes.functionalRole\r\n      })\r\n    ];\r\n  }\r\n\r\n  switchApproversTree(): void {\r\n    this.selectedCompanies = [];\r\n    this.selectedOrganizations = [];\r\n    this.selectedDepartments = [];\r\n    this.selectedSupportCompanies = [];\r\n    this.selectedSupportOrganizations = [];\r\n    this.selectedSupportGroups = [];\r\n\r\n    this.availableFunctionRolesByApplication.forEach((application: IAppRoles) => {\r\n      application.roles.map((role: IRole) => (role.selected = false));\r\n    });\r\n\r\n    this.loadedUsers.map((user: IUserInfo) => (user.selected = false));\r\n    this.availableFields.map((field: IField) => (field.selected = false));\r\n  }\r\n\r\n  private companyLoader(\r\n    startIndex: number,\r\n    pageSize: number,\r\n    searchQuery: string\r\n  ): Observable<IRxSelectWithPaginationOptionsPage> {\r\n    const queryParams: IDataPageParams = {\r\n      startIndex: startIndex,\r\n      pageSize: pageSize,\r\n      recorddefinition: 'COM:Company',\r\n      propertySelection: [RX_APPROVAL_CONFIGURATION.approverFields.companyField]\r\n    };\r\n\r\n    if (searchQuery) {\r\n      queryParams.queryExpression = this.getAdditionalQueryExpression(\r\n        searchQuery,\r\n        RX_APPROVAL_CONFIGURATION.approverFields.companyField\r\n      );\r\n    }\r\n\r\n    return this.rxRecordInstanceDataPageService\r\n      .post({\r\n        params: { startIndex, pageSize, ...queryParams }\r\n      })\r\n      .pipe(\r\n        map((companyList) => ({\r\n          totalSize: companyList.totalSize,\r\n          options: companyList.data.map((item: IFieldResponse) => ({\r\n            displayValue: item[RX_APPROVAL_CONFIGURATION.approverFields.companyField],\r\n            value: this.getCompanyDataFormat(item[RX_APPROVAL_CONFIGURATION.approverFields.companyField])\r\n          }))\r\n        }))\r\n      );\r\n  }\r\n\r\n  getCompanyDataFormat(companyName: string): string {\r\n    return `${RX_APPROVAL_CONFIGURATION.approverFormatPrefixes.company}${RX_APPROVAL_CONFIGURATION.levelSeparator}${companyName}`;\r\n  }\r\n\r\n  onToggleDropdown(isOpen: boolean) {\r\n    if (!isOpen) {\r\n      this.resetLoadedOptions();\r\n    }\r\n  }\r\n\r\n  resetLoadedOptions() {\r\n    this.paginationComponents\r\n      .toArray()\r\n      .forEach((component: RxSelectWithPaginationComponent) => component.resetLoadedOptions());\r\n  }\r\n\r\n  private organizationLoader(\r\n    startIndex: number,\r\n    pageSize: number,\r\n    searchQuery: string\r\n  ): Observable<IRxSelectWithPaginationOptionsPage> {\r\n    const queryParams: IDataPageParams = {\r\n      startIndex: startIndex,\r\n      pageSize: pageSize\r\n    };\r\n\r\n    if (searchQuery) {\r\n      queryParams.organization = searchQuery;\r\n    } else {\r\n      queryParams.queryExpression = this.getDefaultSearchExpression();\r\n    }\r\n\r\n    if (this.selectedCompanies.length === 1) {\r\n      queryParams.company = this.selectedCompanies[0].displayValue;\r\n    }\r\n\r\n    return this.rxOrganizationDataPageService\r\n      .get({\r\n        params: { startIndex, pageSize, ...queryParams }\r\n      })\r\n      .pipe(\r\n        map((response: IDataPageResult) => ({\r\n          totalSize: response.totalSize,\r\n          options: response.data.map((item: IOrgInfo) => ({\r\n            displayValue: item.organization,\r\n            value: item.company\r\n          }))\r\n        }))\r\n      );\r\n  }\r\n\r\n  private departmentLoader(\r\n    startIndex: number,\r\n    pageSize: number,\r\n    searchQuery: string\r\n  ): Observable<IRxSelectWithPaginationOptionsPage> {\r\n    const queryParams: IDataPageParams = {\r\n      recorddefinition: 'CTM:People Organization',\r\n      propertySelection: [\r\n        RX_APPROVAL_CONFIGURATION.approverFields.companyField,\r\n        RX_APPROVAL_CONFIGURATION.approverFields.organizationField,\r\n        RX_APPROVAL_CONFIGURATION.approverFields.departmentField\r\n      ]\r\n    };\r\n\r\n    const queryList: string[] = [];\r\n\r\n    if (searchQuery) {\r\n      queryList.push(\r\n        this.getAdditionalQueryExpression(searchQuery, RX_APPROVAL_CONFIGURATION.approverFields.departmentField)\r\n      );\r\n    }\r\n\r\n    if (this.selectedCompanies.length === 1) {\r\n      queryList.push(\r\n        this.getAdditionalQueryExpression(\r\n          this.selectedCompanies[0].displayValue,\r\n          RX_APPROVAL_CONFIGURATION.approverFields.companyField,\r\n          true\r\n        )\r\n      );\r\n    }\r\n\r\n    if (this.selectedOrganizations.length === 1) {\r\n      queryList.push(\r\n        this.getAdditionalQueryExpression(\r\n          this.selectedOrganizations[0].displayValue,\r\n          RX_APPROVAL_CONFIGURATION.approverFields.organizationField,\r\n          true\r\n        )\r\n      );\r\n    }\r\n\r\n    queryParams.queryExpression = queryList.join(' AND ');\r\n\r\n    return this.rxRecordInstanceDataPageService\r\n      .post({\r\n        params: { startIndex, pageSize, ...queryParams }\r\n      })\r\n      .pipe(\r\n        map((response: IDataPageResult) => ({\r\n          totalSize: response.totalSize,\r\n          options: response.data.map((item: IFieldResponse) => ({\r\n            displayValue: item[RX_APPROVAL_CONFIGURATION.approverFields.departmentField],\r\n            value: item[RX_APPROVAL_CONFIGURATION.approverFields.companyField],\r\n            organization: item[RX_APPROVAL_CONFIGURATION.approverFields.organizationField]\r\n          }))\r\n        }))\r\n      );\r\n  }\r\n\r\n  private supportOrganizationLoader(\r\n    startIndex: number,\r\n    pageSize: number,\r\n    searchQuery: string\r\n  ): Observable<IRxSelectWithPaginationOptionsPage> {\r\n    const queryParams: IDataPageParams = {\r\n      startIndex: startIndex,\r\n      pageSize: pageSize\r\n    };\r\n\r\n    if (searchQuery) {\r\n      queryParams.supportOrganization = searchQuery;\r\n    } else {\r\n      queryParams.queryExpression = this.getDefaultSearchExpression();\r\n    }\r\n\r\n    if (this.selectedSupportCompanies.length === 1) {\r\n      queryParams.company = this.selectedSupportCompanies[0].displayValue;\r\n    }\r\n\r\n    return this.rxSupportOrganizationDataPageService\r\n      .get({\r\n        params: { startIndex, pageSize, ...queryParams }\r\n      })\r\n      .pipe(\r\n        map((response: IDataPageResult) => ({\r\n          totalSize: response.totalSize,\r\n          options: response.data.map((item: IOrgInfo) => ({\r\n            displayValue: item.supportOrganization,\r\n            value: item.company\r\n          }))\r\n        }))\r\n      );\r\n  }\r\n\r\n  private supportGroupLoader(\r\n    startIndex: number,\r\n    pageSize: number,\r\n    searchQuery: string\r\n  ): Observable<IRxSelectWithPaginationOptionsPage> {\r\n    const queryParams: IDataPageParams = {\r\n      recorddefinition: 'CTM:Support Group',\r\n      propertySelection: [\r\n        RX_APPROVAL_CONFIGURATION.approverFields.companyField,\r\n        RX_APPROVAL_CONFIGURATION.approverFields.supportOrgField,\r\n        RX_APPROVAL_CONFIGURATION.approverFields.supportGroupField\r\n      ]\r\n    };\r\n\r\n    const queryList: string[] = [];\r\n\r\n    if (searchQuery) {\r\n      queryList.push(\r\n        this.getAdditionalQueryExpression(searchQuery, RX_APPROVAL_CONFIGURATION.approverFields.supportGroupField)\r\n      );\r\n    }\r\n\r\n    if (this.selectedSupportCompanies.length === 1) {\r\n      queryList.push(\r\n        this.getAdditionalQueryExpression(\r\n          this.selectedSupportCompanies[0].displayValue,\r\n          RX_APPROVAL_CONFIGURATION.approverFields.companyField,\r\n          true\r\n        )\r\n      );\r\n    }\r\n\r\n    if (this.selectedSupportOrganizations.length === 1) {\r\n      queryList.push(\r\n        this.getAdditionalQueryExpression(\r\n          this.selectedSupportOrganizations[0].displayValue,\r\n          RX_APPROVAL_CONFIGURATION.approverFields.supportOrgField,\r\n          true\r\n        )\r\n      );\r\n    }\r\n\r\n    queryParams.queryExpression = queryList.join(' AND ');\r\n\r\n    return this.rxRecordInstanceDataPageService\r\n      .post({\r\n        params: { startIndex, pageSize, ...queryParams }\r\n      })\r\n      .pipe(\r\n        map((response: IDataPageResult) => ({\r\n          totalSize: response.totalSize,\r\n          options: response.data.map((item: IFieldResponse) => ({\r\n            displayValue: item[RX_APPROVAL_CONFIGURATION.approverFields.supportGroupField],\r\n            value: item[RX_APPROVAL_CONFIGURATION.approverFields.companyField],\r\n            organization: item[RX_APPROVAL_CONFIGURATION.approverFields.supportOrgField]\r\n          }))\r\n        }))\r\n      );\r\n  }\r\n\r\n  private getAdditionalQueryExpression(searchQuery: string, fieldId: number, isEqualitySearch?: boolean): string {\r\n    return isEqualitySearch\r\n      ? `('${fieldId}' = \"${searchQuery.replace(/\"/g, '\"\"')}\")`\r\n      : `('${fieldId}' LIKE \"%${this.rxRecordInstanceUtilsService.escapeTextWildcards(searchQuery)}%\")`;\r\n  }\r\n\r\n  loadUsers(inputEvent?: string): void {\r\n    const queryParams: IDataPageParams = {\r\n      recorddefinition: 'CTM:People',\r\n      propertySelection: [\r\n        RX_APPROVAL_CONFIGURATION.approverFields.firstName,\r\n        RX_APPROVAL_CONFIGURATION.approverFields.lastName,\r\n        RX_APPROVAL_CONFIGURATION.approverFields.remedyLoginId\r\n      ],\r\n      sortBy: RX_APPROVAL_CONFIGURATION.approverFields.firstName\r\n    };\r\n\r\n    this.startIndex = !isUndefined(this.startIndex) ? this.startIndex + this.pageSize : 0;\r\n    this.loadingMore = true;\r\n\r\n    if (!isUndefined(inputEvent)) {\r\n      this.startIndex = 0;\r\n      this.loadedUsers = [];\r\n    }\r\n\r\n    if (this.userSearchTextInput) {\r\n      queryParams.queryExpression = this.getUserQueryExpression();\r\n    }\r\n\r\n    this.rxRecordInstanceDataPageService\r\n      .post({\r\n        params: {\r\n          pageSize: this.pageSize,\r\n          startIndex: this.startIndex,\r\n          ...queryParams\r\n        }\r\n      })\r\n      .subscribe((response: IDataPageResult) => {\r\n        this.loadedUsers = this.loadedUsers.concat(response.data as IUserInfo[]);\r\n        this.showLoadMoreButton = response.totalSize > this.loadedUsers.length;\r\n        this.loadingMore = false;\r\n      });\r\n  }\r\n\r\n  private getUserQueryExpression(): string {\r\n    return this.userSearchTextInput\r\n      ? `('${\r\n          RX_APPROVAL_CONFIGURATION.approverFields.firstName\r\n        }' LIKE \"%${this.rxRecordInstanceUtilsService.escapeTextWildcards(this.userSearchTextInput)}%\") OR ('${\r\n          RX_APPROVAL_CONFIGURATION.approverFields.lastName\r\n        }' LIKE \"%${this.rxRecordInstanceUtilsService.escapeTextWildcards(this.userSearchTextInput)}%\") OR ('${\r\n          RX_APPROVAL_CONFIGURATION.approverFields.remedyLoginId\r\n        }' LIKE \"%${this.rxRecordInstanceUtilsService.escapeTextWildcards(this.userSearchTextInput)}%\")`\r\n      : null;\r\n  }\r\n\r\n  loadFunctionalRoles(): void {\r\n    forkJoin([\r\n      this.rxApprovalConfigurationService.getFunctionalRoles(),\r\n      this.rxGlobalCacheService.getBundleDescriptors()\r\n    ])\r\n      .pipe(\r\n        tap(([functionalRoles, bundleDescriptors]) => {\r\n          const globalLabel = this.translateService.instant('com.bmc.arsys.rx.client.common.global-items.label');\r\n          this.addExistingApproversToSelectedTree(functionalRoles);\r\n\r\n          this.availableFunctionRolesByApplication = flow(\r\n            (roles: IFunctionalRoleDescriptor[]) =>\r\n              _map(roles, (role: IFunctionalRoleDescriptor) => {\r\n                const bundleDescriptor = find(bundleDescriptors, { id: role.applicationName });\r\n\r\n                return {\r\n                  ...role,\r\n                  applicationName: bundleDescriptor?.friendlyName || bundleDescriptor?.id || globalLabel\r\n                };\r\n              }),\r\n            (roles: IFunctionalRoleDescriptor[]) => groupBy(roles, 'applicationName'),\r\n            (rolesByApplicationName) =>\r\n              _map(rolesByApplicationName, (roles, applicationName) => ({\r\n                applicationName,\r\n                roles: _map(roles, (role: IFunctionalRoleDescriptor) => ({\r\n                  id: role.id,\r\n                  name: role.name,\r\n                  selected: false\r\n                })).sort((a, b) => a.name.localeCompare(b.name))\r\n              })).sort((a, b) => a.applicationName.localeCompare(b.applicationName))\r\n          )(functionalRoles as IFunctionalRoleDescriptor[]);\r\n        })\r\n      )\r\n      .subscribe();\r\n  }\r\n\r\n  removeApproversFromSelection(): void {\r\n    this.hasUserInteracted = true;\r\n\r\n    forEach(this.selectedApprovers, (node: AdaptTreeNode) => {\r\n      remove(node.children, (childNode) => this.tree.first.isSelected(childNode));\r\n    });\r\n\r\n    this.selectedApprovers = this.selectedApprovers.filter((node: AdaptTreeNode) => node.children.length);\r\n    this.selectedApproverSelection = [];\r\n    this.reloadTree();\r\n  }\r\n\r\n  private getNode(label: string, key: string, data: string): AdaptTreeNode {\r\n    return {\r\n      label,\r\n      key,\r\n      data\r\n    };\r\n  }\r\n\r\n  getFunctionalRoleDataFormat(guid): string {\r\n    return `${RX_APPROVAL_CONFIGURATION.approverFormatPrefixes.functionalRole}${guid}`;\r\n  }\r\n\r\n  private transformFunctionRolesToNodeStructure(): AdaptTreeNode[] {\r\n    const roles = [];\r\n\r\n    this.availableFunctionRolesByApplication.forEach((application: IAppRoles) =>\r\n      application.roles\r\n        .filter((role: IRole) => role.selected)\r\n        .forEach((selectedRole: IRole) =>\r\n          roles.push(\r\n            this.getNode(\r\n              `${selectedRole.name}`,\r\n              `${selectedRole.id}`,\r\n              this.getFunctionalRoleDataFormat(selectedRole.id)\r\n            )\r\n          )\r\n        )\r\n    );\r\n\r\n    return roles;\r\n  }\r\n\r\n  private transformFieldsToNodeStructure(): AdaptTreeNode[] {\r\n    return this.availableFields\r\n      .filter((field: IField) => field.selected)\r\n      .map((selectedField: IField) =>\r\n        this.getNode(`${selectedField.name}`, `${selectedField.name}`, `$${selectedField.name}$`)\r\n      );\r\n  }\r\n\r\n  private getPeopleDataFormat(userId: string): string {\r\n    return `${RX_APPROVAL_CONFIGURATION.approverFormatPrefixes.people}${userId}`;\r\n  }\r\n\r\n  private transformPeopleToNodeStructure(): AdaptTreeNode[] {\r\n    return this.loadedUsers\r\n      .filter((user: IUserInfo) => user.selected)\r\n      .map((selectedUser: IUserInfo) =>\r\n        this.getNode(\r\n          `${selectedUser[RX_APPROVAL_CONFIGURATION.approverFields.firstName]} ${\r\n            selectedUser[RX_APPROVAL_CONFIGURATION.approverFields.lastName]\r\n          }`,\r\n          `${selectedUser[4]}`,\r\n          this.getPeopleDataFormat(selectedUser[RX_APPROVAL_CONFIGURATION.approverFields.remedyLoginId])\r\n        )\r\n      );\r\n  }\r\n\r\n  private getOrgDataFormat(company: string, org: string): string {\r\n    return `${RX_APPROVAL_CONFIGURATION.approverFormatPrefixes.companyOrg}${RX_APPROVAL_CONFIGURATION.levelSeparator}${company}${RX_APPROVAL_CONFIGURATION.levelSeparator}${org}`;\r\n  }\r\n\r\n  getDeptDataFormat(company: string, org: string, dept: string): string {\r\n    return `${RX_APPROVAL_CONFIGURATION.approverFormatPrefixes.companyOrgDept}${RX_APPROVAL_CONFIGURATION.levelSeparator}${company}${RX_APPROVAL_CONFIGURATION.levelSeparator}${org}${RX_APPROVAL_CONFIGURATION.levelSeparator}${dept}`;\r\n  }\r\n\r\n  getSupportOrgDataFormat(supportCompany: string, supportOrg: string): string {\r\n    return `${RX_APPROVAL_CONFIGURATION.approverFormatPrefixes.supportCompanyOrg}${RX_APPROVAL_CONFIGURATION.levelSeparator}${supportCompany}${RX_APPROVAL_CONFIGURATION.levelSeparator}${supportOrg}`;\r\n  }\r\n\r\n  getSupportGroupDataFormat(supportCompany: string, supportOrg: string, supportGroup: string): string {\r\n    return `${RX_APPROVAL_CONFIGURATION.approverFormatPrefixes.supportCompanyOrgGroup}${RX_APPROVAL_CONFIGURATION.levelSeparator}${supportCompany}${RX_APPROVAL_CONFIGURATION.levelSeparator}${supportOrg}${RX_APPROVAL_CONFIGURATION.levelSeparator}${supportGroup}`;\r\n  }\r\n\r\n  private transformToNodeStructure(selectedItems: IRxSelectWithPaginationOption[]): AdaptTreeNode[] {\r\n    return selectedItems.map((option: IRxSelectWithPaginationOption) => {\r\n      let data = '';\r\n      let label = `${option.displayValue} `;\r\n\r\n      if (this.shouldMoveCompanies()) {\r\n        data = option.value;\r\n      } else if (this.shouldMoveOrganizations()) {\r\n        data = this.getOrgDataFormat(option.value, option.displayValue);\r\n        label += `(${option.value})`;\r\n      } else if (this.shouldMoveDepartments()) {\r\n        data = this.getDeptDataFormat(option.value, option.organization, option.displayValue);\r\n        label += `(${option.value}${this.separatorArrow}${option.organization})`;\r\n      } else if (this.shouldMoveSupportCompanies()) {\r\n        data = `${RX_APPROVAL_CONFIGURATION.approverFormatPrefixes.supportCompany}${RX_APPROVAL_CONFIGURATION.levelSeparator}${option.displayValue}`;\r\n      } else if (this.shouldMoveSupportOrganizations()) {\r\n        data = this.getSupportOrgDataFormat(option.value, option.displayValue);\r\n        label += `(${option.value})`;\r\n      } else if (this.shouldMoveSupportGroups()) {\r\n        data = this.getSupportGroupDataFormat(option.value, option.organization, option.displayValue);\r\n        label += `(${option.value}${this.separatorArrow}${option.organization})`;\r\n      }\r\n\r\n      return this.getNode(label, option.displayValue, data);\r\n    });\r\n  }\r\n\r\n  onCompanySelectionChange(): void {\r\n    this.selectedOrganizations = [];\r\n    this.selectedDepartments = [];\r\n  }\r\n\r\n  onOrganizationSelectionChange(): void {\r\n    this.selectedDepartments = [];\r\n  }\r\n\r\n  onSupportCompanySelectionChange(): void {\r\n    this.selectedSupportOrganizations = [];\r\n    this.selectedSupportGroups = [];\r\n  }\r\n\r\n  onSupportOrganizationSelectionChange(): void {\r\n    this.selectedSupportGroups = [];\r\n  }\r\n\r\n  private shouldMoveCompanies(): boolean {\r\n    return this.selectedCompanies.length && !this.selectedOrganizations.length && !this.selectedDepartments.length;\r\n  }\r\n\r\n  private shouldMoveOrganizations(): boolean {\r\n    return this.selectedOrganizations.length && this.selectedCompanies.length <= 1 && !this.selectedDepartments.length;\r\n  }\r\n\r\n  private shouldMoveDepartments(): boolean {\r\n    return (\r\n      this.selectedDepartments.length && this.selectedCompanies.length <= 1 && this.selectedOrganizations.length <= 1\r\n    );\r\n  }\r\n\r\n  private shouldMoveSupportCompanies(): boolean {\r\n    return (\r\n      this.selectedSupportCompanies.length &&\r\n      !this.selectedSupportOrganizations.length &&\r\n      !this.selectedSupportGroups.length\r\n    );\r\n  }\r\n\r\n  private shouldMoveSupportOrganizations(): boolean {\r\n    return (\r\n      this.selectedSupportOrganizations.length &&\r\n      this.selectedSupportCompanies.length <= 1 &&\r\n      !this.selectedSupportGroups.length\r\n    );\r\n  }\r\n\r\n  private shouldMoveSupportGroups(): boolean {\r\n    return (\r\n      this.selectedSupportGroups.length &&\r\n      this.selectedSupportCompanies.length <= 1 &&\r\n      this.selectedSupportOrganizations.length <= 1\r\n    );\r\n  }\r\n\r\n  private setFieldIdentifyingApprovers() {\r\n    this.selectedApprovers = [\r\n      {\r\n        label: this.translateService.instant('com.bmc.arsys.rx.client.approval.configuration.field.identifying'),\r\n        type: RX_APPROVAL_CONFIGURATION.approverTypes.fieldIdentifying,\r\n        children: this.transformFieldsToNodeStructure(),\r\n        expanded: true\r\n      }\r\n    ];\r\n  }\r\n\r\n  moveToSelectedApprovers(): void {\r\n    let approverTypeNode: AdaptTreeNode = find(this.selectedApprovers, { type: this.approverType[0].value });\r\n\r\n    if (this.isFieldIdentifyingSelection()) {\r\n      if (\r\n        this.selectedApprovers.length &&\r\n        !find(this.selectedApprovers, { type: RX_APPROVAL_CONFIGURATION.approverTypes.fieldIdentifying })\r\n      ) {\r\n        this.rxModalService\r\n          .confirm({\r\n            title: this.translateService.instant('com.bmc.arsys.rx.client.common.warning.label'),\r\n            modalStyle: RX_MODAL.modalStyles.warning,\r\n            message: this.translateService.instant(\r\n              'com.bmc.arsys.rx.client.approval.configuration.flow.approvers.types.field-identifying-select.warning'\r\n            )\r\n          })\r\n          .then((result: boolean) => {\r\n            if (result) {\r\n              this.setFieldIdentifyingApprovers();\r\n            }\r\n          });\r\n      } else {\r\n        this.setFieldIdentifyingApprovers();\r\n      }\r\n    } else if (this.isFunctionalRoleSelection()) {\r\n      if (!approverTypeNode) {\r\n        this.selectedApprovers.push({\r\n          label: this.translateService.instant('com.bmc.arsys.rx.client.approval.configuration.functional.roles'),\r\n          type: RX_APPROVAL_CONFIGURATION.approverTypes.functionalRole,\r\n          children: this.transformFunctionRolesToNodeStructure(),\r\n          expanded: true\r\n        });\r\n      } else {\r\n        approverTypeNode.children.push(...this.transformFunctionRolesToNodeStructure());\r\n      }\r\n    } else if (this.isPeopleSelection()) {\r\n      if (!approverTypeNode) {\r\n        this.selectedApprovers.push({\r\n          label: this.translateService.instant(\r\n            'com.bmc.arsys.rx.client.approval.configuration.flow.approvers.types.people.label'\r\n          ),\r\n          type: RX_APPROVAL_CONFIGURATION.approverTypes.people,\r\n          children: this.transformPeopleToNodeStructure(),\r\n          expanded: true\r\n        });\r\n      } else {\r\n        approverTypeNode.children.push(...this.transformPeopleToNodeStructure());\r\n      }\r\n    } else if (this.isCompanySelection()) {\r\n      if (this.shouldMoveCompanies()) {\r\n        if (!approverTypeNode) {\r\n          this.selectedApprovers.push({\r\n            label: this.translateService.instant(\r\n              'com.bmc.arsys.rx.client.approval.configuration.flow.approvers.types.company.label'\r\n            ),\r\n            type: RX_APPROVAL_CONFIGURATION.approverTypes.company,\r\n            children: this.transformToNodeStructure(this.selectedCompanies),\r\n            expanded: true\r\n          });\r\n        } else {\r\n          approverTypeNode.children.push(...this.transformToNodeStructure(this.selectedCompanies));\r\n        }\r\n      } else if (this.shouldMoveOrganizations()) {\r\n        approverTypeNode = find(this.selectedApprovers, { type: RX_APPROVAL_CONFIGURATION.approverTypes.org });\r\n\r\n        if (!approverTypeNode) {\r\n          this.selectedApprovers.push({\r\n            label: this.translateService.instant(\r\n              'com.bmc.arsys.rx.client.approval.configuration.flow.approvers.types.organization.label'\r\n            ),\r\n            type: RX_APPROVAL_CONFIGURATION.approverTypes.org,\r\n            children: this.transformToNodeStructure(this.selectedOrganizations),\r\n            expanded: true\r\n          });\r\n        } else {\r\n          approverTypeNode.children.push(...this.transformToNodeStructure(this.selectedOrganizations));\r\n        }\r\n      } else if (this.shouldMoveDepartments()) {\r\n        approverTypeNode = find(this.selectedApprovers, {\r\n          type: RX_APPROVAL_CONFIGURATION.approverTypes.dept\r\n        });\r\n\r\n        if (!approverTypeNode) {\r\n          this.selectedApprovers.push({\r\n            label: this.translateService.instant(\r\n              'com.bmc.arsys.rx.client.approval.configuration.flow.approvers.types.department.label'\r\n            ),\r\n            type: RX_APPROVAL_CONFIGURATION.approverTypes.dept,\r\n            children: this.transformToNodeStructure(this.selectedDepartments),\r\n            expanded: true\r\n          });\r\n        } else {\r\n          approverTypeNode.children.push(...this.transformToNodeStructure(this.selectedDepartments));\r\n        }\r\n      }\r\n    } else if (this.isSupportCompanySelection()) {\r\n      if (this.shouldMoveSupportCompanies()) {\r\n        approverTypeNode = find(this.selectedApprovers, {\r\n          type: RX_APPROVAL_CONFIGURATION.approverTypes.company\r\n        });\r\n\r\n        if (!approverTypeNode) {\r\n          this.selectedApprovers.push({\r\n            label: this.translateService.instant(\r\n              'com.bmc.arsys.rx.client.approval.configuration.flow.approvers.types.company.label'\r\n            ),\r\n            type: RX_APPROVAL_CONFIGURATION.approverTypes.company,\r\n            children: this.transformToNodeStructure(this.selectedSupportCompanies),\r\n            expanded: true\r\n          });\r\n        } else {\r\n          approverTypeNode.children.push(...this.transformToNodeStructure(this.selectedSupportCompanies));\r\n        }\r\n      } else if (this.shouldMoveSupportOrganizations()) {\r\n        approverTypeNode = find(this.selectedApprovers, { type: RX_APPROVAL_CONFIGURATION.approverTypes.supportOrg });\r\n\r\n        if (!approverTypeNode) {\r\n          this.selectedApprovers.push({\r\n            label: this.translateService.instant(\r\n              'com.bmc.arsys.rx.client.approval.configuration.flow.approvers.types.support-org.label'\r\n            ),\r\n            type: RX_APPROVAL_CONFIGURATION.approverTypes.supportOrg,\r\n            children: this.transformToNodeStructure(this.selectedSupportOrganizations),\r\n            expanded: true\r\n          });\r\n        } else {\r\n          approverTypeNode.children.push(...this.transformToNodeStructure(this.selectedSupportOrganizations));\r\n        }\r\n      } else if (this.shouldMoveSupportGroups()) {\r\n        approverTypeNode = find(this.selectedApprovers, { type: RX_APPROVAL_CONFIGURATION.approverTypes.supportGroup });\r\n\r\n        if (!approverTypeNode) {\r\n          this.selectedApprovers.push({\r\n            label: this.translateService.instant(\r\n              'com.bmc.arsys.rx.client.approval.configuration.flow.approvers.types.support-group.label'\r\n            ),\r\n            type: RX_APPROVAL_CONFIGURATION.approverTypes.supportGroup,\r\n            children: this.transformToNodeStructure(this.selectedSupportGroups),\r\n            expanded: true\r\n          });\r\n        } else {\r\n          approverTypeNode.children.push(...this.transformToNodeStructure(this.selectedSupportGroups));\r\n        }\r\n      }\r\n    }\r\n    if (!this.isFieldIdentifyingSelection()) {\r\n      remove(this.selectedApprovers, { type: RX_APPROVAL_CONFIGURATION.approverTypes.fieldIdentifying });\r\n    }\r\n    if (approverTypeNode) {\r\n      approverTypeNode.expanded = true;\r\n      approverTypeNode.children = uniqBy(approverTypeNode.children, 'key');\r\n    }\r\n    this.selectedApprovers = this.selectedApprovers\r\n      .filter((approverNode: AdaptTreeNode) => approverNode.children.length)\r\n      .map((node: AdaptTreeNode) => {\r\n        node.children.sort((a, b) => a.label.localeCompare(b.label));\r\n\r\n        return node;\r\n      });\r\n\r\n    this.hasUserInteracted = true;\r\n    this.reloadTree();\r\n  }\r\n\r\n  private reloadTree() {\r\n    this.shouldShowTree = false;\r\n    setTimeout(() => (this.shouldShowTree = true));\r\n  }\r\n\r\n  private loadFieldIdentifyingApproversApprovers(): void {\r\n    this.rxRecordDefinitionCacheService\r\n      .getRecordDefinition(this.activeModalRef.getData().registeredRecordDefinitionName)\r\n      .subscribe(\r\n        (fieldIdentifyingResponse: IRecordDefinition) =>\r\n          (this.availableFields = fieldIdentifyingResponse.fieldDefinitions\r\n            .map((field: IFieldDefinition) => ({\r\n              name: field.name,\r\n              selected: false\r\n            }))\r\n            .sort((a: IField, b: IField) => a.name.localeCompare(b.name)))\r\n      );\r\n  }\r\n\r\n  noApproverSelected(): boolean {\r\n    return (\r\n      (this.isFieldIdentifyingSelection() && !some(this.availableFields, (field) => field.selected)) ||\r\n      (this.isPeopleSelection() && !some(this.loadedUsers, (user) => user.selected)) ||\r\n      (this.isFunctionalRoleSelection() &&\r\n        !some(this.availableFunctionRolesByApplication, (application) =>\r\n          some(application.roles, (role) => role.selected)\r\n        )) ||\r\n      Boolean(\r\n        this.isCompanySelection() &&\r\n          !this.selectedCompanies.length &&\r\n          !this.selectedOrganizations.length &&\r\n          !this.selectedDepartments.length\r\n      )\r\n    );\r\n  }\r\n\r\n  isInvalidFieIdentifyingApprover(): boolean {\r\n    return this.isFieldIdentifyingSelection() && sumBy(this.availableFields, 'selected') > 1;\r\n  }\r\n\r\n  optionFormatter(option: RxSelectOption): string {\r\n    return option.displayValue;\r\n  }\r\n\r\n  isFieldIdentifyingSelection(): boolean {\r\n    return this.approverType[0].value === RX_APPROVAL_CONFIGURATION.approverTypes.fieldIdentifying;\r\n  }\r\n\r\n  isCompanySelection(): boolean {\r\n    return this.approverType[0].value === RX_APPROVAL_CONFIGURATION.approverTypes.company;\r\n  }\r\n\r\n  isSupportCompanySelection(): boolean {\r\n    return this.approverType[0].value === RX_APPROVAL_CONFIGURATION.approverTypes.supportCompany;\r\n  }\r\n\r\n  isPeopleSelection(): boolean {\r\n    return this.approverType[0].value === RX_APPROVAL_CONFIGURATION.approverTypes.people;\r\n  }\r\n\r\n  isFunctionalRoleSelection(): boolean {\r\n    return this.approverType[0].value === RX_APPROVAL_CONFIGURATION.approverTypes.functionalRole;\r\n  }\r\n\r\n  completeSelection(): void {\r\n    const approvers: ISelectedApprover[] = flow(\r\n      (allNodes: AdaptTreeNode[]) => _map(allNodes, 'children'),\r\n      flatten,\r\n      (nodes: AdaptTreeNode[]) =>\r\n        _map(nodes, (node) => {\r\n          let label = '';\r\n\r\n          if (\r\n            this.rxApprovalConfigurationService.isCompanyOrg(node.data) ||\r\n            this.rxApprovalConfigurationService.isCompanyOrgDept(node.data) ||\r\n            this.rxApprovalConfigurationService.isSupportCompanyOrg(node.data) ||\r\n            this.rxApprovalConfigurationService.isSupportCompanyOrgGroup(node.data)\r\n          ) {\r\n            label = this.rxApprovalConfigurationService.getLastLabel(node.data);\r\n          }\r\n\r\n          return {\r\n            value: node.data,\r\n            displayValue: label || node.label\r\n          };\r\n        })\r\n    )(this.selectedApprovers);\r\n\r\n    const approver: ISelectedApprover = {\r\n      value: approvers.map((node: ISelectedApprover) => node.value).join(RX_APPROVAL_CONFIGURATION.approverSeparator),\r\n      displayValue: flow(\r\n        (items: ISelectedApprover[]) => take(items, 10),\r\n        (items: string[]) => _map(items, 'displayValue'),\r\n        (items: string[]) => join(items, ', ')\r\n      )(approvers)\r\n    };\r\n\r\n    if (approvers.length > 10) {\r\n      approver.displayValue += '...';\r\n    }\r\n\r\n    this.activeModalRef.close(approver);\r\n  }\r\n\r\n  getEmptyApproverTree(): AdaptTreeNode[] {\r\n    return [\r\n      {\r\n        label: this.translateService.instant('com.bmc.arsys.rx.client.approval.configuration.functional.roles'),\r\n        type: RX_APPROVAL_CONFIGURATION.approverTypes.functionalRole,\r\n        children: []\r\n      },\r\n      {\r\n        label: this.translateService.instant(\r\n          'com.bmc.arsys.rx.client.approval.configuration.flow.approvers.types.people.label'\r\n        ),\r\n        type: RX_APPROVAL_CONFIGURATION.approverTypes.people,\r\n        children: []\r\n      },\r\n      {\r\n        label: this.translateService.instant(\r\n          'com.bmc.arsys.rx.client.approval.configuration.flow.approvers.types.company.label'\r\n        ),\r\n        type: RX_APPROVAL_CONFIGURATION.approverTypes.company,\r\n        children: []\r\n      },\r\n      {\r\n        label: this.translateService.instant(\r\n          'com.bmc.arsys.rx.client.approval.configuration.flow.approvers.types.organization.label'\r\n        ),\r\n        type: RX_APPROVAL_CONFIGURATION.approverTypes.org,\r\n        children: []\r\n      },\r\n      {\r\n        label: this.translateService.instant(\r\n          'com.bmc.arsys.rx.client.approval.configuration.flow.approvers.types.department.label'\r\n        ),\r\n        type: RX_APPROVAL_CONFIGURATION.approverTypes.dept,\r\n        children: []\r\n      },\r\n      {\r\n        label: this.translateService.instant(\r\n          'com.bmc.arsys.rx.client.approval.configuration.flow.approvers.types.support-company.label'\r\n        ),\r\n        type: RX_APPROVAL_CONFIGURATION.approverTypes.supportCompany,\r\n        children: []\r\n      },\r\n      {\r\n        label: this.translateService.instant(\r\n          'com.bmc.arsys.rx.client.approval.configuration.flow.approvers.types.support-group.label'\r\n        ),\r\n        type: RX_APPROVAL_CONFIGURATION.approverTypes.supportGroup,\r\n        children: []\r\n      },\r\n      {\r\n        label: this.translateService.instant(\r\n          'com.bmc.arsys.rx.client.approval.configuration.flow.approvers.types.support-org.label'\r\n        ),\r\n        type: RX_APPROVAL_CONFIGURATION.approverTypes.supportOrg,\r\n        children: []\r\n      },\r\n      {\r\n        label: this.translateService.instant('com.bmc.arsys.rx.client.approval.configuration.field.identifying'),\r\n        type: RX_APPROVAL_CONFIGURATION.approverTypes.fieldIdentifying,\r\n        children: []\r\n      }\r\n    ];\r\n  }\r\n\r\n  private addExistingApproversToSelectedTree(allFunctionalRoles?: IFunctionalRoleDescriptor[]): void {\r\n    this.selectedApprovers = this.getEmptyApproverTree();\r\n\r\n    const approverList = this.activeModalRef\r\n      .getData()\r\n      .existingApprovers.split(RX_APPROVAL_CONFIGURATION.approverSeparator);\r\n\r\n    forEach(approverList, (approver: string) => {\r\n      if (this.rxApprovalConfigurationService.isFieldIdentifyingApprover(approver)) {\r\n        this.approverType = [\r\n          find(this.approverTypes, {\r\n            value: RX_APPROVAL_CONFIGURATION.approverTypes.fieldIdentifying\r\n          })\r\n        ];\r\n\r\n        this.selectedApprovers = [\r\n          {\r\n            label: this.translateService.instant('com.bmc.arsys.rx.client.approval.configuration.field.identifying'),\r\n            type: RX_APPROVAL_CONFIGURATION.approverTypes.fieldIdentifying,\r\n            children: [\r\n              {\r\n                label: this.rxApprovalConfigurationService.getFieldIdentifyingApprover(approver),\r\n                key: this.rxApprovalConfigurationService.getFieldIdentifyingApprover(approver),\r\n                data: `$${this.rxApprovalConfigurationService.getFieldIdentifyingApprover(approver)}$`\r\n              }\r\n            ],\r\n            expanded: true\r\n          }\r\n        ];\r\n      } else if (this.rxApprovalConfigurationService.isFunctionalRole(approver)) {\r\n        find(this.selectedApprovers, { type: RX_APPROVAL_CONFIGURATION.approverTypes.functionalRole }).children.push({\r\n          key: this.rxApprovalConfigurationService.getFunctionalRoleGuid(approver),\r\n          data: this.getFunctionalRoleDataFormat(this.rxApprovalConfigurationService.getFunctionalRoleGuid(approver)),\r\n          label: get(\r\n            find(allFunctionalRoles, {\r\n              id: this.rxApprovalConfigurationService.getFunctionalRoleGuid(approver)\r\n            }),\r\n            'name'\r\n          )\r\n        });\r\n      } else if (this.rxApprovalConfigurationService.isApproverPeople(approver)) {\r\n        find(this.selectedApprovers, { type: RX_APPROVAL_CONFIGURATION.approverTypes.people }).children.push({\r\n          key: approver.split(RX_APPROVAL_CONFIGURATION.levelSeparator)[1],\r\n          label: approver.split(RX_APPROVAL_CONFIGURATION.levelSeparator)[1],\r\n          data: this.getPeopleDataFormat(approver.split(RX_APPROVAL_CONFIGURATION.levelSeparator)[1])\r\n        });\r\n      } else if (\r\n        this.rxApprovalConfigurationService.isCompany(approver) ||\r\n        this.rxApprovalConfigurationService.isSupportCompany(approver)\r\n      ) {\r\n        find(this.selectedApprovers, { type: RX_APPROVAL_CONFIGURATION.approverTypes.company }).children.push({\r\n          label: this.rxApprovalConfigurationService.getLastLabel(approver),\r\n          key: `${this.rxApprovalConfigurationService.getLastLabel(approver)}`,\r\n          data: this.getCompanyDataFormat(this.rxApprovalConfigurationService.getLastLabel(approver))\r\n        });\r\n      } else if (this.rxApprovalConfigurationService.isCompanyOrg(approver)) {\r\n        find(this.selectedApprovers, { type: RX_APPROVAL_CONFIGURATION.approverTypes.org }).children.push({\r\n          label: `${this.rxApprovalConfigurationService.getLastLabel(approver)}${this.getHierarchyLabel(approver)}`,\r\n          key: `${this.rxApprovalConfigurationService.getLastLabel(approver)}`,\r\n          data: this.getOrgDataFormat(\r\n            approver.split(RX_APPROVAL_CONFIGURATION.levelSeparator)[1],\r\n            approver.split(RX_APPROVAL_CONFIGURATION.levelSeparator)[2]\r\n          )\r\n        });\r\n      } else if (this.rxApprovalConfigurationService.isCompanyOrgDept(approver)) {\r\n        find(this.selectedApprovers, { type: RX_APPROVAL_CONFIGURATION.approverTypes.dept }).children.push({\r\n          label: `${this.rxApprovalConfigurationService.getLastLabel(approver)}${this.getHierarchyLabel(approver)}`,\r\n          key: `${this.rxApprovalConfigurationService.getLastLabel(approver)}`,\r\n          data: this.getDeptDataFormat(\r\n            approver.split(RX_APPROVAL_CONFIGURATION.levelSeparator)[1],\r\n            approver.split(RX_APPROVAL_CONFIGURATION.levelSeparator)[2],\r\n            approver.split(RX_APPROVAL_CONFIGURATION.levelSeparator)[3]\r\n          )\r\n        });\r\n      } else if (this.rxApprovalConfigurationService.isSupportCompanyOrg(approver)) {\r\n        find(this.selectedApprovers, { type: RX_APPROVAL_CONFIGURATION.approverTypes.supportOrg }).children.push({\r\n          label: `${this.rxApprovalConfigurationService.getLastLabel(approver)}${this.getHierarchyLabel(approver)}`,\r\n          key: `${this.rxApprovalConfigurationService.getLastLabel(approver)}`,\r\n          data: this.getSupportOrgDataFormat(\r\n            approver.split(RX_APPROVAL_CONFIGURATION.levelSeparator)[1],\r\n            approver.split(RX_APPROVAL_CONFIGURATION.levelSeparator)[2]\r\n          )\r\n        });\r\n      } else if (this.rxApprovalConfigurationService.isSupportCompanyOrgGroup(approver)) {\r\n        find(this.selectedApprovers, { type: RX_APPROVAL_CONFIGURATION.approverTypes.supportGroup }).children.push({\r\n          label: `${this.rxApprovalConfigurationService.getLastLabel(approver)}${this.getHierarchyLabel(approver)}`,\r\n          key: `${this.rxApprovalConfigurationService.getLastLabel(approver)}`,\r\n          data: this.getSupportGroupDataFormat(\r\n            approver.split(RX_APPROVAL_CONFIGURATION.levelSeparator)[1],\r\n            approver.split(RX_APPROVAL_CONFIGURATION.levelSeparator)[2],\r\n            approver.split(RX_APPROVAL_CONFIGURATION.levelSeparator)[3]\r\n          )\r\n        });\r\n      }\r\n    });\r\n\r\n    this.selectedApprovers = this.selectedApprovers\r\n      .filter((node: AdaptTreeNode) => node.children.length)\r\n      .map((node: AdaptTreeNode) => {\r\n        node.children.sort((a, b) => a.label.localeCompare(b.label));\r\n\r\n        return node;\r\n      });\r\n  }\r\n\r\n  private getHierarchyLabel(approver: string) {\r\n    const temp = approver.split(RX_APPROVAL_CONFIGURATION.levelSeparator);\r\n    temp.shift();\r\n    temp.pop();\r\n\r\n    return `(${temp.join(this.separatorArrow)})`;\r\n  }\r\n\r\n  close(): void {\r\n    this.activeModalRef.dismiss(DismissReasons.CLOSE_BTN);\r\n  }\r\n\r\n  private getDefaultSearchExpression(): string {\r\n    return `${RX_APPROVAL_CONFIGURATION.approverFields.companyField} != NULL`;\r\n  }\r\n}\r\n","<div class=\"approver-modal-body\">\n  <rx-busy-indicator [options]=\"{ busy: busy, loaderType: 'section' }\"></rx-busy-indicator>\n\n  <adapt-alert\n    *ngIf=\"isInvalidFieIdentifyingApprover()\"\n    [config]=\"{\n      variant: 'warning',\n      dismissible: false,\n      content: invalidMsg\n    }\"\n  ></adapt-alert>\n\n  <div class=\"d-flex h-100\">\n    <div class=\"flex-wrapper d-flex flex-column mh-100 wrapper-max-width\">\n      <h5 class=\"mt-1 mb-4\">\n        {{ 'com.bmc.arsys.rx.client.approval.configuration.flow.approvers.available.label' | translate }}\n      </h5>\n\n      <adapt-rx-select\n        class=\"d-block form-group w-75\"\n        rx-id=\"approver-type\"\n        [(ngModel)]=\"approverType\"\n        [options]=\"approverTypes\"\n        (onSelectionChange)=\"switchApproversTree()\"\n        [optionFormatter]=\"optionFormatter\"\n      >\n      </adapt-rx-select>\n\n      <div class=\"flex-fill available-list\">\n        <div *ngIf=\"isCompanySelection()\" class=\"border section-wrapper flex-fill h-100\">\n          <rx-select-with-pagination\n            label=\"{{\n              'com.bmc.arsys.rx.client.approval.configuration.flow.approvers.types.company.label' | translate\n            }}\"\n            class=\"form-group d-block\"\n            [(ngModel)]=\"selectedCompanies\"\n            [optionLoader]=\"companyLoaderFunc\"\n            isMultiSelectionMode=\"true\"\n            (selectionChange)=\"onCompanySelectionChange()\"\n          ></rx-select-with-pagination>\n\n          <rx-select-with-pagination\n            label=\"{{\n              'com.bmc.arsys.rx.client.approval.configuration.flow.approvers.types.organization.label' | translate\n            }}\"\n            class=\"form-group d-block\"\n            [(ngModel)]=\"selectedOrganizations\"\n            [optionLoader]=\"organizationLoaderFunc\"\n            [template]=\"orgOptionTemplate\"\n            isMultiSelectionMode=\"true\"\n            (selectionChange)=\"onOrganizationSelectionChange()\"\n            #paginationComponents\n            [disabled]=\"selectedCompanies.length > 1\"\n            (toggleDropdown)=\"onToggleDropdown($event)\"\n          ></rx-select-with-pagination>\n\n          <rx-select-with-pagination\n            label=\"{{\n              'com.bmc.arsys.rx.client.approval.configuration.flow.approvers.types.department.label' | translate\n            }}\"\n            class=\"form-group d-block\"\n            [(ngModel)]=\"selectedDepartments\"\n            [optionLoader]=\"departmentLoaderFunc\"\n            [template]=\"optionTemplate\"\n            isMultiSelectionMode=\"true\"\n            #paginationComponents\n            [disabled]=\"selectedCompanies.length > 1 || selectedOrganizations.length > 1\"\n            (toggleDropdown)=\"onToggleDropdown($event)\"\n          ></rx-select-with-pagination>\n        </div>\n\n        <div *ngIf=\"isSupportCompanySelection()\" class=\"border section-wrapper flex-fill h-100\">\n          <rx-select-with-pagination\n            label=\"{{\n              'com.bmc.arsys.rx.client.approval.configuration.flow.approvers.types.support-company.label' | translate\n            }}\"\n            class=\"form-group d-block\"\n            [(ngModel)]=\"selectedSupportCompanies\"\n            [optionLoader]=\"companyLoaderFunc\"\n            isMultiSelectionMode=\"true\"\n            (selectionChange)=\"onSupportCompanySelectionChange()\"\n          ></rx-select-with-pagination>\n\n          <rx-select-with-pagination\n            label=\"{{\n              'com.bmc.arsys.rx.client.approval.configuration.flow.approvers.types.support-org.label' | translate\n            }}\"\n            class=\"form-group d-block\"\n            [(ngModel)]=\"selectedSupportOrganizations\"\n            [optionLoader]=\"supportOrganizationLoaderFunc\"\n            [template]=\"orgOptionTemplate\"\n            isMultiSelectionMode=\"true\"\n            (selectionChange)=\"onSupportOrganizationSelectionChange()\"\n            #paginationComponents\n            [disabled]=\"selectedSupportCompanies.length > 1\"\n            (toggleDropdown)=\"onToggleDropdown($event)\"\n          ></rx-select-with-pagination>\n\n          <rx-select-with-pagination\n            label=\"{{\n              'com.bmc.arsys.rx.client.approval.configuration.flow.approvers.types.support-group.label' | translate\n            }}\"\n            class=\"form-group d-block\"\n            [(ngModel)]=\"selectedSupportGroups\"\n            [optionLoader]=\"supportGroupLoaderFunc\"\n            [template]=\"optionTemplate\"\n            isMultiSelectionMode=\"true\"\n            #paginationComponents\n            [disabled]=\"selectedSupportCompanies.length > 1 || selectedSupportOrganizations.length > 1\"\n            (toggleDropdown)=\"onToggleDropdown($event)\"\n          ></rx-select-with-pagination>\n        </div>\n      </div>\n\n      <div\n        class=\"available-list d-flex flex-column flex-fill h-100 border-top functional-roles border\"\n        *ngIf=\"isFunctionalRoleSelection()\"\n      >\n        <adapt-accordion [multiselect]=\"true\">\n          <adapt-accordion-tab\n            *ngFor=\"let application of availableFunctionRolesByApplication\"\n            title=\"{{ application.applicationName }}\"\n            [isOpen]=\"true\"\n          >\n            <adapt-rx-checkbox\n              *ngFor=\"let role of application.roles; let index = index\"\n              label=\"{{ role.name }}\"\n              [(ngModel)]=\"application.roles[index].selected\"\n            ></adapt-rx-checkbox>\n          </adapt-accordion-tab>\n        </adapt-accordion>\n      </div>\n\n      <div class=\"available-list user-list h-100 border section-wrapper\" *ngIf=\"isPeopleSelection()\">\n        <ul class=\"list-unstyled\">\n          <div class=\"border-bottom-0 user-search-wrapper\">\n            <adapt-rx-search\n              [(ngModel)]=\"userSearchTextInput\"\n              placeholder=\"Filter\"\n              [debounceTime]=\"200\"\n              (ngModelChange)=\"loadUsers($event)\"\n            >\n            </adapt-rx-search>\n          </div>\n\n          <li *ngFor=\"let user of loadedUsers; let index = index\">\n            <adapt-rx-checkbox\n              label=\"{{ user[1000000019] + ' ' + user[1000000018] }}\"\n              [(ngModel)]=\"loadedUsers[index].selected\"\n            ></adapt-rx-checkbox>\n          </li>\n\n          <button\n            class=\"py-0\"\n            type=\"button\"\n            adapt-button\n            btn-type=\"tertiary\"\n            rx-id=\"load-more-button\"\n            (click)=\"loadUsers()\"\n            *ngIf=\"showLoadMoreButton && !loadingMore\"\n          >\n            {{ 'com.bmc.arsys.rx.client.common.load-more.label' | translate }}\n          </button>\n\n          <div class=\"loader-container\" *ngIf=\"loadingMore\">\n            <div class=\"loader-inline\"></div>\n            <span class=\"ml-2\">{{ 'com.bmc.arsys.rx.client.common.loading-data' | translate }}</span>\n          </div>\n        </ul>\n      </div>\n\n      <div class=\"available-list h-100 border field-identifying section-wrapper\" *ngIf=\"isFieldIdentifyingSelection()\">\n        <ul class=\"list-unstyled\">\n          <li *ngFor=\"let field of availableFields; let index = index\">\n            <adapt-rx-checkbox\n              label=\"{{ field.name }}\"\n              [(ngModel)]=\"availableFields[index].selected\"\n            ></adapt-rx-checkbox>\n          </li>\n        </ul>\n      </div>\n    </div>\n\n    <button\n      type=\"button\"\n      adapt-button\n      class=\"d-icon-right-angle_right form-group move-button\"\n      btn-type=\"secondary\"\n      rx-id=\"move-button\"\n      (click)=\"moveToSelectedApprovers()\"\n      [disabled]=\"isInvalidFieIdentifyingApprover() || noApproverSelected()\"\n    ></button>\n\n    <div class=\"flex-wrapper d-flex flex-column mh-100\">\n      <h5 class=\"mt-1 mb-4\">\n        {{ 'com.bmc.arsys.rx.client.approval.configuration.flow.approvers.selected.label' | translate }}\n      </h5>\n\n      <button\n        type=\"button\"\n        adapt-button\n        class=\"d-icon-left-trash form-group align-self-start\"\n        btn-type=\"secondary\"\n        rx-id=\"remove-button\"\n        (click)=\"removeApproversFromSelection()\"\n        [disabled]=\"!selectedApproverSelection.length\"\n      >\n        {{ 'com.bmc.arsys.rx.client.common.remove.label' | translate }}\n      </button>\n\n      <div class=\"card available-list flex-fill\">\n        <div class=\"card-block\">\n          <adapt-tree\n            #tree\n            *ngIf=\"selectedApprovers.length && shouldShowTree\"\n            filter=\"true\"\n            [value]=\"selectedApprovers\"\n            selectionMode=\"checkbox\"\n            [(selection)]=\"selectedApproverSelection\"\n            [wrap]=\"treeWrap\"\n          >\n          </adapt-tree>\n        </div>\n\n        <div class=\"vertical-center\" *ngIf=\"!selectedApprovers.length\">\n          <div class=\"empty-state empty-state--config\"></div>\n          <div class=\"empty-state__label\">\n            {{ 'com.bmc.arsys.rx.client.empty-state.no-items-available.label' | translate }}\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n\n<div class=\"modal-footer\">\n  <button\n    adapt-button\n    type=\"button\"\n    btn-type=\"primary\"\n    rx-id=\"save-button\"\n    (click)=\"completeSelection()\"\n    [disabled]=\"!hasUserInteracted\"\n  >\n    {{ 'com.bmc.arsys.rx.client.common.save.label' | translate }}\n  </button>\n\n  <button adapt-button type=\"button\" btn-type=\"secondary\" rx-id=\"close-button\" (click)=\"close()\">\n    {{ 'com.bmc.arsys.rx.client.common.close.label' | translate }}\n  </button>\n</div>\n\n<ng-template #optionTemplate let-option>\n  <strong>{{ option.displayValue }}</strong>\n\n  <div class=\"text-secondary\">\n    {{ option.value + separatorArrow + option.organization }}\n  </div>\n</ng-template>\n\n<ng-template #orgOptionTemplate let-option>\n  <strong>{{ option.displayValue }}</strong>\n\n  <div class=\"text-secondary\">\n    {{ option.value }}\n  </div>\n</ng-template>\n","import { moveItemInArray } from '@angular/cdk/drag-drop';\nimport { CdkDragDrop } from '@angular/cdk/drag-drop/';\nimport { AfterViewInit, Component, ErrorHandler, Injector, Input, OnDestroy, OnInit, ViewChild } from '@angular/core';\nimport { NgForm } from '@angular/forms';\nimport { AdaptPopoverDirective, RxSelectOption } from '@bmc-ux/adapt-angular';\nimport { ExpressionOperatorGroup, IFunctionalRoleDescriptor, RxNotificationService } from '@helix/platform/shared/api';\nimport {\n  IDefinitionPickerComponentOptions,\n  IExpressionEditorPropertyChange,\n  IExpressionFormControlOptions,\n  RxDefinitionPickerType,\n  RxExpressionEditorService\n} from '@helix/platform/shared/components';\nimport { IDialogApi, RX_MODAL, RxModalService } from '@helix/platform/ui-kit';\nimport { OpenViewActionModalSize } from '@helix/platform/view/api';\nimport { TranslateService } from '@ngx-translate/core';\nimport {\n  cloneDeep,\n  filter as _filter,\n  find,\n  flatten,\n  flow,\n  forEach,\n  get,\n  map as _map,\n  omit,\n  reject,\n  remove,\n  some,\n  sortBy,\n  trim\n} from 'lodash';\nimport { forkJoin, Observable, of, ReplaySubject } from 'rxjs';\nimport {\n  catchError,\n  defaultIfEmpty,\n  distinctUntilChanged,\n  filter,\n  map,\n  switchMap,\n  takeUntil,\n  tap\n} from 'rxjs/operators';\nimport { RX_APPROVAL_CONFIGURATION } from '../approval-configuration.constant';\nimport { RxApprovalConfigurationService } from '../approval-configuration.service';\nimport {\n  IApprovalFlow,\n  IApprovalFlowGroup,\n  IApprovalFlowGroupConfigurationResponse,\n  IApprovalFlowOutcomeAction,\n  IFlowGroupRequestResponse\n} from '../approval-configuration.types';\nimport { RxApprovalExpressionConfigurator } from '../approval-expression-configurator';\nimport { FlowApproversSelectorComponent } from '../flow-approvers-selector/flow-approvers-selector.component';\nimport { HttpErrorResponse } from '@angular/common/http';\n\n@Component({\n  selector: 'rx-approval-flow-configuration',\n  templateUrl: './approval-flow-configuration.component.html',\n  styleUrls: ['./approval-flow-configuration.component.scss']\n})\nexport class ApprovalFlowConfigurationComponent implements OnInit, OnDestroy, AfterViewInit {\n  @Input()\n  registeredRecordDefinitionName: string;\n\n  @ViewChild(AdaptPopoverDirective)\n  adaptPopoverDirective: AdaptPopoverDirective;\n\n  @ViewChild('approvalFlowsForm')\n  approvalFlowsForm: NgForm;\n\n  flowGroupName: string;\n  flowGroupNewName: string;\n  allAvailableFlowGroups: IApprovalFlowGroup[] = [];\n  selectedFlowGroup: IApprovalFlowGroup;\n  flowQualificationOptions: IExpressionFormControlOptions;\n  qualifyApproversOptions: IExpressionFormControlOptions;\n\n  signingCriteriaList: RxSelectOption[] = [\n    {\n      value: RX_APPROVAL_CONFIGURATION.approverCriteria.oneMust,\n      displayValue: this.translateService.instant(\n        'com.bmc.arsys.rx.client.approval.configuration.if-multiple-approvers.types.one-must-approve'\n      )\n    },\n    {\n      value: RX_APPROVAL_CONFIGURATION.approverCriteria.allMust,\n      displayValue: this.translateService.instant(\n        'com.bmc.arsys.rx.client.approval.configuration.if-multiple-approvers.types.all-must-approve'\n      )\n    },\n    {\n      value: RX_APPROVAL_CONFIGURATION.approverCriteria.percentage,\n      displayValue: this.translateService.instant(\n        'com.bmc.arsys.rx.client.approval.configuration.if-multiple-approvers.types.percentage-must-approve'\n      )\n    }\n  ];\n\n  signingCriteriaPercentageList: number[] = RX_APPROVAL_CONFIGURATION.signingCriteriaPercentageList;\n\n  processOnApproveOptions: IDefinitionPickerComponentOptions = {\n    label: this.translateService.instant(\n      'com.bmc.arsys.rx.client.approval.configuration.flow.outcome.on-approve-label'\n    ),\n    definitionType: RxDefinitionPickerType.PublicProcess\n  };\n\n  processOnRejectOptions: IDefinitionPickerComponentOptions = {\n    label: this.translateService.instant(\n      'com.bmc.arsys.rx.client.approval.configuration.flow.outcome.on-rejection-label'\n    ),\n    definitionType: RxDefinitionPickerType.PublicProcess\n  };\n\n  processOnErrorOptions: IDefinitionPickerComponentOptions = {\n    label: this.translateService.instant('com.bmc.arsys.rx.client.approval.configuration.flow.outcome.on-error-label'),\n    definitionType: RxDefinitionPickerType.PublicProcess\n  };\n\n  protected expressionConfigurator: RxApprovalExpressionConfigurator;\n  private existingFlowGroupNames: string[] = [];\n  private dialogApi: IDialogApi;\n  private isSaveInProgress = false;\n  private availableFunctionalRoles: IFunctionalRoleDescriptor[];\n  private destroyed$ = new ReplaySubject<boolean>(1);\n  private deletedFlowGroups: string[] = [];\n\n  constructor(\n    private injector: Injector,\n    private errorHandler: ErrorHandler,\n    private rxModalService: RxModalService,\n    private translateService: TranslateService,\n    private rxNotificationService: RxNotificationService,\n    private rxExpressionEditorService: RxExpressionEditorService,\n    private rxApprovalConfigurationService: RxApprovalConfigurationService\n  ) {\n    this.selectedFlowGroup = this.getEmptyFlowGroup();\n  }\n\n  private getEmptyFlowGroup(): IApprovalFlowGroup {\n    return {\n      flowGroup: null,\n      approvalFlowConfigurationList: []\n    };\n  }\n\n  ngOnInit() {\n    this.expressionConfigurator = new RxApprovalExpressionConfigurator(this.injector);\n\n    this.expressionConfigurator.configureForProperty({\n      propertyPath: RX_APPROVAL_CONFIGURATION.flowQualificationProperty,\n      dataDictionary$: this.expressionConfigurator.approvalExpressionDataDictionary(\n        this.registeredRecordDefinitionName\n      ),\n      operators: this.expressionConfigurator.getOperatorRowsByGroup(ExpressionOperatorGroup.All)\n    });\n\n    this.flowQualificationOptions = {\n      label: this.translateService.instant('com.bmc.arsys.rx.client.approval.configuration.qualification'),\n      dataDictionary$: this.expressionConfigurator.getDataDictionary(\n        RX_APPROVAL_CONFIGURATION.flowQualificationProperty\n      ),\n      operators: this.expressionConfigurator.getOperators(RX_APPROVAL_CONFIGURATION.flowQualificationProperty),\n      isRequired: true\n    };\n\n    this.expressionConfigurator.configureForProperty({\n      propertyPath: RX_APPROVAL_CONFIGURATION.approverQualificationProperty,\n      dataDictionary$: this.expressionConfigurator.getCtmPeopleFormFields(this.registeredRecordDefinitionName),\n      operators: this.expressionConfigurator.getOperatorRowsByGroup(ExpressionOperatorGroup.All)\n    });\n\n    this.qualifyApproversOptions = {\n      label: this.translateService.instant(\n        'com.bmc.arsys.rx.client.approval.configuration.flow.general.qualify-approvers.label'\n      ),\n      dataDictionary$: this.expressionConfigurator.getDataDictionary(\n        RX_APPROVAL_CONFIGURATION.approverQualificationProperty\n      ),\n      operators: this.expressionConfigurator.getOperators(RX_APPROVAL_CONFIGURATION.approverQualificationProperty)\n    };\n\n    this.rxApprovalConfigurationService\n      .getFunctionalRoles()\n      .pipe(\n        tap((functionalRoles: IFunctionalRoleDescriptor[]) => {\n          this.availableFunctionalRoles = functionalRoles;\n        }),\n        switchMap(() => this.getFlowGroups())\n      )\n      .subscribe();\n  }\n\n  ngAfterViewInit(): void {\n    this.approvalFlowsForm.form.valueChanges.pipe(distinctUntilChanged(), takeUntil(this.destroyed$)).subscribe(() => {\n      if (this.approvalFlowsForm.dirty) {\n        this.selectedFlowGroup.isDirty = true;\n      }\n    });\n  }\n\n  private getFlowGroups(): Observable<IApprovalFlowGroupConfigurationResponse> {\n    this.existingFlowGroupNames = [];\n    this.deletedFlowGroups = [];\n\n    return this.rxApprovalConfigurationService.getApprovalFlowConfigurations(this.registeredRecordDefinitionName).pipe(\n      tap((flowConfigurationResponse: IApprovalFlowGroupConfigurationResponse) => {\n        this.allAvailableFlowGroups = flowConfigurationResponse.approvalFlowGroupConfigurations;\n\n        if (this.allAvailableFlowGroups?.length) {\n          this.allAvailableFlowGroups = this.allAvailableFlowGroups\n            .map((flowGroup: IApprovalFlowGroup) => {\n              flowGroup.isDirty = false;\n              flowGroup.hasError = false;\n              this.existingFlowGroupNames.push(flowGroup.flowGroup);\n\n              flowGroup.approvalFlowConfigurationList = this.refactorFlowsResponse(\n                flowGroup.approvalFlowConfigurationList\n              );\n\n              return flowGroup;\n            })\n            .sort((a, b) => a.flowGroup.localeCompare(b.flowGroup));\n\n          this.selectedFlowGroup = this.selectedFlowGroup.flowGroup\n            ? find(this.allAvailableFlowGroups, { flowGroup: this.selectedFlowGroup.flowGroup })\n            : this.allAvailableFlowGroups[0];\n\n          this.collapseAll();\n          this.isSaveInProgress = false;\n        }\n      })\n    );\n  }\n\n  preparePayload(flowGroup: IApprovalFlowGroup): IApprovalFlowGroup {\n    const flowGroupConfiguration: IApprovalFlowGroup = cloneDeep(omit(flowGroup, ['isDirty', 'hasError']));\n\n    flowGroupConfiguration.approvalFlowConfigurationList = _map(\n      flowGroupConfiguration.approvalFlowConfigurationList,\n      (approvalFlow: IApprovalFlow) => {\n        approvalFlow = {\n          ...omit(approvalFlow, [\n            'isOpen',\n            'hasError',\n            'approversDisplayValue',\n            'isFieldIdentifyingApprover',\n            'signingCriteriaList'\n          ])\n        };\n\n        approvalFlow.approvalFlowOutcomeMappingList = reject(\n          approvalFlow.approvalFlowOutcomeMappingList,\n          (outcome: IApprovalFlowOutcomeAction) => !outcome.processName\n        );\n\n        approvalFlow.flowName = trim(approvalFlow.flowName);\n        approvalFlow.signingCriteria = approvalFlow.signingCriteria[0].value;\n\n        approvalFlow.approvalOverridePercentage =\n          approvalFlow.signingCriteria === RX_APPROVAL_CONFIGURATION.approverCriteria.percentage\n            ? approvalFlow.approvalOverridePercentage[0]\n            : 0;\n\n        if (\n          approvalFlow.approvers &&\n          !this.rxApprovalConfigurationService.isFieldIdentifyingApprover(approvalFlow.approvers)\n        ) {\n          approvalFlow.approvers = '\\\\\"' + approvalFlow.approvers + '\\\\\"';\n        }\n\n        approvalFlow.approvers = approvalFlow.approvers || RX_APPROVAL_CONFIGURATION.noApproverProvided;\n\n        return approvalFlow;\n      }\n    );\n\n    return flowGroupConfiguration;\n  }\n\n  canSave(): boolean {\n    return !this.isSaveInProgress && ((this.areFlowGroupsValid() && this.isDirty()) || !!this.deletedFlowGroups.length);\n  }\n\n  isDirty(): boolean {\n    return (\n      some(this.allAvailableFlowGroups, (flowGroup: IApprovalFlowGroup) => flowGroup.isDirty) ||\n      Boolean(this.dialogApi?.isDirty()) ||\n      !!this.deletedFlowGroups.length\n    );\n  }\n\n  areFlowGroupsValid(): boolean {\n    return !some(this.allAvailableFlowGroups, this.isInvalidFlowGroup);\n  }\n\n  private isInvalidFlowGroup(flowGroup: IApprovalFlowGroup): boolean {\n    return (\n      !flowGroup.approvalFlowConfigurationList.length ||\n      some(\n        flowGroup.approvalFlowConfigurationList,\n        (flow: IApprovalFlow) =>\n          !flow.flowName || !flow.qualification || (flow.isLevelUp && flow.levels < 1) || flow.hasError\n      )\n    );\n  }\n\n  hasFlowGroups(): string {\n    return this.selectedFlowGroup.flowGroup;\n  }\n\n  private isInvalidFlow(flow: IApprovalFlow): boolean {\n    return (\n      !flow.flowName ||\n      !flow.qualification ||\n      (flow.isLevelUp && flow.levels < 1) ||\n      (!flow.isLevelUp && !flow.approvers && !flow.approverQualification)\n    );\n  }\n\n  markInvalidSelectedGroupAndFlows(): void {\n    this.selectedFlowGroup.approvalFlowConfigurationList.forEach((approvalFlow: IApprovalFlow) => {\n      approvalFlow.hasError = this.isInvalidFlow(approvalFlow);\n    });\n\n    this.selectedFlowGroup.hasError =\n      !this.selectedFlowGroup.approvalFlowConfigurationList.length ||\n      some(this.selectedFlowGroup.approvalFlowConfigurationList, (flow) => flow.hasError);\n  }\n\n  markInvalidGroupsAndFlows(): void {\n    this.allAvailableFlowGroups.forEach((flowGroup: IApprovalFlowGroup) => {\n      flowGroup.approvalFlowConfigurationList.forEach((approvalFlow: IApprovalFlow) => {\n        approvalFlow.hasError = this.isInvalidFlow(approvalFlow);\n      });\n\n      flowGroup.hasError =\n        !flowGroup.approvalFlowConfigurationList.length ||\n        some(flowGroup.approvalFlowConfigurationList, (flow) => flow.hasError);\n    });\n  }\n\n  saveFlowGroups(): void {\n    this.approvalFlowsForm.form.markAsPristine();\n\n    let createFailedCount = 0;\n    let createSuccessCount = 0;\n    let updateFailedCount = 0;\n    let updateSuccessCount = 0;\n    let deleteFailedCount = 0;\n    let deleteSuccessCount = 0;\n\n    const updateRequests$: Observable<IFlowGroupRequestResponse>[] = [];\n    const createRequests$: Observable<IFlowGroupRequestResponse>[] = [];\n\n    const deleteRequests$: Observable<IFlowGroupRequestResponse>[] = this.deletedFlowGroups.map(\n      (flowGroupName: string) =>\n        this.rxApprovalConfigurationService\n          .deleteApprovalFlowGroup(flowGroupName, this.registeredRecordDefinitionName)\n          .pipe(\n            map(() => <IFlowGroupRequestResponse>{ status: 'Success' }),\n            catchError((error: HttpErrorResponse) =>\n              of(<IFlowGroupRequestResponse>{\n                status: 'Failed',\n                error\n              })\n            )\n          )\n    );\n\n    this.allAvailableFlowGroups.forEach((flowGroup: IApprovalFlowGroup) => {\n      if (flowGroup.isDirty) {\n        this.isSaveInProgress = true;\n\n        const flowGroupConfiguration: IApprovalFlowGroup = this.preparePayload(flowGroup);\n\n        if (this.isExistingFlowGroup(flowGroupConfiguration.flowGroup) || flowGroupConfiguration.flowGroupOldName) {\n          updateRequests$.push(\n            this.rxApprovalConfigurationService\n              .updateApprovalFlowGroup(\n                flowGroupConfiguration.flowGroupOldName || flowGroupConfiguration.flowGroup,\n                omit(flowGroupConfiguration, 'flowGroupOldName'),\n                this.registeredRecordDefinitionName\n              )\n              .pipe(\n                map(\n                  () =>\n                    <IFlowGroupRequestResponse>{\n                      status: 'Success'\n                    }\n                ),\n                catchError((error: HttpErrorResponse) =>\n                  of(<IFlowGroupRequestResponse>{\n                    status: 'Failed',\n                    error\n                  })\n                )\n              )\n          );\n        } else {\n          createRequests$.push(\n            this.rxApprovalConfigurationService\n              .saveApprovalFlowGroup(flowGroupConfiguration, this.registeredRecordDefinitionName)\n              .pipe(\n                switchMap(() =>\n                  this.rxApprovalConfigurationService.getApprovalFlowGroup(\n                    this.registeredRecordDefinitionName,\n                    flowGroupConfiguration.flowGroup\n                  )\n                ),\n                tap((createdFlowGroup: IApprovalFlowGroup) => {\n                  this.existingFlowGroupNames.push(createdFlowGroup.flowGroup);\n\n                  const flowGroup = find(this.allAvailableFlowGroups, { flowGroup: createdFlowGroup.flowGroup });\n\n                  flowGroup.isDirty = false;\n\n                  forEach(flowGroup.approvalFlowConfigurationList, (flow: IApprovalFlow, flowIndex: number) => {\n                    flow.approvalProcessId =\n                      createdFlowGroup.approvalFlowConfigurationList[flowIndex].approvalProcessId;\n                    flow.guid = createdFlowGroup.approvalFlowConfigurationList[flowIndex].guid;\n                  });\n                }),\n                map(\n                  () =>\n                    <IFlowGroupRequestResponse>{\n                      status: 'Success'\n                    }\n                ),\n                catchError((error: HttpErrorResponse) =>\n                  of(<IFlowGroupRequestResponse>{\n                    status: 'Failed',\n                    error\n                  })\n                )\n              )\n          );\n        }\n      }\n    });\n\n    forkJoin({\n      createRequests: forkJoin(createRequests$).pipe(defaultIfEmpty([])),\n      updateRequests: forkJoin(updateRequests$).pipe(defaultIfEmpty([])),\n      deleteRequests: forkJoin(deleteRequests$).pipe(defaultIfEmpty([]))\n    })\n      .pipe(\n        tap((response: any) => {\n          let message = '';\n\n          const failedResponses: IFlowGroupRequestResponse[] = flatten(\n            _map(response, (requestResponses) => _filter(requestResponses, { status: 'Failed' }))\n          );\n\n          createFailedCount = _filter(response.createRequests, { status: 'Failed' }).length;\n          createSuccessCount = _filter(response.createRequests, { status: 'Success' }).length;\n          updateFailedCount = _filter(response.updateRequests, { status: 'Failed' }).length;\n          updateSuccessCount = _filter(response.updateRequests, { status: 'Success' }).length;\n          deleteFailedCount = _filter(response.deleteRequests, { status: 'Failed' }).length;\n          deleteSuccessCount = _filter(response.deleteRequests, { status: 'Success' }).length;\n\n          if (createSuccessCount) {\n            message += `${this.translateService.instant(\n              'com.bmc.arsys.rx.client.approval.configuration.message.flowgroup.created',\n              { count: createSuccessCount }\n            )}\\n`;\n          }\n\n          if (updateSuccessCount) {\n            message += `${this.translateService.instant(\n              'com.bmc.arsys.rx.client.approval.configuration.message.flowgroup.updated',\n              { count: updateSuccessCount }\n            )}\\n`;\n          }\n\n          if (deleteSuccessCount) {\n            message += `${this.translateService.instant(\n              'com.bmc.arsys.rx.client.approval.configuration.message.flowgroup.deleted',\n              { count: deleteSuccessCount }\n            )}\\n`;\n          }\n\n          if (createFailedCount) {\n            message += `${this.translateService.instant(\n              'com.bmc.arsys.rx.client.approval.configuration.message.flowgroup.create-failed',\n              { count: createFailedCount }\n            )}\\n`;\n          }\n\n          if (updateFailedCount) {\n            message += `${this.translateService.instant(\n              'com.bmc.arsys.rx.client.approval.configuration.message.flowgroup.update-failed',\n              { count: updateFailedCount }\n            )}\\n`;\n          }\n\n          if (deleteFailedCount) {\n            message += `${this.translateService.instant(\n              'com.bmc.arsys.rx.client.approval.configuration.message.flowgroup.delete-failed',\n              { count: deleteFailedCount }\n            )}\\n`;\n          }\n\n          if (createFailedCount || updateFailedCount || deleteFailedCount) {\n            this.rxNotificationService.addWarningMessage(message);\n          } else {\n            this.rxNotificationService.addSuccessMessage(message);\n          }\n\n          forEach(failedResponses, (requestResponse: IFlowGroupRequestResponse) => {\n            this.errorHandler.handleError(requestResponse.error);\n          });\n        }),\n        filter(() => !(createFailedCount || updateFailedCount || deleteFailedCount)),\n        switchMap(() => this.getFlowGroups())\n      )\n      .subscribe({\n        complete: () => {\n          this.isSaveInProgress = false;\n        }\n      });\n  }\n\n  onKeyDownNew(event: KeyboardEvent): void {\n    if (event.code === 'Enter' && !this.isAddNewFlowGroupButtonDisabled()) {\n      this.addNewFlowGroup();\n    }\n  }\n\n  addNewFlowGroup(): void {\n    this.markInvalidSelectedGroupAndFlows();\n    this.adaptPopoverDirective.close();\n\n    this.allAvailableFlowGroups.push({\n      flowGroup: trim(this.flowGroupName),\n      hasError: true,\n      approvalFlowConfigurationList: []\n    });\n\n    this.allAvailableFlowGroups.sort((a, b) => a.flowGroup.localeCompare(b.flowGroup));\n    this.selectedFlowGroup = find(this.allAvailableFlowGroups, { flowGroup: trim(this.flowGroupName) });\n    this.flowGroupName = null;\n  }\n\n  onKeyDownRename(event: KeyboardEvent, context): void {\n    if (event.code === 'Enter') {\n      this.renameFlowGroup(context);\n    }\n  }\n\n  renameFlowGroup(context: any): void {\n    if (!this.isExistingFlowGroup()) {\n      this.selectedFlowGroup.flowGroup = trim(this.flowGroupNewName);\n\n      context.close();\n    } else {\n      this.rxModalService\n        .confirm({\n          title: this.translateService.instant('com.bmc.arsys.rx.client.common.warning.label'),\n          modalStyle: RX_MODAL.modalStyles.warning,\n          message: this.translateService.instant(\n            'com.bmc.arsys.rx.client.approval.configuration.message.flowgroup.updatingGroupName'\n          )\n        })\n        .then((result: boolean) => {\n          if (result) {\n            this.selectedFlowGroup.isDirty = true;\n            this.selectedFlowGroup.flowGroupOldName = this.selectedFlowGroup.flowGroup;\n            this.selectedFlowGroup.flowGroup = trim(this.flowGroupNewName);\n          }\n        });\n    }\n  }\n\n  deleteFlowGroup(): void {\n    if (!this.isExistingFlowGroup()) {\n      this.rxModalService\n        .confirm({\n          title: this.translateService.instant('com.bmc.arsys.rx.client.common.warning.label'),\n          modalStyle: RX_MODAL.modalStyles.warning,\n          message: this.translateService.instant('com.bmc.arsys.rx.client.common.unsaved-data.message')\n        })\n        .then((result: boolean) => {\n          if (result) {\n            remove(this.allAvailableFlowGroups, { flowGroup: this.selectedFlowGroup.flowGroup });\n            this.setEmptyFlowGroup();\n          }\n        });\n    } else {\n      this.rxModalService\n        .confirm({\n          title: this.translateService.instant('com.bmc.arsys.rx.client.common.warning.label'),\n          modalStyle: RX_MODAL.modalStyles.warning,\n          message: this.translateService.instant(\n            'com.bmc.arsys.rx.client.approval.configuration.message.flowgroup.confirm'\n          )\n        })\n        .then((result: boolean) => {\n          if (result) {\n            this.deletedFlowGroups.push(this.selectedFlowGroup.flowGroup);\n            remove(this.allAvailableFlowGroups, { flowGroup: this.selectedFlowGroup.flowGroup });\n            this.setEmptyFlowGroup();\n          }\n        });\n    }\n  }\n\n  private setEmptyFlowGroup(): void {\n    this.selectedFlowGroup = this.getEmptyFlowGroup();\n  }\n\n  onFlowQualificationEvent(flowIndex: number): void {\n    this.selectFlowQualificationExpression(flowIndex);\n  }\n\n  private selectFlowQualificationExpression(flowIndex: number): void {\n    this.rxExpressionEditorService\n      .openEditor(\n        {\n          property: {\n            path: RX_APPROVAL_CONFIGURATION.flowQualificationProperty,\n            value: this.selectedFlowGroup.approvalFlowConfigurationList[flowIndex].qualification,\n            label: this.translateService.instant('com.bmc.arsys.rx.client.approval.configuration.qualification')\n          },\n          expressionConfigurator: this.expressionConfigurator,\n          legend: [\n            {\n              label: this.translateService.instant('com.bmc.arsys.rx.client.expression-editor.legend.keyword.label'),\n              icon: 'd-icon-dollar'\n            },\n            {\n              label: this.translateService.instant('com.bmc.arsys.rx.client.expression-editor.legend.field.label'),\n              icon: 'd-icon-field_text'\n            }\n          ]\n        },\n        (dialogApi: IDialogApi) => (this.dialogApi = dialogApi)\n      )\n      .subscribe((expression: IExpressionEditorPropertyChange) => {\n        this.dialogApi = null;\n        this.approvalFlowsForm.form.markAsDirty();\n        this.selectedFlowGroup.approvalFlowConfigurationList[flowIndex].qualification = expression.value;\n      });\n  }\n\n  onApproverQualificationEvent(flowIndex: number): void {\n    this.selectApproverQualificationExpression(flowIndex);\n  }\n\n  private selectApproverQualificationExpression(flowIndex: number): void {\n    this.rxExpressionEditorService\n      .openEditor(\n        {\n          property: {\n            path: RX_APPROVAL_CONFIGURATION.approverQualificationProperty,\n            value: this.selectedFlowGroup.approvalFlowConfigurationList[flowIndex].approverQualification,\n            label: this.translateService.instant(\n              'com.bmc.arsys.rx.client.approval.configuration.flow.general.qualify-approvers.label'\n            )\n          },\n          expressionConfigurator: this.expressionConfigurator,\n          legend: [\n            {\n              label: this.translateService.instant('com.bmc.arsys.rx.client.expression-editor.legend.keyword.label'),\n              icon: 'd-icon-dollar'\n            },\n            {\n              label: this.translateService.instant('com.bmc.arsys.rx.client.expression-editor.legend.field.label'),\n              icon: 'd-icon-field_text'\n            }\n          ]\n        },\n        (dialogApi: IDialogApi) => (this.dialogApi = dialogApi)\n      )\n      .subscribe((expression: IExpressionEditorPropertyChange) => {\n        this.dialogApi = null;\n        this.approvalFlowsForm.form.markAsDirty();\n        this.selectedFlowGroup.approvalFlowConfigurationList[flowIndex].approverQualification = expression.value;\n        this.updateFlowErrorState(flowIndex);\n      });\n  }\n\n  private updateFlowErrorState(flowIndex: number): void {\n    this.selectedFlowGroup.approvalFlowConfigurationList[flowIndex].hasError = Boolean(\n      !this.selectedFlowGroup.approvalFlowConfigurationList[flowIndex].approverQualification &&\n        !this.selectedFlowGroup.approvalFlowConfigurationList[flowIndex].approvers\n    );\n\n    this.selectedFlowGroup.hasError = some(\n      this.selectedFlowGroup.approvalFlowConfigurationList,\n      (flow) => flow.hasError\n    );\n  }\n\n  private getFlowEmptyOutcomes(): IApprovalFlowOutcomeAction[] {\n    return [\n      {\n        processName: null,\n        action: '2',\n        statusOutcome: '1'\n      },\n      {\n        processName: null,\n        action: '2',\n        statusOutcome: '2'\n      },\n      {\n        processName: null,\n        action: '2',\n        statusOutcome: '6'\n      }\n    ];\n  }\n\n  private getEmptyGeneralApprovalFlow(): IApprovalFlow {\n    return {\n      isOpen: true,\n      hasError: false,\n      approvalProcessId: null,\n      flowName: '',\n      processType: null,\n      qualification: null,\n      formattedQualification: null,\n      precedence: this.selectedFlowGroup.approvalFlowConfigurationList.length,\n      signingCriteria: this.getCriteria(),\n      signingCriteriaList: this.getFlowCriteriaList(),\n      approvalOverridePercentage: 50,\n      isLevelUp: false,\n      levels: null,\n      approvers: '',\n      applyApproverExclusion: true,\n      approversDisplayValue: '',\n      approverQualification: null,\n      approvalFlowOutcomeMappingList: this.getFlowEmptyOutcomes()\n    };\n  }\n\n  getCriteria(value?: number): RxSelectOption[] {\n    return [find(this.getFlowCriteriaList(), { value: value || RX_APPROVAL_CONFIGURATION.approverCriteria.oneMust })];\n  }\n\n  getFlowCriteriaList(): RxSelectOption[] {\n    return cloneDeep(this.signingCriteriaList);\n  }\n\n  addNewGeneralFlow(): void {\n    this.collapseAll();\n\n    setTimeout(() => {\n      this.selectedFlowGroup.approvalFlowConfigurationList.push(this.getEmptyGeneralApprovalFlow());\n    });\n  }\n\n  addNewLevelUpFlow(): void {\n    this.collapseAll();\n\n    setTimeout(() => {\n      this.selectedFlowGroup.approvalFlowConfigurationList.push({\n        ...this.getEmptyGeneralApprovalFlow(),\n        isLevelUp: true\n      });\n    });\n  }\n\n  selectFlowGroup(flowGroupName: string): void {\n    this.selectedFlowGroup = find(this.allAvailableFlowGroups, { flowGroup: flowGroupName });\n\n    if (!this.selectedFlowGroup.isDirty) {\n      this.approvalFlowsForm.form.markAsPristine();\n    }\n\n    this.collapseAll();\n    this.markInvalidGroupsAndFlows();\n  }\n\n  onSelectedFlowDrop(event: CdkDragDrop<IApprovalFlow>): void {\n    this.moveFlow(event.previousIndex, event.currentIndex);\n  }\n\n  moveFlow(previousIndex: number, currentIndex: number): void {\n    moveItemInArray(this.selectedFlowGroup.approvalFlowConfigurationList, previousIndex, currentIndex);\n    this.resetFlowPrecedences();\n  }\n\n  moveFlowUp(currentIndex: number) {\n    moveItemInArray(this.selectedFlowGroup.approvalFlowConfigurationList, currentIndex, currentIndex - 1);\n    this.resetFlowPrecedences();\n  }\n\n  moveFlowDown(currentIndex: number) {\n    moveItemInArray(this.selectedFlowGroup.approvalFlowConfigurationList, currentIndex, currentIndex + 1);\n    this.resetFlowPrecedences();\n  }\n\n  removeFlow(index: number): void {\n    this.selectedFlowGroup.approvalFlowConfigurationList.splice(index, 1);\n    this.markInvalidSelectedGroupAndFlows();\n    this.resetFlowPrecedences();\n  }\n\n  resetFlowPrecedences(): void {\n    this.approvalFlowsForm.form.markAsDirty();\n\n    this.selectedFlowGroup.approvalFlowConfigurationList = this.selectedFlowGroup.approvalFlowConfigurationList.map(\n      (currentFlow: IApprovalFlow, index: number) => {\n        currentFlow.precedence = index;\n\n        return currentFlow;\n      }\n    );\n  }\n\n  optionFormatter(option: RxSelectOption): string {\n    return option.displayValue;\n  }\n\n  private refactorFlowsResponse(approvalFlows: IApprovalFlow[]): IApprovalFlow[] {\n    return flow(\n      (flows) => sortBy(flows, 'precedence'),\n      (flows) =>\n        _map(flows, (currentFlow: IApprovalFlow) => {\n          currentFlow.isOpen = false;\n          const flowOutcomeMappings = cloneDeep(currentFlow.approvalFlowOutcomeMappingList);\n\n          currentFlow.approvalFlowOutcomeMappingList[0] =\n            find(flowOutcomeMappings, { statusOutcome: '1' }) || this.getFlowEmptyOutcomes()[0];\n\n          currentFlow.approvalFlowOutcomeMappingList[1] =\n            find(flowOutcomeMappings, { statusOutcome: '2' }) || this.getFlowEmptyOutcomes()[1];\n\n          currentFlow.approvalFlowOutcomeMappingList[2] =\n            find(flowOutcomeMappings, { statusOutcome: '6' }) || this.getFlowEmptyOutcomes()[2];\n\n          if (!currentFlow.approvers || currentFlow.approvers === RX_APPROVAL_CONFIGURATION.noApproverProvided) {\n            currentFlow.approvers = '';\n          }\n\n          currentFlow.approvers = currentFlow.approvers.replace(/\\\\\"/g, '');\n          currentFlow.approversDisplayValue = this.getApproversDisplay(currentFlow);\n          currentFlow.signingCriteriaList = this.getFlowCriteriaList();\n          currentFlow.approvalOverridePercentage = [currentFlow.approvalOverridePercentage];\n\n          currentFlow.signingCriteria = [\n            {\n              value: currentFlow.signingCriteria,\n              displayValue: this.getCriteria(currentFlow.signingCriteria)[0].displayValue\n            }\n          ];\n\n          return currentFlow;\n        })\n    )(approvalFlows);\n  }\n\n  isExistingFlowGroup(flowGroupName: string = null): boolean {\n    return this.existingFlowGroupNames.includes(flowGroupName || this.selectedFlowGroup.flowGroup);\n  }\n\n  isRenameFlowGroupButtonDisabled(): boolean {\n    return (\n      trim(this.flowGroupNewName) !== this.selectedFlowGroup.flowGroup &&\n      some(\n        this.allAvailableFlowGroups,\n        (flowGroup) => flowGroup.flowGroup.toLowerCase() === trim(this.flowGroupNewName.toLowerCase())\n      )\n    );\n  }\n\n  isAddNewFlowGroupButtonDisabled(): boolean {\n    return (\n      !this.flowGroupName ||\n      some(\n        this.allAvailableFlowGroups,\n        (flowGroup) => flowGroup.flowGroup.toLowerCase() === trim(this.flowGroupName.toLowerCase())\n      )\n    );\n  }\n\n  expandAll(): void {\n    this.selectedFlowGroup.approvalFlowConfigurationList.forEach(\n      (approvalFlow: IApprovalFlow) => (approvalFlow.isOpen = true)\n    );\n  }\n\n  collapseAll(): void {\n    this.selectedFlowGroup.approvalFlowConfigurationList.forEach(\n      (approvalFlow: IApprovalFlow) => (approvalFlow.isOpen = false)\n    );\n  }\n\n  selectFlowApprovers(flowIndex: number): void {\n    this.rxModalService\n      .openModal({\n        title:\n          this.translateService.instant(\n            'com.bmc.arsys.rx.client.approval.configuration.flow.select-approvers-dialog.title'\n          ) +\n          ': ' +\n          this.selectedFlowGroup.approvalFlowConfigurationList[flowIndex].flowName,\n        data: {\n          registeredRecordDefinitionName: this.registeredRecordDefinitionName,\n          existingApprovers: this.selectedFlowGroup.approvalFlowConfigurationList[flowIndex].approvers,\n          isFieldIdentifyingApprover:\n            this.selectedFlowGroup.approvalFlowConfigurationList[flowIndex].isFieldIdentifyingApprover,\n          onApiReady: (dialogApi: IDialogApi) => {\n            this.dialogApi = dialogApi;\n          }\n        },\n        content: FlowApproversSelectorComponent,\n        size: OpenViewActionModalSize.Large as any\n      })\n      .then((result) => {\n        this.dialogApi = null;\n        this.approvalFlowsForm.form.markAsDirty();\n        this.selectedFlowGroup.approvalFlowConfigurationList[flowIndex].approvers = result.value;\n        this.selectedFlowGroup.approvalFlowConfigurationList[flowIndex].approversDisplayValue = result.displayValue;\n        this.manageApproverCriteriaOption(flowIndex);\n        this.updateFlowErrorState(flowIndex);\n        this.selectedFlowGroup.isDirty = true;\n      })\n      .catch(() => {\n        this.dialogApi = null;\n      });\n  }\n\n  manageApproverCriteriaOption(flowIndex): void {\n    if (\n      this.rxApprovalConfigurationService.isFieldIdentifyingApprover(\n        this.selectedFlowGroup.approvalFlowConfigurationList[flowIndex].approvers\n      )\n    ) {\n      this.selectedFlowGroup.approvalFlowConfigurationList[flowIndex].signingCriteria = this.getCriteria();\n\n      find(this.selectedFlowGroup.approvalFlowConfigurationList[flowIndex].signingCriteriaList, {\n        value: RX_APPROVAL_CONFIGURATION.approverCriteria.percentage\n      }).disabled = true;\n    }\n  }\n\n  ngOnDestroy(): void {\n    this.destroyed$.next();\n    this.destroyed$.complete();\n  }\n\n  private getApproversDisplay(approvalFlow: IApprovalFlow): string {\n    const approvers = approvalFlow.approvers.split(RX_APPROVAL_CONFIGURATION.approverSeparator);\n\n    return _map(approvers, (approver) => {\n      if (this.rxApprovalConfigurationService.isFieldIdentifyingApprover(approvalFlow.approvers)) {\n        approvalFlow.isFieldIdentifyingApprover = true;\n        approver = this.rxApprovalConfigurationService.getFieldIdentifyingApprover(approver);\n      } else if (this.rxApprovalConfigurationService.isFunctionalRole(approver)) {\n        approver = get(\n          find(this.availableFunctionalRoles, {\n            id: this.rxApprovalConfigurationService.getFunctionalRoleGuid(approver)\n          }),\n          'name'\n        );\n      } else if (this.rxApprovalConfigurationService.isApproverPeople(approver)) {\n        approver = this.rxApprovalConfigurationService.getApproverUser(approver);\n      } else {\n        approver = this.rxApprovalConfigurationService.getLastLabel(approver);\n      }\n\n      return approver;\n    })\n      .filter(Boolean)\n      .join(', ');\n  }\n\n  getFlowName(flow: IApprovalFlow): string {\n    return (\n      flow.flowName ||\n      (flow.isLevelUp\n        ? `[${this.translateService.instant(\n            'com.bmc.arsys.rx.client.approval.configuration.flow-group.level-flow.new.default-value'\n          )}]`\n        : `[${this.translateService.instant(\n            'com.bmc.arsys.rx.client.approval.configuration.flow-group.general-flow.new.default-value'\n          )}]`)\n    );\n  }\n}\n","<div class=\"row d-flex h-100\">\n  <div class=\"col-3 border-right d-flex flex-column h-100\">\n    <h5>\n      {{ 'com.bmc.arsys.rx.client.approval.configuration.flow.available-flow-groups.title' | translate }}\n    </h5>\n\n    <button\n      type=\"button\"\n      adapt-button\n      btn-type=\"tertiary\"\n      rx-id=\"new-flow-group-button\"\n      class=\"d-icon-plus_circle px-0 align-self-start\"\n      [adaptPopover]=\"newFlowGroupTemplate\"\n      maxWidth=\"365\"\n      autoClose=\"outside\"\n      appendToBody=\"true\"\n      placement=\"bottom-left\"\n      fallbackPlacement=\"bottom\"\n    >\n      {{ 'com.bmc.arsys.rx.client.approval.configuration.flow.new.title' | translate }}\n    </button>\n\n    <div class=\"available-list border p-3 flex-fill\">\n      <div class=\"vertical-center\" *ngIf=\"!allAvailableFlowGroups.length\">\n        <adapt-empty-state\n          [type]=\"'list'\"\n          label=\"{{ 'com.bmc.arsys.rx.client.empty-state.no-items-available.label' | translate }}\"\n        ></adapt-empty-state>\n      </div>\n\n      <button\n        type=\"button\"\n        adapt-button\n        btn-type=\"tertiary\"\n        rx-id=\"rename-flow-group-button\"\n        class=\"d-icon-field_text px-0 pt-0\"\n        [disabled]=\"!selectedFlowGroup.flowGroup\"\n        [adaptPopover]=\"renameFlowGroupTemplate\"\n        maxWidth=\"365\"\n        autoClose=\"outside\"\n        appendToBody=\"true\"\n        placement=\"bottom-left\"\n        fallbackPlacement=\"bottom\"\n        (shown)=\"flowGroupNewName = selectedFlowGroup.flowGroup\"\n      >\n        {{ 'com.bmc.arsys.rx.client.common.rename.label' | translate }}\n      </button>\n\n      <button\n        type=\"button\"\n        adapt-button\n        btn-type=\"tertiary\"\n        rx-id=\"delete-flow-group-button\"\n        class=\"d-icon-trash pt-0\"\n        [disabled]=\"!selectedFlowGroup.flowGroup\"\n        (click)=\"deleteFlowGroup()\"\n      >\n        {{ 'com.bmc.arsys.rx.client.common.delete.label' | translate }}\n      </button>\n\n      <adapt-rx-radiobutton-group\n        class=\"d-block form-group\"\n        rx-id=\"available-flow-groups\"\n        (ngModelChange)=\"selectFlowGroup($event)\"\n        [(ngModel)]=\"selectedFlowGroup.flowGroup\"\n      >\n        <div *ngFor=\"let group of allAvailableFlowGroups\" class=\"d-flex align-items-center\">\n          <adapt-rx-radiobutton\n            class=\"mb-0 mt-0 wrap-word\"\n            [value]=\"group.flowGroup\"\n            [label]=\"group.flowGroup\"\n          ></adapt-rx-radiobutton>\n\n          <div class=\"ml-1 mb-1 d-icon-exclamation_triangle text-danger\" *ngIf=\"group.hasError\"></div>\n        </div>\n      </adapt-rx-radiobutton-group>\n    </div>\n  </div>\n\n  <div class=\"col-9 d-flex flex-column h-100\">\n    <div class=\"d-flex flex-column h-100\">\n      <h5>\n        {{ 'com.bmc.arsys.rx.client.approval.configuration.flow.selected-flow-group.title' | translate }}:\n        {{ selectedFlowGroup.flowGroup || ('com.bmc.arsys.rx.client.common.none.label' | translate) }}\n      </h5>\n\n      <div class=\"row\">\n        <div class=\"col-12 col-sm-6\">\n          <div class=\"d-inline-flex align-items-center\">\n            <button\n              type=\"button\"\n              adapt-button\n              btn-type=\"tertiary\"\n              rx-id=\"new-general-flow-button\"\n              class=\"d-icon-plus_circle px-0\"\n              [disabled]=\"!selectedFlowGroup.flowGroup\"\n              (click)=\"addNewGeneralFlow()\"\n            >\n              {{ 'com.bmc.arsys.rx.client.approval.configuration.flow.general.new.label' | translate }}\n            </button>\n            <span\n              class=\"d-icon-right-question_circle_o ml-1 mr-4\"\n              adaptPopover=\"{{ 'com.bmc.arsys.rx.client.approval.configuration.flow.general.info' | translate }}\"\n              placement=\"right\"\n              appendToBody=\"true\"\n            >\n            </span>\n          </div>\n\n          <div class=\"d-inline-flex align-items-center\">\n            <button\n              type=\"button\"\n              adapt-button\n              btn-type=\"tertiary\"\n              rx-id=\"new-level-flow-button\"\n              class=\"d-icon-plus_circle px-0\"\n              [disabled]=\"!selectedFlowGroup.flowGroup\"\n              (click)=\"addNewLevelUpFlow()\"\n            >\n              {{ 'com.bmc.arsys.rx.client.approval.configuration.flow.level.new.label' | translate }}\n            </button>\n\n            <span\n              class=\"d-icon-right-question_circle_o ml-1\"\n              adaptPopover=\"{{ 'com.bmc.arsys.rx.client.approval.configuration.flow.level.info' | translate }}\"\n              placement=\"right\"\n              appendToBody=\"true\"\n            >\n            </span>\n          </div>\n        </div>\n\n        <div class=\"col-12 col-sm-6 text-right\">\n          <button\n            type=\"button\"\n            adapt-button\n            btn-type=\"tertiary\"\n            rx-id=\"expand-button\"\n            (click)=\"expandAll()\"\n            *ngIf=\"selectedFlowGroup.approvalFlowConfigurationList.length\"\n          >\n            {{ 'com.bmc.arsys.rx.client.common.expand-all.label' | translate }}\n          </button>\n\n          <button\n            type=\"button\"\n            adapt-button\n            btn-type=\"tertiary\"\n            rx-id=\"collapse-button\"\n            (click)=\"collapseAll()\"\n            *ngIf=\"selectedFlowGroup.approvalFlowConfigurationList.length\"\n          >\n            {{ 'com.bmc.arsys.rx.client.common.collapse-all.label' | translate }}\n          </button>\n        </div>\n      </div>\n\n      <adapt-alert\n        *ngIf=\"selectedFlowGroup.flowGroup && !selectedFlowGroup.approvalFlowConfigurationList.length\"\n        [config]=\"{\n          variant: 'warning',\n          dismissible: false,\n          content: 'com.bmc.arsys.rx.client.approval.configuration.flow.group-has-no-flows-error.message' | translate\n        }\"\n      ></adapt-alert>\n\n      <div class=\"vertical-center\">\n        <adapt-empty-state\n          *ngIf=\"!selectedFlowGroup.flowGroup && !selectedFlowGroup.approvalFlowConfigurationList.length\"\n          [type]=\"'rules'\"\n          label=\"{{ 'com.bmc.arsys.rx.client.empty-state.no-items-available.label' | translate }}\"\n        ></adapt-empty-state>\n      </div>\n\n      <div\n        class=\"designer-modal-accordion-wrapper flex-fill pt-0\"\n        [ngClass]=\"{ 'border-top': selectedFlowGroup.approvalFlowConfigurationList.length }\"\n        cdkDropList\n        (cdkDropListDropped)=\"onSelectedFlowDrop($event)\"\n      >\n        <form #approvalFlowsForm=\"ngForm\">\n          <adapt-accordion [multiselect]=\"true\" class=\"flex-fill\">\n            <div\n              *ngFor=\"\n                let flow of selectedFlowGroup.approvalFlowConfigurationList;\n                let index = index;\n                let first = first;\n                let last = last\n              \"\n              class=\"designer-modal-accordion-content\"\n              cdkDrag\n              cdkDragLockAxis=\"y\"\n              [cdkDragData]=\"flow\"\n            >\n              <div class=\"d-icon-left-dots designer-modal-drag-handle\" cdkDragHandle></div>\n\n              <adapt-accordion-tab\n                class=\"d-block\"\n                [isOpen]=\"flow.isOpen\"\n                (open)=\"flow.isOpen = true\"\n                (close)=\"flow.isOpen = false; markInvalidSelectedGroupAndFlows()\"\n              >\n                <div class=\"card-title-text w-100\">\n                  <div class=\"designer-modal-card-title-content\">\n                    <div class=\"left-header-block\">\n                      <div class=\"rx-ellipsis\" [title]=\"getFlowName(flow)\" rx-id=\"card-title\">\n                        {{ getFlowName(flow) }}\n                      </div>\n                      <div class=\"d-icon-exclamation_triangle text-danger\" *ngIf=\"flow.hasError\"></div>\n                    </div>\n\n                    <div class=\"right-header-block\">\n                      <div class=\"designer-modal-card-title-index-buttons\">\n                        <button\n                          class=\"d-icon-angle_up px-3 py-1\"\n                          adapt-button\n                          btn-type=\"tertiary\"\n                          size=\"small\"\n                          type=\"button\"\n                          [disabled]=\"first\"\n                          (click)=\"$event.stopPropagation(); moveFlowUp(index)\"\n                        ></button>\n\n                        <button\n                          class=\"d-icon-angle_down px-3 py-1\"\n                          adapt-button\n                          btn-type=\"tertiary\"\n                          size=\"small\"\n                          type=\"button\"\n                          [disabled]=\"last\"\n                          (click)=\"$event.stopPropagation(); moveFlowDown(index)\"\n                        ></button>\n                      </div>\n\n                      <button\n                        class=\"d-icon-left-cross_adapt p-1 pr-4\"\n                        adapt-button\n                        size=\"small\"\n                        type=\"button\"\n                        (click)=\"removeFlow(index)\"\n                      >\n                        {{ 'com.bmc.arsys.rx.client.common.remove.label' | translate }}\n                      </button>\n                    </div>\n                  </div>\n                </div>\n\n                <adapt-alert\n                  *ngIf=\"flow.hasError\"\n                  [config]=\"{\n                    variant: 'warning',\n                    dismissible: false,\n                    content:\n                      'com.bmc.arsys.rx.client.approval.configuration.flow.approvers.not-selected.message' | translate\n                  }\"\n                ></adapt-alert>\n\n                <adapt-rx-textfield\n                  class=\"form-group d-block\"\n                  rx-id=\"flow-name\"\n                  label=\"{{\n                    'com.bmc.arsys.rx.client.approval.configuration.flow.general.flow-name.label' | translate\n                  }}\"\n                  required=\"true\"\n                  [(ngModel)]=\"flow.flowName\"\n                  [autofocus]=\"true\"\n                  name=\"{{ 'flowName' + index }}\"\n                  maxlength=\"254\"\n                >\n                </adapt-rx-textfield>\n\n                <adapt-rx-counter\n                  *ngIf=\"flow.isLevelUp\"\n                  adaptMin=\"1\"\n                  [min]=\"1\"\n                  class=\"form-group d-block\"\n                  rx-id=\"flow-levels\"\n                  label=\"{{ 'com.bmc.arsys.rx.client.approval.configuration.levels' | translate }}\"\n                  required=\"true\"\n                  [(ngModel)]=\"flow.levels\"\n                  name=\"{{ 'levels' + index }}\"\n                >\n                </adapt-rx-counter>\n\n                <rx-expression-form-control\n                  class=\"d-block\"\n                  [ngClass]=\"{ 'form-group': !flow.isLevelUp }\"\n                  rx-id=\"flow-qualification\"\n                  [options]=\"flowQualificationOptions\"\n                  [(ngModel)]=\"flow.qualification\"\n                  (events)=\"onFlowQualificationEvent(index)\"\n                  name=\"{{ 'flowQualification' + index }}\"\n                ></rx-expression-form-control>\n\n                <div *ngIf=\"!flow.isLevelUp\" rx-id=\"flow-approvers\" class=\"form-group\">\n                  <label class=\"form-control-label\">\n                    {{ 'com.bmc.arsys.rx.client.approval.configuration.approvers' | translate }}\n\n                    <button\n                      type=\"button\"\n                      adapt-button\n                      class=\"d-icon-pencil px-1 ml-3 mb-1\"\n                      btn-type=\"tertiary\"\n                      rx-id=\"edit-button\"\n                      (click)=\"selectFlowApprovers(index)\"\n                    >\n                      {{ 'com.bmc.arsys.rx.client.common.edit.label' | translate }}\n                    </button>\n                  </label>\n\n                  <adapt-rx-checkbox\n                    *ngIf=\"!flow.isLevelUp\"\n                    class=\"checkbox-inline ml-4\"\n                    label=\"{{\n                      'com.bmc.arsys.rx.client.approval.configuration.apply-approver-exclusion.label' | translate\n                    }}\"\n                    [(ngModel)]=\"flow.applyApproverExclusion\"\n                    name=\"{{ 'applyApproverExclusion' + index }}\"\n                  >\n                  </adapt-rx-checkbox>\n                  <span\n                    class=\"d-icon-right-question_circle_o ml-1\"\n                    adaptPopover=\"{{\n                      'com.bmc.arsys.rx.client.approval.configuration.apply-approver-exclusion.tooltip' | translate\n                    }}\"\n                    placement=\"right\"\n                    appendToBody=\"true\"\n                  >\n                  </span>\n\n                  <div class=\"approver-list bg-secondary p-1\">\n                    {{ flow.approversDisplayValue }}\n                  </div>\n                </div>\n\n                <rx-expression-form-control\n                  *ngIf=\"!flow.isLevelUp\"\n                  class=\"d-block form-group\"\n                  rx-id=\"approver-qualification\"\n                  [options]=\"qualifyApproversOptions\"\n                  [(ngModel)]=\"flow.approverQualification\"\n                  (events)=\"onApproverQualificationEvent(index)\"\n                  name=\"{{ 'approverQualification' + index }}\"\n                ></rx-expression-form-control>\n\n                <div class=\"row\">\n                  <div class=\"col-12 col-sm-6 form-group\">\n                    <adapt-rx-select\n                      *ngIf=\"!flow.isLevelUp\"\n                      class=\"d-block\"\n                      label=\"{{ 'com.bmc.arsys.rx.client.approval.configuration.if.multiple.approvers' | translate }}\"\n                      rx-id=\"signing-criteria\"\n                      [(ngModel)]=\"flow.signingCriteria\"\n                      [options]=\"flow.signingCriteriaList\"\n                      [optionFormatter]=\"optionFormatter\"\n                      name=\"{{ 'signingCriteria' + index }}\"\n                    >\n                    </adapt-rx-select>\n                  </div>\n\n                  <div class=\"col-12 col-sm-6 form-group\">\n                    <adapt-rx-select\n                      *ngIf=\"!flow.isLevelUp && flow.signingCriteria[0]?.value === 2\"\n                      class=\"d-block\"\n                      label=\"{{ 'com.bmc.arsys.rx.client.approval.configuration.value.of' | translate }}\"\n                      rx-id=\"signing-criteria-percentage\"\n                      [(ngModel)]=\"flow.approvalOverridePercentage\"\n                      [options]=\"signingCriteriaPercentageList\"\n                      name=\"{{ 'signingCriteriaPercentage' + index }}\"\n                    >\n                    </adapt-rx-select>\n                  </div>\n                </div>\n\n                <hr class=\"my-1\" />\n                <h6>{{ 'com.bmc.arsys.rx.client.approval.configuration.flow.outcome.label' | translate }}</h6>\n\n                <div class=\"row\" *ngIf=\"flow.isOpen\">\n                  <div class=\"col-12 col-sm-6 form-group\">\n                    <rx-definition-picker\n                      [options]=\"processOnApproveOptions\"\n                      [(ngModel)]=\"flow.approvalFlowOutcomeMappingList[0].processName\"\n                      rx-id=\"process-on-approval\"\n                      name=\"{{ 'processOnApproval' + index }}\"\n                    >\n                    </rx-definition-picker>\n                  </div>\n\n                  <div class=\"col-12 col-sm-6 form-group\">\n                    <rx-definition-picker\n                      [options]=\"processOnRejectOptions\"\n                      [(ngModel)]=\"flow.approvalFlowOutcomeMappingList[1].processName\"\n                      rx-id=\"process-on-rejection\"\n                      name=\"{{ 'processOnRejection' + index }}\"\n                    >\n                    </rx-definition-picker>\n                  </div>\n\n                  <div class=\"col-12 col-sm-6 form-group\">\n                    <rx-definition-picker\n                      [options]=\"processOnErrorOptions\"\n                      [(ngModel)]=\"flow.approvalFlowOutcomeMappingList[2].processName\"\n                      rx-id=\"process-on-error\"\n                      name=\"{{ 'processOnError' + index }}\"\n                    >\n                    </rx-definition-picker>\n                  </div>\n                </div>\n              </adapt-accordion-tab>\n            </div>\n          </adapt-accordion>\n        </form>\n      </div>\n    </div>\n  </div>\n</div>\n\n<ng-template #newFlowGroupTemplate let-context=\"context\">\n  <div class=\"flow-group-template\">\n    <div class=\"text-center mb-3 font-weight-bold\">\n      {{ 'com.bmc.arsys.rx.client.approval.configuration.flow.new.title' | translate }}\n    </div>\n\n    <adapt-rx-textfield\n      class=\"mb-1 d-block\"\n      rx-id=\"new-flow-button\"\n      label=\"{{ 'com.bmc.arsys.rx.client.approval.configuration.flow.flow-group-name.label' | translate }}\"\n      required=\"true\"\n      [(ngModel)]=\"flowGroupName\"\n      [autofocus]=\"true\"\n      (keydown)=\"onKeyDownNew($event)\"\n      maxlength=\"254\"\n    >\n    </adapt-rx-textfield>\n\n    <div class=\"text-danger\" *ngIf=\"flowGroupName && isAddNewFlowGroupButtonDisabled()\">\n      {{ 'com.bmc.arsys.rx.client.approval.configuration.flow.flow-group-exists.warning' | translate }}\n    </div>\n\n    <div class=\"text-right mt-5\">\n      <button\n        type=\"button\"\n        adapt-button\n        btn-type=\"primary\"\n        rx-id=\"add-button\"\n        (click)=\"addNewFlowGroup()\"\n        [disabled]=\"isAddNewFlowGroupButtonDisabled()\"\n      >\n        {{ 'com.bmc.arsys.rx.client.common.add.label' | translate }}\n      </button>\n\n      <button\n        type=\"button\"\n        adapt-button\n        btn-type=\"secondary\"\n        rx-id=\"cancel-button\"\n        (click)=\"context.close()\"\n        class=\"ml-2\"\n      >\n        {{ 'com.bmc.arsys.rx.client.common.cancel.label' | translate }}\n      </button>\n    </div>\n  </div>\n</ng-template>\n\n<ng-template #renameFlowGroupTemplate let-context=\"context\">\n  <div class=\"flow-group-template\">\n    <div class=\"text-center mb-3 font-weight-bold\">\n      {{ 'com.bmc.arsys.rx.client.approval.configuration.flow.rename.title' | translate }}\n    </div>\n\n    <adapt-rx-textfield\n      class=\"mb-1 d-block\"\n      rx-id=\"rename-flow-button\"\n      label=\"{{ 'com.bmc.arsys.rx.client.approval.configuration.flow.flow-group-name.label' | translate }}\"\n      required=\"true\"\n      [(ngModel)]=\"flowGroupNewName\"\n      [autofocus]=\"true\"\n      (keydown)=\"onKeyDownRename($event, context)\"\n      maxlength=\"254\"\n    >\n    </adapt-rx-textfield>\n\n    <div class=\"text-danger\" *ngIf=\"flowGroupNewName && isRenameFlowGroupButtonDisabled()\">\n      {{ 'com.bmc.arsys.rx.client.approval.configuration.flow.flow-group-exists.warning' | translate }}\n    </div>\n\n    <div class=\"text-right mt-5\">\n      <button\n        type=\"button\"\n        adapt-button\n        btn-type=\"primary\"\n        rx-id=\"rename-button\"\n        (click)=\"renameFlowGroup(context)\"\n        [disabled]=\"isRenameFlowGroupButtonDisabled()\"\n      >\n        {{ 'com.bmc.arsys.rx.client.approval.update.button.label' | translate }}\n      </button>\n    </div>\n  </div>\n</ng-template>\n","import { Injectable } from '@angular/core';\nimport { RxRecordGridUtilsService } from '@helix/platform/view/components';\nimport { forkJoin, Observable, of } from 'rxjs';\nimport { IRecordFields } from './field-definition-picker-component.types';\nimport { map, shareReplay, switchMap } from 'rxjs/operators';\nimport { IAssociationDescriptor } from '@helix/platform/association/api';\nimport {\n  IFieldDefinition,\n  IRecordDefinition,\n  RX_RECORD_DEFINITION,\n  RxRecordDefinitionCacheService\n} from '@helix/platform/record/api';\nimport { RxDefinitionNameService } from '@helix/platform/shared/api';\nimport { IValueWithLabel } from '@helix/platform/utils';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class RxFieldDefinitionPickerService {\n  constructor(\n    private rxRecordGridUtilsService: RxRecordGridUtilsService,\n    private rxRecordDefinitionCacheService: RxRecordDefinitionCacheService,\n    private rxDefinitionNameService: RxDefinitionNameService\n  ) {}\n\n  getAssociatedRecordFields(recordDefinitionName: string): Observable<IRecordFields[]> {\n    return this.rxRecordGridUtilsService.getAssociationDescriptors(recordDefinitionName).pipe(\n      switchMap((associationDescriptors: IAssociationDescriptor[]) => {\n        if (associationDescriptors.length) {\n          associationDescriptors.sort((descriptor1, descriptor2) => descriptor1.label.localeCompare(descriptor2.label));\n\n          return forkJoin(\n            associationDescriptors.map((associationDescriptor) => {\n              return this.rxRecordDefinitionCacheService\n                .getRecordDefinition(associationDescriptor.recordDefinitionName)\n                .pipe(\n                  map(\n                    (recordDefinition: IRecordDefinition) =>\n                      ({\n                        fields: this.getFieldDefinitions(recordDefinition.fieldDefinitions, associationDescriptor),\n                        label: associationDescriptor.label,\n                        isAssociatedRecord: true,\n                        isExpanded: false,\n                        value: associationDescriptor.associationDefinition.name,\n                        associationDescriptor: associationDescriptor\n                      } as IRecordFields)\n                  )\n                );\n            })\n          );\n        }\n\n        return of([]);\n      }),\n      shareReplay({\n        bufferSize: 1,\n        refCount: true\n      })\n    );\n  }\n\n  getRecordFields(recordDefinitionName: string): Observable<IRecordFields[]> {\n    return forkJoin([\n      this.getAssociatedRecordFields(recordDefinitionName),\n      this.rxRecordDefinitionCacheService.getRecordDefinition(recordDefinitionName)\n    ]).pipe(\n      map(([associatedRecordFields, recordDefinition]) => [\n        {\n          fields: this.getFieldDefinitions(recordDefinition.fieldDefinitions, null),\n          isExpanded: true,\n          isAssociatedRecord: false,\n          label: this.rxDefinitionNameService.getDisplayName(recordDefinitionName),\n          value: recordDefinitionName\n        } as IRecordFields,\n        ...associatedRecordFields\n      ]),\n      shareReplay({\n        bufferSize: 1,\n        refCount: true\n      })\n    );\n  }\n\n  private getFieldDefinitions(\n    fieldDefinitions: IFieldDefinition[],\n    associationDescriptor?: IAssociationDescriptor\n  ): IValueWithLabel[] {\n    return fieldDefinitions\n      .filter(\n        (fieldDefinition: IFieldDefinition) =>\n          fieldDefinition.resourceType !== RX_RECORD_DEFINITION.resourceTypes.attachment\n      )\n      .map((fieldDefinition) => {\n        const fieldKey = associationDescriptor\n          ? this.getFieldIdExpression(fieldDefinition.id, associationDescriptor)\n          : fieldDefinition.name;\n\n        return {\n          label: fieldDefinition.name,\n          value: fieldKey\n        };\n      })\n      .sort((field1, field2) => field1.label.localeCompare(field2.label));\n  }\n\n  private getFieldIdExpression(fieldId: string | number, associationDescriptor?: IAssociationDescriptor): string {\n    return `recordContext._associations.${associationDescriptor.associationDefinition.guid}.${associationDescriptor.nodeSide}[0].${fieldId}`;\n  }\n}\n","import { Component, ElementRef, Input, OnChanges, Renderer2, SimpleChanges, ViewChild } from '@angular/core';\nimport { NG_VALUE_ACCESSOR } from '@angular/forms';\nimport {\n  FieldsTree,\n  IFieldDefinitionPickerComponentOptions,\n  IRecordFields\n} from './field-definition-picker-component.types';\nimport { AdaptDropdownDirective } from '@bmc-ux/adapt-angular';\nimport { IRecordDefinition, RxRecordDefinitionCacheService } from '@helix/platform/record/api';\nimport { ValueAccessor } from '@helix/platform/shared/components';\nimport { RxDefinitionNameService } from '@helix/platform/shared/api';\nimport { RxRecordGridUtilsService } from '@helix/platform/view/components';\nimport { TranslateService } from '@ngx-translate/core';\nimport { RxFieldDefinitionPickerService } from './field-definition-picker.service';\nimport { IValueWithLabel, RxObjectUtilsService, RxStringService } from '@helix/platform/utils';\nimport { map, mergeMap } from 'rxjs/operators';\nimport { Observable } from 'rxjs';\n\n@Component({\n  selector: 'rx-field-definition-picker',\n  templateUrl: './field-definition-picker.component.html',\n  styleUrls: ['./field-definition-picker.component.scss'],\n  providers: [\n    {\n      provide: NG_VALUE_ACCESSOR,\n      useExisting: RxFieldDefinitionPickerComponent,\n      multi: true\n    }\n  ]\n})\nexport class RxFieldDefinitionPickerComponent extends ValueAccessor<string> implements OnChanges {\n  @Input()\n  options: IFieldDefinitionPickerComponentOptions;\n\n  @ViewChild('dropdownButton', { static: true })\n  dropdownButton: ElementRef;\n\n  @ViewChild('fieldDefinitionPicker', { static: true })\n  dropdown: AdaptDropdownDirective;\n\n  defaultText = this.translateService.instant('com.bmc.arsys.rx.client.common.select.label');\n  dropdownWidth: number;\n  filteredFieldsTree: FieldsTree = [];\n  label: string;\n  searchText = '';\n\n  constructor(\n    private rxDefinitionNameService: RxDefinitionNameService,\n    private rxRecordGridUtilsService: RxRecordGridUtilsService,\n    private rxRecordDefinitionCacheService: RxRecordDefinitionCacheService,\n    private translateService: TranslateService,\n    private rxFieldDefinitionPickerService: RxFieldDefinitionPickerService,\n    private rxStringService: RxStringService,\n    private rxObjectUtilsService: RxObjectUtilsService,\n    private renderer: Renderer2\n  ) {\n    super();\n  }\n\n  ngOnChanges(changes: SimpleChanges): void {\n    const fieldsTree = changes.options.currentValue?.fieldsTree;\n\n    if (fieldsTree?.length) {\n      this.filteredFieldsTree = this.rxObjectUtilsService.cloneDeep(fieldsTree);\n    } else {\n      this.filteredFieldsTree = [];\n    }\n\n    this.updateFieldLabel();\n  }\n\n  setDropdownWidth(): void {\n    const dropdownButton = this.renderer.selectRootElement(this.dropdownButton.nativeElement, true);\n\n    this.dropdownWidth = dropdownButton.clientWidth + 2;\n  }\n\n  selectField(fieldNode: IValueWithLabel): void {\n    this.dropdown.close();\n    this.label = fieldNode.label;\n    this.value = fieldNode.value;\n  }\n\n  clearFieldDefinition(e: Event): void {\n    e.stopPropagation();\n    this.reset();\n  }\n\n  reset(): void {\n    this.label = '';\n    this.value = '';\n  }\n\n  private updateFieldLabel(): void {\n    if (this.value) {\n      if (this.value.indexOf('associations') !== -1) {\n        this.initializeAssociatedFieldLabel().subscribe((fieldLabel) => (this.label = fieldLabel));\n      } else {\n        this.label = this.value;\n      }\n    } else {\n      this.label = '';\n    }\n  }\n\n  private initializeAssociatedFieldLabel(): Observable<string> {\n    if (this.options.recordDefinitionName) {\n      return this.rxRecordDefinitionCacheService\n        .getRecordDefinition(this.options.recordDefinitionName)\n        .pipe(\n          mergeMap((recordDefinition: IRecordDefinition) =>\n            this.rxRecordGridUtilsService\n              .getFieldDefinition(this.value, recordDefinition)\n              .pipe(map((fieldDefinition) => fieldDefinition.name))\n          )\n        );\n    }\n  }\n\n  filterFields(searchText: string): void {\n    this.filteredFieldsTree = this.rxObjectUtilsService.cloneDeep(this.options.fieldsTree);\n\n    if (searchText) {\n      this.filteredFieldsTree = this.filteredFieldsTree\n        .map((recordFields: IRecordFields) => ({\n          ...recordFields,\n          fields: recordFields.fields.filter((fieldDefinitionData: IValueWithLabel) =>\n            this.rxStringService.caseInsensitiveSearch(fieldDefinitionData.label, searchText)\n          )\n        }))\n        .filter((recordFields: IRecordFields) => recordFields.fields.length);\n    }\n  }\n}\n","<div class=\"d-flex\">\n  <adapt-rx-control-label *ngIf=\"options.label\" [label]=\"options.label\" [showRequiredLabel]=\"options.required\">\n  </adapt-rx-control-label>\n\n  <span\n    *ngIf=\"options?.tooltip\"\n    class=\"d-icon-right-question_circle_o ml-2\"\n    [adaptPopover]=\"options.tooltip\"\n    placement=\"right\"\n    appendToBody=\"true\"\n  >\n  </span>\n</div>\n\n<div\n  class=\"dropdown\"\n  adaptDropdown\n  appendToBody=\"true\"\n  [autoClose]=\"'outside'\"\n  [autoFocusFirst]=\"false\"\n  #fieldDefinitionPicker=\"adaptDropdown\"\n>\n  <button\n    rx-id=\"toggle-button\"\n    #dropdownButton\n    class=\"btn btn-secondary\"\n    (click)=\"setDropdownWidth()\"\n    adaptDropdownToggle\n    type=\"button\"\n    [disabled]=\"!options.recordDefinitionName\"\n  >\n    <span class=\"rx-selected-item rx-ellipsis\">{{ label || defaultText }}</span>\n\n    <span\n      rx-id=\"clear-button\"\n      class=\"d-icon-cross_adapt btn-link\"\n      *ngIf=\"value && !isDisabled\"\n      (click)=\"clearFieldDefinition($event)\"\n    >\n    </span>\n  </button>\n\n  <div class=\"dropdown-menu p-0\" [style.width.px]=\"dropdownWidth\" adaptDropdownMenu>\n    <div class=\"dropdown-header\">\n      <adapt-rx-search\n        [(ngModel)]=\"searchText\"\n        placeholder=\"{{ 'com.bmc.arsys.rx.client.common.filter-data.label' | translate }}\"\n        debounceTime=\"250\"\n        class=\"py-2\"\n        (ngModelChange)=\"filterFields($event)\"\n      >\n      </adapt-rx-search>\n    </div>\n\n    <ul class=\"records\" *ngIf=\"filteredFieldsTree.length\">\n      <li\n        class=\"record rx-ellipsis\"\n        *ngFor=\"let recordNode of filteredFieldsTree\"\n        (click)=\"recordNode.isExpanded = !recordNode.isExpanded\"\n      >\n        <span rx-id=\"expand-button\" class=\"expand-arrow d-icon-angle_right\" [class.open]=\"recordNode.isExpanded\"></span>\n\n        <span\n          class=\"px-1\"\n          [ngClass]=\"recordNode.isAssociatedRecord ? 'd-icon-arrow_schema' : 'd-icon-file_text'\"\n        ></span>\n\n        <span> {{ recordNode.label }} </span>\n\n        <div class=\"fields\" *ngIf=\"recordNode.isExpanded\">\n          <button\n            class=\"dropdown-item rx-ellipsis\"\n            (click)=\"$event.stopPropagation(); selectField(fieldNode)\"\n            type=\"button\"\n            [class.active]=\"value === fieldNode.label\"\n            *ngFor=\"let fieldNode of recordNode.fields\"\n          >\n            <adapt-highlight [result]=\"fieldNode.label\" [term]=\"searchText\"></adapt-highlight>\n          </button>\n        </div>\n      </li>\n    </ul>\n  </div>\n</div>\n","import { ChangeDetectorRef, Component, EventEmitter, Input, OnDestroy, OnInit, Output } from '@angular/core';\nimport { TranslateService } from '@ngx-translate/core';\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\nimport { RxApprovalConfigurationService } from '../approval-configuration.service';\nimport { cloneDeep, find } from 'lodash';\nimport {\n  IFieldDefinition,\n  IRecordDefinition,\n  ISecurityLabel,\n  RX_RECORD_DEFINITION,\n  RxRecordDefinitionCacheService,\n  RxRecordInstanceDataPageService\n} from '@helix/platform/record/api';\nimport {\n  IDefinitionPickerComponentOptions,\n  RxDefinitionPickerScope,\n  RxDefinitionPickerType\n} from '@helix/platform/shared/components';\nimport { RX_APPROVAL_CONFIGURATION } from '../approval-configuration.constant';\nimport { IAdditionalField, IRecordRegistration } from '../approval-configuration.types';\nimport { BehaviorSubject, combineLatest, forkJoin, Observable, of, ReplaySubject } from 'rxjs';\nimport {\n  IDataPageResult,\n  JustificationRequirement,\n  RxDefinitionNameService,\n  RxNotificationService\n} from '@helix/platform/shared/api';\nimport {\n  IFieldDefinitionPickerComponentOptions,\n  IRecordFields\n} from './field-definition-picker/field-definition-picker-component.types';\nimport { AdaptRxControlLabelTooltip, Alert } from '@bmc-ux/adapt-angular';\nimport { RxFieldDefinitionPickerService } from './field-definition-picker/field-definition-picker.service';\nimport { finalize, map, switchMap, takeUntil } from 'rxjs/operators';\nimport { RxRecordGridUtilsService } from '@helix/platform/view/components';\n\n@Component({\n  selector: 'rx-record-registration',\n  templateUrl: './record-registration.component.html'\n})\nexport class RecordRegistrationComponent implements OnInit, OnDestroy {\n  @Input()\n  registeredRecordDefinitionName: string;\n\n  @Input()\n  isEditMode: boolean;\n\n  @Output()\n  recordRegistered = new EventEmitter<string>();\n\n  recordRegistrationForm: FormGroup = this.createRecordRegistrationForm();\n  recordDefinition: IRecordDefinition;\n  recordDefinitionSecurityLabels: ISecurityLabel[] = [];\n  fieldNames: string[] = [];\n  private isSaveInProgress = false;\n\n  alertConfig: Alert = {\n    content: this.translateService.instant('com.bmc.arsys.rx.client.approval.configuration.record-registration.info'),\n    type: 'inline',\n    variant: 'info'\n  };\n\n  recordDefinitionPickerOptions: IDefinitionPickerComponentOptions = {\n    label: this.translateService.instant('com.bmc.arsys.rx.client.approval.configuration.record.definition'),\n    definitionType: RxDefinitionPickerType.PublicRegularDataRecord,\n    required: true,\n    availableDefinitionPickerStates: {\n      definitionButtonsGroups: [RxDefinitionPickerScope.Rx],\n      search: RxDefinitionPickerScope.Rx\n    }\n  };\n\n  permissionTooltip: AdaptRxControlLabelTooltip = {\n    popoverMode: true,\n    iconName: 'question_circle_o',\n    placement: 'right',\n    content: this.translateService.instant('com.bmc.arsys.rx.client.approval.configuration.record.permissions.tooltip')\n  };\n\n  justificationTooltip: AdaptRxControlLabelTooltip = {\n    popoverMode: true,\n    iconName: 'question_circle_o',\n    placement: 'right',\n    content: this.translateService.instant('com.bmc.arsys.rx.client.approval.justification.tooltip')\n  };\n\n  private recordDefinitionName$ = new BehaviorSubject<string>('');\n\n  private fieldsTree$: Observable<IRecordFields[]> = this.recordDefinitionName$.pipe(\n    switchMap((recordDefinitionName) => {\n      return recordDefinitionName ? this.rxFieldDefinitionPickerService.getRecordFields(recordDefinitionName) : of([]);\n    })\n  );\n\n  requesterFieldDefinitionPickerOptions$: Observable<IFieldDefinitionPickerComponentOptions> = combineLatest([\n    this.recordDefinitionName$,\n    this.fieldsTree$\n  ]).pipe(\n    map(\n      ([recordDefinitionName, fieldsTree]) =>\n        ({\n          recordDefinitionName: recordDefinitionName,\n          label: this.translateService.instant('com.bmc.arsys.rx.client.approval.configuration.record.requester'),\n          required: true,\n          tooltip: this.translateService.instant(\n            'com.bmc.arsys.rx.client.approval.configuration.record.requester.tooltip'\n          ),\n          fieldsTree: fieldsTree\n        } as IFieldDefinitionPickerComponentOptions)\n    )\n  );\n\n  approverExclusionFieldDefinitionPickerOptions$: Observable<IFieldDefinitionPickerComponentOptions> = combineLatest([\n    this.recordDefinitionName$,\n    this.fieldsTree$\n  ]).pipe(\n    map(\n      ([recordDefinitionName, fieldsTree]) =>\n        ({\n          recordDefinitionName,\n          label: this.translateService.instant(\n            'com.bmc.arsys.rx.client.approval.configuration.record.approver-exclusion.label'\n          ),\n          required: false,\n          tooltip: this.translateService.instant(\n            'com.bmc.arsys.rx.client.approval.configuration.record.approver-exclusion.tooltip'\n          ),\n          fieldsTree: fieldsTree\n        } as IFieldDefinitionPickerComponentOptions)\n    )\n  );\n\n  summaryFieldDefinitionPickerOptions$: Observable<IFieldDefinitionPickerComponentOptions> = combineLatest([\n    this.recordDefinitionName$,\n    this.fieldsTree$\n  ]).pipe(\n    map(\n      ([recordDefinitionName, fieldsTree]) =>\n        ({\n          recordDefinitionName: recordDefinitionName,\n          label: this.translateService.instant('com.bmc.arsys.rx.client.approval.configuration.record.summary'),\n          required: true,\n          fieldsTree: fieldsTree\n        } as IFieldDefinitionPickerComponentOptions)\n    )\n  );\n\n  notesFieldDefinitionPickerOptions$: Observable<IFieldDefinitionPickerComponentOptions> = combineLatest([\n    this.recordDefinitionName$,\n    this.fieldsTree$\n  ]).pipe(\n    map(\n      ([recordDefinitionName, fieldsTree]) =>\n        ({\n          recordDefinitionName: recordDefinitionName,\n          label: this.translateService.instant('com.bmc.arsys.rx.client.approval.configuration.record.notes'),\n          required: false,\n          fieldsTree: fieldsTree\n        } as IFieldDefinitionPickerComponentOptions)\n    )\n  );\n\n  fieldDefinitionPickerOptions$: Observable<IFieldDefinitionPickerComponentOptions> = combineLatest([\n    this.recordDefinitionName$,\n    this.fieldsTree$\n  ]).pipe(\n    map(\n      ([recordDefinitionName, fieldsTree]) =>\n        ({\n          recordDefinitionName: recordDefinitionName,\n          required: false,\n          fieldsTree: fieldsTree\n        } as IFieldDefinitionPickerComponentOptions)\n    )\n  );\n\n  private destroyed$ = new ReplaySubject<boolean>(1);\n  private isNewConfiguration = true;\n\n  constructor(\n    private formBuilder: FormBuilder,\n    private changeDetector: ChangeDetectorRef,\n    private translateService: TranslateService,\n    private rxDefinitionNameService: RxDefinitionNameService,\n    private rxApprovalConfigurationService: RxApprovalConfigurationService,\n    private rxRecordDefinitionCacheService: RxRecordDefinitionCacheService,\n    private rxRecordInstanceDataPageService: RxRecordInstanceDataPageService,\n    private rxNotificationService: RxNotificationService,\n    private rxRecordGridUtilsService: RxRecordGridUtilsService,\n    private rxFieldDefinitionPickerService: RxFieldDefinitionPickerService\n  ) {}\n\n  ngOnInit() {\n    if (this.isEditMode) {\n      this.initializeRecordRegistrationForm();\n    }\n\n    this.recordRegistrationForm\n      .get('recordDefinition')\n      .valueChanges.pipe(takeUntil(this.destroyed$))\n      .subscribe((value) => this.onRecordDefinitionChange(value));\n\n    this.recordRegistrationForm\n      .get('field3Mapping.fieldID')\n      .valueChanges.pipe(takeUntil(this.destroyed$))\n      .subscribe((value) => this.onFieldMappingChange('field3Mapping.label', value));\n\n    this.recordRegistrationForm\n      .get('field4Mapping.fieldID')\n      .valueChanges.pipe(takeUntil(this.destroyed$))\n      .subscribe((value) => this.onFieldMappingChange('field4Mapping.label', value));\n\n    this.recordRegistrationForm\n      .get('field5Mapping.fieldID')\n      .valueChanges.pipe(takeUntil(this.destroyed$))\n      .subscribe((value) => this.onFieldMappingChange('field5Mapping.label', value));\n\n    this.recordRegistrationForm\n      .get('field6Mapping.fieldID')\n      .valueChanges.pipe(takeUntil(this.destroyed$))\n      .subscribe((value) => this.onFieldMappingChange('field6Mapping.label', value));\n  }\n\n  ngOnDestroy(): void {\n    this.destroyed$.next(true);\n    this.destroyed$.complete();\n  }\n\n  createRecordRegistrationForm(): FormGroup {\n    return this.formBuilder.group({\n      recordDefinition: ['', Validators.required],\n      summaryField: ['', Validators.required],\n      requestorField: ['', Validators.required],\n      approverExclusionField: null,\n      permissionsFromSecurityLabels: [[], Validators.nullValidator],\n      requestIDField: '',\n      notesField: '',\n      justificationFieldName: [[], Validators.nullValidator],\n      justificationRequired: this.formBuilder.group({\n        toApprove: false,\n        toReject: false\n      }),\n      field3Mapping: this.formBuilder.group(this.createAdditionalField()),\n      field4Mapping: this.formBuilder.group(this.createAdditionalField()),\n      field5Mapping: this.formBuilder.group(this.createAdditionalField()),\n      field6Mapping: this.formBuilder.group(this.createAdditionalField())\n    });\n  }\n\n  initializeRecordRegistrationForm(): void {\n    forkJoin([\n      this.rxRecordDefinitionCacheService.getRecordDefinition(this.registeredRecordDefinitionName),\n      this.rxApprovalConfigurationService.getRegisteredRecordDetails(this.registeredRecordDefinitionName)\n    ]).subscribe(([recordDefinition, registrationRecord]) => {\n      this.isNewConfiguration = registrationRecord.isNewConfiguration;\n      this.recordDefinition = recordDefinition;\n      this.recordRegistrationForm.get('recordDefinition').setValue(registrationRecord.recordDefinition);\n      this.recordRegistrationForm.controls['recordDefinition'].disable();\n      this.recordRegistrationForm.get('summaryField').setValue(registrationRecord.summaryField);\n      this.recordRegistrationForm.get('requestorField').setValue(registrationRecord.requestorField);\n      this.recordRegistrationForm.get('requestIDField').setValue(registrationRecord.requestIDField);\n      this.recordRegistrationForm.get('notesField').setValue(registrationRecord.notesField);\n      this.recordRegistrationForm.get('approverExclusionField').setValue(registrationRecord.approverExclusionField);\n\n      if (registrationRecord.field3Mapping) {\n        this.recordRegistrationForm.get('field3Mapping').setValue(registrationRecord.field3Mapping);\n      }\n\n      if (registrationRecord.field4Mapping) {\n        this.recordRegistrationForm.get('field4Mapping').setValue(registrationRecord.field4Mapping);\n      }\n\n      if (registrationRecord.field5Mapping) {\n        this.recordRegistrationForm.get('field5Mapping').setValue(registrationRecord.field5Mapping);\n      }\n\n      if (registrationRecord.field6Mapping) {\n        this.recordRegistrationForm.get('field6Mapping').setValue(registrationRecord.field6Mapping);\n      }\n\n      this.recordRegistrationForm\n        .get('justificationFieldName')\n        .setValue(registrationRecord.justificationFieldName ? [registrationRecord.justificationFieldName] : []);\n\n      this.recordRegistrationForm\n        .get('permissionsFromSecurityLabels')\n        .setValue(this.getSecurityLabels(registrationRecord));\n\n      this.recordRegistrationForm.get('justificationRequired').setValue({\n        toApprove:\n          registrationRecord.justificationRequired === JustificationRequirement.RequiredForApprovalOrRejection ||\n          registrationRecord.justificationRequired === JustificationRequirement.RequiredForApproval,\n        toReject:\n          registrationRecord.justificationRequired === JustificationRequirement.RequiredForApprovalOrRejection ||\n          registrationRecord.justificationRequired === JustificationRequirement.RequiredForRejection\n      });\n    });\n  }\n\n  getSecurityLabels(approvalRegistrationRecord: IRecordRegistration): ISecurityLabel[] {\n    return approvalRegistrationRecord.permissionsFromSecurityLabels.map((parentId) =>\n      this.recordDefinition.securityLabels.find((securityLabel) => securityLabel.id === parentId)\n    );\n  }\n\n  private createAdditionalField(): IAdditionalField {\n    return {\n      fieldID: '',\n      label: ''\n    };\n  }\n\n  private onFieldMappingChange(formControlName: string, value: string): void {\n    if (value && !value.includes('recordContext._associations')) {\n      this.recordRegistrationForm.get(formControlName).setValue(value);\n    } else {\n      value\n        ? this.setAssociatedRecordFieldLabel(value, formControlName)\n        : this.recordRegistrationForm.get(formControlName).setValue('');\n    }\n  }\n\n  private setAssociatedRecordFieldLabel(fieldId: string, formControlName: string): void {\n    this.rxRecordGridUtilsService.getFieldDefinition(fieldId, this.recordDefinition).subscribe((fieldDefinition) => {\n      this.recordRegistrationForm.get(formControlName).setValue(fieldDefinition.name);\n    });\n  }\n\n  private onRecordDefinitionChange(newRecordDefinitionName: string): void {\n    const oldRecordDefinitionName = this.recordRegistrationForm.value.recordDefinition;\n\n    if (newRecordDefinitionName !== oldRecordDefinitionName) {\n      this.reset();\n      this.recordDefinitionName$.next(newRecordDefinitionName);\n\n      if (newRecordDefinitionName) {\n        this.rxRecordDefinitionCacheService\n          .getRecordDefinition(newRecordDefinitionName)\n          .subscribe((recordDefinition) => {\n            this.recordDefinition = recordDefinition;\n            this.initializeFormControls();\n          });\n      }\n    }\n  }\n\n  private initializeFormControls(): void {\n    this.recordDefinitionSecurityLabels = cloneDeep(this.recordDefinition.securityLabels);\n\n    this.fieldNames = this.recordDefinition.fieldDefinitions\n      ? this.recordDefinition.fieldDefinitions\n          .filter(\n            (fieldDefinition: IFieldDefinition) =>\n              fieldDefinition.resourceType !== RX_RECORD_DEFINITION.resourceTypes.attachment\n          )\n          .map((fieldDefinition) => {\n            if (fieldDefinition.id === 1) {\n              this.recordRegistrationForm.get('requestIDField').setValue(fieldDefinition.name);\n            }\n\n            return fieldDefinition.name;\n          })\n      : [];\n  }\n\n  optionFormatter(securityLabel: ISecurityLabel): string {\n    return securityLabel.name;\n  }\n\n  justificationReasonOptionFormatter(fieldDefinition: IFieldDefinition): string {\n    return fieldDefinition.name;\n  }\n\n  save(): void {\n    this.isSaveInProgress = true;\n\n    if (this.isEditMode) {\n      this.updateRecordRegistration();\n    } else {\n      this.saveRecordRegistration();\n    }\n  }\n\n  canSave(): boolean {\n    return !this.isSaveInProgress && this.recordRegistrationForm.valid && this.recordRegistrationForm.dirty;\n  }\n\n  isFormValid(): boolean {\n    return this.recordRegistrationForm.valid;\n  }\n\n  isFormDirty(): boolean {\n    return this.recordRegistrationForm.dirty;\n  }\n\n  saveRecordRegistration(): void {\n    const registrationRecord = this.transformFormControlData();\n    registrationRecord.isNewConfiguration = true;\n\n    this.rxRecordInstanceDataPageService\n      .post({\n        params: {\n          recorddefinition: RX_APPROVAL_CONFIGURATION.selfApproval.apForm.name\n        }\n      })\n      .subscribe((result: IDataPageResult) => {\n        const isRecordRegistered = find(\n          result.data,\n          (record) =>\n            record[RX_APPROVAL_CONFIGURATION.selfApproval.apForm.fields.formName] ===\n            registrationRecord.recordDefinition\n        );\n\n        if (!isRecordRegistered) {\n          this.rxApprovalConfigurationService\n            .registerRecord(registrationRecord)\n            .pipe(\n              finalize(() => {\n                this.isSaveInProgress = false;\n              })\n            )\n            .subscribe(() => {\n              this.isEditMode = true;\n              this.recordRegistrationForm.controls['recordDefinition'].disable();\n              this.recordRegistered.emit(registrationRecord.recordDefinition);\n              this.recordRegistrationForm.markAsPristine();\n\n              this.rxNotificationService.addSuccessMessage(\n                this.translateService.instant('com.bmc.arsys.rx.client.approval.configuration.record.register.success')\n              );\n            });\n        } else {\n          this.isSaveInProgress = false;\n\n          this.rxNotificationService.addWarningMessage(\n            this.translateService.instant('com.bmc.arsys.rx.client.approval.configuration.record.register.duplicate')\n          );\n        }\n      });\n  }\n\n  updateRecordRegistration(): void {\n    const registrationRecord = this.transformFormControlData();\n\n    registrationRecord.isNewConfiguration = this.isNewConfiguration;\n    registrationRecord.recordDefinition = this.recordRegistrationForm.get('recordDefinition').value;\n\n    this.rxApprovalConfigurationService\n      .updateRecord(registrationRecord)\n      .pipe(\n        finalize(() => {\n          this.isSaveInProgress = false;\n        })\n      )\n      .subscribe(() => {\n        this.isEditMode = true;\n        this.recordRegistrationForm.markAsPristine();\n\n        this.rxNotificationService.addSuccessMessage(\n          this.translateService.instant('com.bmc.arsys.rx.client.approval.configuration.record.update', {\n            recordDefinitionName: this.rxDefinitionNameService.getDisplayName(registrationRecord.recordDefinition)\n          })\n        );\n      });\n  }\n\n  transformFormControlData(): IRecordRegistration {\n    const approvalRecord = cloneDeep(this.recordRegistrationForm.value);\n\n    approvalRecord.justificationFieldName = approvalRecord.justificationFieldName.length\n      ? approvalRecord.justificationFieldName.join()\n      : null;\n\n    approvalRecord.permissionsFromSecurityLabels = approvalRecord.permissionsFromSecurityLabels\n      ? approvalRecord.permissionsFromSecurityLabels.map((securityLabel) => {\n          return securityLabel.id;\n        })\n      : null;\n\n    if (!approvalRecord.permissionsFromSecurityLabels) {\n      delete approvalRecord.permissionsFromSecurityLabels;\n    }\n\n    if (!approvalRecord.justificationFieldName) {\n      delete approvalRecord.justificationFieldName;\n    }\n\n    this.updateAdditionalFieldLabel(approvalRecord.field3Mapping);\n    this.updateAdditionalFieldLabel(approvalRecord.field4Mapping);\n    this.updateAdditionalFieldLabel(approvalRecord.field5Mapping);\n    this.updateAdditionalFieldLabel(approvalRecord.field6Mapping);\n\n    if (approvalRecord.justificationRequired.toApprove && approvalRecord.justificationRequired.toReject) {\n      approvalRecord.justificationRequired = JustificationRequirement.RequiredForApprovalOrRejection;\n    } else if (approvalRecord.justificationRequired.toApprove) {\n      approvalRecord.justificationRequired = JustificationRequirement.RequiredForApproval;\n    } else if (approvalRecord.justificationRequired.toReject) {\n      approvalRecord.justificationRequired = JustificationRequirement.RequiredForRejection;\n    } else {\n      approvalRecord.justificationRequired = JustificationRequirement.NotRequired;\n    }\n\n    return approvalRecord;\n  }\n\n  private updateAdditionalFieldLabel(fieldMapping: IAdditionalField): void {\n    if (\n      fieldMapping.fieldID !== '' &&\n      !fieldMapping.fieldID.includes('recordContext._associations') &&\n      fieldMapping.label === ''\n    ) {\n      fieldMapping.label = fieldMapping.fieldID;\n    }\n  }\n\n  reset(): void {\n    this.recordDefinitionSecurityLabels = [];\n    this.fieldNames = [];\n    this.recordRegistrationForm.get('summaryField').setValue('');\n    this.recordRegistrationForm.get('requestorField').setValue('');\n    this.recordRegistrationForm.get('approverExclusionField').setValue('');\n    this.recordRegistrationForm.get('permissionsFromSecurityLabels').setValue([]);\n\n    this.recordRegistrationForm.get('justificationRequired').setValue({\n      toApprove: false,\n      toReject: false\n    });\n\n    this.recordRegistrationForm.get('justificationFieldName').setValue([]);\n    this.recordRegistrationForm.get('requestIDField').setValue('');\n    this.recordRegistrationForm.get('notesField').setValue('');\n    this.recordRegistrationForm.get('field3Mapping').setValue(this.createAdditionalField());\n    this.recordRegistrationForm.get('field4Mapping').setValue(this.createAdditionalField());\n    this.recordRegistrationForm.get('field5Mapping').setValue(this.createAdditionalField());\n    this.recordRegistrationForm.get('field6Mapping').setValue(this.createAdditionalField());\n  }\n\n  handleJustificationField(): void {\n    if (\n      this.recordRegistrationForm.dirty &&\n      !this.recordRegistrationForm.get('justificationRequired').value.toApprove &&\n      !this.recordRegistrationForm.get('justificationRequired').value.toReject\n    ) {\n      this.recordRegistrationForm.get('justificationFieldName').setValue([]);\n    }\n  }\n}\n","<adapt-alert [config]=\"alertConfig\"></adapt-alert>\n\n<form [formGroup]=\"recordRegistrationForm\">\n  <div class=\"row\">\n    <div class=\"col-4 form-group\">\n      <rx-definition-picker\n        [options]=\"recordDefinitionPickerOptions\"\n        formControlName=\"recordDefinition\"\n        rx-id=\"definition-field\"\n        required=\"true\"\n      >\n      </rx-definition-picker>\n    </div>\n\n    <div class=\"col-4 form-group\">\n      <rx-field-definition-picker\n        [options]=\"requesterFieldDefinitionPickerOptions$ | async\"\n        formControlName=\"requestorField\"\n        rx-id=\"requester-id-field\"\n      ></rx-field-definition-picker>\n    </div>\n\n    <div class=\"col-4 form-group\">\n      <rx-field-definition-picker\n        [options]=\"approverExclusionFieldDefinitionPickerOptions$ | async\"\n        formControlName=\"approverExclusionField\"\n        rx-id=\"approver-exclusion-field\"\n      ></rx-field-definition-picker>\n    </div>\n  </div>\n\n  <div class=\"row\">\n    <div class=\"col-4 form-group\">\n      <adapt-rx-select\n        [options]=\"recordDefinitionSecurityLabels\"\n        label=\"{{ 'com.bmc.arsys.rx.client.approval.configuration.record.permissions' | translate }}\"\n        name=\"permissionsFromSecurityLabels\"\n        [optionFormatter]=\"optionFormatter\"\n        [multiple]=\"true\"\n        formControlName=\"permissionsFromSecurityLabels\"\n        [selectAllButton]=\"true\"\n        [deselectAllButton]=\"true\"\n        [disabled]=\"!recordDefinitionSecurityLabels.length\"\n        rx-id=\"permissions-field\"\n        [tooltip]=\"permissionTooltip\"\n      ></adapt-rx-select>\n    </div>\n\n    <div class=\"col-4 form-group\">\n      <adapt-rx-textfield\n        rx-id=\"request-id-field\"\n        label=\"{{ 'com.bmc.arsys.rx.client.approval.console.detail.RequestId' | translate }}\"\n        formControlName=\"requestIDField\"\n        [readonly]=\"true\"\n        [disabledStyleForReadonlyState]=\"true\"\n      >\n      </adapt-rx-textfield>\n    </div>\n\n    <div class=\"col-4 form-group\">\n      <rx-field-definition-picker\n        [options]=\"summaryFieldDefinitionPickerOptions$ | async\"\n        formControlName=\"summaryField\"\n        rx-id=\"summary-field\"\n      ></rx-field-definition-picker>\n    </div>\n  </div>\n\n  <div class=\"row\">\n    <div class=\"col-4 form-group\">\n      <rx-field-definition-picker\n        [options]=\"notesFieldDefinitionPickerOptions$ | async\"\n        formControlName=\"notesField\"\n        rx-id=\"notes-field\"\n      ></rx-field-definition-picker>\n    </div>\n\n    <div class=\"col-4 form-group\">\n      <adapt-rx-control-label\n        label=\"{{ 'com.bmc.arsys.rx.client.approval.justification.require-on.label' | translate }}\"\n      ></adapt-rx-control-label>\n\n      <div formGroupName=\"justificationRequired\">\n        <adapt-rx-checkbox\n          class=\"checkbox-inline\"\n          formControlName=\"toApprove\"\n          label=\"{{ 'com.bmc.arsys.rx.client.approval.justification.require-on.approval.label' | translate }}\"\n          [disabled]=\"!fieldNames.length\"\n          (ngModelChange)=\"handleJustificationField()\"\n        >\n        </adapt-rx-checkbox>\n\n        <adapt-rx-checkbox\n          class=\"checkbox-inline\"\n          formControlName=\"toReject\"\n          label=\"{{ 'com.bmc.arsys.rx.client.approval.justification.require-on.rejection.label' | translate }}\"\n          [disabled]=\"!fieldNames.length\"\n          (ngModelChange)=\"handleJustificationField()\"\n        >\n        </adapt-rx-checkbox>\n      </div>\n    </div>\n\n    <div class=\"col-4 form-group\">\n      <adapt-rx-select\n        [options]=\"fieldNames\"\n        [emptyOption]=\"true\"\n        label=\"{{ 'com.bmc.arsys.rx.client.approval.justification-reason.label' | translate }}\"\n        formControlName=\"justificationFieldName\"\n        name=\"justificationFieldName\"\n        [selectAllButton]=\"true\"\n        enableFilter=\"true\"\n        closeOnSelect=\"true\"\n        rx-id=\"justification-reason-field\"\n        [deselectAllButton]=\"true\"\n        [disabled]=\"!fieldNames.length\"\n        [tooltip]=\"justificationTooltip\"\n        [required]=\"\n          recordRegistrationForm.get('justificationRequired').value.toApprove ||\n          recordRegistrationForm.get('justificationRequired').value.toReject\n        \"\n      ></adapt-rx-select>\n    </div>\n  </div>\n\n  <div class=\"row\">\n    <div class=\"col-4\">\n      <adapt-rx-control-label\n        label=\"{{ 'com.bmc.arsys.rx.client.approval.configuration.record.fields' | translate }}\"\n      ></adapt-rx-control-label>\n    </div>\n\n    <div class=\"col-4\">\n      <adapt-rx-control-label\n        label=\"{{ 'com.bmc.arsys.rx.client.approval.configuration.record.fields.labels' | translate }}\"\n      ></adapt-rx-control-label>\n    </div>\n  </div>\n\n  <div class=\"row\" formGroupName=\"field3Mapping\">\n    <div class=\"col-4 form-group\">\n      <rx-field-definition-picker\n        [options]=\"fieldDefinitionPickerOptions$ | async\"\n        formControlName=\"fieldID\"\n        rx-id=\"field3-mapping-field\"\n      ></rx-field-definition-picker>\n    </div>\n\n    <div class=\"col-4 form-group\">\n      <adapt-rx-textfield\n        formControlName=\"label\"\n        name=\"field3MappingLabel\"\n        adaptRequired\n        [disabled]=\"!recordRegistrationForm.get('field3Mapping').get('fieldID').value\"\n      ></adapt-rx-textfield>\n    </div>\n  </div>\n\n  <div class=\"row\" formGroupName=\"field4Mapping\">\n    <div class=\"col-4 form-group\">\n      <rx-field-definition-picker\n        [options]=\"fieldDefinitionPickerOptions$ | async\"\n        formControlName=\"fieldID\"\n        rx-id=\"field4-mapping-field\"\n      ></rx-field-definition-picker>\n    </div>\n\n    <div class=\"col-4 form-group\">\n      <adapt-rx-textfield\n        formControlName=\"label\"\n        name=\"field4MappingLabel\"\n        adaptRequired\n        [disabled]=\"!recordRegistrationForm.get('field4Mapping').get('fieldID').value\"\n      ></adapt-rx-textfield>\n    </div>\n  </div>\n  <div class=\"row\" formGroupName=\"field5Mapping\">\n    <div class=\"col-4 form-group\">\n      <rx-field-definition-picker\n        rx-id=\"field5-mapping-field\"\n        [options]=\"fieldDefinitionPickerOptions$ | async\"\n        formControlName=\"fieldID\"\n      ></rx-field-definition-picker>\n    </div>\n\n    <div class=\"col-4 form-group\">\n      <adapt-rx-textfield\n        formControlName=\"label\"\n        name=\"field5MappingLabel\"\n        adaptRequired\n        [disabled]=\"!recordRegistrationForm.get('field5Mapping').get('fieldID').value\"\n      ></adapt-rx-textfield>\n    </div>\n  </div>\n\n  <div class=\"row\" formGroupName=\"field6Mapping\">\n    <div class=\"col-4 form-group\">\n      <rx-field-definition-picker\n        rx-id=\"field6-mapping-field\"\n        [options]=\"fieldDefinitionPickerOptions$ | async\"\n        formControlName=\"fieldID\"\n      ></rx-field-definition-picker>\n    </div>\n\n    <div class=\"col-4 form-group\">\n      <adapt-rx-textfield\n        formControlName=\"label\"\n        name=\"field6MappingLabel\"\n        adaptRequired\n        [disabled]=\"!recordRegistrationForm.get('field6Mapping').get('fieldID').value\"\n      ></adapt-rx-textfield>\n    </div>\n  </div>\n</form>\n","import { Injectable, Injector } from '@angular/core';\nimport { DataPage } from '@helix/platform/shared/api';\n\nconst approvalMappingDataPage = 'com.bmc.arsys.rx.approval.application.datapage.ApprovalMappingDataPage';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class RxApprovalMappingDataPageService extends DataPage {\n  constructor(private injector: Injector) {\n    super(injector, approvalMappingDataPage);\n  }\n}\n","import { Component, Injector, Input, OnInit, TemplateRef, ViewChild } from '@angular/core';\nimport {\n  IExpressionEditorPropertyChange,\n  IExpressionFormControlOptions,\n  RxExpressionEditorService\n} from '@helix/platform/shared/components';\nimport { RxApprovalExpressionConfigurator } from '../approval-expression-configurator';\nimport {\n  ExpressionOperatorGroup,\n  IBundleInfo,\n  IDataPageResult,\n  RxDefinitionNameService,\n  RxGlobalCacheService,\n  RxNotificationService\n} from '@helix/platform/shared/api';\nimport { forkJoin, Observable, of } from 'rxjs';\nimport { TranslateService } from '@ngx-translate/core';\nimport { IRecordDefinition, RX_RECORD_DEFINITION, RxRecordDefinitionCacheService } from '@helix/platform/record/api';\nimport { Alert, RxSelectOption, RxSelectOptionsGroup } from '@bmc-ux/adapt-angular';\nimport { FormBuilder, FormGroup } from '@angular/forms';\nimport {\n  IRecordGridColumn,\n  IRecordGridConfig,\n  IRecordGridDataPageParams,\n  RecordGridComponent,\n  RowSelectionMode\n} from '@helix/platform/view/components';\nimport { RX_APPROVAL_CONFIGURATION } from '../approval-configuration.constant';\nimport { RxApprovalMappingDataPageService } from './approval-mapping-data-page.service';\nimport { IFieldResponse, ISelfApprovalConfiguration } from '../approval-configuration.types';\nimport { RxApprovalConfigurationService } from '../approval-configuration.service';\nimport { IDialogApi, RX_MODAL, RxModalService } from '@helix/platform/ui-kit';\nimport { chain, find, get, map as _map, omit } from 'lodash';\nimport { IRowDataItem } from '@helix/platform/view/api';\nimport { map } from 'rxjs/operators';\nimport { DataCellTemplateParams } from '@bmc-ux/adapt-table';\n\n@Component({\n  selector: 'rx-self-approval-configuration',\n  templateUrl: './self-approval-configuration.component.html',\n  styleUrls: ['./self-approval-configuration.component.scss']\n})\nexport class SelfApprovalConfigurationComponent implements OnInit {\n  private dialogApi: IDialogApi;\n\n  @Input()\n  registeredRecordDefinitionName: string;\n\n  @ViewChild('definitionNameCellTemplate', { static: true })\n  definitionNameCellTemplate: TemplateRef<DataCellTemplateParams>;\n\n  constructor(\n    private injector: Injector,\n    private formBuilder: FormBuilder,\n    private rxModalService: RxModalService,\n    protected translateService: TranslateService,\n    private rxGlobalCacheService: RxGlobalCacheService,\n    private rxNotificationService: RxNotificationService,\n    protected rxDefinitionNameService: RxDefinitionNameService,\n    private rxExpressionEditorService: RxExpressionEditorService,\n    private rxApprovalConfigurationService: RxApprovalConfigurationService,\n    protected rxRecordDefinitionCacheService: RxRecordDefinitionCacheService,\n    private rxApprovalMappingDataPageService: RxApprovalMappingDataPageService\n  ) {}\n\n  protected expressionConfigurator: RxApprovalExpressionConfigurator;\n\n  alertConfig: Alert = {\n    content: this.translateService.instant('com.bmc.arsys.rx.client.approval.configuration.self-approval.information'),\n    type: 'inline',\n    variant: 'info'\n  };\n\n  options: IExpressionFormControlOptions;\n  selfApprovalConfigurationForm: FormGroup;\n\n  @ViewChild('grid', { static: true })\n  grid: RecordGridComponent;\n\n  gridConfig: Observable<IRecordGridConfig>;\n  processOptions: RxSelectOptionsGroup[] = [];\n  loadingProcesses: boolean;\n  isUpdateButtonVisible: boolean;\n\n  ngOnInit(): void {\n    this.isUpdateButtonVisible = false;\n    this.expressionConfigurator = new RxApprovalExpressionConfigurator(this.injector);\n\n    this.expressionConfigurator.configureForProperty({\n      propertyPath: 'approvalQualification',\n      dataDictionary$: this.expressionConfigurator.approvalExpressionDataDictionary(\n        this.registeredRecordDefinitionName\n      ),\n      operators: this.expressionConfigurator.getOperatorRowsByGroup(ExpressionOperatorGroup.All)\n    });\n\n    this.options = {\n      label: this.translateService.instant(\n        'com.bmc.arsys.rx.client.approval.configuration.self-approval.approval-qualification-field.label'\n      ),\n      dataDictionary$: this.expressionConfigurator.getDataDictionary('approvalQualification'),\n      operators: this.expressionConfigurator.getOperators('approvalQualification'),\n      isRequired: true\n    };\n\n    this.selfApprovalConfigurationForm = this.formBuilder.group({\n      qualificationExpression: null,\n      precedence: null,\n      auditInformation: null,\n      process: []\n    });\n\n    this.gridConfig = of({\n      actionButtons: [\n        {\n          label: this.translateService.instant('com.bmc.arsys.rx.client.common.edit.label'),\n          style: 'tertiary',\n          icon: 'pencil',\n          actions: [\n            {\n              name: this.setCurrentRecordValuesToForm.bind(this)\n            }\n          ],\n          disabled: () => this.grid.api.getSelectedRowCount() > 1\n        },\n        {\n          label: this.translateService.instant('com.bmc.arsys.rx.client.common.delete.label'),\n          style: 'tertiary',\n          icon: 'trash',\n          actions: [\n            {\n              name: this.deleteConfiguration.bind(this)\n            }\n          ]\n        }\n      ],\n      recordDefinitionName: RX_APPROVAL_CONFIGURATION.selfApproval.mapping.name,\n      enableRowSelection: RowSelectionMode.Multiple,\n      getData: (queryParams: IRecordGridDataPageParams) => this.getData(queryParams),\n      getRecordDefinition: () => of(this.getRecordDefinition()),\n      columns: this.getColumns(),\n      styles: 'flex-fill'\n    });\n\n    this.grid.adaptTable.selectionChange.subscribe(() => {\n      this.isUpdateButtonVisible = false;\n      this.clearFormValues();\n    });\n\n    this.loadProcesses();\n  }\n\n  private getData(queryParams: IRecordGridDataPageParams): Observable<IDataPageResult> {\n    const params = {\n      ...omit(queryParams, ['searchText']),\n      [RX_APPROVAL_CONFIGURATION.selfApproval.mapping.fields.recordDefinition]: this.registeredRecordDefinitionName\n    };\n\n    return this.rxApprovalMappingDataPageService.get({ params });\n  }\n\n  private loadProcesses(): void {\n    this.loadingProcesses = true;\n\n    const queryParams = {\n      recorddefinition: RX_APPROVAL_CONFIGURATION.selfApproval.flowList.name,\n      propertySelection: [\n        RX_APPROVAL_CONFIGURATION.selfApproval.flowList.fields.recordDefinition,\n        RX_APPROVAL_CONFIGURATION.selfApproval.flowList.fields.selfApprovalFlowName,\n        RX_APPROVAL_CONFIGURATION.selfApproval.flowList.fields.selfApprovalFlowProcessDefinitionGuid\n      ].join(',')\n    };\n\n    this.rxApprovalMappingDataPageService\n      .get({ params: queryParams })\n      .pipe(\n        map((response: IDataPageResult) => {\n          const bundleInfoRequests: Observable<IBundleInfo>[] = chain(response.data)\n            .filter({\n              [RX_APPROVAL_CONFIGURATION.selfApproval.flowList.fields.recordDefinition]:\n                this.registeredRecordDefinitionName\n            })\n            .map((processData: IFieldResponse) => {\n              const id = this.rxDefinitionNameService.getBundleId(\n                processData[RX_APPROVAL_CONFIGURATION.selfApproval.flowList.fields.selfApprovalFlowName]\n              );\n\n              return this.rxGlobalCacheService.getBundleFriendlyName(id).pipe(\n                map((friendlyName) => ({\n                  id,\n                  friendlyName\n                }))\n              );\n            })\n            .value();\n\n          forkJoin(bundleInfoRequests).subscribe(\n            (bundleIdNameData: [IBundleInfo]) => {\n              this.processOptions = chain(response.data as IFieldResponse[])\n                .filter({\n                  [RX_APPROVAL_CONFIGURATION.selfApproval.flowList.fields.recordDefinition]:\n                    this.registeredRecordDefinitionName\n                })\n                .map((processData: IFieldResponse) => {\n                  return {\n                    id: this.rxDefinitionNameService.getBundleId(\n                      processData[RX_APPROVAL_CONFIGURATION.selfApproval.flowList.fields.selfApprovalFlowName]\n                    ),\n                    processGuid:\n                      processData[\n                        RX_APPROVAL_CONFIGURATION.selfApproval.flowList.fields.selfApprovalFlowProcessDefinitionGuid\n                      ],\n                    value: processData[RX_APPROVAL_CONFIGURATION.selfApproval.flowList.fields.selfApprovalFlowName],\n                    displayValue: this.rxDefinitionNameService.getDisplayName(\n                      processData[RX_APPROVAL_CONFIGURATION.selfApproval.flowList.fields.selfApprovalFlowName]\n                    )\n                  };\n                })\n                .groupBy('id')\n                .map((options, id) => {\n                  return {\n                    name: find(bundleIdNameData, { id }).friendlyName,\n                    children: _map(options, (option) => {\n                      return {\n                        value: option.value,\n                        displayValue: option.displayValue,\n                        processGuid: option.processGuid\n                      };\n                    })\n                  };\n                })\n                .value();\n            },\n            () => {},\n            () => (this.loadingProcesses = false)\n          );\n        })\n      )\n      .subscribe();\n  }\n\n  onEvent(): void {\n    this.selectApprovalQualificationExpression();\n  }\n\n  private selectApprovalQualificationExpression(): void {\n    this.rxExpressionEditorService\n      .openEditor(\n        {\n          property: {\n            path: 'approvalQualification',\n            value: this.selfApprovalConfigurationForm.value.qualificationExpression,\n            label: this.translateService.instant(\n              'com.bmc.arsys.rx.client.approval.configuration.self-approval.approval-qualification-field.label'\n            )\n          },\n          expressionConfigurator: this.expressionConfigurator,\n          legend: [\n            {\n              label: this.translateService.instant('com.bmc.arsys.rx.client.expression-editor.legend.keyword.label'),\n              icon: 'd-icon-dollar'\n            },\n            {\n              label: this.translateService.instant('com.bmc.arsys.rx.client.expression-editor.legend.field.label'),\n              icon: 'd-icon-field_text'\n            }\n          ]\n        },\n        (dialogApi: IDialogApi) => (this.dialogApi = dialogApi)\n      )\n      .subscribe((expression: IExpressionEditorPropertyChange) => {\n        this.dialogApi = null;\n        this.selfApprovalConfigurationForm.get('qualificationExpression').setValue(expression.value);\n        this.selfApprovalConfigurationForm.get('qualificationExpression').markAsDirty();\n      });\n  }\n\n  createSelfApprovalConfiguration(): void {\n    this.selfApprovalConfigurationForm.markAsPristine();\n    const configuration: ISelfApprovalConfiguration = this.getSelfApprovalConfiguration();\n\n    this.rxApprovalConfigurationService.createSelfApprovalConfiguration(configuration).subscribe(() => {\n      this.rxNotificationService.addSuccessMessage(\n        this.translateService.instant(\n          'com.bmc.arsys.rx.client.approval.configuration.self-approval.expression-saved.message'\n        )\n      );\n\n      this.clearFormValues();\n      this.grid.api.refresh().subscribe();\n    });\n  }\n\n  updateSelfApprovalConfiguration(): void {\n    this.selfApprovalConfigurationForm.markAsPristine();\n    const configuration: ISelfApprovalConfiguration = this.getSelfApprovalConfiguration();\n    configuration.id = this.grid.api.getFirstSelectedRow()[RX_RECORD_DEFINITION.coreFieldIds.id];\n\n    this.rxApprovalConfigurationService\n      .updateSelfApprovalConfiguration(\n        this.grid.api.getFirstSelectedRow()[RX_RECORD_DEFINITION.coreFieldIds.id],\n        configuration\n      )\n      .subscribe(() => {\n        this.clearFormValues();\n        this.isUpdateButtonVisible = false;\n\n        this.rxNotificationService.addSuccessMessage(\n          this.translateService.instant(\n            'com.bmc.arsys.rx.client.approval.configuration.self-approval.expression-updated.message'\n          )\n        );\n\n        this.grid.api.refresh().subscribe();\n      });\n  }\n\n  private getSelfApprovalConfiguration(): ISelfApprovalConfiguration {\n    const selectedProcess: RxSelectOption = get(this.selfApprovalConfigurationForm.get('process').value, '[0]', {});\n\n    return {\n      auditText: this.selfApprovalConfigurationForm.value.auditInformation,\n      precedence: this.selfApprovalConfigurationForm.value.precedence,\n      qualification: this.selfApprovalConfigurationForm.value.qualificationExpression,\n      description: this.registeredRecordDefinitionName,\n      recordDefinition: this.registeredRecordDefinitionName,\n      approvalFlowName: selectedProcess.value || '',\n      approvalFlowProcessDefinitionGUID: selectedProcess.processGuid || '',\n      approvalMappingRecordDefinition: RX_APPROVAL_CONFIGURATION.selfApproval.mapping.name\n    };\n  }\n\n  private setCurrentRecordValuesToForm(): void {\n    this.isUpdateButtonVisible = true;\n    const selectedRow: IRowDataItem = this.grid.api.getFirstSelectedRow();\n\n    this.selfApprovalConfigurationForm\n      .get('qualificationExpression')\n      .setValue(selectedRow[RX_APPROVAL_CONFIGURATION.selfApproval.mapping.fields.qualification]);\n\n    this.selfApprovalConfigurationForm\n      .get('precedence')\n      .setValue(selectedRow[RX_APPROVAL_CONFIGURATION.selfApproval.mapping.fields.precedence]);\n\n    this.selfApprovalConfigurationForm\n      .get('auditInformation')\n      .setValue(selectedRow[RX_APPROVAL_CONFIGURATION.selfApproval.mapping.fields.auditInformation]);\n\n    const process: RxSelectOption = selectedRow[RX_APPROVAL_CONFIGURATION.selfApproval.mapping.fields.approvalFlowName]\n      ? [\n          {\n            value: selectedRow[RX_APPROVAL_CONFIGURATION.selfApproval.mapping.fields.approvalFlowName],\n            displayValue: this.rxDefinitionNameService.getDisplayName(\n              selectedRow[RX_APPROVAL_CONFIGURATION.selfApproval.mapping.fields.approvalFlowName]\n            )\n          }\n        ]\n      : [];\n\n    this.selfApprovalConfigurationForm.get('process').setValue(process);\n  }\n\n  private deleteConfiguration(): void {\n    this.rxModalService\n      .confirm({\n        title: this.translateService.instant('com.bmc.arsys.rx.client.common.warning.label'),\n        modalStyle: RX_MODAL.modalStyles.warning,\n        message: this.translateService.instant(\n          'com.bmc.arsys.rx.client.approval.configuration.self-approval.expression-delete-confirmation.message'\n        )\n      })\n      .then((result: boolean) => {\n        if (result) {\n          const deleteRequests$: Observable<any>[] = this.grid.api\n            .getSelectedRows()\n            .map((record: IRowDataItem) =>\n              this.rxApprovalConfigurationService.deleteSelfApprovalConfiguration(\n                record[RX_RECORD_DEFINITION.coreFieldIds.id]\n              )\n            );\n\n          forkJoin(deleteRequests$).subscribe(() => {\n            this.rxNotificationService.addSuccessMessage(\n              this.translateService.instant(\n                'com.bmc.arsys.rx.client.approval.configuration.self-approval.expression-deleted.message'\n              )\n            );\n\n            this.clearFormValues();\n            this.isUpdateButtonVisible = false;\n            this.grid.api.refresh().subscribe();\n          });\n        }\n      });\n  }\n\n  clearFormValues(): void {\n    this.selfApprovalConfigurationForm.reset();\n    this.selfApprovalConfigurationForm.get('process').setValue([]);\n  }\n\n  optionFormatter(option: RxSelectOption): string {\n    return option.displayValue;\n  }\n\n  private getRecordDefinition(): IRecordDefinition {\n    return {\n      fieldDefinitions: [\n        {\n          id: RX_APPROVAL_CONFIGURATION.selfApproval.mapping.fields.hiddenQualification,\n          resourceType: RX_RECORD_DEFINITION.resourceTypes.character\n        },\n        {\n          id: RX_APPROVAL_CONFIGURATION.selfApproval.mapping.fields.precedence,\n          resourceType: RX_RECORD_DEFINITION.resourceTypes.integer\n        },\n        {\n          id: RX_APPROVAL_CONFIGURATION.selfApproval.mapping.fields.auditInformation,\n          resourceType: RX_RECORD_DEFINITION.resourceTypes.character\n        },\n        {\n          id: RX_APPROVAL_CONFIGURATION.selfApproval.mapping.fields.approvalFlowName,\n          resourceType: RX_RECORD_DEFINITION.resourceTypes.character\n        },\n        {\n          id: RX_APPROVAL_CONFIGURATION.selfApproval.mapping.fields.qualification,\n          resourceType: RX_RECORD_DEFINITION.resourceTypes.character\n        },\n        {\n          id: RX_APPROVAL_CONFIGURATION.selfApproval.mapping.fields.recordDefinition,\n          resourceType: RX_RECORD_DEFINITION.resourceTypes.character\n        },\n        {\n          id: RX_APPROVAL_CONFIGURATION.selfApproval.mapping.fields.approvalFlowGuid,\n          resourceType: RX_RECORD_DEFINITION.resourceTypes.character\n        },\n        {\n          id: RX_RECORD_DEFINITION.coreFieldIds.id,\n          resourceType: RX_RECORD_DEFINITION.resourceTypes.character\n        }\n      ]\n    };\n  }\n\n  private getColumns(): IRecordGridColumn[] {\n    return [\n      {\n        index: 0,\n        fieldId: String(RX_APPROVAL_CONFIGURATION.selfApproval.mapping.fields.hiddenQualification),\n        sortable: false,\n        title: this.translateService.instant(\n          'com.bmc.arsys.rx.client.approval.configuration.selfApproval.grid.column.approvalExpression'\n        )\n      },\n      {\n        index: 1,\n        fieldId: String(RX_APPROVAL_CONFIGURATION.selfApproval.mapping.fields.precedence),\n        title: this.translateService.instant(\n          'com.bmc.arsys.rx.client.approval.configuration.selfApproval.grid.column.precedence'\n        )\n      },\n      {\n        index: 2,\n        fieldId: String(RX_APPROVAL_CONFIGURATION.selfApproval.mapping.fields.auditInformation),\n        title: this.translateService.instant(\n          'com.bmc.arsys.rx.client.approval.configuration.selfApproval.grid.column.auditInformation'\n        )\n      },\n      {\n        index: 3,\n        fieldId: String(RX_APPROVAL_CONFIGURATION.selfApproval.mapping.fields.approvalFlowName),\n        title: this.translateService.instant(\n          'com.bmc.arsys.rx.client.approval.configuration.selfApproval.grid.column.processFlow'\n        )\n      },\n      {\n        index: 4,\n        fieldId: String(RX_APPROVAL_CONFIGURATION.selfApproval.mapping.fields.qualification),\n        visible: false,\n        title: this.translateService.instant(\n          'com.bmc.arsys.rx.client.approval.configuration.selfApproval.grid.column.expressionValue'\n        )\n      },\n      {\n        index: 5,\n        fieldId: String(RX_APPROVAL_CONFIGURATION.selfApproval.mapping.fields.recordDefinition),\n        visible: false,\n        title: this.translateService.instant(\n          'com.bmc.arsys.rx.client.approval.configuration.selfApproval.grid.column.recordDefinition'\n        ),\n        cellTemplate: this.definitionNameCellTemplate\n      },\n      {\n        index: 6,\n        fieldId: String(RX_APPROVAL_CONFIGURATION.selfApproval.mapping.fields.approvalFlowGuid),\n        visible: false,\n        title: this.translateService.instant(\n          'com.bmc.arsys.rx.client.approval.configuration.selfApproval.grid.column.processFlowGUID'\n        )\n      },\n      {\n        index: 7,\n        fieldId: String(RX_RECORD_DEFINITION.coreFieldIds.id),\n        visible: false,\n        title: this.translateService.instant(\n          'com.bmc.arsys.rx.client.approval.configuration.selfApproval.grid.column.id'\n        )\n      }\n    ];\n  }\n\n  isDirty(): boolean {\n    return this.selfApprovalConfigurationForm.dirty || Boolean(this.dialogApi?.isDirty());\n  }\n}\n","<adapt-alert [config]=\"alertConfig\"></adapt-alert>\n\n<form [formGroup]=\"selfApprovalConfigurationForm\">\n  <rx-expression-form-control\n    class=\"d-block form-group\"\n    [options]=\"options\"\n    formControlName=\"qualificationExpression\"\n    (events)=\"onEvent()\"\n    required=\"true\"\n  ></rx-expression-form-control>\n\n  <div class=\"row\">\n    <div class=\"col-md-4 col-12\">\n      <div class=\"row\">\n        <div class=\"col-12 form-group\">\n          <adapt-rx-counter\n            rx-id=\"precedence\"\n            label=\"{{ 'com.bmc.arsys.rx.client.approval.configuration.precedence' | translate }}\"\n            required=\"true\"\n            formControlName=\"precedence\"\n          >\n          </adapt-rx-counter>\n        </div>\n\n        <div class=\"col-12 form-group\">\n          <adapt-rx-select\n            class=\"d-block\"\n            label=\"{{ 'com.bmc.arsys.rx.client.approval.configuration.selfApproval.process' | translate }}\"\n            rx-id=\"process\"\n            formControlName=\"process\"\n            [options]=\"processOptions\"\n            enableFilter=\"true\"\n            emptyOption=\"true\"\n            [optionFormatter]=\"optionFormatter\"\n            [loadingState]=\"loadingProcesses\"\n          >\n          </adapt-rx-select>\n        </div>\n      </div>\n    </div>\n\n    <div class=\"col-md-8 col-12 form-group\">\n      <adapt-rx-textarea\n        label=\"{{ 'com.bmc.arsys.rx.client.approval.configuration.auditInformation' | translate }}\"\n        formControlName=\"auditInformation\"\n        rx-id=\"audit-information\"\n        required=\"true\"\n        rows=\"5\"\n      >\n      </adapt-rx-textarea>\n    </div>\n  </div>\n\n  <button\n    class=\"d-icon-plus_adapt form-group\"\n    type=\"button\"\n    adapt-button\n    btn-type=\"primary\"\n    rx-id=\"add-button\"\n    size=\"small\"\n    [hidden]=\"isUpdateButtonVisible\"\n    [disabled]=\"selfApprovalConfigurationForm.pristine || selfApprovalConfigurationForm.invalid\"\n    (click)=\"createSelfApprovalConfiguration()\"\n  >\n    {{ 'com.bmc.arsys.rx.client.common.add.label' | translate }}\n  </button>\n\n  <button\n    class=\"form-group\"\n    type=\"button\"\n    adapt-button\n    btn-type=\"primary\"\n    rx-id=\"update-button\"\n    size=\"small\"\n    [hidden]=\"!isUpdateButtonVisible\"\n    [disabled]=\"selfApprovalConfigurationForm.pristine || selfApprovalConfigurationForm.invalid\"\n    (click)=\"updateSelfApprovalConfiguration()\"\n  >\n    {{ 'com.bmc.arsys.rx.client.approval.update.button.label' | translate }}\n  </button>\n</form>\n\n<rx-record-grid #grid [config]=\"gridConfig\"></rx-record-grid>\n\n<ng-template #definitionNameCellTemplate let-dataItem=\"dataItem\" let-column=\"column\">\n  {{ dataItem[column.field] | rxDefinitionNamePipe }}\n</ng-template>\n","import { Component, Injector, ViewChild } from '@angular/core';\nimport { ActiveModalRef, AdaptTabsComponent, DismissReasons } from '@bmc-ux/adapt-angular';\nimport { RxNotificationService } from '@helix/platform/shared/api';\nimport { RxModalClass } from '@helix/platform/ui-kit';\nimport { TranslateService } from '@ngx-translate/core';\nimport { ApprovalFlowConfigurationComponent } from '../approval-flow-configuration/approval-flow-configuration.component';\nimport { RecordRegistrationComponent } from '../record-registration/record-registration.component';\nimport { SelfApprovalConfigurationComponent } from '../self-approval-configuration/self-approval-configuration.component';\n\n@Component({\n  selector: 'rx-approval-configuration-editor',\n  templateUrl: './approval-configuration-editor.component.html',\n  styleUrls: ['./approval-configuration-editor.component.scss']\n})\nexport class ApprovalConfigurationEditorComponent extends RxModalClass {\n  activatedTabs = [true, false, false];\n  selectedRecordDefinition = this.activeModalRef.getData().selectedRecordDefinition;\n  editMode = this.activeModalRef.getData().editMode;\n\n  @ViewChild(ApprovalFlowConfigurationComponent)\n  approvalFlowConfigurationComponent: ApprovalFlowConfigurationComponent;\n\n  @ViewChild(RecordRegistrationComponent)\n  recordRegistrationComponent: RecordRegistrationComponent;\n\n  @ViewChild(SelfApprovalConfigurationComponent)\n  selfApprovalConfigurationComponent: SelfApprovalConfigurationComponent;\n\n  @ViewChild('tabSetComponent')\n  tabSetComponent: AdaptTabsComponent;\n\n  constructor(\n    private translateService: TranslateService,\n    private rxNotificationService: RxNotificationService,\n    private activeModalRef: ActiveModalRef,\n    protected injector: Injector\n  ) {\n    super(activeModalRef, injector);\n  }\n\n  isDirty(): boolean {\n    return (\n      this.recordRegistrationComponent?.isFormDirty() ||\n      this.approvalFlowConfigurationComponent?.isDirty() ||\n      this.selfApprovalConfigurationComponent?.isDirty()\n    );\n  }\n\n  onRecordRegistered(registeredRecordDefinitionName: string): void {\n    this.editMode = true;\n    this.selectedRecordDefinition = registeredRecordDefinitionName;\n  }\n\n  isSaveButtonDisabled(): boolean {\n    if (this.editMode) {\n      return !this.recordRegistrationComponent?.canSave() && !this.approvalFlowConfigurationComponent?.canSave();\n    } else {\n      return !this.recordRegistrationComponent?.canSave();\n    }\n  }\n\n  saveApprovalConfiguration(): void {\n    if (this.recordRegistrationComponent?.isFormDirty() && this.recordRegistrationComponent?.isFormValid()) {\n      this.recordRegistrationComponent.save();\n    } else if (this.recordRegistrationComponent?.isFormDirty() && !this.recordRegistrationComponent?.isFormValid()) {\n      this.rxNotificationService.addWarningMessage(\n        this.translateService.instant('com.bmc.arsys.rx.client.approval.configuration.message.validation.error')\n      );\n\n      this.tabSetComponent.setActiveTab(0, true, null);\n    }\n\n    if (this.editMode && this.approvalFlowConfigurationComponent?.canSave()) {\n      this.approvalFlowConfigurationComponent?.markInvalidGroupsAndFlows();\n\n      if (this.approvalFlowConfigurationComponent?.areFlowGroupsValid()) {\n        this.approvalFlowConfigurationComponent.saveFlowGroups();\n      } else if (this.approvalFlowConfigurationComponent?.hasFlowGroups()) {\n        this.rxNotificationService.addWarningMessage(\n          this.translateService.instant('com.bmc.arsys.rx.client.approval.configuration.message.validation.error')\n        );\n\n        this.tabSetComponent.setActiveTab(2, true, null);\n      }\n    }\n  }\n\n  closeModal(): void {\n    this.activeModalRef.dismiss(DismissReasons.CLOSE_BTN);\n  }\n}\n","<div class=\"designer-modal-body d-flex mh-100 flex-column\">\n  <adapt-tabset [fullHeight]=\"true\" #tabSetComponent (tab-active-changed)=\"activatedTabs[$event.index] = true\">\n    <adapt-tab-panel\n      adapt-tab-title=\"{{ 'com.bmc.arsys.rx.client.approval.configuration.tab.registration' | translate }}\"\n    >\n      <rx-record-registration\n        [registeredRecordDefinitionName]=\"selectedRecordDefinition\"\n        [isEditMode]=\"editMode\"\n        (recordRegistered)=\"onRecordRegistered($event)\"\n      ></rx-record-registration>\n    </adapt-tab-panel>\n\n    <adapt-tab-panel\n      adapt-tab-title=\"{{ 'com.bmc.arsys.rx.client.approval.configuration.tab.selfApproval' | translate }}\"\n      [disabled]=\"!editMode\"\n    >\n      <rx-self-approval-configuration\n        [registeredRecordDefinitionName]=\"selectedRecordDefinition\"\n        *ngIf=\"editMode && activatedTabs[1]\"\n      >\n      </rx-self-approval-configuration>\n    </adapt-tab-panel>\n\n    <adapt-tab-panel\n      adapt-tab-title=\"{{ 'com.bmc.arsys.rx.client.approval.configuration.tab.approvalFlows' | translate }}\"\n      [disabled]=\"!editMode\"\n    >\n      <rx-approval-flow-configuration\n        [registeredRecordDefinitionName]=\"selectedRecordDefinition\"\n        *ngIf=\"editMode && activatedTabs[2]\"\n      ></rx-approval-flow-configuration>\n    </adapt-tab-panel>\n  </adapt-tabset>\n</div>\n\n<div class=\"modal-footer\">\n  <button\n    adapt-button\n    type=\"button\"\n    btn-type=\"primary\"\n    rx-id=\"save-button\"\n    [disabled]=\"isSaveButtonDisabled()\"\n    (click)=\"saveApprovalConfiguration()\"\n  >\n    {{ 'com.bmc.arsys.rx.client.common.save.label' | translate }}\n  </button>\n  <button adapt-button type=\"button\" btn-type=\"secondary\" rx-id=\"close-button\" (click)=\"closeModal()\">\n    {{ 'com.bmc.arsys.rx.client.common.close.label' | translate }}\n  </button>\n</div>\n","import { Injectable, Injector } from '@angular/core';\nimport { DataPage } from '@helix/platform/shared/api';\n\nconst recordDefinitionRegistrationDataPageQuery =\n  'com.bmc.arsys.rx.approval.application.datapage.RecordDefinitionRegistrationDataPageQuery';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class RxRecordDefinitionRegistrationDataPageService extends DataPage {\n  constructor(private injector: Injector) {\n    super(injector, recordDefinitionRegistrationDataPageQuery);\n  }\n}\n","import { Pipe, PipeTransform } from '@angular/core';\r\n\r\n@Pipe({\r\n  name: 'rxAssociatedRecordFieldNamePipe'\r\n})\r\nexport class RxAssociatedRecordFieldNamePipe implements PipeTransform {\r\n  transform(value: string, associatedRecordFieldNames: { [key: string]: string }): string {\r\n    return associatedRecordFieldNames?.[value] || value;\r\n  }\r\n}\r\n","import { Component, OnInit, TemplateRef, ViewChild } from '@angular/core';\nimport {\n  IRecordGridColumn,\n  IRecordGridConfig,\n  IRecordGridDataPageParams,\n  RecordGridComponent,\n  RowSelectionMode\n} from '@helix/platform/view/components';\nimport { Observable, of } from 'rxjs';\nimport { OpenViewActionModalSize } from '@helix/platform/view/api';\nimport { IRecordDefinition, RX_RECORD_DEFINITION } from '@helix/platform/record/api';\nimport { TranslateService } from '@ngx-translate/core';\nimport { RX_APPROVAL_CONFIGURATION } from './approval-configuration.constant';\nimport { RxRecordDefinitionRegistrationDataPageService } from './record-definition-registration-data-page.service';\nimport { AdaptModalService, KeyValueObject } from '@bmc-ux/adapt-angular';\nimport { RX_MODAL, RxModalService } from '@helix/platform/ui-kit';\nimport { RxApprovalConfigurationService } from './approval-configuration.service';\nimport { IDataPageResult, RxNotificationService } from '@helix/platform/shared/api';\nimport { ApprovalConfigurationEditorComponent } from './approval-configuration-editor/approval-configuration-editor.component';\nimport { DataCellTemplateParams } from '@bmc-ux/adapt-table';\n\n@Component({\n  selector: 'rx-admin-approval-configuration',\n  templateUrl: './approval-configuration.component.html'\n})\nexport class ApprovalConfigurationAdminComponent implements OnInit {\n  gridConfig: Observable<IRecordGridConfig>;\n\n  @ViewChild('definitionNameCellTemplate', { static: true })\n  definitionNameCellTemplate: TemplateRef<DataCellTemplateParams>;\n\n  @ViewChild('fieldNameCellTemplate', { static: true })\n  fieldNameCellTemplate: TemplateRef<DataCellTemplateParams>;\n\n  @ViewChild('grid', { static: true })\n  grid: RecordGridComponent;\n\n  constructor(\n    private rxModalService: RxModalService,\n    private translateService: TranslateService,\n    private adaptModalService: AdaptModalService,\n    private rxNotificationService: RxNotificationService,\n    private rxApprovalConfigurationService: RxApprovalConfigurationService,\n    private rxRecordDefinitionRegistrationDataPageService: RxRecordDefinitionRegistrationDataPageService\n  ) {}\n\n  ngOnInit(): void {\n    this.gridConfig = of({\n      actionButtons: [\n        {\n          label: this.translateService.instant(\n            'com.bmc.arsys.rx.client.approval.configuration.record.de-register.button.label'\n          ),\n          style: 'tertiary',\n          icon: 'trash',\n          actions: [\n            {\n              name: () => {\n                this.unregisterRecord();\n              }\n            }\n          ]\n        }\n      ],\n      recordDefinitionName: RX_APPROVAL_CONFIGURATION.selfApproval.apForm.name,\n      filterExpression: \"('61001'!=$NULL$ AND '61001'!=\\\"\\\" AND ('14860' != $NULL$ AND '14860' = 1 ))\",\n      getData: (queryParams: IRecordGridDataPageParams) => this.getData(queryParams),\n      enableRowSelection: RowSelectionMode.Single,\n      getRecordDefinition: () => of(this.getRecordDefinition()),\n      columns: this.getColumns(),\n      styles: 'flex-fill',\n      enableFiltering: false\n    });\n  }\n\n  private getData(queryParams: IRecordGridDataPageParams): Observable<IDataPageResult> {\n    delete queryParams.searchText;\n    queryParams.pageSize = -1;\n\n    return this.rxRecordDefinitionRegistrationDataPageService.get({ params: queryParams });\n  }\n\n  newApprovalConfiguration() {\n    this.openApprovalConfiguration({\n      editMode: false,\n      selectedRecordDefinition: ''\n    });\n  }\n\n  editApprovalConfiguration(clickedColumnRow) {\n    this.openApprovalConfiguration({\n      editMode: true,\n      selectedRecordDefinition: clickedColumnRow[RX_APPROVAL_CONFIGURATION.selfApproval.apForm.fields.formName]\n    });\n  }\n\n  private openApprovalConfiguration(data: KeyValueObject) {\n    this.rxModalService\n      .openModal({\n        title: this.translateService.instant('com.bmc.arsys.rx.client.approval.configuration.main.title'),\n        content: ApprovalConfigurationEditorComponent,\n        size: OpenViewActionModalSize.Large as any,\n        data: {\n          ...data\n        }\n      })\n      .then(\n        () => {},\n        () => {\n          this.grid.api.refresh().subscribe();\n        }\n      )\n      .catch(() => {});\n  }\n\n  private unregisterRecord(): void {\n    this.rxModalService\n      .confirm({\n        title: this.translateService.instant('com.bmc.arsys.rx.client.common.warning.label'),\n        modalStyle: RX_MODAL.modalStyles.warning,\n        message: this.translateService.instant(\n          'com.bmc.arsys.rx.client.approval.configuration.record.de-register.warning'\n        )\n      })\n      .then((result: boolean) => {\n        if (result) {\n          this.rxApprovalConfigurationService\n            .unRegisterRecord(\n              this.grid.api.getFirstSelectedRow()[RX_APPROVAL_CONFIGURATION.selfApproval.apForm.fields.formName]\n            )\n            .subscribe(() => {\n              this.rxNotificationService.addSuccessMessage(\n                this.translateService.instant(\n                  'com.bmc.arsys.rx.client.approval.configuration.record.de-register.success'\n                )\n              );\n              this.grid.api.refresh().subscribe();\n            });\n        }\n      });\n  }\n\n  private getRecordDefinition(): IRecordDefinition {\n    return {\n      fieldDefinitions: [\n        {\n          id: RX_APPROVAL_CONFIGURATION.selfApproval.apForm.fields.formName,\n          resourceType: RX_RECORD_DEFINITION.resourceTypes.character\n        },\n        {\n          id: RX_APPROVAL_CONFIGURATION.selfApproval.apForm.fields.formRequestId,\n          resourceType: RX_RECORD_DEFINITION.resourceTypes.character\n        },\n        {\n          id: RX_APPROVAL_CONFIGURATION.selfApproval.apForm.fields.requester,\n          resourceType: RX_RECORD_DEFINITION.resourceTypes.character\n        },\n        {\n          id: RX_APPROVAL_CONFIGURATION.selfApproval.apForm.fields.summary,\n          resourceType: RX_RECORD_DEFINITION.resourceTypes.character\n        },\n        {\n          id: RX_RECORD_DEFINITION.coreFieldIds.id,\n          resourceType: RX_RECORD_DEFINITION.resourceTypes.character\n        },\n        {\n          id: RX_APPROVAL_CONFIGURATION.selfApproval.apForm.fields.notesField,\n          resourceType: RX_RECORD_DEFINITION.resourceTypes.character\n        },\n        {\n          id: RX_APPROVAL_CONFIGURATION.selfApproval.apForm.fields.field3,\n          resourceType: RX_RECORD_DEFINITION.resourceTypes.character\n        },\n        {\n          id: RX_APPROVAL_CONFIGURATION.selfApproval.apForm.fields.field4,\n          resourceType: RX_RECORD_DEFINITION.resourceTypes.character\n        },\n        {\n          id: RX_APPROVAL_CONFIGURATION.selfApproval.apForm.fields.field5,\n          resourceType: RX_RECORD_DEFINITION.resourceTypes.character\n        },\n        {\n          id: RX_APPROVAL_CONFIGURATION.selfApproval.apForm.fields.field6,\n          resourceType: RX_RECORD_DEFINITION.resourceTypes.character\n        },\n        {\n          id: RX_APPROVAL_CONFIGURATION.selfApproval.apForm.fields.field7,\n          resourceType: RX_RECORD_DEFINITION.resourceTypes.character\n        },\n        {\n          id: RX_APPROVAL_CONFIGURATION.selfApproval.apForm.fields.securityLabels,\n          resourceType: RX_RECORD_DEFINITION.resourceTypes.character\n        }\n      ]\n    };\n  }\n\n  private getColumns(): IRecordGridColumn[] {\n    return [\n      {\n        index: 0,\n        fieldId: String(RX_APPROVAL_CONFIGURATION.selfApproval.apForm.fields.formName),\n        title: this.translateService.instant(\n          'com.bmc.arsys.rx.client.approval.configuration.grid.column.recordDefinition'\n        ),\n        cellTemplate: this.definitionNameCellTemplate\n      },\n      {\n        index: 1,\n        fieldId: String(RX_APPROVAL_CONFIGURATION.selfApproval.apForm.fields.formRequestId),\n        title: this.translateService.instant('com.bmc.arsys.rx.client.approval.configuration.grid.column.requestId'),\n        cellTemplate: this.fieldNameCellTemplate,\n        visible: false\n      },\n      {\n        index: 2,\n        fieldId: String(RX_APPROVAL_CONFIGURATION.selfApproval.apForm.fields.requester),\n        title: this.translateService.instant('com.bmc.arsys.rx.client.approval.configuration.grid.column.requester'),\n        cellTemplate: this.fieldNameCellTemplate,\n        visible: false\n      },\n      {\n        index: 3,\n        fieldId: String(RX_APPROVAL_CONFIGURATION.selfApproval.apForm.fields.summary),\n        title: this.translateService.instant('com.bmc.arsys.rx.client.approval.configuration.grid.column.description'),\n        cellTemplate: this.fieldNameCellTemplate\n      },\n      {\n        index: 4,\n        fieldId: String(RX_RECORD_DEFINITION.coreFieldIds.id),\n        title: this.translateService.instant(\n          'com.bmc.arsys.rx.client.approval.configuration.grid.column.formInstanceId'\n        ),\n        visible: false\n      },\n      {\n        index: 5,\n        fieldId: String(RX_APPROVAL_CONFIGURATION.selfApproval.apForm.fields.notesField),\n        title: this.translateService.instant('com.bmc.arsys.rx.client.approval.configuration.grid.column.notes'),\n        cellTemplate: this.fieldNameCellTemplate,\n        visible: false\n      },\n      {\n        index: 6,\n        fieldId: String(RX_APPROVAL_CONFIGURATION.selfApproval.apForm.fields.field3),\n        title: this.translateService.instant('com.bmc.arsys.rx.client.approval.configuration.grid.column.field3'),\n        cellTemplate: this.fieldNameCellTemplate,\n        visible: false\n      },\n      {\n        index: 7,\n        fieldId: String(RX_APPROVAL_CONFIGURATION.selfApproval.apForm.fields.field4),\n        title: this.translateService.instant('com.bmc.arsys.rx.client.approval.configuration.grid.column.field4'),\n        cellTemplate: this.fieldNameCellTemplate,\n        visible: false\n      },\n      {\n        index: 8,\n        fieldId: String(RX_APPROVAL_CONFIGURATION.selfApproval.apForm.fields.field5),\n        title: this.translateService.instant('com.bmc.arsys.rx.client.approval.configuration.grid.column.field5'),\n        cellTemplate: this.fieldNameCellTemplate,\n        visible: false\n      },\n      {\n        index: 9,\n        fieldId: String(RX_APPROVAL_CONFIGURATION.selfApproval.apForm.fields.field6),\n        title: this.translateService.instant('com.bmc.arsys.rx.client.approval.configuration.grid.column.field6'),\n        visible: false\n      },\n      {\n        index: 10,\n        fieldId: String(RX_APPROVAL_CONFIGURATION.selfApproval.apForm.fields.field7),\n        title: this.translateService.instant('com.bmc.arsys.rx.client.approval.configuration.grid.column.field7'),\n        visible: false\n      },\n      {\n        index: 11,\n        fieldId: String(RX_APPROVAL_CONFIGURATION.selfApproval.apForm.fields.securityLabels),\n        title: this.translateService.instant(\n          'com.bmc.arsys.rx.client.approval.configuration.grid.column.securityLabels'\n        ),\n        visible: false\n      }\n    ];\n  }\n}\n","<rx-admin-settings header=\"{{ 'com.bmc.arsys.rx.client.approval.configuration.title' | translate }}\">\n  <ng-container>\n    <button\n      adapt-button\n      type=\"button\"\n      btn-type=\"tertiary\"\n      class=\"d-icon-plus_circle align-self-start\"\n      rx-id=\"new-button\"\n      (click)=\"newApprovalConfiguration()\"\n    >\n      {{ 'com.bmc.arsys.rx.client.common.new.label' | translate }}\n    </button>\n\n    <rx-record-grid #grid [config]=\"gridConfig\"></rx-record-grid>\n  </ng-container>\n</rx-admin-settings>\n\n<ng-template #definitionNameCellTemplate let-dataItem=\"dataItem\" let-column=\"column\">\n  <a href=\"javascript:void(0)\" (click)=\"editApprovalConfiguration(dataItem)\">\n    {{ dataItem[column.field] | rxDefinitionNamePipe }}\n  </a>\n</ng-template>\n\n<ng-template #fieldNameCellTemplate let-dataItem=\"dataItem\" let-column=\"column\">\n  {{ dataItem[column.field] | rxAssociatedRecordFieldNamePipe: dataItem.associationsLabels }}\n</ng-template>\n","import { DragDropModule } from '@angular/cdk/drag-drop';\nimport { CommonModule } from '@angular/common';\nimport { ComponentFactoryResolver, NgModule } from '@angular/core';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\nimport {\n  AdaptAccordionModule,\n  AdaptAlertModule,\n  AdaptBusyModule,\n  AdaptButtonModule,\n  AdaptDropdownModule,\n  AdaptEmptyStateModule,\n  AdaptHighlightModule,\n  AdaptPopoverModule,\n  AdaptRxCheckboxModule,\n  AdaptRxCounterModule,\n  AdaptRxLabelModule,\n  AdaptRxRadiobuttonModule,\n  AdaptRxSearchModule,\n  AdaptRxSelectModule,\n  AdaptRxTextareaModule,\n  AdaptRxTextfieldModule,\n  AdaptRxValidatorsModule,\n  AdaptTabsModule,\n  AdaptTooltipModule,\n  AdaptTreeModule\n} from '@bmc-ux/adapt-angular';\nimport { RX_APPLICATION, RxDefinitionModule } from '@helix/platform/shared/api';\nimport {\n  AdminSettingsModule,\n  ExpressionFormControlModule,\n  RxDefinitionPickerModule,\n  RxSelectWithPaginationModule\n} from '@helix/platform/shared/components';\nimport { RxBusyIndicatorModule } from '@helix/platform/ui-kit';\nimport { RxViewComponentRegistryService } from '@helix/platform/view/api';\nimport { RecordGridModule } from '@helix/platform/view/components';\nimport { TranslateModule } from '@ngx-translate/core';\nimport { ApprovalConfigurationEditorComponent } from './approval-configuration-editor/approval-configuration-editor.component';\nimport { ApprovalConfigurationAdminComponent } from './approval-configuration.component';\nimport { ApprovalFlowConfigurationComponent } from './approval-flow-configuration/approval-flow-configuration.component';\nimport { RxAssociatedRecordFieldNamePipe } from './associated-record-field-name.pipe';\nimport { FlowApproversSelectorComponent } from './flow-approvers-selector/flow-approvers-selector.component';\nimport { RxFieldDefinitionPickerComponent } from './record-registration/field-definition-picker/field-definition-picker.component';\nimport { RecordRegistrationComponent } from './record-registration/record-registration.component';\nimport { SelfApprovalConfigurationComponent } from './self-approval-configuration/self-approval-configuration.component';\n\n@NgModule({\n  declarations: [\n    ApprovalConfigurationAdminComponent,\n    ApprovalFlowConfigurationComponent,\n    RxAssociatedRecordFieldNamePipe,\n    SelfApprovalConfigurationComponent,\n    RecordRegistrationComponent,\n    RxFieldDefinitionPickerComponent,\n    FlowApproversSelectorComponent,\n    ApprovalConfigurationEditorComponent\n  ],\n  imports: [\n    AdaptAlertModule,\n    AdaptButtonModule,\n    AdaptHighlightModule,\n    AdaptRxSelectModule,\n    AdaptRxTextfieldModule,\n    AdaptTabsModule,\n    AdminSettingsModule,\n    CommonModule,\n    ExpressionFormControlModule,\n    RecordGridModule,\n    RxBusyIndicatorModule,\n    RxDefinitionPickerModule,\n    TranslateModule,\n    ReactiveFormsModule,\n    AdaptRxLabelModule,\n    FormsModule,\n    AdaptDropdownModule,\n    AdaptRxSearchModule,\n    AdaptTreeModule,\n    RxDefinitionModule,\n    AdaptRxCounterModule,\n    AdaptRxTextareaModule,\n    AdaptPopoverModule,\n    AdaptTooltipModule,\n    DragDropModule,\n    AdaptAccordionModule,\n    AdaptRxRadiobuttonModule,\n    AdaptBusyModule,\n    RxSelectWithPaginationModule,\n    AdaptRxCheckboxModule,\n    AdaptRxValidatorsModule,\n    AdaptEmptyStateModule\n  ],\n  entryComponents: [ApprovalConfigurationAdminComponent, FlowApproversSelectorComponent]\n})\nexport class ApprovalConfigurationRegistrationModule {\n  constructor(\n    private componentFactoryResolver: ComponentFactoryResolver,\n    private rxViewComponentRegistryService: RxViewComponentRegistryService\n  ) {\n    rxViewComponentRegistryService.register({\n      type: 'rx-admin-approval-configuration',\n      componentFactory: this.componentFactoryResolver.resolveComponentFactory(ApprovalConfigurationAdminComponent),\n      name: 'Approval configuration',\n      isPageComponent: true,\n      availableInBundles: [RX_APPLICATION.settingsBundleId]\n    });\n  }\n}\n","import { RX_RECORD_DEFINITION } from '@helix/platform/record/api';\n\nexport const RX_APPROVAL_NOTIFICATIONS = {\n  approvalNotificationForm: {\n    name: 'AP: Approval Notification',\n    fields: {\n      status: RX_RECORD_DEFINITION.coreFieldIds.status,\n      notificationName: RX_RECORD_DEFINITION.coreFieldIds.description,\n      sendToOther: 12300,\n      method: 12301,\n      sendTo: 12302,\n      notificationMessage: 12303,\n      subject: 12305,\n      notifyOn: 12307,\n      additionalConditions: 12308,\n      useTemplate: 14053,\n      applicationName: 14861,\n      globalNotification: 14862,\n      applicationBundleId: 61001\n    }\n  },\n\n  apProcessDefinitionForm: {\n    name: 'AP:Process Definition',\n    fields: {\n      processName: 10000,\n      application: 10050\n    }\n  },\n\n  approvalFlowConfiguration: {\n    name: 'com.bmc.arsys.rx.approval:ApprovalFlowConfiguration',\n    fields: {\n      flowGroup: 10007,\n      flowName: 10008,\n      recordDefinition: 10000,\n      arApprovalProcessDefinitionGuid: 57060\n    }\n  },\n\n  arSystemEmailMailboxConfiguration: {\n    name: 'AR System Email Mailbox Configuration',\n    fields: {\n      mailboxFunction: 18049\n    }\n  },\n\n  arSystemAdministrationTextTemplate: {\n    name: 'AR System Administration: TextTemplate',\n    fields: {\n      id: RX_RECORD_DEFINITION.coreFieldIds.id,\n      name: 41202,\n      applicationBundleId: 61001\n    }\n  }\n};\n","import { Injectable, Injector } from '@angular/core';\nimport { DataPage } from '@helix/platform/shared/api';\n\nconst approvalNotificationDataPageQuery =\n  'com.bmc.arsys.rx.approval.application.datapage.ApprovalNotificationDataPageQuery';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class RxApprovalNotificationsDataPageService extends DataPage {\n  constructor(injector: Injector) {\n    super(injector, approvalNotificationDataPageQuery);\n  }\n}\n","import { HttpClient } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\nimport { forkJoin, Observable } from 'rxjs';\nimport { map } from 'lodash';\nimport { IApprovalNotification } from './approval-notifications.types';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class RxApprovalNotificationsService {\n  approvalNotificationApi = '/api/com.bmc.arsys.rx.approval/rx/application/approval/configuration/notification';\n\n  constructor(private httpClient: HttpClient) {}\n\n  getApprovalNotification(notificationRecordInstanceId: string): Observable<IApprovalNotification> {\n    return this.httpClient.get<IApprovalNotification>(\n      `${this.approvalNotificationApi}/${notificationRecordInstanceId}`\n    );\n  }\n\n  createApprovalNotification(approvalNotificationRecord: IApprovalNotification): Observable<any> {\n    return this.httpClient.post(this.approvalNotificationApi, approvalNotificationRecord);\n  }\n\n  updateApprovalNotification(approvalNotificationRecord: IApprovalNotification): Observable<any> {\n    return this.httpClient.put(\n      `${this.approvalNotificationApi}/${approvalNotificationRecord.notificationGuid}`,\n      approvalNotificationRecord\n    );\n  }\n\n  deleteApprovalNotifications(recordInstanceIds: string[]): Observable<any[]> {\n    return forkJoin(\n      map(recordInstanceIds, (id) => {\n        return this.httpClient.delete(`${this.approvalNotificationApi}/${id}`);\n      })\n    );\n  }\n}\n","import { IDataDictionary, IExpressionConfigurator, RxExpressionConfigurator } from '@helix/platform/shared/api';\nimport { Injector } from '@angular/core';\nimport { includes } from 'lodash';\nimport { Observable, of } from 'rxjs';\nimport { map } from 'rxjs/operators';\nimport { TranslateService } from '@ngx-translate/core';\nimport { IFieldDefinition, RX_RECORD_DEFINITION, RxRecordDefinitionCacheService } from '@helix/platform/record/api';\nimport { RX_APPROVAL_NOTIFICATIONS } from '../approval-notifications.constant';\n\nexport class RxApprovalNotificationExpressionConfigurator\n  extends RxExpressionConfigurator\n  implements IExpressionConfigurator\n{\n  private translateService = this.injector.get(TranslateService);\n  private rxRecordDefinitionCacheService = this.injector.get(RxRecordDefinitionCacheService);\n\n  constructor(private injector: Injector) {\n    super();\n  }\n\n  commonDataDictionary$: Observable<IDataDictionary> = of([\n    {\n      label: this.translateService.instant('com.bmc.arsys.rx.client.common.general-items.label'),\n      children: []\n    }\n  ]);\n\n  approvalNotificationExpressionDataDictionary(\n    recordDefinitionName: string,\n    isSingleQuoteTextExpression: boolean\n  ): Observable<IDataDictionary> {\n    if (recordDefinitionName) {\n      return this.rxRecordDefinitionCacheService.getRecordDefinition(recordDefinitionName).pipe(\n        map((recordDefinition) => {\n          return [\n            {\n              label: this.translateService.instant(\n                'com.bmc.arsys.rx.client.approval.expression-editor.data-dictionary.values.record-definition.title'\n              ),\n              children: recordDefinition.fieldDefinitions\n                .filter(\n                  (fieldDefinition: IFieldDefinition) =>\n                    fieldDefinition.resourceType !== RX_RECORD_DEFINITION.dataTypes.attachment.resourceType &&\n                    fieldDefinition.fieldMapping?.source === 'PRIMARY_RECORD_DEFINITION' &&\n                    !includes(\n                      [\n                        RX_RECORD_DEFINITION.coreFieldIds.displayId,\n                        RX_RECORD_DEFINITION.coreFieldIds.id,\n                        RX_APPROVAL_NOTIFICATIONS.approvalNotificationForm.fields.applicationBundleId\n                      ],\n                      fieldDefinition.id\n                    )\n                )\n                .map((fieldDefinition: IFieldDefinition) => ({\n                  label: fieldDefinition.name.replace(new RegExp(' Primary$'), ''),\n                  icon: 'd-icon-field_text',\n                  expression: isSingleQuoteTextExpression\n                    ? `'${fieldDefinition.name}'`\n                    : `'\\${${fieldDefinition.name}}'`,\n                  resourceType: fieldDefinition.resourceType\n                }))\n            },\n            {\n              label: 'NULL',\n              icon: 'd-icon-dollar',\n              expression: '$NULL$',\n              hidden: true\n            }\n          ];\n        })\n      );\n    } else {\n      return of([]);\n    }\n  }\n}\n","import { RX_RECORD_DEFINITION } from '@helix/platform/record/api';\n\nexport const RX_CONNECTION_MAPPING = {\n  aliasTypes: {\n    dataSource: 'DataSource',\n    webRequest: 'WebRequest',\n    connector: 'connector'\n  },\n  connector: {\n    recordDefinitionName: 'Connector Configurations',\n    fields: {\n      status: RX_RECORD_DEFINITION.coreFieldIds.status,\n      id: RX_RECORD_DEFINITION.coreFieldIds.id,\n      target_name: 56110,\n      connector_id: 56111,\n      connector_name: 56112,\n      connector_config_id: 56113,\n      connector_config_name: 56114,\n      connector_profile_id: 56115,\n      connector_profile_Name: 56116\n    }\n  },\n  webRequest: {\n    recordDefinitionName: 'WebAPI Connection',\n    fields: {\n      authentication: 70034,\n      hostname: 70030,\n      id: RX_RECORD_DEFINITION.coreFieldIds.id,\n      name: RX_RECORD_DEFINITION.coreFieldIds.description,\n      port: 70031\n    }\n  },\n  dataSource: {\n    recordDefinitionName: 'Data Source',\n    fields: {\n      name: RX_RECORD_DEFINITION.coreFieldIds.description,\n      id: RX_RECORD_DEFINITION.coreFieldIds.id,\n      sourceType: 70051\n    }\n  },\n  aliasMapping: {\n    recordDefinitionName: 'Alias Mapping',\n    queryExpression: \"'56150' != 'email'\",\n    fields: {\n      status: RX_RECORD_DEFINITION.coreFieldIds.status,\n      id: RX_RECORD_DEFINITION.coreFieldIds.id,\n      aliasType: 56150,\n      aliasName: 56153,\n      aliasValue: 56154,\n      applicationId: 56151,\n      applicationName: 56152\n    }\n  }\n};\n","import { Component, Injector, OnDestroy, OnInit } from '@angular/core';\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\nimport {\n  ActiveModalRef,\n  AdaptRxControlLabelTooltip,\n  AdaptTreeNode,\n  DismissReasons,\n  KeyValueObject,\n  RxSelectionChangeEvent,\n  RxSelectOptionsGroup,\n  TreeWrap\n} from '@bmc-ux/adapt-angular';\nimport { IApprovalNotification, IApprovalNotificationData, IApprovalTemplate } from '../approval-notifications.types';\nimport { TranslateService } from '@ngx-translate/core';\nimport {\n  cloneDeep,\n  every,\n  filter,\n  find,\n  flow,\n  forEach,\n  groupBy,\n  includes,\n  isEmpty,\n  map as _map,\n  map,\n  values\n} from 'lodash';\nimport { switchMap } from 'rxjs/operators';\nimport { BehaviorSubject, forkJoin, Observable } from 'rxjs';\nimport {\n  IDefinitionPickerComponentOptions,\n  IExpressionEditorPropertyChange,\n  IExpressionFormControlOptions,\n  RxDefinitionPickerScope,\n  RxDefinitionPickerType,\n  RxExpressionEditorService\n} from '@helix/platform/shared/components';\nimport { RxApprovalNotificationExpressionConfigurator } from '../approval-notifiction-expression-configurator/approval-notification-expression-configurator.class';\nimport {\n  ExpressionOperatorGroup,\n  IDataPageResult,\n  RxDefinitionNameService,\n  RxNotificationService\n} from '@helix/platform/shared/api';\nimport {\n  IFieldDefinition,\n  IRecordDefinition,\n  RX_RECORD_DEFINITION,\n  RxRecordDefinitionCacheService,\n  RxRecordInstanceDataPageService\n} from '@helix/platform/record/api';\nimport { RxApprovalNotificationsService } from '../approval-notifications.service';\nimport { RX_APPROVAL_NOTIFICATIONS } from '../approval-notifications.constant';\nimport { RX_CONNECTION_MAPPING } from '../../connection-mapping/common/connection-mapping.constant';\nimport { IDialogApi, RxModalClass } from '@helix/platform/ui-kit';\n\n@Component({\n  selector: 'rx-approval-notification-editor',\n  templateUrl: './approval-notification-editor.component.html',\n  styleUrls: ['./approval-notification-editor.component.scss']\n})\nexport class ApprovalNotificationEditorComponent extends RxModalClass implements OnInit, OnDestroy {\n  approvalNotificationForm: FormGroup;\n  approvalNotificationData: IApprovalNotificationData;\n  recordDefinitions: RxSelectOptionsGroup[] = [];\n  sendToOtherOptions: KeyValueObject[] = [];\n  emailProfileOptions: KeyValueObject[] = [];\n  emailTemplateOptions: IApprovalTemplate[] = [];\n  isEditMode = false;\n  approvalNotification: IApprovalNotification;\n  expressionFormControlOptions: IExpressionFormControlOptions;\n  subjectExpressionFormControlOptions: IExpressionFormControlOptions;\n  notificationMessageExpressionOptions: IExpressionFormControlOptions;\n  groupedData: KeyValueObject = {};\n  processList: string[] = [];\n  isTreeTouched: boolean;\n  treeWrap: TreeWrap = TreeWrap.WrapAll;\n\n  private expressionDialogApi: IDialogApi;\n  private recordDefinitionSubject: BehaviorSubject<string>;\n  protected subjectExpressionConfigurator: RxApprovalNotificationExpressionConfigurator;\n  protected expressionConfigurator: RxApprovalNotificationExpressionConfigurator;\n\n  selectedFlows: AdaptTreeNode[] = [];\n  availableFlows: AdaptTreeNode[] = [];\n\n  processDefinitionPickerOptions: IDefinitionPickerComponentOptions = {\n    label: this.translateService.instant(\n      'com.bmc.arsys.rx.client.approval.notification-configuration.process-name-field.label'\n    ),\n    definitionType: RxDefinitionPickerType.Process,\n    required: true,\n    availableDefinitionPickerStates: {\n      definitionButtonsGroups: [RxDefinitionPickerScope.All],\n      search: RxDefinitionPickerScope.All\n    }\n  };\n\n  notificationTypeTooltip: AdaptRxControlLabelTooltip = {\n    popoverMode: true,\n    iconName: 'question_circle_o',\n    placement: 'right',\n    content: this.translateService.instant(\n      'com.bmc.arsys.rx.client.approval.notification-configuration.notification-type-field.tooltip'\n    )\n  };\n\n  approverSelectionTooltip: AdaptRxControlLabelTooltip = {\n    popoverMode: true,\n    iconName: 'question_circle_o',\n    placement: 'right',\n    content: this.translateService.instant(\n      'com.bmc.arsys.rx.client.approval.notification-configuration.send-to.options.approver-selection.tooltip'\n    )\n  };\n\n  sendToOptionValue = {\n    allApprovers: '0',\n    selectedApprover: '1'\n  };\n\n  sendToOption = [\n    {\n      id: this.sendToOptionValue.allApprovers,\n      name: this.translateService.instant(\n        'com.bmc.arsys.rx.client.approval.notification-configuration.send-to.options.all-approvers.name'\n      )\n    },\n    {\n      id: this.sendToOptionValue.selectedApprover,\n      name: this.translateService.instant(\n        'com.bmc.arsys.rx.client.approval.notification-configuration.send-to.options.other.name'\n      )\n    }\n  ];\n\n  globalNotificationOptionValue = {\n    global: 'global',\n    flows: 'flows'\n  };\n\n  globalNotificationOptions = [\n    {\n      label: this.translateService.instant(\n        'com.bmc.arsys.rx.client.approval.notification-configuration.notification-type-field.types.flow.label'\n      ),\n      value: this.globalNotificationOptionValue.flows\n    },\n    {\n      label: this.translateService.instant(\n        'com.bmc.arsys.rx.client.approval.notification-configuration.notification-type-field.types.global.label'\n      ),\n      value: this.globalNotificationOptionValue.global\n    }\n  ];\n\n  notificationMethodOptions = [\n    {\n      id: '2',\n      name: this.translateService.instant(\n        'com.bmc.arsys.rx.client.approval.notification-configuration.notification-method.types.email.name'\n      )\n    },\n    {\n      id: '5',\n      name: this.translateService.instant(\n        'com.bmc.arsys.rx.client.approval.notification-configuration.notification-method.types.process.name'\n      )\n    }\n  ];\n\n  notifyOnOptions = [\n    {\n      id: 0,\n      name: this.translateService.instant(\n        'com.bmc.arsys.rx.client.approval.notification-configuration.notify-on.options.new-signature.name'\n      )\n    },\n    {\n      id: 1,\n      name: this.translateService.instant(\n        'com.bmc.arsys.rx.client.approval.notification-configuration.notify-on.options.approve.name'\n      )\n    },\n    {\n      id: 2,\n      name: this.translateService.instant(\n        'com.bmc.arsys.rx.client.approval.notification-configuration.notify-on.options.reject.name'\n      )\n    },\n    {\n      id: 9,\n      name: this.translateService.instant(\n        'com.bmc.arsys.rx.client.approval.notification-configuration.notify-on.options.reassign.name'\n      )\n    },\n    {\n      id: 11,\n      name: this.translateService.instant(\n        'com.bmc.arsys.rx.client.approval.notification-configuration.notify-on.options.cancel.name'\n      )\n    },\n    {\n      id: 12,\n      name: this.translateService.instant(\n        'com.bmc.arsys.rx.client.approval.notification-configuration.notify-on.options.more-info-provided.name'\n      )\n    },\n    {\n      id: 16,\n      name: this.translateService.instant(\n        'com.bmc.arsys.rx.client.approval.notification-configuration.notify-on.options.hold.name'\n      )\n    },\n    {\n      id: 17,\n      name: this.translateService.instant(\n        'com.bmc.arsys.rx.client.approval.notification-configuration.notify-on.options.more-info.name'\n      )\n    }\n  ];\n\n  handleTemplateDependentFieldSelection(event: boolean) {\n    if (event) {\n      this.approvalNotificationForm.get('message').disable();\n      this.approvalNotificationForm.get('outgoingEmailProfile').enable();\n    } else {\n      this.approvalNotificationForm.get('message').enable();\n      this.approvalNotificationForm.get('outgoingEmailProfile').disable();\n    }\n  }\n\n  optionFormatter(option: KeyValueObject): string {\n    return option.name;\n  }\n\n  constructor(\n    protected injector: Injector,\n    private formBuilder: FormBuilder,\n    private activeModalRef: ActiveModalRef,\n    private rxRecordDefinitionCacheService: RxRecordDefinitionCacheService,\n    private rxExpressionEditorService: RxExpressionEditorService,\n    private rxRecordInstanceDataPageService: RxRecordInstanceDataPageService,\n    private rxApprovalNotificationsService: RxApprovalNotificationsService,\n    private translateService: TranslateService,\n    private rxNotificationService: RxNotificationService,\n    private rxDefinitionNameService: RxDefinitionNameService\n  ) {\n    super(activeModalRef, injector);\n  }\n\n  ngOnInit(): void {\n    super.ngOnInit();\n    this.approvalNotificationForm = this.createApprovalNotificationForm();\n    this.approvalNotificationData = this.activeModalRef.getData();\n    this.recordDefinitions = this.approvalNotificationData.recordDefinitions;\n    this.emailTemplateOptions = this.approvalNotificationData.templateList;\n    this.approvalNotification = this.approvalNotificationData.approvalNotification;\n    this.isEditMode = Boolean(this.approvalNotification.notificationName);\n    this.expressionConfigurator = new RxApprovalNotificationExpressionConfigurator(this.injector);\n    this.recordDefinitionSubject = new BehaviorSubject<string>('');\n    this.subjectExpressionConfigurator = new RxApprovalNotificationExpressionConfigurator(this.injector);\n\n    this.subjectExpressionConfigurator.configureForProperty({\n      propertyPath: 'subject',\n      dataDictionary$: this.recordDefinitionSubject\n        .asObservable()\n        .pipe(\n          switchMap((recordDefinitionName) =>\n            this.subjectExpressionConfigurator.approvalNotificationExpressionDataDictionary(recordDefinitionName, false)\n          )\n        ),\n      operators: null\n    });\n\n    this.expressionConfigurator.configureForProperty({\n      propertyPath: 'approvalNotification',\n      dataDictionary$: this.recordDefinitionSubject\n        .asObservable()\n        .pipe(\n          switchMap((recordDefinitionName) =>\n            this.expressionConfigurator.approvalNotificationExpressionDataDictionary(recordDefinitionName, true)\n          )\n        ),\n      operators: this.expressionConfigurator.getOperatorRowsByGroup(ExpressionOperatorGroup.All)\n    });\n\n    this.expressionFormControlOptions = {\n      label: this.translateService.instant(\n        'com.bmc.arsys.rx.client.approval.notification-configuration.notification-expression-field.label'\n      ),\n      dataDictionary$: this.expressionConfigurator.getDataDictionary('approvalNotification'),\n      operators: this.expressionConfigurator.getOperators('approvalNotification'),\n      isRequired: false,\n      tooltip: {\n        popoverMode: true,\n        iconName: 'question_circle_o',\n        placement: 'right',\n        content: this.translateService.instant(\n          'com.bmc.arsys.rx.client.approval.notification-configuration.notification-expression-field.tooltip'\n        )\n      }\n    };\n\n    this.subjectExpressionFormControlOptions = {\n      label: this.translateService.instant(\n        'com.bmc.arsys.rx.client.approval.notification-configuration.subject-field.label'\n      ),\n      dataDictionary$: this.subjectExpressionConfigurator.getDataDictionary('subject'),\n      operators: this.expressionConfigurator.getOperators('subject'),\n      isRequired: this.isRequiredForEmail()\n    };\n\n    this.notificationMessageExpressionOptions = {\n      label: this.translateService.instant('com.bmc.arsys.rx.client.common.message.label'),\n      dataDictionary$: this.subjectExpressionConfigurator.getDataDictionary('subject'),\n      operators: this.expressionConfigurator.getOperators('subject'),\n      isRequired: this.isRequiredForEmail()\n    };\n\n    this.approvalNotificationForm\n      .get('primaryRecordName')\n      .valueChanges.subscribe((value) => this.onRecordDefinitionChange(value));\n\n    this.approvalNotificationForm\n      .get('notificationMethod')\n      .valueChanges.subscribe((value) => this.onNotificationMethodChange(value));\n\n    if (this.isEditMode) {\n      this.initializeApprovalNotificationForm();\n    }\n  }\n\n  isDirty(): boolean {\n    return Boolean(this.approvalNotificationForm?.dirty || this.expressionDialogApi?.isDirty());\n  }\n\n  ngOnDestroy() {\n    this.recordDefinitionSubject.complete();\n  }\n\n  createApprovalNotificationForm(): FormGroup {\n    return this.formBuilder.group({\n      primaryRecordName: [[], Validators.required],\n      notificationName: ['', Validators.required],\n      notifyOn: [[], Validators.required],\n      additionalQualification: '',\n      notificationType: this.globalNotificationOptionValue.flows,\n      useTemplate: false,\n      outgoingEmailProfile: [{ value: [], disabled: true }, Validators.required],\n      approvalTemplate: [[], Validators.nullValidator],\n      sendTo: ['0'],\n      subject: '',\n      notificationMethod: [[this.notificationMethodOptions[0]], Validators.required],\n      status: true,\n      message: '',\n      approver: [{ value: [], disabled: true }, Validators.required],\n      rxProcessName: '',\n      check: false\n    });\n  }\n\n  reset(): void {\n    this.approvalNotificationForm.get('additionalQualification').setValue('');\n    this.approvalNotificationForm.get('rxProcessName').setValue('');\n    this.approvalNotificationForm.get('subject').setValue('');\n    this.approvalNotificationForm.get('message').setValue('');\n    this.approvalNotificationForm.get('sendTo').setValue('0');\n    this.approvalNotificationForm.get('notifyOn').setValue([]);\n    this.approvalNotificationForm.get('notificationType').setValue(this.globalNotificationOptionValue.flows);\n    this.approvalNotificationForm.get('useTemplate').setValue(false);\n    this.approvalNotificationForm.get('notificationMethod').setValue([this.notificationMethodOptions[0]]);\n    this.approvalNotificationForm.get('outgoingEmailProfile').setValue([]);\n    this.approvalNotificationForm.get('approvalTemplate').setValue([]);\n    this.approvalNotificationForm.get('approver').setValue([]);\n    this.approvalNotificationForm.get('status').setValue(true);\n  }\n\n  onNotificationMethodChange(value: KeyValueObject): void {\n    // check if notification method is process or email i.e '5' or '2'\n    if (value[0].id === this.notificationMethodOptions[1].id) {\n      this.approvalNotificationForm.get('subject').setValue('');\n      this.approvalNotificationForm.get('message').setValue('');\n      this.approvalNotificationForm.controls['subject'].disable();\n      this.approvalNotificationForm.controls['message'].disable();\n      this.approvalNotificationForm.controls['rxProcessName'].enable();\n    } else if (value[0].id === this.notificationMethodOptions[0].id) {\n      this.approvalNotificationForm.get('rxProcessName').setValue('');\n      this.approvalNotificationForm.controls['rxProcessName'].disable();\n      this.approvalNotificationForm.controls['subject'].enable();\n      this.approvalNotificationForm.controls['message'].enable();\n    }\n  }\n\n  handleSendToOptionSelection() {\n    if (this.approvalNotificationForm.get('sendTo').value === this.sendToOptionValue.selectedApprover) {\n      this.approvalNotificationForm.get('approver').enable();\n    } else {\n      this.approvalNotificationForm.get('approver').disable();\n    }\n  }\n\n  initializeApprovalNotification(\n    recordDefinitionName: string\n  ): Observable<[IRecordDefinition, IDataPageResult, IDataPageResult]> {\n    return forkJoin([\n      this.rxRecordDefinitionCacheService.getRecordDefinition(recordDefinitionName + ' Detail Signature'),\n      this.rxRecordInstanceDataPageService.post({\n        params: {\n          recorddefinition: RX_APPROVAL_NOTIFICATIONS.arSystemEmailMailboxConfiguration.name,\n          propertySelection: [RX_RECORD_DEFINITION.coreFieldIds.id],\n          queryExpression: `'${RX_RECORD_DEFINITION.coreFieldIds.status}' = \"0\" AND '${RX_APPROVAL_NOTIFICATIONS.arSystemEmailMailboxConfiguration.fields.mailboxFunction}' = \"1\"`\n        }\n      }),\n      this.rxRecordInstanceDataPageService.post({\n        params: {\n          recorddefinition: RX_APPROVAL_NOTIFICATIONS.approvalFlowConfiguration.name,\n          propertySelection: values(RX_APPROVAL_NOTIFICATIONS.approvalFlowConfiguration.fields).join(),\n          queryExpression: `'${RX_APPROVAL_NOTIFICATIONS.approvalFlowConfiguration.fields.recordDefinition}' == \"${recordDefinitionName}\"`\n        }\n      })\n    ]);\n  }\n\n  initializeApprovalNotificationForm(): void {\n    this.approvalNotificationForm.get('notificationName').setValue(this.approvalNotification.notificationName);\n    this.approvalNotificationForm.get('status').setValue(this.approvalNotification.status === '0');\n    this.approvalNotificationForm.get('rxProcessName').setValue(this.approvalNotification.rxProcessName);\n\n    this.approvalNotificationForm\n      .get('subject')\n      .setValue(this.convertExpressionFromServerFormat(this.approvalNotification.subject));\n\n    this.approvalNotificationForm\n      .get('message')\n      .setValue(this.convertExpressionFromServerFormat(this.approvalNotification.message));\n\n    this.approvalNotificationForm.get('sendTo').setValue(this.approvalNotification.sendTo);\n    this.handleSendToOptionSelection();\n\n    this.approvalNotificationForm\n      .get('additionalQualification')\n      .setValue(this.approvalNotification.additionalQualification);\n\n    this.approvalNotificationForm\n      .get('notifyOn')\n      .setValue(filter(this.notifyOnOptions, { id: this.approvalNotification.notifyOn }));\n\n    this.approvalNotificationForm\n      .get('notificationType')\n      .setValue(\n        this.approvalNotification.notificationType === 1\n          ? this.globalNotificationOptionValue.global\n          : this.globalNotificationOptionValue.flows\n      );\n\n    this.approvalNotificationForm.get('useTemplate').setValue(this.approvalNotification.useTemplate === '1');\n    this.handleTemplateDependentFieldSelection(true);\n\n    this.approvalNotificationForm\n      .get('notificationMethod')\n      .setValue(filter(this.notificationMethodOptions, { id: this.approvalNotification.notificationMethod }));\n\n    this.approvalNotificationForm.get('outgoingEmailProfile').setValue([\n      {\n        name: this.approvalNotification.emailProfile,\n        id: this.approvalNotification.emailProfileGuid\n      }\n    ]);\n\n    this.approvalNotificationForm.get('approvalTemplate').setValue([\n      {\n        name: this.approvalNotification.approvalTemplateName,\n        id: this.approvalNotification.approvalTemplateGuid\n      }\n    ]);\n\n    this.approvalNotificationForm.get('primaryRecordName').setValue(\n      this.approvalNotification.primaryRecordName\n        ? [\n            {\n              value: this.approvalNotification.primaryRecordName,\n              displayValue: this.rxDefinitionNameService.getDisplayName(this.approvalNotification.primaryRecordName)\n            }\n          ]\n        : []\n    );\n  }\n\n  onRecordDefinitionChange(recordDefinitionOption): void {\n    const oldRecordDefinitionName = this.approvalNotificationForm.value.primaryRecordName.length\n      ? this.approvalNotificationForm.value.primaryRecordName[0]\n      : '';\n\n    const newRecordDefinitionName = recordDefinitionOption[0].value;\n    const threeWayRecordDefinitionName = newRecordDefinitionName + ' Detail Signature';\n\n    if (newRecordDefinitionName !== oldRecordDefinitionName) {\n      if (!this.isEditMode) {\n        this.reset();\n      }\n\n      this.recordDefinitionSubject.next(threeWayRecordDefinitionName);\n\n      if (newRecordDefinitionName) {\n        this.initializeApprovalNotification(newRecordDefinitionName).subscribe(\n          ([recordDefinition, outgoingMailboxes, recordInstances]) => {\n            this.prepareApprovalFlowTree(recordInstances);\n            this.initializeSendToFromControlOptions(recordDefinition);\n            this.initializeEmailProfiles(outgoingMailboxes, newRecordDefinitionName);\n          }\n        );\n      }\n    }\n  }\n\n  onSelectionChange() {\n    this.isTreeTouched = true;\n    this.approvalNotificationForm.markAsDirty();\n  }\n\n  private isGlobalNotification(): boolean {\n    return (\n      this.isEditMode &&\n      this.approvalNotificationForm.get('notificationType').value === this.globalNotificationOptionValue.global\n    );\n  }\n\n  prepareApprovalFlowTree(recordInstances: IDataPageResult): void {\n    this.selectedFlows = [];\n\n    this.availableFlows = flow(\n      (instanceData) => groupBy(instanceData, RX_APPROVAL_NOTIFICATIONS.approvalFlowConfiguration.fields.flowGroup),\n      (flowsByFlowGroup) =>\n        map(flowsByFlowGroup, (flows, flowGroupName) => ({\n          label: flowGroupName,\n          disallowMultipleNodeSelection: this.isGlobalNotification(),\n          expanded: true,\n          children: _map(flows, (approvalFlow) => {\n            const leafNode = {\n              label: approvalFlow[RX_APPROVAL_NOTIFICATIONS.approvalFlowConfiguration.fields.flowName],\n              key: approvalFlow[\n                RX_APPROVAL_NOTIFICATIONS.approvalFlowConfiguration.fields.arApprovalProcessDefinitionGuid\n              ],\n              leaf: true,\n              data: flowGroupName,\n              disallowMultipleNodeSelection: this.isGlobalNotification()\n            };\n\n            if (\n              includes(\n                this.approvalNotification.processList,\n                approvalFlow[RX_APPROVAL_NOTIFICATIONS.approvalFlowConfiguration.fields.arApprovalProcessDefinitionGuid]\n              )\n            ) {\n              this.selectedFlows.push(leafNode);\n            }\n\n            return leafNode;\n          })\n        }))\n    )(recordInstances.data);\n\n    this.updateParentNodesForSelectedFlows();\n  }\n\n  private updateParentNodesForSelectedFlows() {\n    forEach(this.selectedFlows, (selectedFlow) => {\n      const availableParentNode = find(\n        this.availableFlows,\n        (availableFlow) => availableFlow.label === selectedFlow.data\n      );\n\n      if (every(availableParentNode.children, (node) => includes(this.selectedFlows, node))) {\n        this.selectedFlows.push(availableParentNode);\n      } else {\n        availableParentNode.partialSelected = true;\n      }\n    });\n  }\n\n  initializeEmailProfiles(outgoingMailboxes: IDataPageResult, recordDefinitionName: string): void {\n    let additionalExpression = `'${RX_CONNECTION_MAPPING.aliasMapping.fields.aliasType}' = \"email\"`;\n    let expression = '';\n\n    if (recordDefinitionName) {\n      additionalExpression += ` AND ('${\n        RX_CONNECTION_MAPPING.aliasMapping.fields.applicationId\n      }' = \"${this.rxDefinitionNameService.getBundleId(recordDefinitionName)}\" OR '${\n        RX_CONNECTION_MAPPING.aliasMapping.fields.applicationId\n      }' = \"None\")`;\n    }\n\n    forEach(outgoingMailboxes.data, (outgoingMailbox) => {\n      if (!isEmpty(expression)) {\n        expression += ' OR ';\n      }\n\n      expression += `'${RX_CONNECTION_MAPPING.aliasMapping.fields.aliasValue}' = \"${\n        outgoingMailbox[RX_RECORD_DEFINITION.coreFieldIds.id]\n      }\"`;\n    });\n\n    expression = expression ? ' AND ((' + expression + '))' : '';\n\n    this.rxRecordInstanceDataPageService\n      .post({\n        params: {\n          recorddefinition: 'Alias Mapping',\n          propertySelection: [\n            RX_CONNECTION_MAPPING.aliasMapping.fields.aliasName,\n            RX_RECORD_DEFINITION.coreFieldIds.id,\n            RX_CONNECTION_MAPPING.aliasMapping.fields.applicationId\n          ],\n          queryExpression: additionalExpression + expression\n        }\n      })\n      .subscribe((result) => {\n        this.emailProfileOptions = result.data.map((emailData: KeyValueObject) => {\n          return {\n            name: emailData[RX_CONNECTION_MAPPING.aliasMapping.fields.aliasName],\n            id: emailData[RX_RECORD_DEFINITION.coreFieldIds.id]\n          };\n        });\n      });\n  }\n\n  initializeSendToFromControlOptions(recordDefinition: IRecordDefinition): void {\n    if (recordDefinition && recordDefinition.fieldDefinitions) {\n      this.sendToOtherOptions = this.filterFieldDefinitions(recordDefinition.fieldDefinitions);\n\n      this.approvalNotificationForm\n        .get('approver')\n        .setValue(filter(this.sendToOtherOptions, { id: this.approvalNotification.sendToOthers }));\n    }\n  }\n\n  private filterFieldDefinitions(fieldDefinitions: IFieldDefinition[]): KeyValueObject[] {\n    return fieldDefinitions\n      .filter(\n        (fieldDefinition: IFieldDefinition) =>\n          fieldDefinition.resourceType !== RX_RECORD_DEFINITION.dataTypes.attachment.resourceType &&\n          fieldDefinition.fieldMapping?.source === 'PRIMARY_RECORD_DEFINITION' &&\n          !includes(\n            [\n              RX_RECORD_DEFINITION.coreFieldIds.displayId,\n              RX_RECORD_DEFINITION.coreFieldIds.id,\n              RX_APPROVAL_NOTIFICATIONS.approvalNotificationForm.fields.applicationBundleId\n            ],\n            fieldDefinition.id\n          )\n      )\n      .map((fieldDefinition: IFieldDefinition) => ({\n        name: fieldDefinition.name.replace(/ Primary$/, ''),\n        id: `'\\$\\{${fieldDefinition.name}\\}'`\n      }));\n  }\n\n  buildExpression(propertyName): void {\n    this.selectApprovalNotificationExpression(propertyName);\n  }\n\n  private selectApprovalNotificationExpression(propertyName: string): void {\n    let fieldLabel = '';\n\n    if (propertyName === 'additionalQualification') {\n      fieldLabel = this.translateService.instant(\n        'com.bmc.arsys.rx.client.approval.notification-configuration.notification-expression-field.label'\n      );\n    } else if (propertyName === 'subject') {\n      fieldLabel = this.translateService.instant(\n        'com.bmc.arsys.rx.client.approval.notification-configuration.subject-field.label'\n      );\n    } else if (propertyName === 'message') {\n      fieldLabel = this.translateService.instant('com.bmc.arsys.rx.client.common.message.label');\n    }\n\n    const expressionEditorConfig = {\n      property: {\n        path: propertyName === 'additionalQualification' ? 'approvalNotification' : 'subject',\n        value: this.approvalNotificationForm.get(propertyName).value,\n        label: fieldLabel\n      },\n      expressionConfigurator:\n        propertyName === 'additionalQualification' ? this.expressionConfigurator : this.subjectExpressionConfigurator,\n      legend: [\n        {\n          label: this.translateService.instant('com.bmc.arsys.rx.client.expression-editor.legend.keyword.label'),\n          icon: 'd-icon-dollar'\n        },\n        {\n          label: this.translateService.instant('com.bmc.arsys.rx.client.expression-editor.legend.field.label'),\n          icon: 'd-icon-field_text'\n        }\n      ]\n    };\n\n    this.rxExpressionEditorService\n      .openEditor(expressionEditorConfig, (dialogApi: IDialogApi) => (this.expressionDialogApi = dialogApi))\n      .subscribe((expression: IExpressionEditorPropertyChange) => {\n        this.expressionDialogApi = null;\n        this.approvalNotificationForm.get(propertyName).setValue(expression.value);\n        this.approvalNotificationForm.get(propertyName).markAsDirty();\n      });\n  }\n\n  private transformFormControlData(): IApprovalNotification {\n    const approvalNotificationRecord = cloneDeep(this.approvalNotificationForm.value);\n\n    approvalNotificationRecord.primaryRecordName = approvalNotificationRecord.primaryRecordName[0].value;\n\n    approvalNotificationRecord.notifyOn = approvalNotificationRecord.notifyOn.length\n      ? approvalNotificationRecord.notifyOn[0].id\n      : '';\n\n    if (approvalNotificationRecord.notificationType === this.globalNotificationOptionValue.flows) {\n      approvalNotificationRecord.notificationType = 0;\n\n      approvalNotificationRecord.processList = this.selectedFlows\n        .filter((approvalFlow: AdaptTreeNode) => approvalFlow.leaf)\n        .map((approvalFlow: AdaptTreeNode) => approvalFlow.key);\n    } else {\n      approvalNotificationRecord.notificationType = 1;\n    }\n\n    if (approvalNotificationRecord?.outgoingEmailProfile?.length) {\n      approvalNotificationRecord.emailProfile = approvalNotificationRecord.outgoingEmailProfile[0].name;\n      approvalNotificationRecord.emailProfileGuid = approvalNotificationRecord.outgoingEmailProfile[0].id;\n    }\n\n    delete approvalNotificationRecord.outgoingEmailProfile;\n\n    if (approvalNotificationRecord.approvalTemplate.length) {\n      approvalNotificationRecord.approvalTemplateName = approvalNotificationRecord.approvalTemplate.name;\n      approvalNotificationRecord.approvalTemplateGuid = approvalNotificationRecord.approvalTemplate.id;\n    }\n\n    delete approvalNotificationRecord.approvalTemplate;\n\n    approvalNotificationRecord.sendToOthers = approvalNotificationRecord.approver?.length\n      ? approvalNotificationRecord.approver[0].id\n      : '';\n\n    approvalNotificationRecord.notificationMethod = approvalNotificationRecord.notificationMethod.length\n      ? approvalNotificationRecord.notificationMethod[0].id\n      : '';\n\n    if (approvalNotificationRecord.notificationMethod === this.notificationMethodOptions[1].id) {\n      approvalNotificationRecord.subject = approvalNotificationRecord.notificationName;\n      approvalNotificationRecord.message = approvalNotificationRecord.notificationName;\n    } else if (approvalNotificationRecord.useTemplate) {\n      approvalNotificationRecord.message = approvalNotificationRecord.notificationName;\n    }\n\n    approvalNotificationRecord.useTemplate = approvalNotificationRecord.useTemplate ? '1' : '0';\n    approvalNotificationRecord.status = approvalNotificationRecord.status ? '0' : '1';\n\n    approvalNotificationRecord.subject = this.convertExpressionToServerFormat(approvalNotificationRecord.subject);\n    approvalNotificationRecord.message = this.convertExpressionToServerFormat(approvalNotificationRecord.message);\n\n    delete approvalNotificationRecord.approver;\n    delete approvalNotificationRecord.check;\n\n    if (this.isEditMode) {\n      approvalNotificationRecord.notificationGuid = this.approvalNotification.notificationGuid;\n    }\n\n    return approvalNotificationRecord;\n  }\n\n  save(): void {\n    this.approvalNotificationForm.markAsPristine();\n    const approvalNotificationRecord = this.transformFormControlData();\n\n    this.rxApprovalNotificationsService.createApprovalNotification(approvalNotificationRecord).subscribe(() => {\n      this.rxNotificationService.addSuccessMessage(\n        this.translateService.instant(\n          'com.bmc.arsys.rx.client.approval.notification-configuration.notification-saved.message'\n        )\n      );\n\n      this.activeModalRef.close(approvalNotificationRecord);\n    });\n  }\n\n  update(): void {\n    this.approvalNotificationForm.markAsPristine();\n    const approvalNotificationRecord = this.transformFormControlData();\n\n    this.rxApprovalNotificationsService.updateApprovalNotification(approvalNotificationRecord).subscribe(() => {\n      this.rxNotificationService.addSuccessMessage(\n        this.translateService.instant(\n          'com.bmc.arsys.rx.client.approval.notification-configuration.notification-updated.message'\n        )\n      );\n\n      this.activeModalRef.close(approvalNotificationRecord);\n    });\n  }\n\n  closeModal(): void {\n    this.activeModalRef.dismiss(DismissReasons.CLOSE_BTN);\n  }\n\n  shouldUseTemplate(): boolean {\n    return this.approvalNotificationForm.get('notifyOn').value[0]?.id === 0;\n  }\n\n  showProcessDefinitionPicker(): boolean {\n    return this.approvalNotificationForm.get('notificationMethod').value[0]?.id === '5';\n  }\n\n  private isRequiredForEmail(): boolean {\n    return this.approvalNotificationForm.get('notificationMethod').value[0]?.id === '2';\n  }\n\n  onNotifyChange(event?: RxSelectionChangeEvent): void {\n    if (event.options[0].id !== 0) {\n      this.approvalNotificationForm.get('useTemplate').setValue(false);\n    }\n  }\n\n  isNotificationOptionInvalid(): boolean {\n    return this.approvalNotificationForm.get('notificationType').value === this.globalNotificationOptionValue.flows\n      ? !this.selectedFlows.length\n      : false;\n  }\n\n  definitionOptionFormatter(option: KeyValueObject): string {\n    return option.displayValue;\n  }\n\n  // Convert expression received from server to format supported by expression editor,\n  // e.g. $Assignee Primary$ -> '${Assignee Primary}'\n  private convertExpressionFromServerFormat(expression: string): string {\n    const fieldTokenServerFormatRegExp = new RegExp(\n      '(\\\\$' + RX_RECORD_DEFINITION.validDefinitionNameRegExpString + '\\\\$)',\n      'g'\n    );\n\n    return (\n      expression &&\n      expression.replace(fieldTokenServerFormatRegExp, function (match) {\n        const expressionEntry = match.replace(/\\$/g, '');\n\n        return expressionEntry ? \"'${\" + expressionEntry + \"}'\" : match;\n      })\n    );\n  }\n\n  // Convert expression to format expected by the server,\n  // e.g. '${Assignee Primary}' -> $Assignee Primary$\n  private convertExpressionToServerFormat(expression: string): string {\n    const fieldTokenExpressionEditorFormatRegExp = new RegExp(\n      \"('\\\\${\" + RX_RECORD_DEFINITION.validDefinitionNameRegExpString + \"}')\",\n      'g'\n    );\n\n    return (\n      expression &&\n      expression.replace(fieldTokenExpressionEditorFormatRegExp, function (match) {\n        return '$' + match.replace(/['${}]/g, '') + '$';\n      })\n    );\n  }\n}\n","<div class=\"modal-body\">\n  <form [formGroup]=\"approvalNotificationForm\">\n    <div class=\"row\">\n      <div class=\"col-12 col-md-6\">\n        <adapt-rx-select\n          class=\"d-block form-group\"\n          formControlName=\"primaryRecordName\"\n          [options]=\"recordDefinitions\"\n          rx-id=\"record-definition-name\"\n          [disabled]=\"isEditMode\"\n          label=\"{{ 'com.bmc.arsys.rx.client.approval.record-definition-field.label' | translate }}\"\n          [optionFormatter]=\"definitionOptionFormatter\"\n        >\n        </adapt-rx-select>\n      </div>\n\n      <div class=\"col-12 col-md-6\">\n        <adapt-rx-textfield\n          class=\"d-block form-group\"\n          rx-id=\"notification-name\"\n          label=\"{{\n            'com.bmc.arsys.rx.client.approval.notification-configuration.notification-name-field.label' | translate\n          }}\"\n          formControlName=\"notificationName\"\n        ></adapt-rx-textfield>\n      </div>\n    </div>\n\n    <div class=\"row\">\n      <div class=\"col-12 col-md-6 d-flex flex-column\">\n        <adapt-rx-select\n          class=\"d-block form-group\"\n          formControlName=\"notifyOn\"\n          [options]=\"notifyOnOptions\"\n          [optionFormatter]=\"optionFormatter\"\n          rx-id=\"notify-on\"\n          (onSelectionChange)=\"onNotifyChange($event)\"\n          label=\"{{ 'com.bmc.arsys.rx.client.approval.notification-configuration.notify-on-field.label' | translate }}\"\n        >\n        </adapt-rx-select>\n\n        <rx-expression-form-control\n          class=\"d-block form-group\"\n          [options]=\"expressionFormControlOptions\"\n          formControlName=\"additionalQualification\"\n          rx-id=\"additional-qualification\"\n          (events)=\"buildExpression('additionalQualification')\"\n          required=\"false\"\n        ></rx-expression-form-control>\n\n        <adapt-rx-radiobutton-group\n          class=\"d-block form-group\"\n          formControlName=\"notificationType\"\n          label=\"{{\n            'com.bmc.arsys.rx.client.approval.notification-configuration.notification-type-field.label' | translate\n          }}\"\n          [tooltip]=\"notificationTypeTooltip\"\n          rx-id=\"notification-type\"\n        >\n          <adapt-rx-radiobutton\n            *ngFor=\"let option of globalNotificationOptions; let index = index\"\n            [label]=\"option.label\"\n            [value]=\"option.value\"\n            [disabled]=\"isEditMode\"\n            class=\"radio-inline m-0\"\n            [ngClass]=\"{ 'mr-3': index === 0 }\"\n          ></adapt-rx-radiobutton>\n        </adapt-rx-radiobutton-group>\n\n        <div\n          class=\"d-flex flex-column h-100\"\n          *ngIf=\"approvalNotificationForm.get('notificationType').value === globalNotificationOptionValue.flows\"\n        >\n          <adapt-rx-control-label\n            label=\"{{\n              'com.bmc.arsys.rx.client.approval.notification-configuration.notification-type-field.types.flow.sub-label'\n                | translate\n            }}\"\n            [showRequiredLabel]=\"true\"\n          >\n          </adapt-rx-control-label>\n\n          <div class=\"card flex-fill\" [ngClass]=\"{ 'border-danger': isTreeTouched && isNotificationOptionInvalid() }\">\n            <div class=\"card-block\">\n              <adapt-empty-state\n                *ngIf=\"!availableFlows.length\"\n                [type]=\"'grid'\"\n                label=\"{{\n                  'com.bmc.arsys.rx.client.approval.notification-configuration.no-flows-available.message' | translate\n                }}\"\n              >\n              </adapt-empty-state>\n\n              <adapt-tree\n                [value]=\"availableFlows\"\n                selectionMode=\"checkbox\"\n                [(selection)]=\"selectedFlows\"\n                *ngIf=\"availableFlows.length\"\n                (selectionChange)=\"onSelectionChange()\"\n                [wrap]=\"treeWrap\"\n              >\n              </adapt-tree>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <div class=\"col-md-6\">\n        <adapt-rx-radiobutton-group\n          class=\"d-block form-group\"\n          formControlName=\"sendTo\"\n          label=\"{{ 'com.bmc.arsys.rx.client.approval.notification-configuration.send-to-field.label' | translate }}\"\n        >\n          <adapt-rx-radiobutton\n            *ngFor=\"let option of sendToOption; let index = index\"\n            [value]=\"option.id\"\n            [label]=\"option.name\"\n            class=\"radio-inline m-0\"\n            [ngClass]=\"{ 'mr-3': index === 0 }\"\n            rx-id=\"send-to-option\"\n            (checkedChange)=\"handleSendToOptionSelection()\"\n          ></adapt-rx-radiobutton>\n        </adapt-rx-radiobutton-group>\n\n        <adapt-rx-select\n          class=\"d-block form-group\"\n          label=\"{{\n            'com.bmc.arsys.rx.client.approval.notification-configuration.send-to.options.approver-selection' | translate\n          }}\"\n          *ngIf=\"approvalNotificationForm.get('sendTo').value === '1'\"\n          formControlName=\"approver\"\n          [options]=\"sendToOtherOptions\"\n          [optionFormatter]=\"optionFormatter\"\n          [tooltip]=\"approverSelectionTooltip\"\n          rx-id=\"approver\"\n        >\n        </adapt-rx-select>\n\n        <adapt-rx-select\n          class=\"d-block form-group\"\n          formControlName=\"notificationMethod\"\n          [options]=\"notificationMethodOptions\"\n          [optionFormatter]=\"optionFormatter\"\n          rx-id=\"notification-method\"\n          label=\"{{\n            'com.bmc.arsys.rx.client.approval.notification-configuration.notification-method-field.label' | translate\n          }}\"\n        >\n        </adapt-rx-select>\n\n        <adapt-rx-checkbox\n          *ngIf=\"shouldUseTemplate()\"\n          class=\"d-block form-group\"\n          formControlName=\"useTemplate\"\n          rx-id=\"use-template\"\n          label=\"{{\n            'com.bmc.arsys.rx.client.approval.notification-configuration.email-based-approval-field.label' | translate\n          }}\"\n          (ngModelChange)=\"handleTemplateDependentFieldSelection($event)\"\n        ></adapt-rx-checkbox>\n\n        <div *ngIf=\"approvalNotificationForm.get('useTemplate').value\">\n          <adapt-rx-select\n            class=\"d-block form-group\"\n            formControlName=\"outgoingEmailProfile\"\n            [options]=\"emailProfileOptions\"\n            [optionFormatter]=\"optionFormatter\"\n            rx-id=\"outgoing-email-profile\"\n            label=\"{{\n              'com.bmc.arsys.rx.client.approval.notification-configuration.email-outgoing-profile-field.label'\n                | translate\n            }}\"\n          >\n          </adapt-rx-select>\n\n          <adapt-rx-select\n            class=\"d-block form-group\"\n            formControlName=\"approvalTemplate\"\n            [options]=\"emailTemplateOptions\"\n            [optionFormatter]=\"optionFormatter\"\n            rx-id=\"approval-template\"\n            label=\"{{ 'com.bmc.arsys.rx.client.approval.notification-configuration.template-field.label' | translate }}\"\n          >\n          </adapt-rx-select>\n        </div>\n\n        <rx-expression-form-control\n          class=\"d-block form-group\"\n          *ngIf=\"approvalNotificationForm.get('notificationMethod').value[0]['id'] === '2'\"\n          [options]=\"subjectExpressionFormControlOptions\"\n          formControlName=\"subject\"\n          rx-id=\"subject\"\n          (events)=\"buildExpression('subject')\"\n          required=\"true\"\n        ></rx-expression-form-control>\n\n        <rx-expression-form-control\n          class=\"d-block form-group\"\n          *ngIf=\"\n            approvalNotificationForm.get('notificationMethod').value[0]['id'] === '2' &&\n            !approvalNotificationForm.get('useTemplate').value\n          \"\n          [options]=\"notificationMessageExpressionOptions\"\n          formControlName=\"message\"\n          rx-id=\"message\"\n          (events)=\"buildExpression('message')\"\n          required=\"true\"\n        ></rx-expression-form-control>\n\n        <rx-definition-picker\n          class=\"d-block form-group\"\n          *ngIf=\"showProcessDefinitionPicker()\"\n          [options]=\"processDefinitionPickerOptions\"\n          formControlName=\"rxProcessName\"\n          rx-id=\"definition-field\"\n          required=\"true\"\n        >\n        </rx-definition-picker>\n\n        <adapt-rx-switch\n          formControlName=\"status\"\n          rx-id=\"status\"\n          label=\"{{ 'com.bmc.arsys.rx.client.approval.notification-configuration.enabled-field.label' | translate }}\"\n          [isLabelBefore]=\"false\"\n        ></adapt-rx-switch>\n      </div>\n    </div>\n  </form>\n</div>\n\n<div class=\"modal-footer\">\n  <button\n    *ngIf=\"!isEditMode\"\n    adapt-button\n    btn-type=\"primary\"\n    type=\"button\"\n    rx-id=\"save-button\"\n    class=\"mr-2\"\n    (click)=\"save()\"\n    [disabled]=\"approvalNotificationForm.pristine || approvalNotificationForm.invalid || isNotificationOptionInvalid()\"\n  >\n    {{ 'com.bmc.arsys.rx.client.common.save.label' | translate }}\n  </button>\n\n  <button\n    *ngIf=\"isEditMode\"\n    adapt-button\n    btn-type=\"primary\"\n    type=\"button\"\n    class=\"mr-2\"\n    rx-id=\"save-button\"\n    (click)=\"update()\"\n    [disabled]=\"approvalNotificationForm.pristine || approvalNotificationForm.invalid || isNotificationOptionInvalid()\"\n  >\n    {{ 'com.bmc.arsys.rx.client.approval.update.button.label' | translate }}\n  </button>\n\n  <button adapt-button btn-type=\"secondary\" class=\"mr-2\" type=\"button\" rx-id=\"cancel-button\" (click)=\"closeModal()\">\n    {{ 'com.bmc.arsys.rx.client.common.cancel.label' | translate }}\n  </button>\n</div>\n","import { Component, OnInit, ViewChild } from '@angular/core';\nimport { TranslateService } from '@ngx-translate/core';\nimport { forkJoin, Observable, of } from 'rxjs';\nimport {\n  IRecordGridColumn,\n  IRecordGridConfig,\n  IRecordGridDataPageParams,\n  RecordGridComponent,\n  RowSelectionMode\n} from '@helix/platform/view/components';\nimport { IRowDataItem } from '@helix/platform/view/api';\nimport { RX_APPROVAL_NOTIFICATIONS } from './approval-notifications.constant';\nimport { IRecordDefinition, RX_RECORD_DEFINITION, RxRecordInstanceDataPageService } from '@helix/platform/record/api';\nimport {\n  IDataPageResult,\n  RX_APPLICATION,\n  RxDefinitionNameService,\n  RxGlobalCacheService,\n  RxNotificationService\n} from '@helix/platform/shared/api';\nimport { RxApprovalNotificationsDataPageService } from './approval-notifications-data-page.service';\nimport { RX_MODAL, RxModalService } from '@helix/platform/ui-kit';\nimport { filter, find, flow, forEach, groupBy, map as _map, map, noop, values } from 'lodash';\nimport { RxApprovalNotificationsService } from './approval-notifications.service';\nimport { AdaptModalService, RxSelectOptionsGroup } from '@bmc-ux/adapt-angular';\nimport { ApprovalNotificationEditorComponent } from './approval-notification-editor/approval-notification-editor.component';\nimport { IApprovalNotification, IApprovalNotificationData, IApprovalTemplate } from './approval-notifications.types';\nimport { RX_APPROVAL_CONFIGURATION } from '../approval-configuration/approval-configuration.constant';\nimport { BaseViewComponent } from '@helix/platform/view/runtime';\n\n@Component({\n  selector: 'rx-admin-approval-notifications',\n  templateUrl: './approval-notifications.component.html'\n})\nexport class ApprovalNotificationsComponent extends BaseViewComponent implements OnInit {\n  gridConfig: Observable<IRecordGridConfig>;\n  editMode: boolean;\n\n  @ViewChild('recordGrid', { static: true })\n  recordGridComponent: RecordGridComponent;\n\n  constructor(\n    private rxModalService: RxModalService,\n    private adaptModalService: AdaptModalService,\n    private translateService: TranslateService,\n    private rxGlobalCacheService: RxGlobalCacheService,\n    private rxDefinitionNameService: RxDefinitionNameService,\n    private rxApprovalNotificationsDataPageService: RxApprovalNotificationsDataPageService,\n    private rxApprovalNotificationsService: RxApprovalNotificationsService,\n    private rxNotificationService: RxNotificationService,\n    private rxRecordInstanceDataPageService: RxRecordInstanceDataPageService\n  ) {\n    super();\n  }\n\n  ngOnInit(): void {\n    this.editMode = false;\n\n    this.gridConfig = of({\n      actionButtons: [\n        {\n          label: this.translateService.instant('com.bmc.arsys.rx.client.common.delete.label'),\n          style: 'tertiary',\n          icon: 'trash',\n          actions: [\n            {\n              name: () => {\n                this.deleteNotification();\n              }\n            }\n          ]\n        }\n      ],\n      getData: (queryParams: IRecordGridDataPageParams) => this.getData(queryParams),\n      getRecordDefinition: () => of(this.getRecordDefinition()),\n      columns: this.getColumns(),\n      styles: 'flex-fill',\n      enableRowSelection: RowSelectionMode.Multiple\n    });\n  }\n\n  createApprovalNotification(): void {\n    this.editMode = false;\n\n    this.initializeApprovalNotificationForm({\n      notificationName: '',\n      primaryRecordName: ''\n    });\n  }\n\n  initializeApprovalNotificationForm(approvalNotification: IApprovalNotification): void {\n    forkJoin([\n      this.rxRecordInstanceDataPageService.post({\n        params: {\n          recorddefinition: RX_APPROVAL_CONFIGURATION.selfApproval.apForm.name,\n          propertySelection: RX_APPROVAL_CONFIGURATION.selfApproval.apForm.fields.formName,\n          queryExpression: `('${RX_APPROVAL_CONFIGURATION.selfApproval.apForm.fields.field7}'!=$NULL$ OR '${RX_APPROVAL_CONFIGURATION.selfApproval.apForm.fields.field7}'!=\"\")`\n        }\n      }),\n      this.rxRecordInstanceDataPageService.post({\n        params: {\n          recorddefinition: 'AR System Administration: TextTemplate',\n          propertySelection: values(RX_APPROVAL_NOTIFICATIONS.arSystemAdministrationTextTemplate.fields).join()\n        }\n      }),\n      this.rxGlobalCacheService.getBundleDescriptors()\n    ]).subscribe(([apFormInstances, emailTemplateInstances, bundleDescriptors]) => {\n      const globalLabel = this.translateService.instant('com.bmc.arsys.rx.client.common.global-items.label');\n\n      const recordDefinitions: RxSelectOptionsGroup[] = flow(\n        (instanceData) =>\n          map(instanceData, (recordInstance) => {\n            const bundleDescriptor = find(bundleDescriptors, {\n              id: this.rxDefinitionNameService.getBundleId(\n                recordInstance[RX_APPROVAL_CONFIGURATION.selfApproval.apForm.fields.formName]\n              )\n            });\n\n            return {\n              value: recordInstance[RX_APPROVAL_CONFIGURATION.selfApproval.apForm.fields.formName],\n              displayValue: this.rxDefinitionNameService.getDisplayName(\n                recordInstance[RX_APPROVAL_CONFIGURATION.selfApproval.apForm.fields.formName]\n              ),\n              applicationName: bundleDescriptor?.friendlyName || bundleDescriptor?.id || globalLabel\n            };\n          }),\n        (definitions) => groupBy(definitions, 'applicationName'),\n        (optionsByApplicationName) =>\n          map(optionsByApplicationName, (options, applicationName) => ({\n            name: applicationName,\n            children: _map(options, (option) => {\n              return {\n                value: option.value,\n                displayValue: option.displayValue\n              };\n            })\n          }))\n      )(apFormInstances.data);\n\n      const templateList: IApprovalTemplate[] = [];\n\n      if (emailTemplateInstances.data.length) {\n        const nonApprovalTemplates = filter(emailTemplateInstances.data, function (template) {\n          return (\n            template[RX_APPROVAL_NOTIFICATIONS.arSystemAdministrationTextTemplate.fields.applicationBundleId] !==\n            RX_APPLICATION.approvalBundleId\n          );\n        });\n\n        forEach(nonApprovalTemplates, function (template) {\n          templateList.push({\n            name: template[RX_APPROVAL_NOTIFICATIONS.arSystemAdministrationTextTemplate.fields.name],\n            guid: template[RX_RECORD_DEFINITION.coreFieldIds.id]\n          });\n        });\n      }\n\n      const title = this.editMode\n        ? this.translateService.instant(\n            'com.bmc.arsys.rx.client.approval.notification-configuration.edit-approval-notification.title'\n          )\n        : this.translateService.instant(\n            'com.bmc.arsys.rx.client.approval.notification-configuration.new-approval-notification.title'\n          );\n\n      this.openModal(title, {\n        approvalNotification: this.editMode\n          ? approvalNotification\n          : {\n              notificationName: '',\n              primaryRecordName: ''\n            },\n        recordDefinitions,\n        templateList: templateList\n      });\n    });\n  }\n\n  private openModal(title: string, data: IApprovalNotificationData): void {\n    this.rxModalService\n      .openModal({\n        title: title,\n        content: ApprovalNotificationEditorComponent,\n        data: {\n          ...data\n        }\n      })\n      .then((result) => {\n        if (result) {\n          this.recordGridComponent.api.refresh().subscribe();\n          this.editMode = false;\n        }\n      })\n      .catch(noop);\n  }\n\n  deleteNotification(): void {\n    this.rxModalService\n      .confirm({\n        title: this.translateService.instant('com.bmc.arsys.rx.client.common.warning.label'),\n        modalStyle: RX_MODAL.modalStyles.warning,\n        message: this.translateService.instant(\n          'com.bmc.arsys.rx.client.approval.notification-configuration.delete-selected-notification-confirmation.message'\n        )\n      })\n      .then((result: boolean) => {\n        if (result) {\n          const selectedApprovalNotifications = this.recordGridComponent.api.getSelectedRows();\n\n          const selectedApprovalNotificationsIds = map(\n            selectedApprovalNotifications,\n            RX_RECORD_DEFINITION.coreFieldIds.id\n          );\n\n          this.rxApprovalNotificationsService\n            .deleteApprovalNotifications(selectedApprovalNotificationsIds)\n            .subscribe(() => {\n              this.rxNotificationService.addSuccessMessage(\n                this.translateService.instant(\n                  'com.bmc.arsys.rx.client.approval.notification-configuration.notification-deleted.message'\n                )\n              );\n\n              this.recordGridComponent.api.refresh().subscribe();\n            });\n        }\n      });\n  }\n\n  private getData(queryParams: IRecordGridDataPageParams): Observable<IDataPageResult> {\n    const propertySelection = <[]>Object.values(RX_APPROVAL_NOTIFICATIONS.approvalNotificationForm.fields);\n    const additionalQueryExpression = `('${RX_APPROVAL_NOTIFICATIONS.approvalNotificationForm.fields.applicationBundleId}' != $NULL$)`;\n\n    const queryExpression = queryParams.queryExpression\n      ? '(' +\n        additionalQueryExpression.substring(1, additionalQueryExpression.length - 1) +\n        ' AND ' +\n        queryParams.queryExpression.substring(1, queryParams.queryExpression.length - 1) +\n        ')'\n      : additionalQueryExpression;\n\n    queryParams = {\n      ...queryParams,\n      propertySelection: propertySelection,\n      queryExpression: queryExpression\n    };\n\n    return this.rxApprovalNotificationsDataPageService.get({ params: queryParams });\n  }\n\n  private getRecordDefinition(): IRecordDefinition {\n    return {\n      fieldDefinitions: [\n        {\n          id: RX_APPROVAL_NOTIFICATIONS.approvalNotificationForm.fields.notificationName,\n          resourceType: RX_RECORD_DEFINITION.resourceTypes.character\n        },\n        {\n          id: RX_RECORD_DEFINITION.coreFieldIds.id,\n          resourceType: RX_RECORD_DEFINITION.resourceTypes.character\n        },\n        {\n          id: RX_APPROVAL_NOTIFICATIONS.approvalNotificationForm.fields.notifyOn,\n          resourceType: RX_RECORD_DEFINITION.resourceTypes.selection,\n          optionNamesById: {\n            0: this.translateService.instant(\n              'com.bmc.arsys.rx.client.approval.notification-configuration.notify-on.options.new-signature.name'\n            ),\n            1: this.translateService.instant(\n              'com.bmc.arsys.rx.client.approval.notification-configuration.notify-on.options.approve.name'\n            ),\n            2: this.translateService.instant(\n              'com.bmc.arsys.rx.client.approval.notification-configuration.notify-on.options.reject.name'\n            ),\n            9: this.translateService.instant(\n              'com.bmc.arsys.rx.client.approval.notification-configuration.notify-on.options.reassign.name'\n            ),\n            10: this.translateService.instant(\n              'com.bmc.arsys.rx.client.approval.notification-configuration.notify-on.options.error.name'\n            ),\n            11: this.translateService.instant(\n              'com.bmc.arsys.rx.client.approval.notification-configuration.notify-on.options.cancel.name'\n            ),\n            12: this.translateService.instant(\n              'com.bmc.arsys.rx.client.approval.notification-configuration.notify-on.options.more-info-provided.name'\n            ),\n            16: this.translateService.instant(\n              'com.bmc.arsys.rx.client.approval.notification-configuration.notify-on.options.hold.name'\n            ),\n            17: this.translateService.instant(\n              'com.bmc.arsys.rx.client.approval.notification-configuration.notify-on.options.more-info.name'\n            )\n          }\n        },\n        {\n          id: RX_APPROVAL_NOTIFICATIONS.approvalNotificationForm.fields.method,\n          resourceType: RX_RECORD_DEFINITION.resourceTypes.selection,\n          optionNamesById: {\n            2: this.translateService.instant(\n              'com.bmc.arsys.rx.client.approval.notification-configuration.notification-method.types.email.name'\n            ),\n            5: this.translateService.instant(\n              'com.bmc.arsys.rx.client.approval.notification-configuration.notification-method.types.process.name'\n            )\n          }\n        },\n        {\n          id: RX_APPROVAL_NOTIFICATIONS.approvalNotificationForm.fields.status,\n          resourceType: RX_RECORD_DEFINITION.resourceTypes.selection,\n          optionNamesById: {\n            0: this.translateService.instant(\n              'com.bmc.arsys.rx.client.approval.notification-configuration.grid.column.status.options.active.value'\n            ),\n            1: this.translateService.instant(\n              'com.bmc.arsys.rx.client.approval.notification-configuration.grid.column.status.options.inactive.value'\n            )\n          }\n        },\n        {\n          id: RX_APPROVAL_NOTIFICATIONS.approvalNotificationForm.fields.applicationName,\n          resourceType: RX_RECORD_DEFINITION.resourceTypes.character\n        },\n        {\n          id: RX_APPROVAL_NOTIFICATIONS.approvalNotificationForm.fields.globalNotification,\n          resourceType: RX_RECORD_DEFINITION.resourceTypes.selection,\n          optionNamesById: {\n            0: this.translateService.instant('com.bmc.arsys.rx.client.common.no.label'),\n            1: this.translateService.instant('com.bmc.arsys.rx.client.common.yes.label')\n          }\n        }\n      ]\n    };\n  }\n\n  private getColumns(): IRecordGridColumn[] {\n    return [\n      {\n        index: 0,\n        fieldId: String(RX_APPROVAL_NOTIFICATIONS.approvalNotificationForm.fields.notificationName),\n        title: this.translateService.instant(\n          'com.bmc.arsys.rx.client.approval.notification-configuration.grid.column.notification-name.title'\n        ),\n        clickable: true,\n        actions: [\n          {\n            name: (previousAction: any, clickedColumnRow: IRowDataItem) =>\n              this.editApprovalNotification(clickedColumnRow)\n          }\n        ]\n      },\n      {\n        index: 1,\n        fieldId: String(RX_APPROVAL_NOTIFICATIONS.approvalNotificationForm.fields.applicationName),\n        title: this.translateService.instant(\n          'com.bmc.arsys.rx.client.approval.notification-configuration.grid.column.record-definition.title'\n        ),\n        filterable: false\n      },\n      {\n        index: 2,\n        fieldId: String(RX_RECORD_DEFINITION.coreFieldIds.id),\n        title: this.translateService.instant(\n          'com.bmc.arsys.rx.client.approval.notification-configuration.grid.column.id.title'\n        ),\n        visible: false\n      },\n      {\n        index: 3,\n        fieldId: String(RX_APPROVAL_NOTIFICATIONS.approvalNotificationForm.fields.notifyOn),\n        title: this.translateService.instant(\n          'com.bmc.arsys.rx.client.approval.notification-configuration.grid.column.notify-on.title'\n        )\n      },\n      {\n        index: 4,\n        fieldId: String(RX_APPROVAL_NOTIFICATIONS.approvalNotificationForm.fields.method),\n        title: this.translateService.instant(\n          'com.bmc.arsys.rx.client.approval.notification-configuration.grid.column.notification-method.title'\n        )\n      },\n      {\n        index: 5,\n        fieldId: String(RX_RECORD_DEFINITION.coreFieldIds.status),\n        title: this.translateService.instant(\n          'com.bmc.arsys.rx.client.approval.notification-configuration.grid.column.status.title'\n        )\n      },\n      {\n        index: 6,\n        fieldId: String(RX_APPROVAL_NOTIFICATIONS.approvalNotificationForm.fields.globalNotification),\n        title: this.translateService.instant(\n          'com.bmc.arsys.rx.client.approval.notification-configuration.grid.column.global-notification.title'\n        )\n      }\n    ];\n  }\n\n  editApprovalNotification(approvalNotificationRow: IRowDataItem): void {\n    this.editMode = true;\n\n    this.rxApprovalNotificationsService\n      .getApprovalNotification(approvalNotificationRow[RX_RECORD_DEFINITION.coreFieldIds.id])\n      .subscribe((approvalNotification: IApprovalNotification) => {\n        this.initializeApprovalNotificationForm(approvalNotification);\n      });\n  }\n}\n","<rx-admin-settings header=\"{{ 'com.bmc.arsys.rx.client.approval.notification-configuration.title' | translate }}\">\n  <button\n    type=\"button\"\n    adapt-button\n    btn-type=\"tertiary\"\n    class=\"d-icon-plus_circle align-self-start\"\n    rx-id=\"new-button\"\n    (click)=\"createApprovalNotification()\"\n  >\n    {{ 'com.bmc.arsys.rx.client.common.new.label' | translate }}\n  </button>\n\n  <rx-record-grid rx-id=\"approval-notifications-grid\" #recordGrid [config]=\"gridConfig\"></rx-record-grid>\n</rx-admin-settings>\n","import { ComponentFactoryResolver, NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { RxViewComponentRegistryService } from '@helix/platform/view/api';\nimport { RX_APPLICATION } from '@helix/platform/shared/api';\nimport { ApprovalNotificationsComponent } from './approval-notifications.component';\nimport {\n  AdminSettingsModule,\n  ExpressionFormControlModule,\n  RxDefinitionPickerModule\n} from '@helix/platform/shared/components';\nimport { RecordGridModule } from '@helix/platform/view/components';\nimport { TranslateModule } from '@ngx-translate/core';\nimport { ApprovalNotificationEditorComponent } from './approval-notification-editor/approval-notification-editor.component';\nimport { ReactiveFormsModule } from '@angular/forms';\nimport {\n  AdaptAccordionModule,\n  AdaptButtonModule,\n  AdaptEmptyStateModule,\n  AdaptRxCheckboxModule,\n  AdaptRxLabelModule,\n  AdaptRxRadiobuttonModule,\n  AdaptRxSelectModule,\n  AdaptRxSwitchModule,\n  AdaptRxTextfieldModule,\n  AdaptTreeModule\n} from '@bmc-ux/adapt-angular';\n\n@NgModule({\n  declarations: [ApprovalNotificationsComponent, ApprovalNotificationEditorComponent],\n  imports: [\n    AdaptEmptyStateModule,\n    AdminSettingsModule,\n    AdaptRxSelectModule,\n    AdaptRxTextfieldModule,\n    AdaptRxSwitchModule,\n    AdaptRxCheckboxModule,\n    AdaptRxRadiobuttonModule,\n    AdaptButtonModule,\n    AdaptAccordionModule,\n    CommonModule,\n    ExpressionFormControlModule,\n    RecordGridModule,\n    ReactiveFormsModule,\n    RxDefinitionPickerModule,\n    TranslateModule,\n    AdaptRxLabelModule,\n    AdaptTreeModule\n  ],\n  entryComponents: [ApprovalNotificationsComponent]\n})\nexport class ApprovalNotificationsRegistrationModule {\n  constructor(\n    private componentFactoryResolver: ComponentFactoryResolver,\n    private rxViewComponentRegistryService: RxViewComponentRegistryService\n  ) {\n    rxViewComponentRegistryService.register({\n      type: 'rx-admin-approval-notifications',\n      componentFactory: this.componentFactoryResolver.resolveComponentFactory(ApprovalNotificationsComponent),\n      name: 'Approval notifications',\n      isPageComponent: true,\n      availableInBundles: [RX_APPLICATION.settingsBundleId]\n    });\n  }\n}\n","import { Component, OnInit } from '@angular/core';\nimport { FormBuilder, FormGroup } from '@angular/forms';\nimport { Subscription } from 'rxjs';\nimport { RxCurrentUserService, RxNotificationService, RxSystemConfigurationService } from '@helix/platform/shared/api';\nimport { BaseViewComponent } from '@helix/platform/view/runtime';\nimport { IBmcServiceCloudAccountConfig } from './bmc-service-cloud-account.types';\nimport { TranslateService } from '@ngx-translate/core';\n\n@Component({\n  selector: 'rx-admin-bmc-service-cloud-account',\n  templateUrl: 'bmc-service-cloud-account.component.html',\n  styleUrls: ['./bmc-service-cloud-account.component.scss']\n})\nexport class BmcServiceCloudAccountAdminComponent extends BaseViewComponent implements OnInit {\n  bmcServiceCloudAccountConfigForm: FormGroup;\n  isAdministrator: boolean = this.rxCurrentUserService.isAdministrator();\n  busy: Subscription;\n\n  private settingName = 'errorReportingServiceSaasConfiguration';\n\n  constructor(\n    private formBuilder: FormBuilder,\n    private rxCurrentUserService: RxCurrentUserService,\n    private rxNotificationService: RxNotificationService,\n    private rxSystemConfigurationService: RxSystemConfigurationService,\n    private translateService: TranslateService\n  ) {\n    super();\n  }\n\n  private getConfiguration(): void {\n    this.busy = this.rxSystemConfigurationService.getConfiguration(this.settingName).subscribe((data) => {\n      this.bmcServiceCloudAccountConfigForm.patchValue(JSON.parse(data.value as string));\n    });\n  }\n\n  saveConfig(): void {\n    const formValue: IBmcServiceCloudAccountConfig = this.bmcServiceCloudAccountConfigForm.getRawValue();\n\n    this.rxSystemConfigurationService.setConfiguration(this.settingName, formValue).subscribe(() => {\n      this.rxNotificationService.addSuccessMessage(\n        this.translateService.instant('com.bmc.arsys.rx.client.admin.bmc-service-cloud-account.save-successful.message')\n      );\n      this.bmcServiceCloudAccountConfigForm.markAsPristine();\n    });\n  }\n\n  ngOnInit(): void {\n    this.notifyPropertyChanged('api', {\n      isDirty: () => this.bmcServiceCloudAccountConfigForm?.dirty\n    });\n\n    if (this.isAdministrator) {\n      this.bmcServiceCloudAccountConfigForm = this.formBuilder.group({\n        clientId: '',\n        clientSecret: '',\n        dataCenterUrl: '',\n        authorizationUrl: '',\n        serviceCloudInstanceUrl: '',\n        supportCentralUrl: ''\n      });\n\n      this.getConfiguration();\n    }\n  }\n}\n","<rx-admin-settings\n  header=\"{{ 'com.bmc.arsys.rx.client.admin.bmc-service-cloud-account.header.title' | translate }}\"\n  [busy]=\"busy\"\n>\n  <form [formGroup]=\"bmcServiceCloudAccountConfigForm\">\n    <adapt-rx-textfield\n      rx-id=\"client-id\"\n      label=\"{{ 'com.bmc.arsys.rx.client.admin.bmc-service-cloud-account.client-id.label' | translate }}\"\n      formControlName=\"clientId\"\n      required=\"true\"\n      class=\"d-block form-group\"\n    >\n    </adapt-rx-textfield>\n\n    <adapt-rx-textfield\n      rx-id=\"client-secret\"\n      label=\"{{ 'com.bmc.arsys.rx.client.admin.bmc-service-cloud-account.client-secret.label' | translate }}\"\n      formControlName=\"clientSecret\"\n      required=\"true\"\n      [isPassword]=\"true\"\n      class=\"d-block form-group\"\n    >\n    </adapt-rx-textfield>\n\n    <adapt-rx-textfield\n      rx-id=\"data-center-url\"\n      label=\"{{ 'com.bmc.arsys.rx.client.admin.bmc-service-cloud-account.data-center-url.label' | translate }}\"\n      formControlName=\"dataCenterUrl\"\n      required=\"true\"\n      class=\"d-block form-group\"\n    >\n    </adapt-rx-textfield>\n\n    <adapt-rx-textfield\n      rx-id=\"authorization-url\"\n      label=\"{{ 'com.bmc.arsys.rx.client.admin.bmc-service-cloud-account.authorization-url.label' | translate }}\"\n      formControlName=\"authorizationUrl\"\n      required=\"true\"\n      class=\"d-block form-group\"\n    >\n    </adapt-rx-textfield>\n\n    <adapt-rx-textfield\n      rx-id=\"service-cloud-instance-url\"\n      label=\"{{\n        'com.bmc.arsys.rx.client.admin.bmc-service-cloud-account.service-cloud-instance-url.label' | translate\n      }}\"\n      formControlName=\"serviceCloudInstanceUrl\"\n      required=\"true\"\n      class=\"d-block form-group\"\n    >\n    </adapt-rx-textfield>\n\n    <adapt-rx-textfield\n      rx-id=\"support-central-url\"\n      label=\"{{ 'com.bmc.arsys.rx.client.admin.bmc-service-cloud-account.support-central-url.label' | translate }}\"\n      formControlName=\"supportCentralUrl\"\n      required=\"true\"\n      class=\"d-block form-group\"\n    >\n    </adapt-rx-textfield>\n\n    <button\n      adapt-button\n      type=\"button\"\n      rx-id=\"save-button\"\n      btn-type=\"primary\"\n      class=\"mt-4\"\n      [disabled]=\"bmcServiceCloudAccountConfigForm.pristine || bmcServiceCloudAccountConfigForm.invalid\"\n      (click)=\"saveConfig()\"\n    >\n      {{ 'com.bmc.arsys.rx.client.common.save.label' | translate }}\n    </button>\n  </form>\n</rx-admin-settings>\n","import { ComponentFactoryResolver, NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { ReactiveFormsModule } from '@angular/forms';\nimport {\n  AdaptAccordionModule,\n  AdaptAlertModule,\n  AdaptButtonModule,\n  AdaptIconModule,\n  AdaptRxTextfieldModule\n} from '@bmc-ux/adapt-angular';\nimport { RX_APPLICATION } from '@helix/platform/shared/api';\nimport { RxViewComponentRegistryService } from '@helix/platform/view/api';\nimport { AdminSettingsModule } from '@helix/platform/shared/components';\nimport { BmcServiceCloudAccountAdminComponent } from './bmc-service-cloud-account.component';\nimport { TranslateModule } from '@ngx-translate/core';\n\n@NgModule({\n  imports: [\n    AdaptAccordionModule,\n    AdaptAlertModule,\n    AdaptButtonModule,\n    AdaptIconModule,\n    AdaptRxTextfieldModule,\n    AdminSettingsModule,\n    CommonModule,\n    ReactiveFormsModule,\n    TranslateModule\n  ],\n  declarations: [BmcServiceCloudAccountAdminComponent],\n  entryComponents: [BmcServiceCloudAccountAdminComponent]\n})\nexport class BmcServiceCloudAccountRegistrationModule {\n  constructor(\n    private componentFactoryResolver: ComponentFactoryResolver,\n    private rxViewComponentRegistryService: RxViewComponentRegistryService\n  ) {\n    rxViewComponentRegistryService.register({\n      type: 'rx-admin-bmc-service-cloud-account',\n      componentFactory: this.componentFactoryResolver.resolveComponentFactory(BmcServiceCloudAccountAdminComponent),\n      name: 'BMC Service Cloud account',\n      isPageComponent: true,\n      availableInBundles: [RX_APPLICATION.settingsBundleId]\n    });\n  }\n}\n","import { Component, OnInit, TemplateRef, ViewChild } from '@angular/core';\nimport { NgModel } from '@angular/forms';\nimport { ColumnConfig, DataCellTemplateParams } from '@bmc-ux/adapt-table';\nimport { RX_CHATBOTS, RxChatbotDefinitionService } from '@helix/platform/chatbot/api';\nimport { RX_RECORD_DEFINITION } from '@helix/platform/record/api';\nimport {\n  IAdminComponentSetting,\n  IAdminComponentSettings,\n  RX_APPLICATION,\n  RxAdminSettingsService,\n  RxCurrentUserService,\n  RxNotificationService\n} from '@helix/platform/shared/api';\nimport { RenameDefinitionModalComponent } from '@helix/platform/shared/components';\nimport { RX_MODAL, RxModalService } from '@helix/platform/ui-kit';\nimport { IRecordGridConfig, RecordGridComponent, RowSelectionMode } from '@helix/platform/view/components';\nimport { BaseViewComponent } from '@helix/platform/view/runtime';\nimport { TranslateService } from '@ngx-translate/core';\nimport { cloneDeep, find, head, includes, map, noop, toString } from 'lodash';\nimport { Observable, of, Subscription } from 'rxjs';\n\n@Component({\n  selector: 'rx-admin-chatbots',\n  templateUrl: './chatbots.component.html'\n})\nexport class ChatbotsAdminComponent extends BaseViewComponent implements OnInit {\n  @ViewChild('chatbotConfigurationsRecordGrid', { static: true })\n  chatbotConfigurationsRecordGrid: RecordGridComponent;\n\n  @ViewChild('nameColumnTemplate', { static: true })\n  nameColumnTemplate: TemplateRef<DataCellTemplateParams>;\n\n  @ViewChild('displayChatbotsDropdownSwitch', { read: NgModel, static: false })\n  displayChatbotsDropdownSwitch: NgModel;\n\n  busy: Subscription;\n  recordGridConfig: Observable<IRecordGridConfig>;\n  private componentSettings: IAdminComponentSetting[];\n\n  sections = cloneDeep(RX_CHATBOTS.sections);\n  isAdministrator: boolean = this.rxCurrentUserService.isAdministrator();\n\n  constructor(\n    private rxAdminSettingsService: RxAdminSettingsService,\n    private rxChatbotDefinitionService: RxChatbotDefinitionService,\n    private rxCurrentUserService: RxCurrentUserService,\n    private rxModalService: RxModalService,\n    private rxNotificationService: RxNotificationService,\n    private translateService: TranslateService\n  ) {\n    super();\n  }\n\n  ngOnInit() {\n    this.notifyPropertyChanged('api', {\n      isDirty: () => this.displayChatbotsDropdownSwitch.dirty\n    });\n\n    if (this.isAdministrator) {\n      this.busy = this.rxAdminSettingsService\n        .getComponentSettings(RX_CHATBOTS.componentSettings.componentName, {\n          'default-bundle-scope': RX_APPLICATION.settingsBundleId\n        })\n        .subscribe((componentSettings: IAdminComponentSettings) => {\n          this.componentSettings = componentSettings.values;\n\n          const componentSetting = find(this.componentSettings, {\n            settingName: RX_CHATBOTS.componentSettings.settingNames.displayChatbotsDropdown\n          });\n\n          this.sections.globalChatbotSettings.displayChatbotsDropdown = JSON.parse(\n            componentSetting.settingValue as string\n          );\n        });\n    }\n\n    this.recordGridConfig = of({\n      enableFiltering: true,\n      recordDefinitionName: RX_CHATBOTS.chatbotSettings.recordDefinitionName,\n      enableRowSelection: RowSelectionMode.Multiple,\n\n      columns: [\n        {\n          index: 0,\n          fieldId: String(RX_CHATBOTS.chatbotSettings.recordFieldIds.name),\n          title: this.translateService.instant('com.bmc.arsys.rx.client.admin.chatbots.chatbot.title'),\n          cellTemplate: this.nameColumnTemplate\n        },\n        {\n          index: 1,\n          fieldId: String(RX_RECORD_DEFINITION.coreFieldIds.description),\n          title: this.translateService.instant('com.bmc.arsys.rx.client.admin.chatbots.description.title')\n        },\n        {\n          index: 2,\n          fieldId: String(RX_CHATBOTS.chatbotSettings.recordFieldIds.bundleId),\n          title: this.translateService.instant('com.bmc.arsys.rx.client.admin.chatbots.application-library-id.title')\n        },\n        {\n          index: 3,\n          fieldId: String(RX_RECORD_DEFINITION.coreFieldIds.id),\n          title: this.translateService.instant('com.bmc.arsys.rx.client.admin.chatbots.chatbot-id.title')\n        }\n      ],\n\n      actionButtons: [\n        {\n          label: 'Rename',\n          style: 'tertiary',\n          icon: 'pencil',\n\n          disabled: () => {\n            return !this.isAdministrator || this.chatbotConfigurationsRecordGrid.api.getSelectedRows().length !== 1;\n          },\n\n          actions: [\n            {\n              name: () => {\n                const selectedChatbot = head(this.chatbotConfigurationsRecordGrid.api.getSelectedRows());\n\n                this.rxModalService\n                  .openModal({\n                    title: this.translateService.instant('com.bmc.arsys.rx.client.admin.chatbots.rename-chatbot.title'),\n                    size: 'sm',\n                    content: RenameDefinitionModalComponent,\n                    data: {\n                      definitionName: selectedChatbot[RX_CHATBOTS.chatbotSettings.recordFieldIds.name],\n                      infoText: this.translateService.instant(\n                        'com.bmc.arsys.rx.client.admin.chatbots.name-uniqueness-validation.message'\n                      ),\n                      fieldLabel: this.translateService.instant('com.bmc.arsys.rx.client.admin.chatbots.name.label'),\n                      validationErrorText: this.translateService.instant(\n                        'com.bmc.arsys.rx.client.admin.chatbots.name-validation.message'\n                      ),\n                      definitionType: this.translateService.instant(\n                        'com.bmc.arsys.rx.client.admin.chatbots.chatbot.title'\n                      ),\n                      definitionNames: this.chatbotConfigurationsRecordGrid.adaptTableConfig.data\n                        .filter(\n                          (chatbot) =>\n                            chatbot[RX_CHATBOTS.chatbotSettings.recordFieldIds.bundleId] ===\n                            selectedChatbot[RX_CHATBOTS.chatbotSettings.recordFieldIds.bundleId]\n                        )\n                        .map((chatbot) => chatbot[RX_CHATBOTS.chatbotSettings.recordFieldIds.name])\n                    }\n                  })\n                  .then((definitionName: string) => {\n                    this.rxChatbotDefinitionService\n                      .rename(selectedChatbot[RX_RECORD_DEFINITION.coreFieldIds.id], definitionName)\n                      .subscribe(() => {\n                        this.refreshChatbotGrid();\n                      });\n                  })\n                  .catch(noop);\n              }\n            }\n          ]\n        },\n        {\n          label: this.translateService.instant('com.bmc.arsys.rx.client.common.delete.label'),\n          style: 'tertiary',\n          icon: 'trash',\n\n          disabled: () => {\n            return !this.isAdministrator || this.chatbotConfigurationsRecordGrid.api.getSelectedRows().length === 0;\n          },\n\n          actions: [\n            {\n              name: () => {\n                let confirmationMessage = this.translateService.instant(\n                  'com.bmc.arsys.rx.client.admin.chatbots.delete-confirmation.message'\n                );\n\n                const selectedChatbots = this.chatbotConfigurationsRecordGrid.api.getSelectedRows();\n                const selectedChatbotIds = map(selectedChatbots, RX_RECORD_DEFINITION.coreFieldIds.id);\n\n                if (includes(selectedChatbotIds, RX_CHATBOTS.chatbotSettings.defaultBotId)) {\n                  const defaultChatbot = find(selectedChatbots, [\n                    RX_RECORD_DEFINITION.coreFieldIds.id,\n                    RX_CHATBOTS.chatbotSettings.defaultBotId\n                  ]);\n\n                  confirmationMessage = this.translateService.instant(\n                    'com.bmc.arsys.rx.client.admin.chatbots.configurations-delete-confirmation.message',\n                    { defaultChatbotName: defaultChatbot[RX_CHATBOTS.chatbotSettings.recordFieldIds.name] }\n                  );\n                }\n\n                this.rxModalService\n                  .confirm({\n                    title: this.translateService.instant('com.bmc.arsys.rx.client.common.warning.label'),\n                    modalStyle: RX_MODAL.modalStyles.warning,\n                    message: confirmationMessage\n                  })\n                  .then((result: boolean) => {\n                    if (result) {\n                      this.rxChatbotDefinitionService.delete(selectedChatbotIds).subscribe(() => {\n                        this.rxNotificationService.addSuccessMessage(\n                          this.translateService.instant('com.bmc.arsys.rx.client.admin.chatbots.delete-success.message')\n                        );\n\n                        this.refreshChatbotGrid();\n                      });\n                    }\n                  });\n              }\n            }\n          ]\n        }\n      ]\n    });\n  }\n\n  getCellValue(dataItem: string[], column: ColumnConfig): string {\n    return dataItem[column.field];\n  }\n\n  onSaveClick(): void {\n    const componentSetting: IAdminComponentSetting = find(this.componentSettings, [\n      'settingName',\n      RX_CHATBOTS.componentSettings.settingNames.displayChatbotsDropdown\n    ]);\n\n    componentSetting.settingValue = toString(this.sections.globalChatbotSettings.displayChatbotsDropdown);\n\n    this.rxAdminSettingsService\n      .updateComponentSettings(\n        `${RX_CHATBOTS.componentSettings.componentName}/${head(this.componentSettings).ownerKeyValue1}`,\n        this.componentSettings\n      )\n      .subscribe(() => {\n        this.rxNotificationService.addSuccessMessage(\n          this.translateService.instant('com.bmc.arsys.rx.client.admin.chatbots.global-chatbot-settings-saved.message')\n        );\n\n        this.displayChatbotsDropdownSwitch.control.markAsPristine();\n      });\n  }\n\n  openChatbot(row: string[]): void {\n    if (row) {\n      const bundleId = row[RX_CHATBOTS.chatbotSettings.recordFieldIds.bundleId];\n      const encodedBotName = encodeURIComponent(row[RX_CHATBOTS.chatbotSettings.recordFieldIds.name]);\n      const chatbotDesignerUrl = `/innovationstudio/index.html#/app/bundle/${bundleId}/ichatbot/${encodedBotName}`;\n\n      window.open(chatbotDesignerUrl);\n    }\n  }\n\n  private refreshChatbotGrid(): void {\n    this.chatbotConfigurationsRecordGrid.api.refresh().subscribe();\n  }\n}\n","<rx-admin-settings header=\"{{ 'com.bmc.arsys.rx.client.admin.chatbots.header.title' | translate }}\">\n  <adapt-accordion [multiselect]=\"true\" class=\"pb-4\">\n    <adapt-accordion-tab\n      [title]=\"sections.chatbotConfigurations.title | translate\"\n      [isOpen]=\"sections.chatbotConfigurations.isExpanded\"\n    >\n      <rx-record-grid #chatbotConfigurationsRecordGrid [config]=\"recordGridConfig\"></rx-record-grid>\n    </adapt-accordion-tab>\n\n    <adapt-accordion-tab\n      *ngIf=\"isAdministrator\"\n      [title]=\"sections.globalChatbotSettings.title | translate\"\n      [isOpen]=\"sections.globalChatbotSettings.isExpanded\"\n    >\n      <adapt-rx-switch\n        class=\"d-block\"\n        name=\"displayChatbotsDropdown\"\n        label=\" {{ 'com.bmc.arsys.rx.client.admin.chatbots.display-available-chatbots.label' | translate }} \"\n        [(ngModel)]=\"sections.globalChatbotSettings.displayChatbotsDropdown\"\n        #displayChatbotsDropdownSwitch=\"ngModel\"\n      ></adapt-rx-switch>\n\n      <button\n        class=\"mt-4\"\n        rx-id=\"save-button\"\n        adapt-button\n        btn-type=\"primary\"\n        size=\"small\"\n        type=\"button\"\n        [disabled]=\"!displayChatbotsDropdownSwitch.dirty\"\n        (click)=\"onSaveClick()\"\n      >\n        {{ 'com.bmc.arsys.rx.client.common.save.label' | translate }}\n      </button>\n    </adapt-accordion-tab>\n  </adapt-accordion>\n</rx-admin-settings>\n\n<ng-template #nameColumnTemplate let-dataItem=\"dataItem\" let-column=\"column\">\n  <a href=\"javascript:void(0)\" (click)=\"openChatbot(dataItem)\">\n    {{ getCellValue(dataItem, column) | rxDefinitionNamePipe }}\n  </a>\n</ng-template>\n","import { ComponentFactoryResolver, NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { AdaptAccordionModule, AdaptButtonModule, AdaptIconModule, AdaptRxSwitchModule } from '@bmc-ux/adapt-angular';\nimport { AdminSettingsModule } from '@helix/platform/shared/components';\nimport { RX_APPLICATION, RxDefinitionModule } from '@helix/platform/shared/api';\nimport { RecordGridModule } from '@helix/platform/view/components';\nimport { RxDirectivesModule } from '@helix/platform/ui-kit';\nimport { RxViewComponentRegistryService } from '@helix/platform/view/api';\nimport { TranslateModule } from '@ngx-translate/core';\nimport { ChatbotsAdminComponent } from './chatbots.component';\nimport { RenameDefinitionModalModule } from '@helix/platform/shared/components';\n\n@NgModule({\n  declarations: [ChatbotsAdminComponent],\n  imports: [\n    AdaptAccordionModule,\n    AdaptButtonModule,\n    AdaptIconModule,\n    AdaptRxSwitchModule,\n    AdminSettingsModule,\n    CommonModule,\n    FormsModule,\n    RecordGridModule,\n    RenameDefinitionModalModule,\n    RxDefinitionModule,\n    RxDirectivesModule,\n    TranslateModule\n  ],\n  entryComponents: [ChatbotsAdminComponent]\n})\nexport class ChatbotsRegistrationModule {\n  constructor(\n    private componentFactoryResolver: ComponentFactoryResolver,\n    private rxViewComponentRegistryService: RxViewComponentRegistryService\n  ) {\n    rxViewComponentRegistryService.register({\n      type: 'rx-admin-chatbots',\n      componentFactory: this.componentFactoryResolver.resolveComponentFactory(ChatbotsAdminComponent),\n      name: 'Chatbots',\n      isPageComponent: true,\n      availableInBundles: [RX_APPLICATION.settingsBundleId]\n    });\n  }\n}\n","import {\n  AdaptChartAxis,\n  AdaptChartHeader,\n  AdaptChartLegend,\n  AdaptChartSeries,\n  AdaptChartSeriesFormat,\n  AdaptStackedChartType\n} from '@bmc-ux/adapt-charts';\nimport { IPlainObject } from '@helix/platform/shared/api';\n\nexport enum ChartGroup {\n  Chat = 'chat',\n  ChatByUser = 'chatbyuser',\n  Classify = 'classify',\n  SearchDiskUsage = 'searchdiskusage',\n  SearchDocumentUsage = 'searchdocumentusage',\n  Search = 'search'\n}\n\nexport enum ChartType {\n  Area = 'area',\n  HorizontalColumn = 'horizontal-column'\n}\n\nexport interface ICognitiveConsumptionChart {\n  title: string;\n  type: string;\n}\n\nexport interface ICognitiveConsumptionChartConfig {\n  barWidth?: number;\n  header: AdaptChartHeader; //Chart.Header;\n  height?: number;\n  legend?: AdaptChartLegend; //Chart.Legend;\n  series: AdaptChartSeries<IPlainObject>[]; //Chart.Series<IPlainObject>[];\n  seriesDisplay?: AdaptChartSeriesFormat; //StackedChart.SeriesDisplayFormat;\n  showSlider?: boolean;\n  slidePointsCount?: number;\n  suppressLegend: boolean;\n  type?: AdaptStackedChartType; //StackedChartType;\n  width?: number;\n  xAxis: AdaptChartAxis; //Chart.Axis;\n  yAxis: AdaptChartAxis; //Chart.Axis;\n}\n\nexport interface ICognitiveConsumptionGroupData {\n  capacityName?: string;\n  label: string;\n  unit: string;\n}\n\nexport interface ICognitiveConsumptionGroup extends ICognitiveConsumptionGroupData {\n  charts: ICognitiveConsumptionChart[];\n  id: string;\n}\n\nexport interface ICognitiveConsumptionNotificationConfig {\n  annotations?: any[];\n  encoding?: string;\n  entity: ICognitiveConsumptionNotificationEntity;\n  language?: string;\n  mediaType: IPlainObject;\n  variant?: IPlainObject;\n}\n\nexport interface ICognitiveConsumptionNotificationEntity {\n  action: string;\n  capacity: number;\n  disabled?: boolean;\n  domain: string;\n  emailIds: string[];\n  eventStatisticsGuid?: string;\n  operation?: string;\n  period?: string;\n  thresholds: number[];\n}\n\nexport interface ICognitiveConsumptionNotificationHistory {\n  annotations?: any[];\n  encoding?: string;\n  entity: ICognitiveConsumptionNotificationEntity[];\n  language?: string;\n  mediaType: IPlainObject;\n  variant?: IPlainObject;\n}\n\nexport interface ICognitiveConsumptionNotificationParams {\n  action: string;\n  domain: string;\n}\n\nexport interface ICognitiveConsumptionSection {\n  groups: ICognitiveConsumptionGroup[];\n  id: string;\n  title: string;\n}\n\nexport interface ICognitiveLicenseUsage {\n  endDate: string;\n  licenseUsageCount?: ICognitiveLicenseUsageCount[];\n  operation: string;\n  startDate: string;\n}\n\nexport interface ICognitiveLicenseUsageCount {\n  bundleId: string;\n  capacity: number;\n  count: IPlainObject;\n  countType?: string;\n  total: number;\n}\n\nexport interface ICognitiveLicenseUsageParams {\n  countType: string;\n  endDate: string;\n  startDate: string;\n}\n","import { ChartGroup, ChartType } from './cognitive-consumption.types';\n\nexport const RX_COGNITIVE_CONSUMPTION = {\n  sections: [\n    {\n      id: ChartGroup.Chat,\n      title: 'com.bmc.arsys.rx.client.admin.cognitive-consumption.cognitive-service-chatbot.title',\n      groups: [\n        {\n          id: ChartGroup.Chat,\n          label: 'com.bmc.arsys.rx.client.admin.cognitive-consumption.number-of-conversations.label',\n          unit: 'N',\n          charts: [\n            {\n              title: 'com.bmc.arsys.rx.client.admin.cognitive-consumption.conversations.title',\n              type: ChartType.HorizontalColumn\n            },\n            {\n              title: 'com.bmc.arsys.rx.client.admin.cognitive-consumption.conversation-summary.title',\n              type: ChartType.Area\n            }\n          ]\n        }\n      ]\n    },\n    {\n      id: ChartGroup.ChatByUser,\n      title: 'com.bmc.arsys.rx.client.admin.cognitive-consumption.chatbot-users.title',\n      groups: [\n        {\n          id: ChartGroup.ChatByUser,\n          unit: 'N',\n          label: 'com.bmc.arsys.rx.client.admin.cognitive-consumption.number-of-users.label',\n          charts: [\n            {\n              title: 'com.bmc.arsys.rx.client.admin.cognitive-consumption.users.title',\n              type: ChartType.HorizontalColumn\n            },\n            {\n              title: 'com.bmc.arsys.rx.client.admin.cognitive-consumption.user-summary.title',\n              type: ChartType.Area\n            }\n          ]\n        }\n      ]\n    },\n    {\n      id: ChartGroup.Classify,\n      title: 'com.bmc.arsys.rx.client.admin.cognitive-consumption.cognitive-service-automation.title',\n      groups: [\n        {\n          id: ChartGroup.Classify,\n          label: 'com.bmc.arsys.rx.client.admin.cognitive-consumption.number-of-api-calls.label',\n          unit: 'N',\n          charts: [\n            {\n              title: 'com.bmc.arsys.rx.client.admin.cognitive-consumption.api-calls.title',\n              type: ChartType.HorizontalColumn\n            },\n            {\n              title: 'com.bmc.arsys.rx.client.admin.cognitive-consumption.api-call-summary.title',\n              type: ChartType.Area\n            }\n          ]\n        }\n      ]\n    },\n    {\n      id: ChartGroup.Search,\n      title: 'com.bmc.arsys.rx.client.admin.cognitive-consumption.cognitive-search.title',\n      groups: [\n        {\n          id: ChartGroup.SearchDocumentUsage,\n          label: 'com.bmc.arsys.rx.client.admin.cognitive-consumption.number-of-documents.label',\n          unit: 'N',\n          capacityName: 'Count',\n          charts: [\n            {\n              title: 'com.bmc.arsys.rx.client.admin.cognitive-consumption.documents.title',\n              type: ChartType.HorizontalColumn\n            },\n            {\n              title: 'com.bmc.arsys.rx.client.admin.cognitive-consumption.document-summary.title',\n              type: ChartType.Area\n            }\n          ]\n        },\n        {\n          id: ChartGroup.SearchDiskUsage,\n          label: 'com.bmc.arsys.rx.client.admin.cognitive-consumption.document-size.label',\n          unit: 'GB',\n          capacityName: 'Size',\n          charts: [\n            {\n              title: 'com.bmc.arsys.rx.client.admin.cognitive-consumption.document-storage.title',\n              type: ChartType.HorizontalColumn\n            },\n            {\n              title: 'com.bmc.arsys.rx.client.admin.cognitive-consumption.document-storage-summary.title',\n              type: ChartType.Area\n            }\n          ]\n        }\n      ]\n    }\n  ],\n  settings: {\n    countType: 'BY_MONTH',\n    licenseType: 'com.bmc.arsys.rx.services.cognitive.CognitiveService',\n    fields: {\n      emailsAddressFieldId: 103,\n      consumedCapacityField: 'consumedCapacity',\n      thresholdReachedField: 'thresholdReached',\n      notificationDateField: 'notificationDate',\n      recipientsField: 'recipients'\n    }\n  }\n};\n","import { Injectable } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\nimport { Observable } from 'rxjs';\nimport moment from 'moment-es6';\nimport {\n  ICognitiveConsumptionNotificationConfig,\n  ICognitiveConsumptionNotificationEntity,\n  ICognitiveConsumptionNotificationHistory,\n  ICognitiveConsumptionNotificationParams,\n  ICognitiveLicenseUsage,\n  ICognitiveLicenseUsageParams\n} from './cognitive-consumption.types';\n\nconst notificationConfigApi = '/api/rx/application/telemetry/notification/config';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class RxCognitiveConsumptionService {\n  constructor(private httpClient: HttpClient) {}\n\n  getCognitiveConsumptionNotificationConfig(\n    params: ICognitiveConsumptionNotificationParams\n  ): Observable<ICognitiveConsumptionNotificationConfig> {\n    return this.httpClient.get<ICognitiveConsumptionNotificationConfig>(notificationConfigApi, {\n      params: {\n        action: params.action,\n        domain: params.domain\n      }\n    });\n  }\n\n  postCognitiveConsumptionNotificationConfigEntity(entity: ICognitiveConsumptionNotificationEntity): Observable<any> {\n    return this.httpClient.post(notificationConfigApi, entity);\n  }\n\n  putCognitiveConsumptionNotificationConfigEntity(entity: ICognitiveConsumptionNotificationEntity): Observable<any> {\n    return this.httpClient.put(notificationConfigApi, entity);\n  }\n\n  getCognitiveConsumptionNotificationHistory(\n    params: ICognitiveConsumptionNotificationParams\n  ): Observable<ICognitiveConsumptionNotificationHistory> {\n    return this.httpClient.get<ICognitiveConsumptionNotificationHistory>(\n      '/api/rx/application/telemetry/notification/history',\n      {\n        params: {\n          action: params.action,\n          domain: params.domain\n        }\n      }\n    );\n  }\n\n  getCognitiveLicenseUsage(\n    licenseType: string,\n    id: string,\n    params: ICognitiveLicenseUsageParams\n  ): Observable<ICognitiveLicenseUsage> {\n    return this.httpClient.get<ICognitiveLicenseUsage>(\n      `/api/rx/application/license/licenseusage/${licenseType}/${id}`,\n      {\n        params: {\n          countType: params.countType,\n          endDate: moment(params.endDate, 'YYYY-MM').endOf('month').format('YYYY-MM-DD') + 'T23:59:59.999Z',\n          startDate: moment(params.startDate, 'YYYY-MM').startOf('month').format('YYYY-MM-DD') + 'T00:00:00.000Z'\n        }\n      }\n    );\n  }\n}\n","import { Component, OnInit } from '@angular/core';\nimport { filter, find, forEach, head, includes, last, map, parseInt, some } from 'lodash';\nimport { forkJoin } from 'rxjs';\nimport moment from 'moment-es6';\nimport { ActiveModalRef, RxDatetimePickerMode, RxDatetimeStruct } from '@bmc-ux/adapt-angular';\nimport { IPlainObject } from '@helix/platform/shared/api';\nimport { RX_COGNITIVE_CONSUMPTION } from '../../cognitive-consumption.constant';\nimport { RxCognitiveConsumptionService } from '../../cognitive-consumption.service';\nimport { CsvData, RX_SIZE_UNITS, RxCsvService, RxFileService, RxUnitService } from '@helix/platform/utils';\nimport {\n  ICognitiveConsumptionGroup,\n  ICognitiveConsumptionSection,\n  ICognitiveLicenseUsage,\n  ICognitiveLicenseUsageParams\n} from '../../cognitive-consumption.types';\nimport { TranslateService } from '@ngx-translate/core';\n\n@Component({\n  selector: 'rx-download-report-modal',\n  templateUrl: './download-report-modal.component.html'\n})\nexport class DownloadReportModalComponent implements OnInit {\n  customRange: RxDatetimeStruct[];\n  modalData: IPlainObject;\n  period: string;\n\n  dateTimePickerMode = RxDatetimePickerMode.DateTime;\n\n  parameters: ICognitiveLicenseUsageParams = {\n    startDate: '',\n    endDate: '',\n    countType: RX_COGNITIVE_CONSUMPTION.settings.countType\n  };\n\n  periodOptions = [\n    {\n      label: this.translateService.instant(\n        'com.bmc.arsys.rx.client.admin.cognitive-consumption.download-report-modal.last-twelve-months.label'\n      ),\n      value: '12'\n    },\n    {\n      label: this.translateService.instant(\n        'com.bmc.arsys.rx.client.admin.cognitive-consumption.download-report-modal.last-twenty-four-months.label'\n      ),\n      value: '24'\n    },\n    {\n      label: this.translateService.instant(\n        'com.bmc.arsys.rx.client.admin.cognitive-consumption.download-report-modal.last-thirty-six-months.label'\n      ),\n      value: '36'\n    },\n    {\n      label: this.translateService.instant(\n        'com.bmc.arsys.rx.client.admin.cognitive-consumption.download-report-modal.selected-time-period.label'\n      ),\n      value: 'custom'\n    }\n  ];\n\n  csvData: CsvData = [['Operation', 'Application', 'Period', 'Count']];\n\n  constructor(\n    private activeModalRef: ActiveModalRef,\n    private rxCognitiveConsumptionService: RxCognitiveConsumptionService,\n    private rxCsvService: RxCsvService,\n    private rxFileService: RxFileService,\n    private rxUnitService: RxUnitService,\n    public translateService: TranslateService\n  ) {\n    this.modalData = this.activeModalRef.getData();\n  }\n\n  ngOnInit(): void {\n    this.period = head(this.periodOptions).value;\n  }\n\n  onDownloadClick(): void {\n    if (this.period === 'custom') {\n      this.parameters.endDate = moment(last(this.customRange)).format('YYYY-MM');\n      this.parameters.startDate = moment(head(this.customRange)).format('YYYY-MM');\n    } else {\n      this.parameters.endDate = moment().format('YYYY-MM');\n\n      this.parameters.startDate = moment(this.parameters.endDate, 'YYYY-MM')\n        .add(-1 * parseInt(this.period, 10), 'months')\n        .format('YYYY-MM');\n    }\n\n    const sections: ICognitiveConsumptionSection[] = filter(RX_COGNITIVE_CONSUMPTION.sections, (section) =>\n      includes(this.modalData.sectionIds, section.id)\n    );\n\n    const groupIds: string[] = [];\n\n    forEach(sections, (section) => {\n      forEach(section.groups, (group) => {\n        groupIds.push(group.id);\n      });\n    });\n\n    forkJoin(\n      map(groupIds, (groupId) => {\n        return this.rxCognitiveConsumptionService.getCognitiveLicenseUsage(\n          RX_COGNITIVE_CONSUMPTION.settings.licenseType,\n          groupId,\n          this.parameters\n        );\n      })\n    ).subscribe((licenseUsages: ICognitiveLicenseUsage[]) => {\n      forEach(licenseUsages, (licenseUsage) => {\n        const currentSection: ICognitiveConsumptionSection = find(sections, (section) =>\n          some(section.groups, ['id', licenseUsage.operation])\n        );\n\n        const group: ICognitiveConsumptionGroup = find(currentSection.groups, ['id', licenseUsage.operation]);\n\n        forEach(licenseUsage.licenseUsageCount, (licenseUsageCount) => {\n          forEach(licenseUsageCount.count, (value, period) => {\n            this.csvData.push([\n              `${this.translateService.instant(currentSection.title)} - ${this.translateService.instant(\n                head(group.charts).title\n              )}`,\n              licenseUsageCount.bundleId,\n              period,\n              group.unit === RX_SIZE_UNITS.gigabytes.unit ? this.rxUnitService.getValueWithUnits(value) : value\n            ]);\n          });\n        });\n      });\n\n      const csv: string = this.rxCsvService.convertToCsv(this.csvData);\n\n      this.rxFileService.createAndDownloadBlob(csv, 'text/csv;charset=utf-8;', 'report', 'csv');\n      this.activeModalRef.close();\n    });\n  }\n\n  onCancelClick(): void {\n    this.activeModalRef.dismiss();\n  }\n}\n","<div class=\"modal-body\">\n  <form>\n    <adapt-rx-radiobutton-group name=\"period\" [(ngModel)]=\"period\">\n      <adapt-rx-radiobutton\n        *ngFor=\"let option of periodOptions\"\n        [label]=\"option.label | translate\"\n        [value]=\"option.value\"\n      ></adapt-rx-radiobutton>\n    </adapt-rx-radiobutton-group>\n\n    <adapt-rx-datetime-range\n      name=\"customDatetimeRange\"\n      label=\" {{\n        'com.bmc.arsys.rx.client.admin.cognitive-consumption.download-report-modal.select-range.label' | translate\n      }}\"\n      [mode]=\"dateTimePickerMode\"\n      [disabled]=\"period !== 'custom'\"\n      [(ngModel)]=\"customRange\"\n    ></adapt-rx-datetime-range>\n  </form>\n</div>\n\n<div class=\"modal-footer\">\n  <button\n    rx-id=\"download-button\"\n    adapt-button\n    btn-type=\"primary\"\n    type=\"button\"\n    (click)=\"onDownloadClick()\"\n  >\n    {{ 'com.bmc.arsys.rx.client.common.download.label' | translate }}\n  </button>\n\n  <button rx-id=\"cancel-button\" adapt-button btn-type=\"secondary\" type=\"button\" (click)=\"onCancelClick()\">\n    {{ 'com.bmc.arsys.rx.client.common.cancel.label' | translate }}\n  </button>\n</div>\n","import { Component, OnInit } from '@angular/core';\nimport { Observable, of } from 'rxjs';\nimport { map } from 'rxjs/operators';\nimport { ActiveModalRef } from '@bmc-ux/adapt-angular';\nimport { IRecordDefinition, RX_RECORD_DEFINITION } from '@helix/platform/record/api';\nimport { IPlainObject } from '@helix/platform/shared/api';\nimport { IRecordGridColumn, IRecordGridConfig, RowSelectionMode } from '@helix/platform/view/components';\nimport { RX_COGNITIVE_CONSUMPTION } from '../../cognitive-consumption.constant';\nimport { RxCognitiveConsumptionService } from '../../cognitive-consumption.service';\nimport { TranslateService } from '@ngx-translate/core';\n\n@Component({\n  selector: 'rx-cognitive-consumption-notification-history-modal',\n  templateUrl: './cognitive-consumption-notification-history-modal.component.html',\n  styleUrls: ['./cognitive-consumption-notification-history-modal.component.scss']\n})\nexport class CognitiveConsumptionNotificationHistoryModalComponent implements OnInit {\n  modalData: IPlainObject;\n  recordGridConfig: Observable<IRecordGridConfig>;\n\n  constructor(\n    private activeModalRef: ActiveModalRef,\n    private rxCognitiveConsumptionService: RxCognitiveConsumptionService,\n    private translateService: TranslateService\n  ) {\n    this.modalData = this.activeModalRef.getData();\n  }\n\n  ngOnInit() {\n    const recordDefinition: IRecordDefinition = {\n      fieldDefinitions: [\n        {\n          id: RX_COGNITIVE_CONSUMPTION.settings.fields.consumedCapacityField,\n          resourceType: RX_RECORD_DEFINITION.resourceTypes.character\n        },\n        {\n          id: RX_COGNITIVE_CONSUMPTION.settings.fields.thresholdReachedField,\n          resourceType: RX_RECORD_DEFINITION.resourceTypes.character\n        },\n        {\n          id: RX_COGNITIVE_CONSUMPTION.settings.fields.notificationDateField,\n          resourceType: RX_RECORD_DEFINITION.resourceTypes.dateTime\n        },\n        {\n          id: RX_COGNITIVE_CONSUMPTION.settings.fields.recipientsField,\n          resourceType: RX_RECORD_DEFINITION.resourceTypes.character\n        }\n      ]\n    };\n\n    const columns: IRecordGridColumn[] = [\n      {\n        index: 0,\n        fieldId: RX_COGNITIVE_CONSUMPTION.settings.fields.consumedCapacityField,\n        title: this.translateService.instant(\n          'com.bmc.arsys.rx.client.admin.cognitive-consumption-notification-history.consumption-measure.title'\n        )\n      },\n      {\n        index: 1,\n        fieldId: RX_COGNITIVE_CONSUMPTION.settings.fields.thresholdReachedField,\n        title: this.translateService.instant(\n          'com.bmc.arsys.rx.client.admin.cognitive-consumption-notification-history.threshold-reached.title'\n        )\n      },\n      {\n        index: 2,\n        fieldId: RX_COGNITIVE_CONSUMPTION.settings.fields.notificationDateField,\n        title: this.translateService.instant(\n          'com.bmc.arsys.rx.client.admin.cognitive-consumption-notification-history.notification-date.title'\n        )\n      },\n      {\n        index: 3,\n        fieldId: RX_COGNITIVE_CONSUMPTION.settings.fields.recipientsField,\n        title: this.translateService.instant(\n          'com.bmc.arsys.rx.client.admin.cognitive-consumption-notification-history.email-recipient.title'\n        )\n      }\n    ];\n\n    this.recordGridConfig = of({\n      columns,\n      enableFiltering: false,\n      useExternalFiltering: false,\n      enableRowSelection: RowSelectionMode.Multiple,\n      styles: 'flex-fill',\n      getRecordDefinition: () => of(recordDefinition),\n\n      getData: () =>\n        this.rxCognitiveConsumptionService\n          .getCognitiveConsumptionNotificationHistory({\n            action: this.modalData.groupId,\n            domain: this.modalData.domain\n          })\n          .pipe(\n            map((data) => ({\n              data: data.entity,\n              totalSize: data.entity.length\n            }))\n          )\n    });\n  }\n\n  onCloseClick(): void {\n    this.activeModalRef.close();\n  }\n}\n","<div class=\"modal-body d-flex\">\n  <rx-record-grid [config]=\"recordGridConfig\"></rx-record-grid>\n</div>\n\n<div class=\"modal-footer\">\n  <button rx-id=\"close-button\" adapt-button btn-type=\"secondary\" type=\"button\" (click)=\"onCloseClick()\">\n    {{ 'com.bmc.arsys.rx.client.common.close.label' | translate }}\n  </button>\n</div>\n","import { Component, Injector, OnInit, ViewChild } from '@angular/core';\nimport { AbstractControl, NgForm, ValidationErrors } from '@angular/forms';\nimport { ActiveModalRef, AdaptModalService, DismissReasons } from '@bmc-ux/adapt-angular';\nimport { RX_RECORD_DEFINITION } from '@helix/platform/record/api';\nimport { IPlainObject, RxCurrentUserService, RxLogService, RxNotificationService } from '@helix/platform/shared/api';\nimport { RxModalClass } from '@helix/platform/ui-kit';\nimport { IRowDataItem, OpenViewActionModalSize } from '@helix/platform/view/api';\nimport { IRecordGridConfig, RecordGridComponent, RowSelectionMode } from '@helix/platform/view/components';\nimport { TranslateService } from '@ngx-translate/core';\nimport {\n  add,\n  compact,\n  every,\n  find,\n  forEach,\n  get,\n  includes,\n  inRange,\n  isEmpty,\n  map,\n  merge,\n  noop,\n  omit,\n  pullAt\n} from 'lodash';\nimport { EMPTY, Observable, of, Subscription, throwError } from 'rxjs';\nimport { catchError } from 'rxjs/operators';\nimport { RX_COGNITIVE_CONSUMPTION } from '../../cognitive-consumption.constant';\nimport { RxCognitiveConsumptionService } from '../../cognitive-consumption.service';\nimport {\n  ICognitiveConsumptionGroup,\n  ICognitiveConsumptionNotificationConfig,\n  ICognitiveConsumptionNotificationEntity\n} from '../../cognitive-consumption.types';\nimport { CognitiveConsumptionNotificationHistoryModalComponent } from '../cognitive-consumption-notification-history-modal/cognitive-consumption-notification-history-modal.component';\n\n@Component({\n  selector: 'rx-cognitive-consumption-notification-modal',\n  templateUrl: './cognitive-consumption-notification-modal.component.html',\n  styleUrls: ['./cognitive-consumption-notification-modal.component.scss']\n})\nexport class CognitiveConsumptionNotificationModalComponent extends RxModalClass implements OnInit {\n  @ViewChild('availableEmailNotificationRecipientsRecordGrid', { static: true })\n  availableEmailNotificationRecipientsRecordGrid: RecordGridComponent;\n\n  @ViewChild('notificationForm', { static: true, read: NgForm })\n  notificationForm: NgForm;\n\n  busy: Subscription;\n  entity: ICognitiveConsumptionNotificationEntity;\n  group: ICognitiveConsumptionGroup;\n  isAdministrator: boolean;\n  label: string;\n  modalData: IPlainObject;\n  recordGridConfig: Observable<IRecordGridConfig>;\n\n  isEdit = false;\n  selectedEmailRecipients: string[] = [];\n\n  thresholds: IPlainObject[] = [\n    {\n      id: 1,\n      value: 0\n    },\n    {\n      id: 2,\n      value: 0\n    },\n    {\n      id: 3,\n      value: 0\n    }\n  ];\n\n  constructor(\n    private activeModalRef: ActiveModalRef,\n    private adaptModalService: AdaptModalService,\n    private rxCognitiveConsumptionService: RxCognitiveConsumptionService,\n    private rxCurrentUserService: RxCurrentUserService,\n    private rxLogService: RxLogService,\n    private rxNotificationService: RxNotificationService,\n    private translateService: TranslateService,\n    protected injector: Injector\n  ) {\n    super(activeModalRef, injector);\n\n    this.modalData = this.activeModalRef.getData();\n    this.isAdministrator = this.rxCurrentUserService.isAdministrator();\n  }\n\n  ngOnInit(): void {\n    super.ngOnInit();\n\n    forEach(RX_COGNITIVE_CONSUMPTION.sections, (section) => {\n      const group: ICognitiveConsumptionGroup = find(section.groups, ['id', this.modalData.groupId]);\n\n      if (group) {\n        this.group = group;\n      }\n    });\n\n    this.label = `${this.translateService.instant(this.group.label)} (${this.group.unit})`;\n\n    this.entity = {\n      action: this.modalData.groupId,\n      capacity: 0,\n      domain: 'com.bmc.dsm.innovationsuite.cognitive',\n      emailIds: [],\n      thresholds: [null, null, null]\n    };\n\n    this.busy = this.rxCognitiveConsumptionService\n      .getCognitiveConsumptionNotificationConfig({\n        action: this.entity.action,\n        domain: this.entity.domain\n      })\n      .pipe(\n        catchError((error) => {\n          return get(error, 'error[0].messageNumber') === 302 ? EMPTY : throwError(error);\n        })\n      )\n      .subscribe((config: ICognitiveConsumptionNotificationConfig) => {\n        this.isEdit = true;\n        merge(this.entity, config.entity);\n\n        this.thresholds = map(this.entity.thresholds, (threshold, index) => {\n          return {\n            id: index + 1,\n            value: threshold || 0\n          };\n        });\n\n        this.selectedEmailRecipients = this.entity.emailIds;\n      });\n\n    this.recordGridConfig = of({\n      enableFiltering: false,\n      recordDefinitionName: 'User',\n      enableRowSelection: RowSelectionMode.Multiple,\n      filterExpression: `('${RX_COGNITIVE_CONSUMPTION.settings.fields.emailsAddressFieldId}' != $NULL$)`,\n\n      columns: [\n        {\n          index: 0,\n          fieldId: String(RX_RECORD_DEFINITION.coreFieldIds.description),\n          title: this.translateService.instant(\n            'com.bmc.arsys.rx.client.admin.cognitive-consumption-notification.full-name.title'\n          )\n        },\n        {\n          index: 1,\n          fieldId: String(RX_COGNITIVE_CONSUMPTION.settings.fields.emailsAddressFieldId),\n          title: this.translateService.instant(\n            'com.bmc.arsys.rx.client.admin.cognitive-consumption-notification.primary-email-address.title'\n          )\n        }\n      ]\n    });\n  }\n\n  isDirty(): boolean {\n    return this.notificationForm.dirty;\n  }\n\n  canSelectRecipients(): boolean {\n    const recipients: IRowDataItem[] = this.availableEmailNotificationRecipientsRecordGrid.api.getSelectedRows();\n\n    return inRange(add(recipients.length, this.selectedEmailRecipients.length), 0, 11);\n  }\n\n  getEmptyCapacityValueValidator(): (control: AbstractControl) => ValidationErrors | null {\n    return (control: AbstractControl) => {\n      let result = null;\n\n      if (control.touched && !control.value) {\n        result = {\n          emptyCapacityValue: {\n            message: this.translateService.instant(\n              'com.bmc.arsys.rx.client.admin.cognitive-consumption-notification.capacity-empty-validation.message'\n            )\n          }\n        };\n      }\n\n      return result;\n    };\n  }\n\n  getEmptyThresholdValuesValidator(): (control: AbstractControl) => ValidationErrors | null {\n    return (control: AbstractControl) => {\n      let result = null;\n\n      if (control.touched && !control.value && every(this.thresholds, ['value', 0])) {\n        result = {\n          emptyThresholdValues: {\n            message: this.translateService.instant(\n              'com.bmc.arsys.rx.client.admin.cognitive-consumption-notification.capacity-threshold-validation.message'\n            )\n          }\n        };\n      }\n\n      return result;\n    };\n  }\n\n  isSaveButtonDisabled(): boolean {\n    return this.notificationForm.invalid || isEmpty(this.selectedEmailRecipients);\n  }\n\n  onCloseClick(): void {\n    this.activeModalRef.dismiss(DismissReasons.CLOSE_BTN);\n  }\n\n  onMoveToSelectedClick(): void {\n    const recipients: IRowDataItem[] = this.availableEmailNotificationRecipientsRecordGrid.api.getSelectedRows();\n\n    if (this.canSelectRecipients()) {\n      forEach(recipients, (recipient) => {\n        if (\n          !includes(\n            this.selectedEmailRecipients,\n            recipient[RX_COGNITIVE_CONSUMPTION.settings.fields.emailsAddressFieldId]\n          )\n        ) {\n          this.selectedEmailRecipients.push(recipient[RX_COGNITIVE_CONSUMPTION.settings.fields.emailsAddressFieldId]);\n        }\n      });\n    }\n  }\n\n  onNotificationHistoryClick(): void {\n    this.adaptModalService\n      .open({\n        title: this.translateService.instant(\n          'com.bmc.arsys.rx.client.admin.cognitive-consumption-notification.notification-history.title'\n        ),\n        content: CognitiveConsumptionNotificationHistoryModalComponent,\n        size: OpenViewActionModalSize.Large as any,\n        data: {\n          domain: this.entity.domain,\n          groupId: this.modalData.groupId\n        }\n      })\n      .catch(noop);\n  }\n\n  onRemoveRecipientClick(index: number): void {\n    pullAt(this.selectedEmailRecipients, [index]);\n  }\n\n  onSaveClick(): void {\n    forEach(this.notificationForm.controls, (control) => {\n      control.markAsTouched();\n      control.updateValueAndValidity();\n    });\n\n    const entity: ICognitiveConsumptionNotificationEntity = {\n      action: this.entity.action,\n      capacity: this.entity.capacity,\n      domain: this.entity.domain,\n      emailIds: this.selectedEmailRecipients,\n      thresholds: compact(map(this.thresholds, 'value'))\n    };\n\n    if (this.notificationForm.valid) {\n      if (this.isEdit) {\n        this.rxCognitiveConsumptionService.putCognitiveConsumptionNotificationConfigEntity(entity).subscribe(() => {\n          this.activeModalRef.close();\n          this.rxNotificationService.addSuccessMessage(\n            this.translateService.instant('com.bmc.arsys.rx.client.common.saved-successfully.message')\n          );\n        });\n      } else {\n        this.rxCognitiveConsumptionService.postCognitiveConsumptionNotificationConfigEntity(entity).subscribe(() => {\n          this.activeModalRef.close();\n          this.rxNotificationService.addSuccessMessage(\n            this.translateService.instant('com.bmc.arsys.rx.client.common.saved-successfully.message')\n          );\n        });\n      }\n    }\n  }\n\n  onThresholdCounterModelChange(): void {\n    const controls = omit(this.notificationForm.controls, 'capacity');\n\n    forEach(controls, (control) => {\n      control.markAsTouched();\n      control.updateValueAndValidity();\n    });\n  }\n}\n","<div class=\"modal-body d-flex\">\n  <rx-busy-indicator [options]=\"{ busy: busy, loaderType: 'section' }\"></rx-busy-indicator>\n\n  <form class=\"d-flex flex-column\" #notificationForm=\"ngForm\">\n    <div class=\"mb-4\" [style.width.%]=\"32\">\n      <h5 class=\"m-0 mb-4\">\n        {{ 'com.bmc.arsys.rx.client.admin.cognitive-consumption-notification.capacity.title' | translate }}\n      </h5>\n\n      <adapt-rx-counter\n        name=\"capacity\"\n        [label]=\"label\"\n        placeholder=\"0\"\n        min=\"0\"\n        max=\"100\"\n        required\n        [rxCustomValidators]=\"getEmptyCapacityValueValidator()\"\n        [(ngModel)]=\"entity.capacity\"\n      >\n      </adapt-rx-counter>\n    </div>\n\n    <div class=\"mb-4\">\n      <h5 class=\"m-0 mb-4\">\n        {{ 'com.bmc.arsys.rx.client.admin.cognitive-consumption.capacity-consumption-thresholds.title' | translate }}\n      </h5>\n\n      <div class=\"d-flex justify-content-between\">\n        <adapt-rx-counter\n          *ngFor=\"let threshold of thresholds\"\n          [style.width.%]=\"32\"\n          name=\"threshold-{{ threshold.id }}\"\n          label=\"Threshold {{ threshold.id }} (%)\"\n          placeholder=\"0\"\n          min=\"0\"\n          max=\"100\"\n          adaptIntegerNumber\n          [rxCustomValidators]=\"getEmptyThresholdValuesValidator()\"\n          [(ngModel)]=\"threshold.value\"\n          (ngModelChange)=\"onThresholdCounterModelChange()\"\n        >\n        </adapt-rx-counter>\n      </div>\n    </div>\n\n    <div class=\"d-flex h-100\">\n      <div class=\"col-6 d-flex flex-column h-100 p-0\">\n        <h5 class=\"m-0 mb-4\">\n          {{\n            'com.bmc.arsys.rx.client.admin.cognitive-consumption-notification.available-email-recipient.title'\n              | translate\n          }}\n        </h5>\n\n        <rx-record-grid\n          class=\"flex-grow-1\"\n          [config]=\"recordGridConfig\"\n          #availableEmailNotificationRecipientsRecordGrid\n        ></rx-record-grid>\n      </div>\n\n      <button\n        class=\"d-icon-angle_right align-self-center mx-4\"\n        adapt-button\n        btn-type=\"secondary\"\n        type=\"button\"\n        rx-id=\"move-to-selected-button\"\n        [disabled]=\"!canSelectRecipients()\"\n        (click)=\"onMoveToSelectedClick()\"\n      ></button>\n\n      <div class=\"col d-flex flex-column h-100 p-0\">\n        <h5 class=\"m-0 mb-4\">\n          {{\n            'com.bmc.arsys.rx.client.admin.cognitive-consumption-notification.selected-email-recipient.title'\n              | translate\n          }}\n        </h5>\n\n        <ul *ngIf=\"selectedEmailRecipients.length\" class=\"list-group\">\n          <li\n            *ngFor=\"let recipient of selectedEmailRecipients; let $index = index\"\n            class=\"list-group-item d-flex justify-content-between p-0 px-2\"\n          >\n            {{ recipient }}\n\n            <button\n              class=\"d-icon-trash_adapt\"\n              adapt-button\n              btn-type=\"tertiary\"\n              type=\"button\"\n              rx-id=\"remove-recipient\"\n              (click)=\"onRemoveRecipientClick($index)\"\n            ></button>\n          </li>\n        </ul>\n\n        <div *ngIf=\"!selectedEmailRecipients.length\" class=\"card h-100\">\n          <div class=\"card-block\">\n            <adapt-empty-state\n              type=\"objects\"\n              label=\"{{\n                'com.bmc.arsys.rx.client.admin.cognitive-consumption-notification.recipient-not-selected.message'\n                  | translate\n              }}\"\n            ></adapt-empty-state>\n          </div>\n        </div>\n      </div>\n    </div>\n  </form>\n</div>\n\n<div class=\"modal-footer d-flex\">\n  <button\n    class=\"mr-auto\"\n    rx-id=\"notification-history-button\"\n    adapt-button\n    btn-type=\"secondary\"\n    type=\"button\"\n    (click)=\"onNotificationHistoryClick()\"\n  >\n    {{ 'com.bmc.arsys.rx.client.admin.cognitive-consumption-notification.notification-history.title' | translate }}\n  </button>\n\n  <button\n    rx-id=\"save-button\"\n    adapt-button\n    btn-type=\"primary\"\n    type=\"button\"\n    [disabled]=\"isSaveButtonDisabled()\"\n    (click)=\"onSaveClick()\"\n  >\n    {{ 'com.bmc.arsys.rx.client.common.save.label' | translate }}\n  </button>\n\n  <button rx-id=\"close-button\" adapt-button btn-type=\"secondary\" size=\"small\" type=\"button\" (click)=\"onCloseClick()\">\n    {{ 'com.bmc.arsys.rx.client.common.close.label' | translate }}\n  </button>\n</div>\n","import { Component, Input, OnInit } from '@angular/core';\nimport { assign, constant, defaults, flow, forEach, head, keys, last, map, mapValues, reduce, split } from 'lodash';\nimport moment from 'moment-es6';\nimport { IPlainObject } from '@helix/platform/shared/api';\nimport { RX_SIZE_UNITS, RxStringService, RxUnitService } from '@helix/platform/utils';\nimport {\n  ChartType,\n  ICognitiveConsumptionChart,\n  ICognitiveConsumptionChartConfig,\n  ICognitiveConsumptionGroupData,\n  ICognitiveLicenseUsageCount\n} from '../../cognitive-consumption.types';\nimport { TranslateService } from '@ngx-translate/core';\n\n@Component({\n  selector: 'rx-cognitive-consumption-chart',\n  templateUrl: './cognitive-consumption-chart.component.html'\n})\nexport class CognitiveConsumptionChartComponent implements OnInit {\n  @Input()\n  chart: ICognitiveConsumptionChart;\n\n  @Input()\n  groupData: ICognitiveConsumptionGroupData;\n\n  @Input()\n  licenceUsageCount: ICognitiveLicenseUsageCount[];\n\n  capacity: IPlainObject;\n  chartConfig: ICognitiveConsumptionChartConfig;\n\n  areaChartType = ChartType.Area;\n  horizontalColumnChartType = ChartType.HorizontalColumn;\n\n  constructor(\n    private rxStringService: RxStringService,\n    private rxUnitService: RxUnitService,\n    private translateService: TranslateService\n  ) {}\n\n  ngOnInit() {\n    this.chartConfig = {\n      height: 400,\n      width: 500,\n      header: {\n        title: this.translateService.instant(this.chart.title),\n        allowHideLegend: true\n      },\n      suppressLegend: this.isCapacityAvailable(),\n      xAxis: {\n        title: this.translateService.instant('com.bmc.arsys.rx.client.admin.cognitive-consumption.x-axis-months.title'),\n        categories: []\n      },\n      yAxis: {\n        title: `${this.translateService.instant(this.groupData.label)} (${this.groupData.unit})`\n      },\n      series: []\n    };\n\n    if (this.chart.type === ChartType.HorizontalColumn) {\n      assign(this.chartConfig, {\n        type: 'column',\n        seriesDisplay: 'horizontal',\n        showSlider: true,\n        slidePointsCount: 3\n      });\n\n      const defaultCount = flow(\n        (licenceUsage: ICognitiveLicenseUsageCount[]) => map(licenceUsage, 'count'),\n        (countData: IPlainObject) => reduce(countData, assign, {}),\n        (countData: IPlainObject) => mapValues(countData, constant(0))\n      )(this.licenceUsageCount);\n\n      forEach(this.licenceUsageCount, (item) => {\n        defaults(item.count, defaultCount);\n      });\n    }\n\n    forEach(this.licenceUsageCount, (item) => {\n      const name = this.groupData.capacityName || this.rxStringService.prettify(last(split(item.bundleId, '.')));\n\n      const data = map(item.count, (key, value) => {\n        let result;\n\n        const countValue =\n          this.groupData.unit === RX_SIZE_UNITS.gigabytes.unit\n            ? this.rxUnitService.getValueWithoutUnitsByUnitType(key, RX_SIZE_UNITS.gigabytes.unit)\n            : key;\n\n        if (this.chart.type === ChartType.Area) {\n          result = {\n            x: moment(value).valueOf(),\n            y: countValue\n          };\n        } else {\n          result = countValue;\n        }\n\n        return result;\n      });\n\n      this.chartConfig.series.push({\n        name,\n        data\n      });\n    });\n\n    const firstLicenceUsageCount = head(this.licenceUsageCount);\n\n    this.chartConfig.xAxis.categories = map(keys(firstLicenceUsageCount.count), (key) => {\n      return moment(key).format('MMM YYYY');\n    });\n\n    if (this.isCapacityAvailable()) {\n      this.capacity = {\n        title: `Capacity (${this.groupData.unit})`,\n        value:\n          this.groupData.unit === RX_SIZE_UNITS.gigabytes.unit\n            ? this.rxUnitService.getValueWithoutUnitsByUnitType(\n                firstLicenceUsageCount.capacity,\n                RX_SIZE_UNITS.gigabytes.unit\n              )\n            : firstLicenceUsageCount.capacity\n      };\n    }\n  }\n\n  formatXAxisVal(xValue) {\n    return moment(xValue).format('MMM YYYY');\n  }\n\n  public isCapacityAvailable() {\n    return Boolean(this.groupData.capacityName);\n  }\n}\n","<ng-container [ngSwitch]=\"chart.type\">\n  <adapt-stacked-chart\n    *ngSwitchCase=\"horizontalColumnChartType\"\n    [header]=\"chartConfig.header\"\n    [height]=\"chartConfig.height\"\n    [width]=\"chartConfig.width\"\n    [xAxis]=\"chartConfig.xAxis\"\n    [yAxis]=\"chartConfig.yAxis\"\n    [series]=\"chartConfig.series\"\n    [tooltip]=\"horizontalColumnChartTooltip\"\n    [type]=\"chartConfig.type\"\n    [showSlider]=\"chartConfig.showSlider\"\n    [slidePointsCount]=\"chartConfig.slidePointsCount\"\n    [seriesDisplay]=\"chartConfig.seriesDisplay\"\n    [suppressLegend]=\"chartConfig.suppressLegend\"\n    [thresholdLine]=\"isCapacityAvailable() ? capacity.value : null\"\n  >\n  </adapt-stacked-chart>\n\n  <adapt-area-graph\n    *ngSwitchCase=\"areaChartType\"\n    [header]=\"chartConfig.header\"\n    [height]=\"chartConfig.height\"\n    [width]=\"chartConfig.width\"\n    [xAxis]=\"chartConfig.xAxis\"\n    [yAxis]=\"chartConfig.yAxis\"\n    [series]=\"chartConfig.series\"\n    [tooltip]=\"areaChartTooltip\"\n    [suppressLegend]=\"chartConfig.suppressLegend\"\n    [thresholdLine]=\"isCapacityAvailable() ? capacity.value : null\"\n  >\n  </adapt-area-graph>\n</ng-container>\n\n<ng-template #horizontalColumnChartTooltip let-data=\"data\">\n  <div>\n    <span class=\"chart-tooltip-color-spot\" [style.background]=\"data?.color\"></span>\n    <span class=\"chart-tooltip-category\">{{ data.category }}</span>\n  </div>\n\n  <div>\n    {{ chartConfig.yAxis.title }}:\n    <span class=\"font-weight-semibold\">{{ data.value }}</span>\n  </div>\n\n  <div *ngIf=\"capacity\">\n    {{ capacity.title }}:\n    <span class=\"font-weight-semibold\">{{ capacity.value }}</span>\n  </div>\n</ng-template>\n\n<ng-template #areaChartTooltip let-data=\"data\">\n  <div>\n    <span class=\"chart-tooltip-color-spot\" [style.background]=\"data?.color\"></span>\n    <span class=\"chart-tooltip-category\">{{ data.category }}</span>\n  </div>\n\n  <div>\n    {{ chartConfig.xAxis.title }}:\n    <span class=\"font-weight-semibold\">{{ formatXAxisVal(data.xValue) }}</span>\n  </div>\n\n  <div>\n    {{ chartConfig.yAxis.title }}:\n    <span class=\"font-weight-semibold\">{{ data.yValue }}</span>\n  </div>\n\n  <div *ngIf=\"capacity\">\n    {{ capacity.title }}:\n    <span class=\"font-weight-semibold\">{{ capacity.value }}</span>\n  </div>\n</ng-template>\n","import { Component, Input, OnInit } from '@angular/core';\nimport { BusyConfig } from '@bmc-ux/adapt-angular';\nimport { RxModalService } from '@helix/platform/ui-kit';\nimport { TranslateService } from '@ngx-translate/core';\nimport { forEach, isEmpty, noop, omit } from 'lodash';\nimport moment from 'moment-es6';\nimport { RX_COGNITIVE_CONSUMPTION } from '../../cognitive-consumption.constant';\nimport { RxCognitiveConsumptionService } from '../../cognitive-consumption.service';\nimport {\n  ICognitiveConsumptionChart,\n  ICognitiveConsumptionGroup,\n  ICognitiveConsumptionGroupData,\n  ICognitiveLicenseUsage,\n  ICognitiveLicenseUsageCount,\n  ICognitiveLicenseUsageParams\n} from '../../cognitive-consumption.types';\nimport { CognitiveConsumptionNotificationModalComponent } from '../cognitive-consumption-notification-modal/cognitive-consumption-notification-modal.component';\n\n@Component({\n  selector: 'rx-cognitive-consumption-group',\n  templateUrl: './cognitive-consumption-group.component.html',\n  styleUrls: ['./cognitive-consumption-group.component.scss']\n})\nexport class CognitiveConsumptionGroupComponent implements OnInit {\n  @Input()\n  group: ICognitiveConsumptionGroup;\n\n  @Input()\n  isAdministrator: boolean;\n\n  @Input()\n  sectionId: string;\n\n  busy: BusyConfig['busy'];\n  charts: ICognitiveConsumptionChart[];\n  groupData: ICognitiveConsumptionGroupData;\n  licenceUsageCount: ICognitiveLicenseUsageCount[];\n\n  parameters: ICognitiveLicenseUsageParams = {\n    startDate: '',\n    endDate: moment().format('YYYY-MM'),\n    countType: RX_COGNITIVE_CONSUMPTION.settings.countType\n  };\n\n  constructor(\n    private rxModalService: RxModalService,\n    private rxCognitiveConsumptionService: RxCognitiveConsumptionService,\n    private translateService: TranslateService\n  ) {}\n\n  ngOnInit() {\n    this.generateCognitiveConsumptionGroup();\n  }\n\n  generateCognitiveConsumptionGroup(): void {\n    this.licenceUsageCount = [];\n    this.groupData = omit(this.group, ['charts']);\n\n    this.parameters.startDate = moment(this.parameters.endDate, 'YYYY-MM')\n      .add(-1 * 36, 'months')\n      .format('YYYY-MM');\n\n    this.busy = this.rxCognitiveConsumptionService\n      .getCognitiveLicenseUsage(RX_COGNITIVE_CONSUMPTION.settings.licenseType, this.group.id, this.parameters)\n      .subscribe((licenseUsage: ICognitiveLicenseUsage) => {\n        forEach(licenseUsage.licenseUsageCount, (licenseUsageCount) => {\n          if (licenseUsageCount && !isEmpty(licenseUsageCount.count)) {\n            this.licenceUsageCount.push(licenseUsageCount);\n          }\n        });\n      });\n  }\n\n  onNotificationsClick(): void {\n    this.rxModalService\n      .openModal({\n        title: this.translateService.instant(\n          'com.bmc.arsys.rx.client.admin.cognitive-consumption-group.add-edit-notifications.title'\n        ),\n        content: CognitiveConsumptionNotificationModalComponent,\n        size: 'rx-lg',\n        data: {\n          groupId: this.group.id\n        }\n      })\n      .catch(noop);\n  }\n}\n","<button\n  *ngIf=\"isAdministrator\"\n  class=\"d-icon-envelope_o mb-4\"\n  adapt-button\n  btn-type=\"tertiary\"\n  type=\"button\"\n  rx-id=\"notifications-button\"\n  (click)=\"onNotificationsClick()\"\n>\n  {{ 'com.bmc.arsys.rx.client.admin.cognitive-consumption-group.notifications.label' | translate }}\n</button>\n\n<div class=\"d-flex flex-row flex-wrap\">\n  <div class=\"card mb-4 mr-4 placeholder\" *ngFor=\"let chart of group.charts\">\n    <div class=\"card-block p-4\">\n      <rx-busy-indicator [options]=\"{ busy: busy, loaderType: 'section' }\"></rx-busy-indicator>\n\n      <div *ngIf=\"licenceUsageCount.length\">\n        <rx-cognitive-consumption-chart\n          [chart]=\"chart\"\n          [groupData]=\"groupData\"\n          [licenceUsageCount]=\"licenceUsageCount\"\n        ></rx-cognitive-consumption-chart>\n      </div>\n\n      <div *ngIf=\"!licenceUsageCount.length\">\n        <h5 class=\"m-0\">{{ chart.title | translate }}</h5>\n        <div class=\"mt-6 pt-4\">\n          <adapt-empty-state\n            type=\"chart\"\n            label=\"{{ 'com.bmc.arsys.rx.client.empty-state.no-data-to-display.label' | translate }}\"\n          ></adapt-empty-state>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n","import { Component, OnInit, QueryList, ViewChildren } from '@angular/core';\nimport { Subscription } from 'rxjs';\nimport { filter, find, includes, noop } from 'lodash';\nimport { AdaptModalService } from '@bmc-ux/adapt-angular';\nimport { ILicenseDataPageResult, RxCurrentUserService, RxLicenseDataPageService } from '@helix/platform/shared/api';\nimport { RX_COGNITIVE_CONSUMPTION } from './cognitive-consumption.constant';\nimport { ChartGroup, ICognitiveConsumptionSection } from './cognitive-consumption.types';\nimport { DownloadReportModalComponent } from './components/download-report-modal/download-report-modal.component';\nimport { CognitiveConsumptionGroupComponent } from './components/cognitive-consumption-group/cognitive-consumption-group.component';\nimport { TranslateService } from '@ngx-translate/core';\n\n@Component({\n  selector: 'rx-admin-cognitive-consumption',\n  templateUrl: './cognitive-consumption.component.html'\n})\nexport class CognitiveConsumptionAdminComponent implements OnInit {\n  @ViewChildren(CognitiveConsumptionGroupComponent)\n  cognitiveConsumptionGroups: QueryList<CognitiveConsumptionGroupComponent>;\n\n  busy: Subscription;\n  isAdministrator: boolean;\n  sectionIds: string[];\n  sections: ICognitiveConsumptionSection[];\n\n  constructor(\n    private adaptModalService: AdaptModalService,\n    private rxLicenseDataPageService: RxLicenseDataPageService,\n    private rxCurrentUserService: RxCurrentUserService,\n    private translateService: TranslateService\n  ) {}\n\n  ngOnInit() {\n    this.isAdministrator = this.rxCurrentUserService.isAdministrator();\n\n    this.busy = this.rxLicenseDataPageService\n      .get({\n        params: {\n          startIndex: -1,\n          pageSize: 0,\n          propertySelection: ['name', 'serviceLicensedCount'].join(',')\n        }\n      })\n      .subscribe((result: ILicenseDataPageResult) => {\n        const isHelixCognitiveChatbotPerUserLicensed = find(result.data[0].serviceLicenseDescriptors, [\n          'name',\n          'HelixCognitiveChatbotPerUser'\n        ]).licensed;\n\n        this.sectionIds = [\n          isHelixCognitiveChatbotPerUserLicensed ? ChartGroup.ChatByUser : ChartGroup.Chat,\n          ChartGroup.Classify,\n          ChartGroup.Search\n        ];\n\n        this.sections = filter(RX_COGNITIVE_CONSUMPTION.sections, (section) => includes(this.sectionIds, section.id));\n      });\n  }\n\n  onDownloadClick(): void {\n    this.adaptModalService\n      .open({\n        title: this.translateService.instant(\n          'com.bmc.arsys.rx.client.admin.cognitive-consumption.download-csv-file.title'\n        ),\n        type: 'default',\n        size: 'sm',\n        content: DownloadReportModalComponent,\n        data: {\n          sectionIds: this.sectionIds\n        }\n      })\n      .catch(noop);\n  }\n\n  onRefreshClick(): void {\n    this.cognitiveConsumptionGroups.forEach((cognitiveConsumptionGroup) => {\n      cognitiveConsumptionGroup.generateCognitiveConsumptionGroup();\n    });\n  }\n}\n","<rx-admin-settings\n  header=\"{{ 'com.bmc.arsys.rx.client.admin.cognitive-consumption.header.title' | translate }}\"\n  [busy]=\"busy\"\n>\n  <div class=\"mb-4\">\n    <button\n      class=\"d-icon-refresh_adapt\"\n      adapt-button\n      btn-type=\"tertiary\"\n      type=\"button\"\n      rx-id=\"refresh-button\"\n      (click)=\"onRefreshClick()\"\n    >\n      {{ 'com.bmc.arsys.rx.client.common.refresh.label' | translate }}\n    </button>\n\n    <button\n      class=\"d-icon-download_csv\"\n      adapt-button\n      btn-type=\"tertiary\"\n      type=\"button\"\n      rx-id=\"download-button\"\n      (click)=\"onDownloadClick()\"\n    >\n      {{ 'com.bmc.arsys.rx.client.common.download.label' | translate }}\n    </button>\n  </div>\n\n  <div *ngFor=\"let section of sections\">\n    <h4 class=\"m-0 mb-4\">{{ section.title | translate }}</h4>\n\n    <rx-cognitive-consumption-group\n      *ngFor=\"let group of section.groups\"\n      [group]=\"group\"\n      [sectionId]=\"section.id\"\n      [isAdministrator]=\"isAdministrator\"\n    >\n    </rx-cognitive-consumption-group>\n  </div>\n</rx-admin-settings>\n","import { ComponentFactoryResolver, NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport {\n  AdaptButtonModule,\n  AdaptEmptyStateModule,\n  AdaptModalModule,\n  AdaptRxCounterModule,\n  AdaptRxDatetimeModule,\n  AdaptRxListBuilderModule,\n  AdaptRxRadiobuttonModule\n} from '@bmc-ux/adapt-angular';\nimport { AdaptChartsModule } from '@bmc-ux/adapt-charts';\nimport { RX_APPLICATION } from '@helix/platform/shared/api';\nimport { RxBusyIndicatorModule, RxDirectivesModule } from '@helix/platform/ui-kit';\nimport { RxViewComponentRegistryService } from '@helix/platform/view/api';\nimport { RecordGridModule } from '@helix/platform/view/components';\nimport { AdminSettingsModule } from '@helix/platform/shared/components';\nimport { CognitiveConsumptionAdminComponent } from './cognitive-consumption.component';\nimport { CognitiveConsumptionChartComponent } from './components/cognitive-consumption-chart/cognitive-consumption-chart.component';\nimport { CognitiveConsumptionGroupComponent } from './components/cognitive-consumption-group/cognitive-consumption-group.component';\nimport { CognitiveConsumptionNotificationHistoryModalComponent } from './components/cognitive-consumption-notification-history-modal/cognitive-consumption-notification-history-modal.component';\nimport { CognitiveConsumptionNotificationModalComponent } from './components/cognitive-consumption-notification-modal/cognitive-consumption-notification-modal.component';\nimport { DownloadReportModalComponent } from './components/download-report-modal/download-report-modal.component';\nimport { TranslateModule, TranslateService } from '@ngx-translate/core';\n\n@NgModule({\n  declarations: [\n    CognitiveConsumptionAdminComponent,\n    CognitiveConsumptionChartComponent,\n    CognitiveConsumptionGroupComponent,\n    CognitiveConsumptionNotificationHistoryModalComponent,\n    CognitiveConsumptionNotificationModalComponent,\n    DownloadReportModalComponent\n  ],\n  imports: [\n    AdaptButtonModule,\n    AdaptChartsModule,\n    AdaptEmptyStateModule,\n    AdaptModalModule,\n    AdaptRxCounterModule,\n    AdaptRxDatetimeModule,\n    AdaptRxListBuilderModule,\n    AdaptRxRadiobuttonModule,\n    AdminSettingsModule,\n    CommonModule,\n    RecordGridModule,\n    RxBusyIndicatorModule,\n    RxDirectivesModule,\n    FormsModule,\n    TranslateModule\n  ],\n  entryComponents: [\n    CognitiveConsumptionAdminComponent,\n    CognitiveConsumptionNotificationHistoryModalComponent,\n    CognitiveConsumptionNotificationModalComponent,\n    DownloadReportModalComponent\n  ]\n})\nexport class CognitiveConsumptionRegistrationModule {\n  constructor(\n    private componentFactoryResolver: ComponentFactoryResolver,\n    private rxViewComponentRegistryService: RxViewComponentRegistryService\n  ) {\n    rxViewComponentRegistryService.register({\n      type: 'rx-admin-cognitive-consumption',\n      componentFactory: this.componentFactoryResolver.resolveComponentFactory(CognitiveConsumptionAdminComponent),\n      name: 'Cognitive consumption',\n      isPageComponent: true,\n      availableInBundles: [RX_APPLICATION.settingsBundleId]\n    });\n  }\n}\n","export const RX_COGNITIVE_SEARCH = {\n  definitionName: 'Cognitive Service Data Set Descriptor',\n  resourceType: 'com.bmc.arsys.rx.services.cognitive.domain.SearchDataSource',\n  queryExpression: \"'1732' = 2 AND '61001' = \",\n  defaultLocale: 'en',\n  maxCollectionsPerProject: 5,\n\n  datasetTypes: {\n    bmcHelixPlatForm: 0,\n    external: 10\n  },\n\n  searchDatasetTypeOptions: [\n    {\n      displayName: 'com.bmc.arsys.rx.client.admin.cognitive-search.bmc-helix-platform-data-set.label',\n      datasetType: 0\n    },\n    {\n      displayName: 'com.bmc.arsys.rx.client.admin.cognitive-search.external-data-set.label',\n      datasetType: 10\n    }\n  ],\n\n  externalDatasetSourceTypes: {\n    rkm: '10',\n    other: '20'\n  },\n\n  fields: {\n    datasetId: 1730,\n    datasetName: 1731,\n    searchType: 1732,\n    datasetError: 1733,\n    dateLastSubmitted: 1735,\n    bundleId: 61001,\n    locale: 1737,\n    dataSource: 1738,\n    newDatasetId: 1740,\n    searchDatasetType: 1815,\n    externalDatasetSource: 1817,\n    confidenceThreshold: 1821,\n    projectId: 1832\n  },\n\n  datasetStatus: {\n    failed: {\n      id: 3,\n      label: 'com.bmc.arsys.rx.client.admin.cognitive-search.failed.label',\n      variant: 'danger'\n    },\n    inProgress: {\n      id: 5,\n      label: 'com.bmc.arsys.rx.client.admin.cognitive-search.in-progress.label',\n      variant: 'info'\n    },\n    created: {\n      id: 6,\n      label: 'com.bmc.arsys.rx.client.admin.cognitive-search.created.label',\n      variant: 'success'\n    }\n  },\n\n  templateFields: {\n    templateType: 1818\n  },\n\n  templateTypes: {\n    webChannel: '10',\n    nonWebChannel: '20'\n  },\n\n  templateDefinitionName: 'Cognitive Service Chatbot Knowledge Article Template',\n  templateAssociationDefinitionName:\n    'Cognitive Service Data Set To Cognitive Service Chatbot Knowledge Article Template'\n};\n","import { Injectable, Injector } from '@angular/core';\nimport { DataPage } from '@helix/platform/shared/api';\n\nconst dataPageType = 'com.bmc.arsys.rx.application.cognitive.datapage.CognitiveSearchProjectDataPageQuery';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class RxCognitiveSearchProjectDataPageService extends DataPage {\n  constructor(private injector: Injector) {\n    super(injector, dataPageType);\n  }\n}\n","import { Injectable, Injector } from '@angular/core';\nimport { DataPage } from '@helix/platform/shared/api';\n\nconst dataPageType = 'com.bmc.arsys.rx.application.cognitive.datapage.CognitiveSearchCollectionDataPageQuery';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class RxCognitiveSearchCollectionDataPageService extends DataPage {\n  constructor(private injector: Injector) {\n    super(injector, dataPageType);\n  }\n}\n","import { Component, Injector, OnInit } from '@angular/core';\nimport { AbstractControl, FormBuilder, FormGroup, ValidationErrors } from '@angular/forms';\nimport {\n  Alert,\n  ColorVariantType,\n  DismissReasons,\n  DockedPanelContext,\n  RxSelectOption,\n  LoaderType,\n  BusyConfig\n} from '@bmc-ux/adapt-angular';\nimport {\n  IRxRecordInstanceAssociationInstances,\n  RecordInstance,\n  RX_RECORD_DEFINITION,\n  RxRecordInstanceService\n} from '@helix/platform/record/api';\nimport { RxBundleCacheService, RxNotificationService } from '@helix/platform/shared/api';\nimport { IDefinitionPickerComponentOptions, RxDefinitionPickerType } from '@helix/platform/shared/components';\nimport { TranslateService } from '@ngx-translate/core';\nimport { find, set } from 'lodash';\nimport moment from 'moment-es6';\nimport { RX_COGNITIVE_SEARCH } from '../cognitive-search.constant';\nimport { RxModalClass } from '@helix/platform/ui-kit';\nimport { RxCognitiveSearchProjectDataPageService } from '../cognitive-search-project-data-page.service';\nimport { RxCognitiveSearchCollectionDataPageService } from '../cognitive-search-collection-data-page.service';\nimport { ICognitiveSearchData } from '../cognitive-search.interfaces';\nimport {\n  distinctUntilChanged,\n  filter,\n  map,\n  shareReplay,\n  startWith,\n  switchMap,\n  tap,\n  withLatestFrom\n} from 'rxjs/operators';\nimport { forkJoin, Observable } from 'rxjs';\n\n@Component({\n  selector: 'rx-cognitive-search-editor',\n  templateUrl: './cognitive-search-editor.component.html'\n})\nexport class CognitiveSearchEditorAdminComponent extends RxModalClass implements OnInit {\n  searchDatasetForm: FormGroup;\n  isEditMode: boolean;\n  statusAlert: Alert;\n  failedReasonAlert: Alert;\n  busyConfig: BusyConfig;\n  projects$: Observable<ICognitiveSearchData[]>;\n  collections$: Observable<ICognitiveSearchData[]>;\n\n  externalDatasetSourceOptions: RxSelectOption[] = [\n    {\n      value: '10',\n      displayValue: this.translateService.instant('com.bmc.arsys.rx.client.admin.cognitive-search.rkm.label')\n    },\n    {\n      value: '20',\n      displayValue: this.translateService.instant('com.bmc.arsys.rx.client.admin.cognitive-search.other.label')\n    }\n  ];\n\n  options: IDefinitionPickerComponentOptions = {\n    label: this.translateService.instant('com.bmc.arsys.rx.client.common.record-definition-name.label'),\n    definitionType: RxDefinitionPickerType.Record,\n    required: true\n  };\n\n  searchLocaleOptions: string[] = ['en', 'ar', 'fr', 'de', 'ja', 'it', 'pt', 'es'];\n  private datasetType: number;\n  private recordInstance: RecordInstance;\n  private formatDataSource: (dataSource: string) => string;\n\n  constructor(\n    private formBuilder: FormBuilder,\n    private dockedPanelContext: DockedPanelContext,\n    private rxRecordInstanceService: RxRecordInstanceService,\n    private rxNotificationService: RxNotificationService,\n    private rxBundleCacheService: RxBundleCacheService,\n    private rxCognitiveSearchProjectDataPageService: RxCognitiveSearchProjectDataPageService,\n    private rxCognitiveSearchCollectionDataPageService: RxCognitiveSearchCollectionDataPageService,\n    private translateService: TranslateService,\n    protected injector: Injector\n  ) {\n    super(dockedPanelContext, injector);\n  }\n\n  ngOnInit() {\n    super.ngOnInit();\n    this.isEditMode = this.dockedPanelContext.getData().isEditMode;\n    this.datasetType = this.dockedPanelContext.getData().datasetType;\n    this.formatDataSource = this.dockedPanelContext.getData().formatDataSource;\n\n    this.searchDatasetForm = this.formBuilder.group({\n      datasetName: null,\n      description: null,\n      locale: [],\n      recordDefinition: null,\n      projectId: [],\n      collectionId: [],\n      externalDatasetSource: [],\n      confidenceThreshold: 0\n    });\n\n    this.collections$ = this.searchDatasetForm.controls.projectId.valueChanges.pipe(\n      distinctUntilChanged(),\n      map((selection: ICognitiveSearchData[]) => (this.isExternalDataset() ? selection?.[0] : null)),\n      filter(Boolean),\n      switchMap((project: ICognitiveSearchData) =>\n        this.rxCognitiveSearchCollectionDataPageService.get({\n          params: { projectId: project.id }\n        })\n      ),\n      map((dataPage) => dataPage.data.sort((a, b) => a.name.localeCompare(b.name)) as ICognitiveSearchData[]),\n      startWith([]),\n      tap((collections) => {\n        if (!this.isEditMode && this.isExternalDataset()) {\n          this.searchDatasetForm.controls.collectionId.setValue([]);\n          collections.length\n            ? this.searchDatasetForm.controls.collectionId.enable()\n            : this.searchDatasetForm.controls.collectionId.disable();\n        }\n      })\n    );\n\n    this.projects$ = this.rxCognitiveSearchProjectDataPageService.get().pipe(\n      map((dataPage) => dataPage.data.sort((a, b) => a.name.localeCompare(b.name)) as ICognitiveSearchData[]),\n      startWith([]),\n      shareReplay(1),\n      tap(() => {\n        if (!this.isEditMode) {\n          this.searchDatasetForm.controls.projectId.enable();\n        }\n      }),\n      map((projects) =>\n        !this.isEditMode && this.isHelixPlatformDataset()\n          ? projects.filter((project) => project.collectionCount < RX_COGNITIVE_SEARCH.maxCollectionsPerProject)\n          : projects\n      )\n    );\n\n    if (this.isEditMode) {\n      this.searchDatasetForm.get('datasetName').disable();\n      this.searchDatasetForm.get('description').disable();\n      this.searchDatasetForm.get('locale').disable();\n      this.searchDatasetForm.get('recordDefinition').disable();\n      this.searchDatasetForm.get('projectId').disable();\n      this.searchDatasetForm.get('collectionId').disable();\n      this.searchDatasetForm.get('externalDatasetSource').disable();\n\n      const recordInstance$ = this.rxRecordInstanceService\n        .get(RX_COGNITIVE_SEARCH.definitionName, this.dockedPanelContext.getData().recordId)\n        .pipe(tap((recordInstance) => (this.recordInstance = recordInstance)));\n\n      const subscription = forkJoin([recordInstance$, this.projects$])\n        .pipe(\n          switchMap(([recordInstance, projects]) => {\n            const projectId = recordInstance.fieldInstances[RX_COGNITIVE_SEARCH.fields.projectId].value;\n            const project = projects.find((project) => project.id === projectId);\n\n            if (project) {\n              this.searchDatasetForm.controls.projectId.setValue([project]);\n            } else {\n              this.searchDatasetForm.controls.projectId.setValue(\n                [\n                  {\n                    name: this.translateService.instant(\n                      'com.bmc.arsys.rx.client.admin.cognitive-search.project-not-found.label'\n                    ),\n                    id: projectId\n                  }\n                ],\n                { emitEvent: false }\n              );\n            }\n\n            return project\n              ? this.rxCognitiveSearchCollectionDataPageService.get({ params: { projectId } })\n              : this.rxCognitiveSearchCollectionDataPageService.getEmptyDataPage();\n          }),\n          map((dataPage) => dataPage.data as ICognitiveSearchData[]),\n          withLatestFrom(recordInstance$)\n        )\n        .subscribe(([collections, recordInstance]) => {\n          const collectionId = recordInstance.fieldInstances[RX_COGNITIVE_SEARCH.fields.datasetId].value;\n          const selectedCollection = collections.find((collection) => collection.id === collectionId);\n\n          this.searchDatasetForm.controls.collectionId.setValue([\n            selectedCollection || {\n              name: this.translateService.instant(\n                'com.bmc.arsys.rx.client.admin.cognitive-search.collection-not-found.label'\n              ),\n              id: collectionId\n            }\n          ]);\n\n          this.setFormControlValues();\n        });\n\n      this.busyConfig = {\n        busy: subscription,\n        loaderType: LoaderType.SECTION,\n        message: 'Loading'\n      };\n    } else {\n      this.searchDatasetForm.get('locale').setValue([this.searchLocaleOptions[0]]);\n      this.searchDatasetForm.get('confidenceThreshold').setValue(0);\n      this.searchDatasetForm.get('projectId').disable();\n      this.searchDatasetForm.get('collectionId').disable();\n\n      if (this.isHelixPlatformDataset()) {\n        this.searchDatasetForm.get('externalDatasetSource').disable();\n      } else if (this.isExternalDataset()) {\n        this.searchDatasetForm.get('recordDefinition').disable();\n\n        this.searchDatasetForm\n          .get('externalDatasetSource')\n          .setValue([\n            find(this.externalDatasetSourceOptions, { value: RX_COGNITIVE_SEARCH.externalDatasetSourceTypes.rkm })\n          ]);\n      }\n\n      this.rxRecordInstanceService\n        .getNew(RX_COGNITIVE_SEARCH.definitionName)\n        .subscribe((recordInstance: RecordInstance) => (this.recordInstance = recordInstance));\n    }\n  }\n\n  isDirty(): boolean {\n    return this.searchDatasetForm.dirty;\n  }\n\n  isHelixPlatformDataset(): boolean {\n    return this.datasetType === RX_COGNITIVE_SEARCH.datasetTypes.bmcHelixPlatForm;\n  }\n\n  isExternalDataset(): boolean {\n    return this.datasetType === RX_COGNITIVE_SEARCH.datasetTypes.external;\n  }\n\n  private setFormControlValues(): void {\n    const status = find(RX_COGNITIVE_SEARCH.datasetStatus, {\n      id: this.recordInstance.fieldInstances[RX_RECORD_DEFINITION.coreFieldIds.status].value\n    });\n\n    this.statusAlert = {\n      content: this.translateService.instant(status.label),\n      type: 'inline',\n      variant: status.variant as ColorVariantType\n    };\n\n    this.failedReasonAlert = this.recordInstance.fieldInstances[RX_COGNITIVE_SEARCH.fields.datasetError].value\n      ? {\n          content: this.recordInstance.fieldInstances[RX_COGNITIVE_SEARCH.fields.datasetError].value,\n          type: 'page',\n          variant: 'warning',\n          dismissible: false\n        }\n      : null;\n\n    this.searchDatasetForm\n      .get('datasetName')\n      .setValue(this.recordInstance.fieldInstances[RX_COGNITIVE_SEARCH.fields.datasetName].value);\n\n    this.searchDatasetForm\n      .get('description')\n      .setValue(this.recordInstance.fieldInstances[RX_RECORD_DEFINITION.coreFieldIds.description].value);\n\n    this.searchDatasetForm\n      .get('locale')\n      .setValue([this.recordInstance.fieldInstances[RX_COGNITIVE_SEARCH.fields.locale].value]);\n\n    if (this.isHelixPlatformDataset()) {\n      this.searchDatasetForm\n        .get('recordDefinition')\n        .setValue(\n          this.formatDataSource(this.recordInstance.fieldInstances[RX_COGNITIVE_SEARCH.fields.dataSource].value)\n        );\n    } else if (this.isExternalDataset()) {\n      this.searchDatasetForm.get('externalDatasetSource').setValue([\n        find(this.externalDatasetSourceOptions, {\n          value: String(this.recordInstance.fieldInstances[RX_COGNITIVE_SEARCH.fields.externalDatasetSource].value)\n        })\n      ]);\n    }\n\n    this.searchDatasetForm\n      .get('confidenceThreshold')\n      .setValue(this.recordInstance.fieldInstances[RX_COGNITIVE_SEARCH.fields.confidenceThreshold].value);\n  }\n\n  optionFormatter(option: RxSelectOption): string {\n    return option.displayValue || option.name;\n  }\n\n  thresholdRangeValidator(): (control: AbstractControl) => ValidationErrors | null {\n    return (control: AbstractControl) => {\n      return control.value && !/^(0(\\.[0-9]{1,6})?)|^(1(\\.0{1,6})?)$/.test(control.value)\n        ? {\n            thresholdOutOfRange: {\n              message: this.translateService.instant(\n                'com.bmc.arsys.rx.client.admin.cognitive-search.range-validation.message'\n              )\n            }\n          }\n        : null;\n    };\n  }\n\n  saveSearchDataset(): void {\n    this.searchDatasetForm.markAsPristine();\n\n    if (!this.isEditMode) {\n      this.recordInstance.fieldInstances[RX_COGNITIVE_SEARCH.fields.searchType].value = this.translateService.instant(\n        'com.bmc.arsys.rx.client.common.search.label'\n      );\n\n      this.recordInstance.setFieldValue(\n        RX_RECORD_DEFINITION.coreFieldIds.status,\n        RX_COGNITIVE_SEARCH.datasetStatus.inProgress.id\n      );\n\n      this.recordInstance.setFieldValue(\n        RX_RECORD_DEFINITION.coreFieldIds.description,\n        this.searchDatasetForm.get('description').value\n      );\n\n      this.recordInstance.setFieldValue(RX_COGNITIVE_SEARCH.fields.datasetId, '');\n\n      this.recordInstance.fieldInstances[RX_COGNITIVE_SEARCH.fields.datasetId].value =\n        this.recordInstance.setFieldValue(\n          RX_COGNITIVE_SEARCH.fields.datasetName,\n          this.searchDatasetForm.get('datasetName').value\n        );\n\n      this.recordInstance.setFieldValue(RX_COGNITIVE_SEARCH.fields.bundleId, this.rxBundleCacheService.bundleId);\n\n      this.recordInstance.setFieldValue(\n        RX_COGNITIVE_SEARCH.fields.locale,\n        this.searchDatasetForm.get('locale').value[0]\n      );\n\n      this.recordInstance.setFieldValue(RX_COGNITIVE_SEARCH.fields.dateLastSubmitted, moment());\n      this.recordInstance.setFieldValue(RX_COGNITIVE_SEARCH.fields.searchDatasetType, this.datasetType);\n\n      this.recordInstance.setFieldValue(RX_COGNITIVE_SEARCH.fields.projectId, [\n        this.searchDatasetForm.get('projectId').value[0].id\n      ]);\n\n      if (this.isExternalDataset()) {\n        this.recordInstance.setFieldValue(RX_COGNITIVE_SEARCH.fields.datasetId, [\n          this.searchDatasetForm.get('collectionId').value[0].id\n        ]);\n\n        this.recordInstance.setFieldValue(\n          RX_COGNITIVE_SEARCH.fields.externalDatasetSource,\n          this.searchDatasetForm.get('externalDatasetSource').value[0].value\n        );\n      } else if (this.isHelixPlatformDataset()) {\n        this.recordInstance.setFieldValue(\n          RX_COGNITIVE_SEARCH.fields.dataSource,\n          JSON.stringify({\n            resourceType: RX_COGNITIVE_SEARCH.resourceType,\n            recordDefinitions: [this.searchDatasetForm.get('recordDefinition').value]\n          })\n        );\n      }\n\n      this.recordInstance.associationInstances = this.prepareAssociatedRecordInstance(\n        this.recordInstance.fieldInstances[RX_COGNITIVE_SEARCH.fields.datasetName].value\n      );\n    }\n\n    this.recordInstance.setFieldValue(\n      RX_COGNITIVE_SEARCH.fields.confidenceThreshold,\n      this.searchDatasetForm.get('confidenceThreshold').value\n    );\n\n    if (this.isEditMode) {\n      this.rxRecordInstanceService.save(this.recordInstance).subscribe(() => this.successCallback());\n    } else {\n      this.rxRecordInstanceService.create(this.recordInstance).subscribe(() => this.successCallback());\n    }\n  }\n\n  private successCallback(): void {\n    this.rxNotificationService.addSuccessMessage(\n      this.translateService.instant(\n        'com.bmc.arsys.rx.client.admin.cognitive-search.search-data-save-successful.message'\n      )\n    );\n\n    this.dockedPanelContext.close(null);\n  }\n\n  private prepareAssociatedRecordInstance(datasetName: string): IRxRecordInstanceAssociationInstances {\n    const associationOperations = set({}, 'nodeB', {\n      pending: [\n        {\n          recordDefinitionName: RX_COGNITIVE_SEARCH.templateDefinitionName,\n          isNewInstance: true,\n          id: RX_COGNITIVE_SEARCH.templateFields.templateType,\n          fieldInstances: {\n            [RX_COGNITIVE_SEARCH.templateFields.templateType]: {\n              id: RX_COGNITIVE_SEARCH.templateFields.templateType,\n              value: RX_COGNITIVE_SEARCH.templateTypes.webChannel\n            },\n            [RX_RECORD_DEFINITION.coreFieldIds.description]: {\n              id: RX_RECORD_DEFINITION.coreFieldIds.description,\n              value: 'Template for ' + datasetName\n            }\n          }\n        },\n        {\n          recordDefinitionName: RX_COGNITIVE_SEARCH.templateDefinitionName,\n          isNewInstance: true,\n          id: RX_COGNITIVE_SEARCH.templateFields.templateType,\n          fieldInstances: {\n            [RX_COGNITIVE_SEARCH.templateFields.templateType]: {\n              id: RX_COGNITIVE_SEARCH.templateFields.templateType,\n              value: RX_COGNITIVE_SEARCH.templateTypes.nonWebChannel\n            },\n            [RX_RECORD_DEFINITION.coreFieldIds.description]: {\n              id: RX_RECORD_DEFINITION.coreFieldIds.description,\n              value: 'Template for ' + datasetName\n            }\n          }\n        }\n      ]\n    });\n\n    return set({}, RX_COGNITIVE_SEARCH.templateAssociationDefinitionName, associationOperations);\n  }\n\n  cancel(): void {\n    this.dockedPanelContext.dismiss(DismissReasons.CLOSE_BTN);\n  }\n}\n","<div class=\"dp-body\" [ngBusy]=\"busyConfig\">\n  <div class=\"mb-1\" *ngIf=\"isEditMode && statusAlert\">\n    <label class=\"form-control-label\">\n      {{ 'com.bmc.arsys.rx.client.admin.cognitive-search.status.label' | translate }}\n    </label>\n    <adapt-alert [config]=\"statusAlert\"></adapt-alert>\n  </div>\n\n  <div class=\"mb-1\" *ngIf=\"isEditMode && failedReasonAlert\">\n    <label class=\"form-control-label\">\n      {{ 'com.bmc.arsys.rx.client.common.error.label' | translate }}\n    </label>\n    <adapt-alert [config]=\"failedReasonAlert\"></adapt-alert>\n  </div>\n\n  <form [formGroup]=\"searchDatasetForm\">\n    <adapt-rx-textfield\n      class=\"form-group d-block\"\n      rx-id=\"dataset-name\"\n      label=\"{{ 'com.bmc.arsys.rx.client.admin.cognitive-search.data-set-name.label' | translate }}\"\n      formControlName=\"datasetName\"\n      required=\"true\"\n    >\n    </adapt-rx-textfield>\n\n    <adapt-rx-textfield\n      class=\"form-group d-block\"\n      rx-id=\"description\"\n      label=\"{{ 'com.bmc.arsys.rx.client.common.description.label' | translate }}\"\n      formControlName=\"description\"\n      required=\"true\"\n    >\n    </adapt-rx-textfield>\n\n    <adapt-rx-select\n      class=\"form-group d-block\"\n      label=\"{{ 'com.bmc.arsys.rx.client.admin.cognitive-search.locale.label' | translate }}\"\n      rx-id=\"locale\"\n      formControlName=\"locale\"\n      [options]=\"searchLocaleOptions\"\n      required=\"true\"\n    >\n    </adapt-rx-select>\n\n    <adapt-rx-select\n      class=\"form-group d-block\"\n      label=\"{{ 'com.bmc.arsys.rx.client.admin.cognitive-search.project-id.label' | translate }}\"\n      rx-id=\"project-id\"\n      formControlName=\"projectId\"\n      [options]=\"projects$ | async\"\n      [optionFormatter]=\"optionFormatter\"\n      required=\"true\"\n      [tooltip]=\"\n        isHelixPlatformDataset()\n          ? {\n              iconName: 'question_circle_o',\n              content: 'com.bmc.arsys.rx.client.admin.cognitive-search.project-id.tooltip' | translate,\n              placement: 'right',\n              popoverMode: true\n            }\n          : null\n      \"\n    >\n    </adapt-rx-select>\n\n    <rx-definition-picker\n      *ngIf=\"isHelixPlatformDataset()\"\n      class=\"form-group d-block\"\n      [options]=\"options\"\n      formControlName=\"recordDefinition\"\n      rx-id=\"record-definition\"\n      required=\"true\"\n    >\n    </rx-definition-picker>\n\n    <adapt-rx-select\n      *ngIf=\"isExternalDataset()\"\n      class=\"form-group d-block\"\n      rx-id=\"collection-id\"\n      label=\"{{ 'com.bmc.arsys.rx.client.admin.cognitive-search.collection-id.label' | translate }}\"\n      formControlName=\"collectionId\"\n      [options]=\"collections$ | async\"\n      [optionFormatter]=\"optionFormatter\"\n      required=\"true\"\n    >\n    </adapt-rx-select>\n\n    <adapt-rx-select\n      *ngIf=\"isExternalDataset()\"\n      class=\"form-group d-block\"\n      label=\"{{ 'com.bmc.arsys.rx.client.admin.cognitive-search.external-data-set-source.label' | translate }}\"\n      rx-id=\"external-data-set-source\"\n      formControlName=\"externalDatasetSource\"\n      [options]=\"externalDatasetSourceOptions\"\n      [optionFormatter]=\"optionFormatter\"\n      required=\"true\"\n    >\n    </adapt-rx-select>\n\n    <adapt-rx-counter\n      adaptRange\n      class=\"form-group d-block\"\n      rx-id=\"confidence-threshold\"\n      label=\"{{ 'com.bmc.arsys.rx.client.admin.cognitive-search.confidence-threshold.label' | translate }}\"\n      [max]=\"1\"\n      [min]=\"0\"\n      [formControl]=\"searchDatasetForm.controls.confidenceThreshold\"\n      [rxCustomValidators]=\"thresholdRangeValidator()\"\n      [step]=\"0.1\"\n      [tooltip]=\"{\n        iconName: 'question_circle_o',\n        content: popoverContent,\n        placement: 'right',\n        popoverMode: true\n      }\"\n    >\n    </adapt-rx-counter>\n  </form>\n</div>\n\n<div class=\"dp-footer\">\n  <button\n    type=\"button\"\n    adapt-button\n    btn-type=\"primary\"\n    rx-id=\"save-button\"\n    class=\"mr-2\"\n    [disabled]=\"searchDatasetForm.pristine || searchDatasetForm.invalid\"\n    (click)=\"saveSearchDataset()\"\n  >\n    {{ 'com.bmc.arsys.rx.client.common.save.label' | translate }}\n  </button>\n\n  <button type=\"button\" adapt-button (click)=\"cancel()\" btn-type=\"secondary\" rx-id=\"cancel-button\">Cancel</button>\n</div>\n\n<ng-template #popoverContent>\n  <div\n    style=\"white-space: pre-wrap\"\n    [innerHTML]=\"'com.bmc.arsys.rx.client.admin.cognitive-search.data-set-range.tooltip' | translate\"\n  ></div>\n</ng-template>\n","import { Component, ElementRef, OnInit, TemplateRef, ViewChild } from '@angular/core';\nimport { FormBuilder } from '@angular/forms';\nimport { DataCellTemplateParams } from '@bmc-ux/adapt-table';\nimport {\n  RX_RECORD_DEFINITION,\n  RxRecordInstanceService,\n  RxRecordInstanceDataPageService\n} from '@helix/platform/record/api';\nimport {\n  IDataPageResult,\n  RxBundleCacheService,\n  RxCurrentUserService,\n  RxDefinitionNameService,\n  RxNotificationService\n} from '@helix/platform/shared/api';\nimport { RX_MODAL, RxModalService } from '@helix/platform/ui-kit';\nimport { IRowDataItem } from '@helix/platform/view/api';\nimport {\n  IRecordGridColumn,\n  IRecordGridConfig,\n  IRecordGridDataPageParams,\n  RecordGridComponent,\n  RowSelectionMode\n} from '@helix/platform/view/components';\nimport { TranslateService } from '@ngx-translate/core';\nimport { find, map, noop, omit } from 'lodash';\nimport { forkJoin, Observable, of } from 'rxjs';\nimport { CognitiveSearchEditorAdminComponent } from './cognitive-search-editor/cognitive-search-editor.component';\nimport { RX_COGNITIVE_SEARCH } from './cognitive-search.constant';\nimport { ISearchDataset } from './cognitive-search.interfaces';\nimport { BaseViewComponent } from '@helix/platform/view/runtime';\n\n@Component({\n  selector: 'rx-cognitive-search',\n  templateUrl: './cognitive-search.component.html'\n})\nexport class CognitiveSearchAdminComponent extends BaseViewComponent implements OnInit {\n  gridConfig: Observable<IRecordGridConfig>;\n  searchDatasetTypes: ISearchDataset[];\n\n  @ViewChild('grid', { static: true })\n  grid: RecordGridComponent;\n\n  @ViewChild('dropdownButton', { static: true })\n  dropdownButton: ElementRef;\n\n  @ViewChild('searchDatasetConfigurationTemplate', { static: true })\n  searchDatasetConfigurationTemplate: TemplateRef<any>;\n\n  @ViewChild('definitionNameCellTemplate', { static: true })\n  definitionNameCellTemplate: TemplateRef<DataCellTemplateParams>;\n\n  @ViewChild('datasetTypeTemplate', { static: true })\n  datasetTypeTemplate: TemplateRef<DataCellTemplateParams>;\n\n  isAdministrator: boolean = this.rxCurrentUserService.isAdministrator();\n\n  constructor(\n    private formBuilder: FormBuilder,\n    private rxModalService: RxModalService,\n    private rxCurrentUserService: RxCurrentUserService,\n    private rxBundleCacheService: RxBundleCacheService,\n    private rxNotificationService: RxNotificationService,\n    private rxRecordInstanceService: RxRecordInstanceService,\n    private rxDefinitionNameService: RxDefinitionNameService,\n    private translateService: TranslateService,\n    private rxRecordInstanceDataPageService: RxRecordInstanceDataPageService\n  ) {\n    super();\n  }\n\n  ngOnInit(): void {\n    this.searchDatasetTypes = RX_COGNITIVE_SEARCH.searchDatasetTypeOptions.map((dataSetType) => ({\n      ...dataSetType,\n      displayName: this.translateService.instant(dataSetType.displayName)\n    }));\n\n    this.gridConfig = of({\n      actionButtons: [\n        {\n          label: this.translateService.instant('com.bmc.arsys.rx.client.common.delete.label'),\n          style: 'tertiary',\n          icon: 'trash',\n          actions: [\n            {\n              name: this.deleteSearchDataset.bind(this)\n            }\n          ]\n        }\n      ],\n      enableFiltering: true,\n      recordDefinitionName: RX_COGNITIVE_SEARCH.definitionName,\n      enableRowSelection: RowSelectionMode.Multiple,\n      getData: (queryParams: IRecordGridDataPageParams) => this.getData(queryParams),\n      columns: this.getColumns(),\n      filterExpression: `${RX_COGNITIVE_SEARCH.queryExpression} \"${this.rxBundleCacheService.bundleId}\"`,\n      styles: 'flex-fill'\n    });\n  }\n\n  private getData(queryParams: IRecordGridDataPageParams): Observable<IDataPageResult> {\n    return this.rxRecordInstanceDataPageService.post({\n      params: {\n        ...omit(queryParams, ['searchText'])\n      }\n    });\n  }\n\n  createNewSearchDataset(datasetType: number): void {\n    this.openCognitiveSearchEditor(false, datasetType);\n  }\n\n  editSearchDataset(selectedRecord: IRowDataItem): void {\n    if (!this.isAdministrator) {\n      this.rxNotificationService.addWarningMessage(\n        this.translateService.instant('com.bmc.arsys.rx.client.admin.cognitive-search.warning.message')\n      );\n    } else {\n      this.openCognitiveSearchEditor(\n        true,\n        selectedRecord[RX_COGNITIVE_SEARCH.fields.searchDatasetType],\n        selectedRecord[RX_RECORD_DEFINITION.coreFieldIds.id]\n      );\n    }\n  }\n\n  private deleteSearchDataset(): void {\n    this.rxModalService\n      .confirm({\n        title: this.translateService.instant('com.bmc.arsys.rx.client.common.warning.label'),\n        modalStyle: RX_MODAL.modalStyles.warning,\n        message: this.translateService.instant(\n          'com.bmc.arsys.rx.client.admin.cognitive-search.delete-confirmation.message'\n        )\n      })\n      .then((result: boolean) => {\n        if (result) {\n          const deleteRequests$: Observable<any>[] = [];\n\n          map(this.grid.api.getSelectedRows(), (record) => {\n            deleteRequests$.push(\n              this.rxRecordInstanceService.delete(\n                RX_COGNITIVE_SEARCH.definitionName,\n                record[RX_RECORD_DEFINITION.coreFieldIds.id]\n              )\n            );\n          });\n\n          forkJoin(deleteRequests$).subscribe(() => {\n            this.rxNotificationService.addSuccessMessage(\n              this.translateService.instant('com.bmc.arsys.rx.client.admin.cognitive-search.data-set-deletion.message')\n            );\n\n            this.grid.api.refresh().subscribe();\n          });\n        }\n      });\n  }\n\n  formatDataSource(dataSource: string): string {\n    return dataSource\n      ? map(JSON.parse(dataSource).recordDefinitions, (recordDefinitionName) =>\n          this.rxDefinitionNameService.getDisplayName(recordDefinitionName)\n        ).join(', ')\n      : '';\n  }\n\n  getDatasetType(searchDatasetType: number): string {\n    return find(this.searchDatasetTypes, { datasetType: searchDatasetType }).displayName;\n  }\n\n  private getColumns(): IRecordGridColumn[] {\n    return [\n      {\n        index: 0,\n        fieldId: String(RX_COGNITIVE_SEARCH.fields.datasetName),\n        title: this.translateService.instant('com.bmc.arsys.rx.client.admin.cognitive-search.data-set-name.label'),\n        clickable: true,\n        actions: [\n          {\n            name: (previousAction: any, selectedRow: IRowDataItem) => {\n              this.editSearchDataset(selectedRow);\n            }\n          }\n        ]\n      },\n      {\n        index: 1,\n        fieldId: String(RX_RECORD_DEFINITION.coreFieldIds.status),\n        title: this.translateService.instant('com.bmc.arsys.rx.client.admin.cognitive-search.status.label')\n      },\n      {\n        index: 2,\n        fieldId: String(RX_RECORD_DEFINITION.coreFieldIds.description),\n        title: this.translateService.instant('com.bmc.arsys.rx.client.common.description.label')\n      },\n      {\n        index: 3,\n        fieldId: String(RX_COGNITIVE_SEARCH.fields.searchDatasetType),\n        title: this.translateService.instant('com.bmc.arsys.rx.client.admin.cognitive-search.type.title'),\n        cellTemplate: this.datasetTypeTemplate\n      },\n      {\n        index: 4,\n        fieldId: String(RX_COGNITIVE_SEARCH.fields.locale),\n        title: this.translateService.instant('com.bmc.arsys.rx.client.admin.cognitive-search.locale.label')\n      },\n      {\n        index: 5,\n        fieldId: String(RX_COGNITIVE_SEARCH.fields.dataSource),\n        title: this.translateService.instant('com.bmc.arsys.rx.client.common.record-definition.label'),\n        cellTemplate: this.definitionNameCellTemplate\n      },\n      {\n        index: 6,\n        fieldId: String(RX_COGNITIVE_SEARCH.fields.confidenceThreshold),\n        title: this.translateService.instant(\n          'com.bmc.arsys.rx.client.admin.cognitive-search.confidence-threshold.label'\n        )\n      },\n      {\n        index: 7,\n        fieldId: String(RX_COGNITIVE_SEARCH.fields.datasetId),\n        title: this.translateService.instant('com.bmc.arsys.rx.client.admin.cognitive-search.data-set-id.title'),\n        visible: false\n      },\n      {\n        index: 8,\n        fieldId: String(RX_RECORD_DEFINITION.coreFieldIds.modifiedDate),\n        title: this.translateService.instant('com.bmc.arsys.rx.client.admin.cognitive-search.date-modified.title'),\n        visible: false\n      },\n      {\n        index: 9,\n        fieldId: String(RX_COGNITIVE_SEARCH.fields.searchType),\n        title: this.translateService.instant('com.bmc.arsys.rx.client.admin.cognitive-search.search-type.title'),\n        visible: false\n      },\n      {\n        index: 10,\n        fieldId: String(RX_RECORD_DEFINITION.coreFieldIds.displayId),\n        title: this.translateService.instant('com.bmc.arsys.rx.client.admin.cognitive-search.request-id.title'),\n        visible: false\n      },\n      {\n        index: 11,\n        fieldId: String(RX_RECORD_DEFINITION.coreFieldIds.id),\n        title: this.translateService.instant('com.bmc.arsys.rx.client.admin.cognitive-search.instance-id.title'),\n        visible: false\n      },\n      {\n        index: 12,\n        fieldId: String(RX_COGNITIVE_SEARCH.fields.datasetError),\n        title: this.translateService.instant('com.bmc.arsys.rx.client.common.error.label'),\n        visible: false\n      },\n      {\n        index: 13,\n        fieldId: String(RX_COGNITIVE_SEARCH.fields.projectId),\n        title: this.translateService.instant('com.bmc.arsys.rx.client.admin.cognitive-search.project-id.title'),\n        visible: false\n      }\n    ];\n  }\n\n  private openCognitiveSearchEditor(isEditMode: boolean, datasetType: number, recordId?: string): Promise<any> {\n    return this.rxModalService\n      .openDockedPanel({\n        title: this.translateService.instant(\n          'com.bmc.arsys.rx.client.admin.cognitive-search.cognitive-search-data-set.title'\n        ),\n        content: CognitiveSearchEditorAdminComponent,\n        data: {\n          isEditMode,\n          datasetType,\n          formatDataSource: this.formatDataSource.bind(this),\n          recordId\n        }\n      })\n      .then(() => {\n        this.grid.api.refresh().subscribe();\n      })\n      .catch(noop);\n  }\n}\n","<rx-admin-settings header=\"{{ 'com.bmc.arsys.rx.client.admin.cognitive-search.header.title' | translate }}\">\n  <ng-container>\n    <div class=\"dropdown\" adaptDropdown>\n      <button\n        adapt-button\n        #dropdownButton\n        adaptDropdownToggle\n        type=\"button\"\n        btn-type=\"tertiary\"\n        class=\"d-icon-plus_circle align-self-start\"\n        rx-id=\"new-button\"\n      >\n        {{ 'com.bmc.arsys.rx.client.common.new.label' | translate }}\n      </button>\n\n      <div class=\"dropdown-menu\" adaptDropdownMenu>\n        <button\n          *ngFor=\"let dataset of searchDatasetTypes\"\n          class=\"dropdown-item\"\n          (click)=\"createNewSearchDataset(dataset.datasetType)\"\n          [disabled]=\"!isAdministrator\"\n        >\n          {{ dataset.displayName | translate }}\n        </button>\n      </div>\n    </div>\n\n    <rx-record-grid #grid [config]=\"gridConfig\"></rx-record-grid>\n  </ng-container>\n</rx-admin-settings>\n\n<ng-template #definitionNameCellTemplate let-dataItem=\"dataItem\" let-column=\"column\">\n  {{ formatDataSource(dataItem[column.field]) }}\n</ng-template>\n\n<ng-template #datasetTypeTemplate let-dataItem=\"dataItem\" let-column=\"column\">\n  {{ getDatasetType(dataItem[column.field]) }}\n</ng-template>\n","import { ComponentFactoryResolver, NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { RxViewComponentRegistryService } from '@helix/platform/view/api';\nimport { RX_APPLICATION } from '@helix/platform/shared/api';\nimport { CognitiveSearchEditorAdminComponent } from './cognitive-search-editor/cognitive-search-editor.component';\nimport { CognitiveSearchAdminComponent } from './cognitive-search.component';\nimport { TranslateModule } from '@ngx-translate/core';\nimport {\n  AdaptAlertModule,\n  AdaptButtonModule,\n  AdaptDropdownModule,\n  AdaptRxCounterModule,\n  AdaptRxLabelModule,\n  AdaptRxSelectModule,\n  AdaptRxTextfieldModule,\n  AdaptRxValidatorsModule,\n  AdaptBusyModule\n} from '@bmc-ux/adapt-angular';\nimport { ReactiveFormsModule } from '@angular/forms';\nimport { AdminSettingsModule } from '@helix/platform/shared/components';\nimport { RecordGridModule } from '@helix/platform/view/components';\nimport { RxDefinitionPickerModule } from '@helix/platform/shared/components';\nimport { RxDirectivesModule } from '@helix/platform/ui-kit';\n\n@NgModule({\n  declarations: [CognitiveSearchAdminComponent, CognitiveSearchEditorAdminComponent],\n  imports: [\n    CommonModule,\n    AdaptButtonModule,\n    AdaptDropdownModule,\n    AdaptRxCounterModule,\n    AdaptRxSelectModule,\n    AdaptRxTextfieldModule,\n    ReactiveFormsModule,\n    RecordGridModule,\n    RxDirectivesModule,\n    RxDefinitionPickerModule,\n    TranslateModule,\n    AdminSettingsModule,\n    AdaptRxLabelModule,\n    AdaptRxValidatorsModule,\n    AdaptAlertModule,\n    AdaptBusyModule\n  ],\n  entryComponents: [CognitiveSearchAdminComponent]\n})\nexport class CognitiveSearchRegistrationModule {\n  constructor(\n    private componentFactoryResolver: ComponentFactoryResolver,\n    private rxViewComponentRegistryService: RxViewComponentRegistryService\n  ) {\n    rxViewComponentRegistryService.register({\n      type: 'rx-admin-cognitive-search',\n      componentFactory: this.componentFactoryResolver.resolveComponentFactory(CognitiveSearchAdminComponent),\n      name: 'Cognitive search',\n      isPageComponent: true,\n      availableInBundles: [RX_APPLICATION.settingsBundleId]\n    });\n  }\n}\n","const passwordMask = '********';\nconst urlPattern = /^((http[s]?):\\/)\\/?([^:\\/\\s]+)((\\/\\w+)*\\/)?([\\w\\-\\.]+[^#?\\s]+)(.*)?(#[\\w\\-]+)?$/;\n\nexport const RX_COGNITIVE_SERVICE = {\n  passwordMask: passwordMask,\n  credentialsProvider: 'WATSON',\n  nativeProvider: 'NATIVE',\n  chatbot: {\n    chatContextVariablesProcessName: 'chatContextVariablesProcessName',\n    systemSettings: {\n      chatSessionIdleTimeout: 900,\n      chatUserIdleTimeout: 30,\n      chatbotNotificationsIdleTime: 900,\n      chatbotNotificationsMaxTime: 3600,\n      chatContextVariablesProcessName: '',\n      removePoweredByBmcHelix: 0\n    }\n  },\n  cognitiveAdministrationCredentials: {\n    systemSettingsKey: 'cognitiveAdminTenantCredential',\n    cognitiveAdminPlatformApiKey: 'cognitiveAdminPlatformApiKey',\n    payload: {\n      WATSON: {\n        cognitiveAdminPlatformApiKey: passwordMask\n      }\n    }\n  },\n  connections: {\n    systemSettingKeys: {\n      helixPortalUrl: 'helixPortalUrl',\n      helixServiceCredential: 'helixServiceCredential',\n      cognitiveServiceCredential: 'cognitiveServiceCredential',\n      classificationServiceProvider: 'classificationServiceProvider',\n      translationServiceProvider: 'translationServiceProvider',\n      serviceAccountCredential: 'gcpServiceCredential',\n      google: 'gcpTranslationServiceCredential',\n      microsoft: 'microsoftServiceCredential'\n    },\n    cognitiveServiceCredentialKeys: {\n      classification: 'naturalLanguageClassifierAPIKey',\n      discovery: 'searchAPIKey',\n      toneAnalyzer: 'toneAnalyzerAPIKey'\n    },\n    payload: {\n      helixClassifierKey: '',\n      helixClassifierSecret: '',\n      naturalLanguageClassifierAPIKey: '',\n      searchAPIKey: '',\n      toneAnalyzerAPIKey: '',\n      serviceAccountCredentials: '',\n      apiKey: ''\n    },\n    serviceDefinitions: {\n      helixClassifier: {\n        id: 'helixClassifier',\n        title: 'com.bmc.arsys.rx.client.admin.cognitive-service.helix-ade.title',\n        isOpen: true,\n        isApiKeyTest: true,\n        serviceType: 'NATURAL_LANGUAGE_CLASSIFIER',\n        fields: [\n          {\n            label: 'com.bmc.arsys.rx.client.admin.cognitive-service.helix-portal-url.label',\n            name: 'helixPortalUrl',\n            readonly: true,\n            type: 'text',\n            required: false\n          },\n          {\n            name: 'helixClassifierKey',\n            label: 'com.bmc.arsys.rx.client.admin.cognitive-service.access-key.label',\n            type: 'text',\n            required: true,\n            rxId: 'accessKey'\n          },\n          {\n            name: 'helixClassifierSecret',\n            label: 'com.bmc.arsys.rx.client.admin.cognitive-service.secret-key.label',\n            type: 'password',\n            required: true,\n            rxId: 'secretKey'\n          }\n        ]\n      },\n      classification: {\n        id: 'classification',\n        title: 'com.bmc.arsys.rx.client.admin.cognitive-service.ibm-watson-assistant.title',\n        model: 'naturalLanguageClassifierAPIKey',\n        isOpen: true,\n        isApiKeyTest: true,\n        serviceType: 'NATURAL_LANGUAGE_CLASSIFIER',\n        fields: [\n          {\n            name: 'naturalLanguageClassifierAPIKey',\n            label: 'com.bmc.arsys.rx.client.admin.cognitive-service.api-key.label',\n            type: 'password',\n            required: true,\n            rxId: 'api-key'\n          }\n        ]\n      },\n      serviceAccountCredentials: {\n        id: 'serviceAccountCredentials',\n        title: 'com.bmc.arsys.rx.client.admin.cognitive-service.bmc-native.title',\n        model: 'serviceAccountCredentials',\n        isOpen: true,\n        isApiKeyTest: true,\n        serviceType: 'NATURAL_LANGUAGE_CLASSIFIER',\n        fields: [\n          {\n            name: 'serviceAccountCredentials',\n            label: 'com.bmc.arsys.rx.client.admin.cognitive-service.service-account-credentials.api-key.label',\n            type: 'json',\n            required: true,\n            rxId: 'api-key',\n            jsonValidatorErrorMessage: 'Credentials are invalid.'\n          }\n        ]\n      },\n      discovery: {\n        id: 'discovery',\n        title: 'com.bmc.arsys.rx.client.admin.cognitive-service.ibm-watson-discovery.title',\n        model: 'searchAPIKey',\n        isOpen: false,\n        isApiKeyTest: true,\n        serviceType: 'SEARCH',\n        fields: [\n          {\n            name: 'searchAPIKey',\n            label: 'com.bmc.arsys.rx.client.admin.cognitive-service.api-key.label',\n            type: 'password',\n            required: true,\n            rxId: 'api-key'\n          }\n        ]\n      },\n      toneAnalyzer: {\n        id: 'toneAnalyzer',\n        title: 'com.bmc.arsys.rx.client.admin.cognitive-service.ibm-watson-tone-analyzer.title',\n        model: 'toneAnalyzerAPIKey',\n        isOpen: false,\n        isApiKeyTest: true,\n        serviceType: 'TONE_ANALYZER',\n        fields: [\n          {\n            name: 'toneAnalyzerAPIKey',\n            label: 'com.bmc.arsys.rx.client.admin.cognitive-service.api-key.label',\n            type: 'password',\n            required: true,\n            rxId: 'api-key'\n          }\n        ]\n      },\n      microsoft: {\n        id: 'microsoft',\n        title: 'com.bmc.arsys.rx.client.admin.cognitive-service.microsoft-translator.title',\n        isOpen: false,\n        isApiKeyTest: false,\n        fields: [\n          {\n            name: 'apiKey',\n            label:\n              'com.bmc.arsys.rx.client.admin.cognitive-service.service-account-credentials.microsoft-azure-api-key.label',\n            type: 'password',\n            required: true,\n            rxId: 'microsoft-azure-api-key'\n          },\n          {\n            name: 'serviceURL',\n            label: 'com.bmc.arsys.rx.client.admin.cognitive-service.service-account-credentials.service-url.label',\n            type: 'text',\n            required: true,\n            pattern: urlPattern,\n            rxId: 'microsoft-translator-service-url'\n          },\n          {\n            name: 'authURL',\n            label: 'com.bmc.arsys.rx.client.admin.cognitive-service.service-account-credentials.oauth-url.label',\n            type: 'text',\n            required: true,\n            pattern: urlPattern,\n            rxId: 'microsoft-translator-oauth-url'\n          }\n        ]\n      },\n      google: {\n        id: 'google',\n        title: 'com.bmc.arsys.rx.client.admin.cognitive-service.google-translation.title',\n        model: 'apiKey',\n        isOpen: false,\n        isApiKeyTest: false,\n        fields: [\n          {\n            name: 'apiKey',\n            label: 'com.bmc.arsys.rx.client.admin.cognitive-service.google-cloud-service-key.label',\n            type: 'json',\n            required: true,\n            rxId: 'google-cloud-service-key',\n            jsonValidatorErrorMessage: 'Service key is invalid.'\n          }\n        ]\n      }\n    }\n  },\n  cognitiveServiceRegions: {\n    systemSettingsKey: 'cognitiveServiceRegionTenantConfiguration',\n    settings: [\n      { id: 'naturalLanguageClassifier', name: 'Natural language classification' },\n      { id: 'conversation', name: 'Chatbot' },\n      { id: 'search', name: 'Cognitive search' },\n      { id: 'toneAnalyzer', name: 'Tone analysis' }\n    ]\n  },\n  toneAnalyzer: {\n    systemSettingsKey: 'toneScoreThreshold'\n  },\n  summarization: {\n    systemSettingsKey: 'summarizationServiceTenantConfiguration'\n  },\n  onboard: {\n    cognitiveProvidersList: [\n      {\n        id: 'watson',\n        name: 'IBM Watson'\n      }\n    ],\n    providers: {\n      watson: 'WATSON'\n    },\n    providerServices: {\n      watson: {\n        naturalLanguageClassifier: {\n          id: 'naturalLanguageClassifier',\n          apiKeyPropertyName: 'naturalLanguageClassifierAPIKey',\n          regionPropertyName: 'naturalLanguageClassifierRegion',\n          switchLabel: 'com.bmc.arsys.rx.client.admin.cognitive-service.ibm-watson-assistant.title'\n        },\n        conversation: {\n          id: 'conversation',\n          apiKeyPropertyName: 'conversationAPIKey',\n          regionPropertyName: 'conversationRegion',\n          switchLabel: 'com.bmc.arsys.rx.client.admin.cognitive-service.ibm-watson-assistant-for-chatbot.message',\n          tooltipText: 'com.bmc.arsys.rx.client.admin.cognitive-service.provider.conversation.tooltip'\n        },\n        toneAnalyzer: {\n          id: 'toneAnalyzer',\n          apiKeyPropertyName: 'toneAnalyzerAPIKey',\n          regionPropertyName: 'toneAnalyzerRegion',\n          switchLabel: 'com.bmc.arsys.rx.client.admin.cognitive-service.ibm-watson-tone-analyzer.title'\n        }\n      }\n    }\n  },\n  cognitiveServicesList: [\n    {\n      id: 'chatbot',\n      name: 'com.bmc.arsys.rx.client.admin.chatbots.chatbot.title'\n    },\n    {\n      id: 'cognitiveAdministrationCredentials',\n      name: 'com.bmc.arsys.rx.client.admin.cognitive-service.cognitive-administration-credentials.title'\n    },\n    {\n      id: 'connections',\n      name: 'com.bmc.arsys.rx.client.admin.cognitive-service.cognitive-service-connections.title'\n    },\n    {\n      id: 'summarization',\n      name: 'com.bmc.arsys.rx.client.admin.summarization-service-configuration.title'\n    },\n    {\n      id: 'cognitiveServiceRegions',\n      name: 'com.bmc.arsys.rx.client.admin.cognitive-service.regions.title'\n    },\n    {\n      id: 'toneAnalyzerConfiguration',\n      name: 'com.bmc.arsys.rx.client.admin.cognitive-service.tone-analyzer.title'\n    }\n  ],\n  regionsList: [\n    {\n      id: 'EU_DE',\n      name: 'com.bmc.arsys.rx.client.admin.cognitive-service.region.germany.label'\n    },\n    {\n      id: 'AU_SYD',\n      name: 'com.bmc.arsys.rx.client.admin.cognitive-service.region.sydney.label'\n    },\n    {\n      id: 'US_EAST',\n      name: 'com.bmc.arsys.rx.client.admin.cognitive-service.region.us-east.label'\n    },\n    {\n      id: 'US_SOUTH',\n      name: 'com.bmc.arsys.rx.client.admin.cognitive-service.region.us-south.label'\n    },\n    {\n      id: 'EU_GB',\n      name: 'com.bmc.arsys.rx.client.admin.cognitive-service.region.uk.label'\n    }\n  ],\n  notificationMessages: {\n    chatProviderSettingsSaved:\n      'com.bmc.arsys.rx.client.admin.cognitive-service.provider.chat-provider-settings-saved.message',\n    cognitiveAdministrationCredentialsSaved:\n      'com.bmc.arsys.rx.client.admin.cognitive-service.provider.cognitive-administration-credentials-saved.message',\n    toneAnalyzerConfigurationSaved:\n      'com.bmc.arsys.rx.client.admin.cognitive-service.provider.tone-analyzer-configuration-saved.message',\n    serviceRegionConfigurationSaved:\n      'com.bmc.arsys.rx.client.admin.cognitive-service.provider.service-region-configuration-saved.message',\n    serviceConnectionSaved: 'com.bmc.arsys.rx.client.admin.cognitive-service.provider.service-connection-saved.message',\n    summarizationConfigurationSaved:\n      'com.bmc.arsys.rx.client.admin.cognitive-service.provider.summarization-configuration-saved.message',\n    serviceOnboarded: 'com.bmc.arsys.rx.client.admin.cognitive-service.provider.service-onboarded.message'\n  }\n};\n","import { Injectable, Injector } from '@angular/core';\nimport { DataPage } from '@helix/platform/shared/api';\n\nconst systemConfigurationDataPageQuery =\n  'com.bmc.arsys.rx.application.common.datapage.SystemConfigurationDataPageQuery';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class RxCognitiveServiceSystemConfigurationDataPageService extends DataPage {\n  constructor(private injector: Injector) {\n    super(injector, systemConfigurationDataPageQuery);\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\nimport { RxProcessDefinitionDataPageService } from '@helix/platform/process/api';\nimport { map as _map } from 'lodash';\nimport { map } from 'rxjs/operators';\nimport { Observable } from 'rxjs';\nimport { IDataPageResult, RX_APPLICATION, RX_RESOURCE_URLS } from '@helix/platform/shared/api';\nimport { RxCognitiveServiceSystemConfigurationDataPageService } from './cognitive-service-system-configuration-data-page.service';\nimport { RX_COGNITIVE_SERVICE } from './cognitive-service.constant';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class RxCognitiveServiceService {\n  constructor(\n    private httpClient: HttpClient,\n    private rxCognitiveServiceSystemConfigurationDataPageService: RxCognitiveServiceSystemConfigurationDataPageService,\n    private rxProcessDefinitionDataPageService: RxProcessDefinitionDataPageService\n  ) {}\n\n  filterMaskPassword(password: string): string {\n    return password === RX_COGNITIVE_SERVICE.passwordMask ? '' : password;\n  }\n\n  getChatbotProcessDefinitionNames(): Observable<string[]> {\n    return this.rxProcessDefinitionDataPageService\n      .get({\n        headers: {\n          'default-bundle-scope': RX_APPLICATION.chatbotBundleId\n        },\n        params: {\n          propertySelection: ['name']\n        }\n      })\n      .pipe(map((response: IDataPageResult) => _map(response.data, 'name')));\n  }\n\n  getSystemSettings(settingList: string[]): Observable<IDataPageResult> {\n    return this.rxCognitiveServiceSystemConfigurationDataPageService.get({\n      params: { name: settingList.join(',') }\n    });\n  }\n\n  testConnection(requestPayload: object): Observable<any> {\n    return this.httpClient.post(RX_RESOURCE_URLS.command, requestPayload);\n  }\n}\n","import { Component, Input, OnInit } from '@angular/core';\nimport { FormBuilder, FormGroup } from '@angular/forms';\nimport { cloneDeep, forEach, get, isArray, isEqual, keys } from 'lodash';\nimport { map } from 'rxjs/operators';\nimport { RX_COGNITIVE_SERVICE } from '../../cognitive-service.constant';\nimport { RxSelectOption, AdaptRxControlLabelTooltip } from '@bmc-ux/adapt-angular';\nimport {\n  RxDefinitionNameService,\n  RX_OVERLAY,\n  IUserOverlayGroupDescriptorChildren,\n  ISystemConfiguration,\n  RxNotificationService,\n  RxSystemConfigurationService\n} from '@helix/platform/shared/api';\nimport { RxCognitiveServiceService } from '../../cognitive-service.service';\nimport { IChatbotProvider } from '../../cognitive-service.interfaces';\nimport { forkJoin, Observable } from 'rxjs';\nimport { TranslateService } from '@ngx-translate/core';\n\n@Component({\n  selector: 'rx-cognitive-service-chatbot',\n  templateUrl: './cognitive-service-chatbot.component.html',\n  styleUrls: ['./cognitive-service-chatbot.component.scss']\n})\nexport class CognitiveServiceChatbotComponent implements OnInit {\n  constructor(\n    private formBuilder: FormBuilder,\n    private rxCognitiveServiceService: RxCognitiveServiceService,\n    private rxDefinitionNameService: RxDefinitionNameService,\n    private rxNotificationService: RxNotificationService,\n    private rxSystemConfigurationService: RxSystemConfigurationService,\n    private translateService: TranslateService\n  ) {}\n\n  @Input()\n  isAdministrator: boolean;\n\n  @Input()\n  currentOverlayContext: IUserOverlayGroupDescriptorChildren;\n\n  chatbotProvidersForm: FormGroup;\n  initialChatbotProviderValues: IChatbotProvider = cloneDeep(RX_COGNITIVE_SERVICE.chatbot.systemSettings);\n  chatbotProcessDefinitionNameOptions: RxSelectOption[] = [];\n  private defaultSelection = this.translateService.instant('com.bmc.arsys.rx.client.common.select.label');\n\n  approverSelectionTooltip: AdaptRxControlLabelTooltip = {\n    popoverMode: true,\n    iconName: 'question_circle_o',\n    placement: 'right',\n    content: this.translateService.instant(\n      'com.bmc.arsys.rx.client.admin.cognitive-service-component.user-idle.tooltip'\n    )\n  };\n\n  chatbotNotificationsIdleTimeTooltip: AdaptRxControlLabelTooltip = {\n    popoverMode: true,\n    iconName: 'question_circle_o',\n    placement: 'right',\n    content: this.translateService.instant(\n      'com.bmc.arsys.rx.client.admin.cognitive-service-component.proactive-chatbot-notifications-idle-time.tooltip'\n    )\n  };\n\n  chatbotNotificationsMaxTimeTooltip: AdaptRxControlLabelTooltip = {\n    popoverMode: true,\n    iconName: 'question_circle_o',\n    placement: 'right',\n    content: this.translateService.instant(\n      'com.bmc.arsys.rx.client.admin.cognitive-service-component.proactive-chatbot-notifications-max-time.tooltip'\n    )\n  };\n\n  ngOnInit(): void {\n    this.chatbotProvidersForm = this.formBuilder.group({\n      chatSessionIdleTimeout: RX_COGNITIVE_SERVICE.chatbot.systemSettings.chatSessionIdleTimeout,\n      chatUserIdleTimeout: RX_COGNITIVE_SERVICE.chatbot.systemSettings.chatUserIdleTimeout,\n      chatContextVariablesProcessName: [],\n      chatbotNotificationsIdleTime: RX_COGNITIVE_SERVICE.chatbot.systemSettings.chatbotNotificationsIdleTime,\n      chatbotNotificationsMaxTime: RX_COGNITIVE_SERVICE.chatbot.systemSettings.chatbotNotificationsMaxTime,\n      removePoweredByBmcHelix: RX_COGNITIVE_SERVICE.chatbot.systemSettings.removePoweredByBmcHelix\n    });\n\n    forkJoin({\n      processDefinitionNameOptions: this.getProcessDefinitionNameOptions(),\n      settingsData: this.rxCognitiveServiceService.getSystemSettings(keys(RX_COGNITIVE_SERVICE.chatbot.systemSettings))\n    }).subscribe((result) => {\n      this.chatbotProcessDefinitionNameOptions = result.processDefinitionNameOptions;\n      this.loadChatbotSystemSettings(result.settingsData.data as ISystemConfiguration[]);\n    });\n  }\n\n  isFormDirty(): boolean {\n    return this.chatbotProvidersForm.dirty;\n  }\n\n  private getProcessDefinitionNameOptions(): Observable<RxSelectOption[]> {\n    return this.rxCognitiveServiceService.getChatbotProcessDefinitionNames().pipe(\n      map((processDefinitionNames) =>\n        processDefinitionNames.sort().map((processDefinitionName) => {\n          return {\n            id: processDefinitionName,\n            name: this.rxDefinitionNameService.getDisplayName(processDefinitionName)\n          };\n        })\n      )\n    );\n  }\n\n  private loadChatbotSystemSettings(settings: ISystemConfiguration[]): void {\n    forEach(settings, (setting) => {\n      let settingValue: RxSelectOption[] | number;\n\n      if (setting.name === RX_COGNITIVE_SERVICE.chatbot.chatContextVariablesProcessName) {\n        settingValue = [this.chatbotProcessDefinitionNameOptions.find((process) => process.id === setting.value)];\n      } else {\n        settingValue = setting.value as number;\n      }\n\n      this.setFormFieldValue(setting.name, settingValue);\n      this.initialChatbotProviderValues[setting.name] = settingValue;\n    });\n  }\n\n  private setFormFieldValue(name: string, value: RxSelectOption[] | number): void {\n    this.chatbotProvidersForm.controls[name].setValue(value);\n  }\n\n  setDefaultSessionIdleTimeout(): void {\n    if (\n      RX_COGNITIVE_SERVICE.chatbot.systemSettings.chatSessionIdleTimeout !==\n      this.chatbotProvidersForm.controls.chatSessionIdleTimeout.value\n    ) {\n      this.setFormFieldValue(\n        'chatSessionIdleTimeout',\n        RX_COGNITIVE_SERVICE.chatbot.systemSettings.chatSessionIdleTimeout\n      );\n\n      this.chatbotProvidersForm.markAsDirty();\n    }\n  }\n\n  setDefaultUserIdleTimeout(): void {\n    if (\n      RX_COGNITIVE_SERVICE.chatbot.systemSettings.chatUserIdleTimeout !==\n      this.chatbotProvidersForm.controls.chatUserIdleTimeout.value\n    ) {\n      this.setFormFieldValue('chatUserIdleTimeout', RX_COGNITIVE_SERVICE.chatbot.systemSettings.chatUserIdleTimeout);\n      this.chatbotProvidersForm.markAsDirty();\n    }\n  }\n\n  setDefaultChatbotNotificationsIdleTime(): void {\n    if (\n      RX_COGNITIVE_SERVICE.chatbot.systemSettings.chatbotNotificationsIdleTime !==\n      this.chatbotProvidersForm.controls.chatbotNotificationsIdleTime.value\n    ) {\n      this.setFormFieldValue(\n        'chatbotNotificationsIdleTime',\n        RX_COGNITIVE_SERVICE.chatbot.systemSettings.chatbotNotificationsIdleTime\n      );\n      this.chatbotProvidersForm.markAsDirty();\n    }\n  }\n\n  setDefaultChatbotNotificationsMaxTime(): void {\n    if (\n      RX_COGNITIVE_SERVICE.chatbot.systemSettings.chatbotNotificationsMaxTime !==\n      this.chatbotProvidersForm.controls.chatbotNotificationsMaxTime.value\n    ) {\n      this.setFormFieldValue(\n        'chatbotNotificationsMaxTime',\n        RX_COGNITIVE_SERVICE.chatbot.systemSettings.chatbotNotificationsMaxTime\n      );\n      this.chatbotProvidersForm.markAsDirty();\n    }\n  }\n\n  save(): void {\n    const formValue = this.chatbotProvidersForm.getRawValue();\n\n    const systemPropertyObservables = Object.keys(RX_COGNITIVE_SERVICE.chatbot.systemSettings).reduce(\n      (result, settingName) => {\n        let settingValue = formValue[settingName];\n\n        if (isArray(settingValue)) {\n          settingValue = settingValue[0]?.id ?? '';\n        }\n\n        if (!isEqual(this.initialChatbotProviderValues[settingName], settingValue)) {\n          result.push(this.rxSystemConfigurationService.setConfiguration(settingName, settingValue));\n        }\n\n        return result;\n      },\n      []\n    );\n\n    forkJoin(systemPropertyObservables).subscribe(() => {\n      this.rxNotificationService.addSuccessMessage(\n        this.translateService.instant(RX_COGNITIVE_SERVICE.notificationMessages.chatProviderSettingsSaved)\n      );\n\n      this.initialChatbotProviderValues = formValue;\n      this.chatbotProvidersForm.markAsPristine();\n    });\n  }\n\n  isSaveButtonDisabled(): boolean {\n    return this.chatbotProvidersForm.pristine || this.chatbotProvidersForm.invalid;\n  }\n\n  isSaveButtonVisible(): boolean {\n    return (\n      this.isAdministrator &&\n      this.currentOverlayContext.overlayGroupId !== RX_OVERLAY.overlayGroupIds.base &&\n      !this.currentOverlayContext.isShared\n    );\n  }\n\n  optionFormatter = (processDefinitionNameOption: RxSelectOption): string => {\n    return get(processDefinitionNameOption, 'name', this.defaultSelection);\n  };\n}\n","<form [formGroup]=\"chatbotProvidersForm\">\n  <adapt-accordion rx-id=\"accordion-chatbot-provider\">\n    <adapt-accordion-tab\n      title=\"{{ 'com.bmc.arsys.rx.client.admin.cognitive-service.chatbot.title' | translate }}\"\n      isOpen=\"true\"\n    >\n      <div class=\"chat-session-idle-timeout form-group\">\n        <adapt-rx-counter\n          adaptRange\n          [min]=\"300\"\n          [max]=\"1200\"\n          [adaptRange]=\"[300, 1200]\"\n          rx-id=\"chatbot-provider-chat-session-idle-time\"\n          [label]=\"'com.bmc.arsys.rx.client.admin.cognitive-service.chat-session-idle.label' | translate\"\n          required=\"true\"\n          [formControl]=\"chatbotProvidersForm.controls.chatSessionIdleTimeout\"\n          class=\"adapt-counter-prefix px-0 mr-2\"\n        >\n        </adapt-rx-counter>\n\n        <adapt-button\n          class=\"align-self-baseline\"\n          rx-id=\"chatbot-provider-default-chat-session-idle-time\"\n          btn-type=\"secondary\"\n          (click)=\"setDefaultSessionIdleTimeout()\"\n        >\n          {{ 'com.bmc.arsys.rx.client.common.default.label' | translate }}\n        </adapt-button>\n      </div>\n\n      <div class=\"chat-session-idle-timeout form-group\">\n        <adapt-rx-counter\n          adaptRange\n          [min]=\"5\"\n          [max]=\"1200\"\n          [adaptRange]=\"[5, 1200]\"\n          rx-id=\"chatbot-provider-chat-user-idle-time\"\n          [label]=\"'com.bmc.arsys.rx.client.admin.cognitive-service.chat-user-idle.label' | translate\"\n          required=\"true\"\n          [formControl]=\"chatbotProvidersForm.controls.chatUserIdleTimeout\"\n          [tooltip]=\"approverSelectionTooltip\"\n          class=\"adapt-counter-prefix px-0 mr-2\"\n        >\n        </adapt-rx-counter>\n\n        <adapt-button\n          class=\"align-self-baseline\"\n          rx-id=\"chatbot-provider-default-chat-user-idle-time\"\n          btn-type=\"secondary\"\n          (click)=\"setDefaultUserIdleTimeout()\"\n        >\n          {{ 'com.bmc.arsys.rx.client.common.default.label' | translate }}\n        </adapt-button>\n      </div>\n\n      <adapt-rx-select\n        rx-id=\"chat-context-variables-process-name\"\n        formControlName=\"chatContextVariablesProcessName\"\n        label=\"Chat context variables process name\"\n        [options]=\"chatbotProcessDefinitionNameOptions\"\n        [optionFormatter]=\"optionFormatter\"\n        class=\"d-block form-group\"\n      ></adapt-rx-select>\n\n      <adapt-rx-control-label\n        label=\"{{\n          'com.bmc.arsys.rx.client.admin.cognitive-service.remove-powered-by-bmc-helix.label'\n            | translate: { poweredByBmcHelix: 'Powered by BMC Helix' }\n        }}\"\n      ></adapt-rx-control-label>\n\n      <adapt-rx-switch\n        [formControl]=\"chatbotProvidersForm.controls.removePoweredByBmcHelix\"\n        rx-id=\"remove-powered-by-bmc-helix\"\n        [isLabelBefore]=\"false\"\n      ></adapt-rx-switch>\n    </adapt-accordion-tab>\n\n    <adapt-accordion rx-id=\"accordion-proactive-chatbot-notifications\">\n      <adapt-accordion-tab\n        title=\"{{\n          'com.bmc.arsys.rx.client.admin.cognitive-service.proactive-chatbot-notifications.title' | translate\n        }}\"\n        isOpen=\"true\"\n      >\n        <div class=\"proactive-chatbot-notifications-idle-time form-group\">\n          <adapt-rx-counter\n            adaptRange\n            [min]=\"300\"\n            [max]=\"1200\"\n            [adaptRange]=\"[300, 1200]\"\n            rx-id=\"notifications-idle-time\"\n            [label]=\"\n              'com.bmc.arsys.rx.client.admin.cognitive-service.proactive-chatbot-notifications-idle-time.label'\n                | translate\n            \"\n            required=\"true\"\n            [formControl]=\"chatbotProvidersForm.controls.chatbotNotificationsIdleTime\"\n            [tooltip]=\"chatbotNotificationsIdleTimeTooltip\"\n            class=\"adapt-counter-prefix px-0 mr-2\"\n          >\n          </adapt-rx-counter>\n\n          <adapt-button\n            class=\"align-self-baseline\"\n            rx-id=\"notifications-idle-time-default-button\"\n            btn-type=\"secondary\"\n            (click)=\"setDefaultChatbotNotificationsIdleTime()\"\n          >\n            {{ 'com.bmc.arsys.rx.client.common.default.label' | translate }}\n          </adapt-button>\n        </div>\n\n        <div class=\"proactive-chatbot-notifications-max-time form-group\">\n          <adapt-rx-counter\n            adaptRange\n            [min]=\"120\"\n            [max]=\"3600\"\n            [adaptRange]=\"[120, 3600]\"\n            rx-id=\"notifications-max-time\"\n            [label]=\"\n              'com.bmc.arsys.rx.client.admin.cognitive-service.proactive-chatbot-notifications-max-time.label'\n                | translate\n            \"\n            required=\"true\"\n            [formControl]=\"chatbotProvidersForm.controls.chatbotNotificationsMaxTime\"\n            [tooltip]=\"chatbotNotificationsMaxTimeTooltip\"\n            class=\"adapt-counter-prefix px-0 mr-2\"\n          >\n          </adapt-rx-counter>\n\n          <adapt-button\n            class=\"align-self-baseline\"\n            rx-id=\"notifications-max-time-default-button\"\n            btn-type=\"secondary\"\n            (click)=\"setDefaultChatbotNotificationsMaxTime()\"\n          >\n            {{ 'com.bmc.arsys.rx.client.common.default.label' | translate }}\n          </adapt-button>\n        </div>\n      </adapt-accordion-tab>\n    </adapt-accordion>\n\n    <button\n      adapt-button\n      type=\"button\"\n      rx-id=\"save-button\"\n      btn-type=\"primary\"\n      class=\"mt-4\"\n      [disabled]=\"isSaveButtonDisabled()\"\n      *ngIf=\"isSaveButtonVisible()\"\n      (click)=\"save()\"\n    >\n      {{ 'com.bmc.arsys.rx.client.common.save.label' | translate }}\n    </button>\n  </adapt-accordion>\n</form>\n","import { Component, Input, OnInit } from '@angular/core';\nimport { FormBuilder, FormGroup } from '@angular/forms';\nimport { cloneDeep } from 'lodash';\nimport { RX_COGNITIVE_SERVICE } from '../../cognitive-service.constant';\nimport { RxCurrentUserService, RX_OVERLAY, IUserOverlayGroupDescriptorChildren } from '@helix/platform/shared/api';\nimport { RxCognitiveServiceService } from '../../cognitive-service.service';\nimport { RxNotificationService, RxSystemConfigurationService } from '@helix/platform/shared/api';\nimport { TranslateService } from '@ngx-translate/core';\n\n@Component({\n  selector: 'rx-cognitive-service-administration-credentials',\n  templateUrl: './cognitive-service-administration-credentials.component.html',\n  styleUrls: ['./cognitive-service-administration-credentials.component.scss']\n})\nexport class CognitiveServiceAdministrationCredentialsComponent implements OnInit {\n  @Input()\n  isAdministrator: boolean;\n\n  @Input()\n  currentOverlayContext: IUserOverlayGroupDescriptorChildren;\n\n  cognitiveAdministrationCredentialsProvidersForm: FormGroup;\n  watsonAdminCredentialsData: string;\n  cognitiveAdminPlatformApiKey: string;\n\n  constructor(\n    private formBuilder: FormBuilder,\n    private rxCognitiveServiceService: RxCognitiveServiceService,\n    private rxCurrentUserService: RxCurrentUserService,\n    private rxNotificationService: RxNotificationService,\n    private rxSystemConfigurationService: RxSystemConfigurationService,\n    private translateService: TranslateService\n  ) {}\n\n  ngOnInit(): void {\n    this.cognitiveAdministrationCredentialsProvidersForm = this.formBuilder.group({\n      cognitiveAdminPlatformApiKey: ''\n    });\n\n    this.loadSystemSettings();\n  }\n\n  isFormDirty(): boolean {\n    return this.cognitiveAdministrationCredentialsProvidersForm.dirty;\n  }\n\n  private loadSystemSettings(): void {\n    this.rxSystemConfigurationService\n      .getConfiguration(RX_COGNITIVE_SERVICE.cognitiveAdministrationCredentials.systemSettingsKey)\n      .subscribe((settingsData) => {\n        this.watsonAdminCredentialsData = JSON.parse(settingsData.value as string);\n        this.loadCognitiveAdminCredentialsValues();\n      });\n  }\n\n  private getWatsonAdminCredentialsData(property: string): string {\n    return this.watsonAdminCredentialsData[RX_COGNITIVE_SERVICE.credentialsProvider][property] || '';\n  }\n\n  private loadCognitiveAdminCredentialsValues(): void {\n    let apiKeyValue = '';\n\n    if (this.watsonAdminCredentialsData[RX_COGNITIVE_SERVICE.credentialsProvider]) {\n      apiKeyValue = this.getWatsonAdminCredentialsData(\n        RX_COGNITIVE_SERVICE.cognitiveAdministrationCredentials.cognitiveAdminPlatformApiKey\n      )\n        ? RX_COGNITIVE_SERVICE.passwordMask\n        : '';\n    }\n\n    this.cognitiveAdministrationCredentialsProvidersForm.controls.cognitiveAdminPlatformApiKey.setValue(apiKeyValue);\n  }\n\n  save(): void {\n    const newApiKey = this.cognitiveAdministrationCredentialsProvidersForm.value.cognitiveAdminPlatformApiKey;\n    const newCredentials = cloneDeep(RX_COGNITIVE_SERVICE.cognitiveAdministrationCredentials.payload);\n\n    newCredentials[RX_COGNITIVE_SERVICE.credentialsProvider][\n      RX_COGNITIVE_SERVICE.cognitiveAdministrationCredentials.cognitiveAdminPlatformApiKey\n    ] = this.rxCognitiveServiceService.filterMaskPassword(newApiKey);\n\n    this.rxSystemConfigurationService\n      .setConfiguration(\n        RX_COGNITIVE_SERVICE.cognitiveAdministrationCredentials.systemSettingsKey,\n        JSON.stringify(newCredentials)\n      )\n      .subscribe(() => {\n        this.rxNotificationService.addSuccessMessage(\n          this.translateService.instant(\n            RX_COGNITIVE_SERVICE.notificationMessages.cognitiveAdministrationCredentialsSaved\n          )\n        );\n\n        this.cognitiveAdministrationCredentialsProvidersForm.markAsPristine();\n      });\n  }\n\n  isSaveButtonDisabled(): boolean {\n    return (\n      this.cognitiveAdministrationCredentialsProvidersForm.pristine ||\n      this.cognitiveAdministrationCredentialsProvidersForm.invalid\n    );\n  }\n\n  isSaveButtonVisible(): boolean {\n    return (\n      this.isAdministrator &&\n      this.currentOverlayContext.overlayGroupId !== RX_OVERLAY.overlayGroupIds.base &&\n      !this.currentOverlayContext.isShared\n    );\n  }\n}\n","<form [formGroup]=\"cognitiveAdministrationCredentialsProvidersForm\">\n  <adapt-accordion>\n    <adapt-accordion-tab\n      title=\"{{\n        'com.bmc.arsys.rx.client.admin.cognitive-service.cognitive-administration-credentials.title' | translate\n      }}\"\n      isOpen=\"true\"\n    >\n      <div class=\"form-group\">\n        <adapt-rx-textfield\n          rx-id=\"platform-api-key\"\n          label=\"Platform API key\"\n          formControlName=\"cognitiveAdminPlatformApiKey\"\n          maxlength=\"254\"\n          required=\"true\"\n          [isPassword]=\"true\"\n          class=\"d-block\"\n        >\n        </adapt-rx-textfield>\n      </div>\n    </adapt-accordion-tab>\n    <button\n      adapt-button\n      type=\"button\"\n      rx-id=\"save-button\"\n      btn-type=\"primary\"\n      class=\"mt-4\"\n      [disabled]=\"isSaveButtonDisabled()\"\n      *ngIf=\"isSaveButtonVisible()\"\n      (click)=\"save()\"\n    >\n      {{ 'com.bmc.arsys.rx.client.common.save.label' | translate }}\n    </button>\n  </adapt-accordion>\n</form>\n","import { Component, Input, OnInit } from '@angular/core';\nimport { NgForm } from '@angular/forms';\nimport { KeyValueObject } from '@bmc-ux/adapt-angular';\nimport { RxJsonParserService } from '@helix/platform/utils';\nimport { assign, forIn, isEmpty, toLower, transform } from 'lodash';\nimport { RX_COGNITIVE_SERVICE } from '../../cognitive-service.constant';\nimport {\n  ISystemConfiguration,\n  IUserOverlayGroupDescriptorChildren,\n  MachineLearningProviderNames,\n  RX_OVERLAY,\n  RxCurrentUserService,\n  RxNotificationService,\n  RxSystemConfigurationService\n} from '@helix/platform/shared/api';\nimport { RxCognitiveServiceService } from '../../cognitive-service.service';\nimport { IConnectionTestPayload, ISettingPayload, IServiceDefinitionField } from '../../cognitive-service.interfaces';\nimport { forkJoin, throwError } from 'rxjs';\nimport { ConnectionTestStatus } from '@helix/platform/ui-kit';\nimport { catchError, finalize } from 'rxjs/operators';\nimport { HttpErrorResponse } from '@angular/common/http';\nimport { TranslateService } from '@ngx-translate/core';\n\n@Component({\n  selector: 'rx-cognitive-service-connections',\n  templateUrl: './cognitive-service-connections.component.html',\n  styleUrls: ['./cognitive-service-connections.component.scss']\n})\nexport class CognitiveServiceConnectionsComponent implements OnInit {\n  @Input()\n  isAdministrator: boolean;\n\n  @Input()\n  currentOverlayContext: IUserOverlayGroupDescriptorChildren;\n\n  @Input()\n  isNativeClassificationProvider: boolean;\n\n  connectionInfo = RX_COGNITIVE_SERVICE.connections.payload;\n  serviceDefinitions = RX_COGNITIVE_SERVICE.connections.serviceDefinitions;\n  realTimeTranslationProvider: string;\n  availableServicesList = [];\n  connectionTestStatusesByServiceId: KeyValueObject<ConnectionTestStatus> = {};\n  connectionTestStatus: ConnectionTestStatus = ConnectionTestStatus.Invalid;\n  isFormFieldChanged = false;\n\n  availableServices: KeyValueObject<boolean> = {\n    classification: true,\n    discovery: true,\n    toneAnalyzer: true\n  };\n\n  constructor(\n    private rxCognitiveServiceService: RxCognitiveServiceService,\n    private rxCurrentUserService: RxCurrentUserService,\n    private rxNotificationService: RxNotificationService,\n    private rxSystemConfigurationService: RxSystemConfigurationService,\n    private rxJsonParserService: RxJsonParserService,\n    private translateService: TranslateService\n  ) {}\n\n  ngOnInit(): void {\n    this.rxSystemConfigurationService\n      .queryConfiguration([\n        RX_COGNITIVE_SERVICE.connections.systemSettingKeys.cognitiveServiceCredential,\n        RX_COGNITIVE_SERVICE.connections.systemSettingKeys.classificationServiceProvider,\n        RX_COGNITIVE_SERVICE.connections.systemSettingKeys.translationServiceProvider,\n        RX_COGNITIVE_SERVICE.connections.systemSettingKeys.helixPortalUrl,\n        RX_COGNITIVE_SERVICE.connections.systemSettingKeys.helixServiceCredential\n      ])\n      .pipe(finalize(() => this.loadServices()))\n      .subscribe(\n        ([\n          cognitiveServiceCredential,\n          classificationServiceProvider,\n          translationServiceProvider,\n          helixPortalUrl,\n          helixServiceCredential\n        ]) => {\n          this.loadCognitiveSystemSettings(cognitiveServiceCredential);\n\n          if (classificationServiceProvider.value === MachineLearningProviderNames.Helix) {\n            this.loadHelixCognitiveSystemSettings(helixServiceCredential);\n            this.connectionInfo[helixPortalUrl.id] = helixPortalUrl.value;\n          }\n\n          this.loadClassificationServiceProvider(classificationServiceProvider);\n          this.loadRealTimeTranslationProviders(translationServiceProvider);\n        }\n      );\n  }\n\n  isFormDirty(): boolean {\n    return this.isFormFieldChanged;\n  }\n\n  private loadServices(): void {\n    this.availableServicesList = transform(\n      this.serviceDefinitions,\n      (result, value, key) => {\n        if (this.availableServices[key]) {\n          result.push(key);\n        }\n      },\n      []\n    );\n  }\n\n  private loadClassificationServiceProvider(provider: ISystemConfiguration): void {\n    if (this.isNativeClassificationProvider) {\n      this.availableServices[this.serviceDefinitions.classification.id] = false;\n      this.availableServices[this.serviceDefinitions.serviceAccountCredentials.id] = true;\n\n      this.rxSystemConfigurationService\n        .getConfiguration(RX_COGNITIVE_SERVICE.connections.systemSettingKeys.serviceAccountCredential)\n        .subscribe((settingData) => {\n          this.connectionInfo.serviceAccountCredentials = settingData.value as string;\n        });\n\n      return;\n    }\n\n    if (provider.value === MachineLearningProviderNames.Helix) {\n      this.availableServices[this.serviceDefinitions.classification.id] = false;\n      this.availableServices[this.serviceDefinitions.helixClassifier.id] = true;\n    }\n  }\n\n  private loadRealTimeTranslationProviders(settingsData: ISystemConfiguration): void {\n    const realTimeTranslationProvider = toLower(settingsData.value as string);\n\n    if (realTimeTranslationProvider) {\n      this.realTimeTranslationProvider = realTimeTranslationProvider;\n      this.availableServices[this.serviceDefinitions[realTimeTranslationProvider].id] = true;\n\n      this.rxSystemConfigurationService\n        .getConfiguration(RX_COGNITIVE_SERVICE.connections.systemSettingKeys[realTimeTranslationProvider])\n        .subscribe((settingData) => {\n          if (realTimeTranslationProvider === this.serviceDefinitions.google.id) {\n            this.connectionInfo.apiKey = settingData.value as string;\n          } else if (realTimeTranslationProvider === this.serviceDefinitions.microsoft.id) {\n            this.connectionInfo = assign(\n              this.connectionInfo,\n              this.rxJsonParserService.tryParseJson(settingData.value as string, {})\n            );\n          }\n        });\n    }\n  }\n\n  private loadHelixCognitiveSystemSettings(settingsData: ISystemConfiguration): void {\n    const credentials = this.rxJsonParserService.tryParseJson(settingsData.value as string);\n    this.connectionInfo.helixClassifierKey = credentials?.accessKey ?? '';\n    this.connectionInfo.helixClassifierSecret = credentials?.secretKey ?? '';\n  }\n\n  private loadCognitiveSystemSettings(settingsData: ISystemConfiguration): void {\n    const credentials = JSON.parse(settingsData.value as string)[RX_COGNITIVE_SERVICE.credentialsProvider];\n\n    if (credentials) {\n      forIn(credentials, (value, key) => {\n        this.connectionInfo[key] = credentials[key];\n      });\n    }\n  }\n\n  private isConnectionTestStatusInvalid(form: NgForm): boolean {\n    return (\n      !(\n        this.isAdministrator &&\n        this.currentOverlayContext.overlayGroupId !== RX_OVERLAY.overlayGroupIds.base &&\n        !this.currentOverlayContext.isShared\n      ) ||\n      form.invalid ||\n      form.pristine\n    );\n  }\n\n  private getConnectionTestPayload(serviceId: string, serviceForm: NgForm): IConnectionTestPayload {\n    const serviceDefinition = this.serviceDefinitions[serviceId];\n\n    if (!serviceDefinition.isApiKeyTest) {\n      const isGoogleServiceId = serviceId === this.serviceDefinitions.google.id;\n\n      return {\n        credential: isGoogleServiceId ? serviceForm.value[serviceDefinition.model] : JSON.stringify(serviceForm.value),\n        resourceType: 'com.bmc.arsys.rx.application.cognitive.command.PingTranslationServiceCommand'\n      };\n    }\n\n    // Get the fields that are supposed to be sent as credentials\n    const editableFields: IServiceDefinitionField[] = serviceDefinition.fields.filter(\n      (field: IServiceDefinitionField) => !field.readonly\n    );\n\n    if (editableFields.length === 1) {\n      // use the model name as the apiKey\n      return {\n        apiKey: serviceForm.value[serviceDefinition.model],\n        serviceType: serviceDefinition.serviceType,\n        resourceType: 'com.bmc.arsys.rx.application.cognitive.command.PingCognitiveServiceCommand'\n      };\n    }\n\n    // If more than one field, username and passowrd are required to test the connection\n    const [usernameField, passwordField] = editableFields.map((field: IServiceDefinitionField) => field.name);\n\n    return {\n      userName: serviceForm.value[usernameField],\n      password: serviceForm.value[passwordField],\n      serviceType: serviceDefinition.serviceType,\n      resourceType: 'com.bmc.arsys.rx.application.cognitive.command.PingCognitiveServiceCommand'\n    };\n  }\n\n  resetConnectionTest(serviceId: string, form: NgForm): void {\n    this.connectionTestStatus = ConnectionTestStatus.Unknown;\n    this.isFormFieldChanged = form.dirty;\n\n    this.connectionTestStatusesByServiceId[serviceId] = this.isConnectionTestStatusInvalid(form)\n      ? ConnectionTestStatus.Invalid\n      : ConnectionTestStatus.Unknown;\n  }\n\n  onTestConnection(serviceId: string, form: NgForm): void {\n    const connectionTestPayload = this.getConnectionTestPayload(serviceId, form);\n\n    this.rxCognitiveServiceService\n      .testConnection(connectionTestPayload)\n      .pipe(\n        catchError((error: HttpErrorResponse) => {\n          this.connectionTestStatusesByServiceId[serviceId] = ConnectionTestStatus.Failed;\n\n          return throwError(error);\n        })\n      )\n      .subscribe(() => {\n        this.connectionTestStatusesByServiceId[serviceId] = ConnectionTestStatus.Passed;\n        this.connectionTestStatus = ConnectionTestStatus.Passed;\n      });\n  }\n\n  save(): void {\n    const settingsPayload: ISettingPayload[] = [];\n\n    if (\n      this.isNativeClassificationProvider &&\n      this.connectionTestStatusesByServiceId[this.serviceDefinitions.serviceAccountCredentials.id] ===\n        ConnectionTestStatus.Passed &&\n      !(\n        this.connectionTestStatusesByServiceId[this.serviceDefinitions.classification.id] ===\n          ConnectionTestStatus.Passed ||\n        this.connectionTestStatusesByServiceId[this.serviceDefinitions.discovery.id] === ConnectionTestStatus.Passed ||\n        this.connectionTestStatusesByServiceId[this.serviceDefinitions.toneAnalyzer.id] ===\n          ConnectionTestStatus.Passed ||\n        (this.realTimeTranslationProvider &&\n          this.connectionTestStatusesByServiceId[this.serviceDefinitions[this.realTimeTranslationProvider].id] ===\n            ConnectionTestStatus.Passed)\n      )\n    ) {\n      settingsPayload.push({\n        name: RX_COGNITIVE_SERVICE.connections.systemSettingKeys.serviceAccountCredential,\n        value: JSON.stringify(JSON.parse(this.connectionInfo[this.serviceDefinitions.serviceAccountCredentials.id]))\n      });\n    } else {\n      if (\n        this.realTimeTranslationProvider &&\n        this.connectionTestStatusesByServiceId[this.serviceDefinitions[this.realTimeTranslationProvider].id] ===\n          ConnectionTestStatus.Passed\n      ) {\n        const fields = this.serviceDefinitions[this.realTimeTranslationProvider].fields;\n\n        settingsPayload.push({\n          name: RX_COGNITIVE_SERVICE.connections.systemSettingKeys[this.realTimeTranslationProvider],\n          value:\n            this.realTimeTranslationProvider === this.serviceDefinitions.google.id\n              ? this.connectionInfo[fields[0].name]\n              : JSON.stringify(\n                  transform(\n                    fields,\n                    (result, value) => {\n                      const fieldName = value['name'];\n\n                      return (result[fieldName] = this.connectionInfo[fieldName]);\n                    },\n                    {}\n                  )\n                )\n        });\n      }\n\n      const cognitiveCredentials = transform(\n        RX_COGNITIVE_SERVICE.connections.cognitiveServiceCredentialKeys,\n        (result, value, key) => {\n          if (this.connectionTestStatusesByServiceId[this.serviceDefinitions[key].id] === ConnectionTestStatus.Passed) {\n            return (result[value] = this.connectionInfo[value]);\n          }\n        },\n        {}\n      );\n\n      if (!isEmpty(cognitiveCredentials)) {\n        settingsPayload.push({\n          name: RX_COGNITIVE_SERVICE.connections.systemSettingKeys.cognitiveServiceCredential,\n          value: JSON.stringify({\n            [RX_COGNITIVE_SERVICE.credentialsProvider]: cognitiveCredentials\n          })\n        });\n      }\n    }\n\n    const { helixClassifier } = this.serviceDefinitions;\n\n    if (helixClassifier && this.connectionTestStatusesByServiceId[helixClassifier.id] === ConnectionTestStatus.Passed) {\n      settingsPayload.push({\n        name: RX_COGNITIVE_SERVICE.connections.systemSettingKeys.helixServiceCredential,\n        value: JSON.stringify({\n          accessKey: this.connectionInfo.helixClassifierKey,\n          secretKey: this.connectionInfo.helixClassifierSecret\n        })\n      });\n    }\n\n    forkJoin(\n      settingsPayload.map((settingPayload: ISettingPayload) =>\n        this.rxSystemConfigurationService.setConfiguration(settingPayload.name, settingPayload.value)\n      )\n    ).subscribe(() => {\n      this.rxNotificationService.addSuccessMessage(\n        this.translateService.instant(RX_COGNITIVE_SERVICE.notificationMessages.serviceConnectionSaved)\n      );\n\n      this.connectionTestStatus = ConnectionTestStatus.Invalid;\n      this.connectionTestStatusesByServiceId = {};\n      this.isFormFieldChanged = false;\n    });\n  }\n\n  isSaveButtonDisabled(): boolean {\n    return this.connectionTestStatus !== ConnectionTestStatus.Passed;\n  }\n\n  isSaveButtonVisible(): boolean {\n    return (\n      this.isAdministrator &&\n      this.currentOverlayContext.overlayGroupId !== RX_OVERLAY.overlayGroupIds.base &&\n      !this.currentOverlayContext.isShared\n    );\n  }\n}\n","<adapt-accordion multiselect=\"true\">\n  <form *ngFor=\"let serviceId of availableServicesList\" #serviceForm=\"ngForm\">\n    <adapt-accordion-tab\n      [title]=\"serviceDefinitions[serviceId].title | translate\"\n      [isOpen]=\"serviceDefinitions[serviceId].isOpen\"\n      [attr.rx-id]=\"serviceDefinitions[serviceId].id\"\n      class=\"mb-3\"\n    >\n      <div *ngFor=\"let field of serviceDefinitions[serviceId].fields\" class=\"form-group\">\n        <adapt-rx-textfield\n          [name]=\"field.name\"\n          [(ngModel)]=\"connectionInfo[field.name]\"\n          [attr.rx-id]=\"field.rxId\"\n          [label]=\"field.label | translate\"\n          [required]=\"field.required\"\n          *ngIf=\"field.type === 'password'\"\n          maxlength=\"254\"\n          [isPassword]=\"true\"\n          (ngModelChange)=\"resetConnectionTest(serviceId, serviceForm)\"\n          class=\"d-block\"\n        >\n        </adapt-rx-textfield>\n\n        <adapt-rx-textfield\n          [name]=\"field.name\"\n          [(ngModel)]=\"connectionInfo[field.name]\"\n          [attr.rx-id]=\"field.rxId\"\n          [label]=\"field.label | translate\"\n          [required]=\"field.required\"\n          [disabled]=\"field.readonly\"\n          *ngIf=\"field.type === 'text'\"\n          [pattern]=\"field.pattern\"\n          (ngModelChange)=\"resetConnectionTest(serviceId, serviceForm)\"\n          class=\"d-block\"\n        >\n        </adapt-rx-textfield>\n\n        <adapt-rx-textarea\n          [name]=\"field.name\"\n          [(ngModel)]=\"connectionInfo[field.name]\"\n          [attr.rx-id]=\"field.rxId\"\n          [label]=\"field.label | translate\"\n          [required]=\"field.required\"\n          *ngIf=\"field.type === 'json'\"\n          (ngModelChange)=\"resetConnectionTest(serviceId, serviceForm)\"\n          rows=\"6\"\n          class=\"d-block\"\n          [rxJson]=\"{\n            errorMessage: field.jsonValidatorErrorMessage\n          }\"\n        ></adapt-rx-textarea>\n      </div>\n\n      <rx-connection-tester\n        class=\"mt-1\"\n        [status]=\"connectionTestStatusesByServiceId[serviceId]\"\n        (testConnection)=\"onTestConnection(serviceId, serviceForm)\"\n      ></rx-connection-tester>\n    </adapt-accordion-tab>\n  </form>\n\n  <button\n    adapt-button\n    rx-id=\"save-button\"\n    btn-type=\"primary\"\n    class=\"mt-4\"\n    [disabled]=\"isSaveButtonDisabled()\"\n    *ngIf=\"isSaveButtonVisible()\"\n    (click)=\"save()\"\n  >\n    {{ 'com.bmc.arsys.rx.client.common.save.label' | translate }}\n  </button>\n</adapt-accordion>\n","import { Component, Injector, Input, OnInit, ViewChild } from '@angular/core';\nimport { NgForm } from '@angular/forms';\nimport { DismissReasons, DockedPanelContext, KeyValueObject, RxSelectOption } from '@bmc-ux/adapt-angular';\nimport { RxRecordInstanceDataPageService } from '@helix/platform/record/api';\nimport {\n  IDataPageParams,\n  IPlainObject,\n  IUserOverlayGroupDescriptorChildren,\n  RX_CHATBOT,\n  RxCommandFactoryService,\n  RxNotificationService,\n  RxSystemConfigurationService\n} from '@helix/platform/shared/api';\nimport { RxModalClass, RxModalService } from '@helix/platform/ui-kit';\nimport { TranslateService } from '@ngx-translate/core';\nimport { forEach, get, some, transform } from 'lodash';\nimport { forkJoin, throwError } from 'rxjs';\nimport { catchError } from 'rxjs/operators';\nimport { RX_COGNITIVE_SERVICE } from '../../cognitive-service.constant';\nimport { IServiceConfig } from '../../cognitive-service.interfaces';\nimport { RxCognitiveServiceService } from '../../cognitive-service.service';\n\n@Component({\n  selector: 'rx-cognitive-service-onboard',\n  templateUrl: './cognitive-service-onboard.component.html'\n})\nexport class CognitiveServiceOnboardComponent extends RxModalClass implements OnInit {\n  @Input()\n  isAdministrator: boolean;\n\n  @Input()\n  currentOverlayContext: IUserOverlayGroupDescriptorChildren;\n\n  @ViewChild('ownCognitivePoviderConfigurationForm', { read: NgForm, static: true })\n  ownCognitivePoviderConfigurationForm: NgForm;\n\n  supportedCognitiveProviders: RxSelectOption[] = RX_COGNITIVE_SERVICE.onboard.cognitiveProvidersList;\n  cognitiveProvider: [RxSelectOption] = [RX_COGNITIVE_SERVICE.onboard.cognitiveProvidersList[0]];\n\n  regions: RxSelectOption[] = RX_COGNITIVE_SERVICE.regionsList.map((region) => ({\n    ...region,\n    name: this.translateService.instant(region.name)\n  }));\n\n  providerServices: KeyValueObject<IServiceConfig> = {};\n  isOnboardingInProgress: boolean;\n\n  private defaultServiceId: string = RX_COGNITIVE_SERVICE.onboard.cognitiveProvidersList[0].id;\n  private defaultSelection = this.translateService.instant('com.bmc.arsys.rx.client.common.select.label');\n\n  constructor(\n    private dockedPanelContext: DockedPanelContext,\n    private rxCognitiveServiceService: RxCognitiveServiceService,\n    private rxCommandFactoryService: RxCommandFactoryService,\n    private rxModalService: RxModalService,\n    private rxNotificationService: RxNotificationService,\n    private rxRecordInstanceDataPageService: RxRecordInstanceDataPageService,\n    private rxSystemConfigurationService: RxSystemConfigurationService,\n    private translateService: TranslateService,\n    protected injector: Injector\n  ) {\n    super(dockedPanelContext, injector);\n  }\n\n  ngOnInit() {\n    super.ngOnInit();\n\n    const params: IDataPageParams = {\n      recorddefinition: RX_CHATBOT.chatbotLocales.recordDefinitionName,\n      queryExpression: `'${RX_CHATBOT.chatbotLocales.fieldIds.botConfigurationId}'=\"${RX_CHATBOT.defaultChatbotId}\"`,\n      propertySelection: [\n        RX_CHATBOT.chatbotLocales.fieldIds.botConfigurationId,\n        RX_CHATBOT.chatbotLocales.fieldIds.providerPassword\n      ]\n    };\n\n    forkJoin({\n      cognitiveServiceCredential: this.rxSystemConfigurationService.getConfiguration(\n        RX_COGNITIVE_SERVICE.connections.systemSettingKeys.cognitiveServiceCredential\n      ),\n      cognitiveServiceRegions: this.rxSystemConfigurationService.getConfiguration(\n        RX_COGNITIVE_SERVICE.cognitiveServiceRegions.systemSettingsKey\n      ),\n      botLocales: this.rxRecordInstanceDataPageService.post({\n        params\n      })\n    }).subscribe((result) => {\n      this.providerServices = RX_COGNITIVE_SERVICE.onboard.providerServices[this.defaultServiceId];\n\n      this.loadCredentialAndRegions(\n        JSON.parse(result.cognitiveServiceCredential.value as string),\n        JSON.parse(result.cognitiveServiceRegions.value as string)\n      );\n\n      this.setBotLocaleConversation(result.botLocales.data);\n      this.loadServiceProviderApiKey();\n    });\n  }\n\n  isDirty(): boolean {\n    return this.ownCognitivePoviderConfigurationForm.dirty;\n  }\n\n  private loadCredentialAndRegions(credentials: KeyValueObject, serviceRegions: KeyValueObject): void {\n    const cognitiveServiceRegions = serviceRegions[RX_COGNITIVE_SERVICE.onboard.providers[this.defaultServiceId]];\n\n    forEach(this.providerServices, (serviceConfig, serviceId) => {\n      serviceConfig.apiKey = get(\n        credentials[RX_COGNITIVE_SERVICE.onboard.providers[this.defaultServiceId]],\n        serviceConfig.apiKeyPropertyName,\n        ''\n      );\n\n      if (get(cognitiveServiceRegions, serviceId)) {\n        const regionValue = this.regions.find((region) => region.id === cognitiveServiceRegions[serviceId]);\n\n        serviceConfig.region = [regionValue];\n      }\n    });\n  }\n\n  private setBotLocaleConversation(locales: KeyValueObject): void {\n    const localeKey: string = RX_COGNITIVE_SERVICE.onboard.providerServices[this.defaultServiceId].conversation.id;\n\n    this.providerServices[localeKey].apiKey = get(locales[0], RX_CHATBOT.chatbotLocales.fieldIds.providerPassword, '');\n  }\n\n  private loadServiceProviderApiKey(): void {\n    forEach(this.providerServices, (serviceConfig) => {\n      serviceConfig.isEnabled = serviceConfig.hasApiKey = Boolean(serviceConfig.apiKey);\n    });\n  }\n\n  optionFormatter = (regionNameOption: RxSelectOption): string => {\n    return get(regionNameOption, 'name', this.defaultSelection);\n  };\n\n  isOnboardButtonDisabled(): boolean {\n    return (\n      this.isOnboardingInProgress ||\n      !some(this.providerServices, 'isEnabled') ||\n      this.ownCognitivePoviderConfigurationForm.pristine ||\n      this.ownCognitivePoviderConfigurationForm.invalid\n    );\n  }\n\n  close(): void {\n    this.dockedPanelContext.dismiss(DismissReasons.CLOSE_BTN);\n  }\n\n  onboard(): void {\n    this.isOnboardingInProgress = true;\n    const onboardSettings: IPlainObject = {};\n\n    onboardSettings[RX_COGNITIVE_SERVICE.onboard.providers[this.defaultServiceId]] = transform(\n      this.providerServices,\n      (result, value) => {\n        if (!value.hasApiKey && value.isEnabled) {\n          result[value.apiKeyPropertyName] = value.apiKey;\n          result[value.regionPropertyName] = get(value.region, '0.id', '');\n        }\n      },\n      {}\n    );\n\n    this.rxCommandFactoryService\n      .forResourceType('com.bmc.arsys.rx.application.cognitive.command.ConfigureOwnCognitiveProvidersCommand')\n      .execute({ ownCognitiveProvidersConfiguration: JSON.stringify(onboardSettings) })\n      .pipe(\n        catchError((err) => {\n          this.isOnboardingInProgress = false;\n\n          return throwError(err);\n        })\n      )\n      .subscribe(() => {\n        this.loadServiceProviderApiKey();\n\n        this.rxNotificationService.addSuccessMessage(\n          this.translateService.instant(RX_COGNITIVE_SERVICE.notificationMessages.serviceOnboarded)\n        );\n\n        this.ownCognitivePoviderConfigurationForm.form.markAsPristine();\n        this.isOnboardingInProgress = false;\n      });\n  }\n\n  keepKeyValueOrder(): number {\n    return 0;\n  }\n}\n","<div class=\"dp-body\">\n  <form #ownCognitivePoviderConfigurationForm=\"ngForm\">\n    <div class=\"row\">\n      <div class=\"col-sm-12\">\n        <adapt-rx-select\n          name=\"cognitiveProvider\"\n          label=\"{{ 'com.bmc.arsys.rx.client.admin.cognitive-service.cognitive-provider.label' | translate }}\"\n          rx-id=\"cognitive-provider\"\n          [options]=\"supportedCognitiveProviders\"\n          [optionFormatter]=\"optionFormatter\"\n          [(ngModel)]=\"cognitiveProvider\"\n        >\n        </adapt-rx-select>\n      </div>\n\n      <div class=\"col-sm-12\">\n        <div class=\"mt-2 mb-2\">\n          {{ 'com.bmc.arsys.rx.client.admin.cognitive-service.onboard-services.instructions.label' | translate }}\n        </div>\n\n        <div class=\"card p-3 mb-3\" *ngFor=\"let service of providerServices | keyvalue: keepKeyValueOrder\">\n          <adapt-rx-switch\n            class=\"form-group\"\n            [name]=\"service.key + 'ProviderEnable'\"\n            [attr.rx-id]=\"'enable-cognitive-service-provider-' + service.key\"\n            [label]=\"service.value.switchLabel | translate\"\n            [(ngModel)]=\"service.value.isEnabled\"\n            [disabled]=\"service.value.hasApiKey\"\n            [tooltip]=\"\n              service.value.tooltipText\n                ? {\n                    iconName: 'question_circle_o',\n                    content: service.value.tooltipText | translate,\n                    placement: 'bottom',\n                    popoverMode: true\n                  }\n                : null\n            \"\n          ></adapt-rx-switch>\n\n          <adapt-rx-select\n            class=\"form-group\"\n            label=\"{{ 'com.bmc.arsys.rx.client.admin.cognitive-service.region.label' | translate }}\"\n            emptyOption=\"true\"\n            [name]=\"service.key + 'ProviderRegion'\"\n            [attr.rx-id]=\"'cognitive-service-provider-region-' + service.key\"\n            [options]=\"regions\"\n            [optionFormatter]=\"optionFormatter\"\n            [(ngModel)]=\"service.value.region\"\n            [disabled]=\"!service.value.isEnabled || service.value.hasApiKey\"\n          >\n          </adapt-rx-select>\n\n          <adapt-rx-textfield\n            class=\"form-group\"\n            label=\"{{ 'com.bmc.arsys.rx.client.admin.cognitive-service.api-key.label' | translate }}\"\n            maxlength=\"254\"\n            required=\"true\"\n            [isPassword]=\"true\"\n            [name]=\"service.key + 'ProviderApiKey'\"\n            [attr.rx-id]=\"'cognitive-service-provider-' + service.key + '-api-key'\"\n            [(ngModel)]=\"service.value.apiKey\"\n            [disabled]=\"!service.value.isEnabled || service.value.hasApiKey\"\n          >\n          </adapt-rx-textfield>\n        </div>\n      </div>\n    </div>\n  </form>\n</div>\n\n<div class=\"dp-footer align-items-end\">\n  <div>\n    <button\n      adapt-button\n      btn-type=\"primary\"\n      type=\"button\"\n      class=\"mr-2\"\n      activeText=\"Onboarding...\"\n      rx-id=\"onboarding-button\"\n      [adaptInlineLoader]=\"isOnboardingInProgress\"\n      [disabled]=\"isOnboardButtonDisabled()\"\n      (click)=\"onboard()\"\n    >\n      {{ 'com.bmc.arsys.rx.client.admin.cognitive-service.onboard-services.button.onboard.label' | translate }}\n    </button>\n    <button\n      adapt-button\n      btn-type=\"secondary\"\n      type=\"button\"\n      rx-id=\"close-button\"\n      (click)=\"close()\"\n      [disabled]=\"isOnboardingInProgress\"\n    >\n      {{ 'com.bmc.arsys.rx.client.common.close.label' | translate }}\n    </button>\n  </div>\n</div>\n","import { Component, Input, OnInit } from '@angular/core';\nimport { FormBuilder, FormGroup } from '@angular/forms';\nimport { isEmpty, get, mapValues } from 'lodash';\nimport { RX_COGNITIVE_SERVICE } from '../../cognitive-service.constant';\nimport { RxCognitiveServiceService } from '../../cognitive-service.service';\nimport {\n  IUserOverlayGroupDescriptorChildren,\n  RX_OVERLAY,\n  RxNotificationService,\n  RxSystemConfigurationService\n} from '@helix/platform/shared/api';\nimport { RxSelectOption } from '@bmc-ux/adapt-angular';\nimport { TranslateService } from '@ngx-translate/core';\n\n@Component({\n  selector: 'rx-cognitive-service-regions',\n  templateUrl: './cognitive-service-regions.component.html',\n  styleUrls: ['./cognitive-service-regions.component.scss']\n})\nexport class CognitiveServiceRegionsComponent implements OnInit {\n  @Input()\n  isAdministrator: boolean;\n\n  @Input()\n  currentOverlayContext: IUserOverlayGroupDescriptorChildren;\n\n  cognitiveServiceRegionConfigurationForm: FormGroup;\n  settings: RxSelectOption[] = RX_COGNITIVE_SERVICE.cognitiveServiceRegions.settings;\n\n  regions: RxSelectOption[] = RX_COGNITIVE_SERVICE.regionsList.map((region) => ({\n    ...region,\n    name: this.translateService.instant(region.name)\n  }));\n\n  constructor(\n    private formBuilder: FormBuilder,\n    private rxCognitiveServiceService: RxCognitiveServiceService,\n    private rxNotificationService: RxNotificationService,\n    private rxSystemConfigurationService: RxSystemConfigurationService,\n    private translateService: TranslateService\n  ) {}\n\n  ngOnInit() {\n    this.cognitiveServiceRegionConfigurationForm = this.formBuilder.group({\n      naturalLanguageClassifier: [],\n      conversation: [],\n      search: [],\n      toneAnalyzer: []\n    });\n\n    this.loadSystemSettings();\n  }\n\n  isFormDirty(): boolean {\n    return this.cognitiveServiceRegionConfigurationForm.dirty;\n  }\n\n  private loadSystemSettings(): void {\n    this.rxSystemConfigurationService\n      .getConfiguration(RX_COGNITIVE_SERVICE.cognitiveServiceRegions.systemSettingsKey)\n      .subscribe((settingsData) => {\n        let watsonServiceRegionsData = JSON.parse(settingsData.value as string);\n\n        if (watsonServiceRegionsData[RX_COGNITIVE_SERVICE.credentialsProvider]) {\n          watsonServiceRegionsData = watsonServiceRegionsData[RX_COGNITIVE_SERVICE.credentialsProvider];\n\n          this.settings.forEach((setting: RxSelectOption) => {\n            if (!isEmpty(watsonServiceRegionsData[setting.id])) {\n              const value = this.regions.find((region) => region.id === watsonServiceRegionsData[setting.id]);\n\n              this.cognitiveServiceRegionConfigurationForm.controls[setting.id].setValue([value]);\n            }\n          });\n        }\n      });\n  }\n\n  optionFormatter(regionNameOption: RxSelectOption): string {\n    return regionNameOption.name;\n  }\n\n  save(): void {\n    const formValue = this.cognitiveServiceRegionConfigurationForm.getRawValue();\n\n    const configurations = mapValues(formValue, function (value) {\n      return get(value, '[0].id', '');\n    });\n\n    this.rxSystemConfigurationService\n      .setConfiguration(\n        RX_COGNITIVE_SERVICE.cognitiveServiceRegions.systemSettingsKey,\n        JSON.stringify({ WATSON: configurations })\n      )\n      .subscribe(() => {\n        this.rxNotificationService.addSuccessMessage(\n          this.translateService.instant(RX_COGNITIVE_SERVICE.notificationMessages.serviceRegionConfigurationSaved)\n        );\n\n        this.cognitiveServiceRegionConfigurationForm.markAsPristine();\n      });\n  }\n\n  isSaveButtonDisabled(): boolean {\n    return this.cognitiveServiceRegionConfigurationForm.pristine;\n  }\n\n  isSaveButtonVisible(): boolean {\n    return (\n      this.isAdministrator &&\n      this.currentOverlayContext.overlayGroupId !== RX_OVERLAY.overlayGroupIds.base &&\n      !this.currentOverlayContext.isShared\n    );\n  }\n}\n","<form [formGroup]=\"cognitiveServiceRegionConfigurationForm\">\n  <adapt-accordion rx-id=\"accordion-cognitive-service-region\">\n    <adapt-accordion-tab\n      title=\"{{ 'com.bmc.arsys.rx.client.admin.cognitive-service.regions.title' | translate }}\"\n      isOpen=\"true\"\n    >\n      <adapt-alert\n        class=\"mb-4\"\n        [config]=\"{\n          type: 'inline',\n          variant: 'warning',\n          content: 'com.bmc.arsys.rx.client.admin.cognitive-service.regions.warning' | translate\n        }\"\n      ></adapt-alert>\n\n      <div\n        *ngFor=\"let setting of settings\"\n        [attr.rx-id]=\"'select-block-cognitive-service-region--' + setting.id\"\n        class=\"form-group\"\n      >\n        <adapt-rx-select\n          emptyOption=\"true\"\n          [formControlName]=\"setting.id\"\n          [label]=\"setting.name\"\n          [options]=\"regions\"\n          [optionFormatter]=\"optionFormatter\"\n          class=\"d-block\"\n        ></adapt-rx-select>\n      </div>\n    </adapt-accordion-tab>\n\n    <button\n      adapt-button\n      type=\"button\"\n      rx-id=\"save-button\"\n      btn-type=\"primary\"\n      class=\"mt-4\"\n      [disabled]=\"isSaveButtonDisabled()\"\n      *ngIf=\"isSaveButtonVisible()\"\n      (click)=\"save()\"\n    >\n      {{ 'com.bmc.arsys.rx.client.common.save.label' | translate }}\n    </button>\n  </adapt-accordion>\n</form>\n","import { Component, Input, OnInit } from '@angular/core';\nimport { FormBuilder, FormGroup } from '@angular/forms';\nimport {\n  IUserOverlayGroupDescriptorChildren,\n  RX_OVERLAY,\n  RxCurrentUserService,\n  RxNotificationService,\n  RxSystemConfigurationService\n} from '@helix/platform/shared/api';\nimport { ConnectionTestStatus } from '@helix/platform/ui-kit';\nimport { mapValues } from 'lodash';\nimport { throwError, Observable, EMPTY } from 'rxjs';\nimport { catchError } from 'rxjs/operators';\nimport { RX_COGNITIVE_SERVICE } from '../../cognitive-service.constant';\nimport { RxCognitiveServiceService } from '../../cognitive-service.service';\nimport { HttpErrorResponse } from '@angular/common/http';\nimport { TranslateService } from '@ngx-translate/core';\n\n@Component({\n  selector: 'rx-cognitive-service-summarization',\n  templateUrl: './cognitive-service-summarization.component.html',\n  styleUrls: ['./cognitive-service-summarization.component.scss']\n})\nexport class CognitiveServiceSummarizationComponent implements OnInit {\n  @Input()\n  isAdministrator: boolean;\n\n  @Input()\n  currentOverlayContext: IUserOverlayGroupDescriptorChildren;\n\n  summarizationConfigurationForm: FormGroup;\n  connectionTestStatus: ConnectionTestStatus = ConnectionTestStatus.Invalid;\n  isAdministratorOverlayConfigured: boolean;\n  isSummarizationServiceConfigured: boolean;\n\n  constructor(\n    private rxCurrentUserService: RxCurrentUserService,\n    private rxCognitiveServiceService: RxCognitiveServiceService,\n    private rxNotificationService: RxNotificationService,\n    private rxSystemConfigurationService: RxSystemConfigurationService,\n    private formBuilder: FormBuilder,\n    private translateService: TranslateService\n  ) {}\n\n  ngOnInit() {\n    this.isAdministratorOverlayConfigured =\n      this.isAdministrator &&\n      this.currentOverlayContext.overlayGroupId !== RX_OVERLAY.overlayGroupIds.base &&\n      !this.currentOverlayContext.isShared;\n\n    this.testConnection()\n      .pipe(\n        catchError((error: HttpErrorResponse) => {\n          this.isSummarizationServiceConfigured = false;\n\n          return EMPTY;\n        })\n      )\n      .subscribe(() => {\n        this.isSummarizationServiceConfigured = true;\n      });\n\n    this.summarizationConfigurationForm = this.formBuilder.group({\n      enableSummarization: { value: 0, disabled: this.isEnableSummarizationCheckboxDisabled() },\n      summarizationPercentage: ''\n    });\n\n    this.loadSystemSettings();\n  }\n\n  isFormDirty(): boolean {\n    return this.summarizationConfigurationForm.dirty;\n  }\n\n  private loadSystemSettings(): void {\n    this.rxSystemConfigurationService\n      .getConfiguration(RX_COGNITIVE_SERVICE.summarization.systemSettingsKey)\n      .subscribe((settingsData) => {\n        const summarizationData = JSON.parse(settingsData.value as string);\n\n        this.summarizationConfigurationForm.setValue(summarizationData);\n      });\n  }\n\n  save(): void {\n    const formValue = this.summarizationConfigurationForm.getRawValue();\n\n    formValue.enableSummarization = formValue.enableSummarization ? 1 : 0;\n    const configurations = mapValues(formValue, (value) => value);\n\n    this.rxSystemConfigurationService\n      .setConfiguration(RX_COGNITIVE_SERVICE.summarization.systemSettingsKey, JSON.stringify(configurations))\n      .subscribe(() => {\n        this.rxNotificationService.addSuccessMessage(\n          this.translateService.instant(RX_COGNITIVE_SERVICE.notificationMessages.summarizationConfigurationSaved)\n        );\n\n        this.connectionTestStatus = ConnectionTestStatus.Invalid;\n        this.summarizationConfigurationForm.markAsPristine();\n      });\n  }\n\n  isSaveButtonDisabled(): boolean {\n    return !this.summarizationConfigurationForm.controls.enableSummarization.value &&\n      this.summarizationConfigurationForm.dirty\n      ? false\n      : this.connectionTestStatus !== ConnectionTestStatus.Passed;\n  }\n\n  isEnableSummarizationCheckboxDisabled(): boolean {\n    return !(\n      this.rxCurrentUserService.isAdministrator() &&\n      this.currentOverlayContext.overlayGroupId !== RX_OVERLAY.overlayGroupIds.base &&\n      !this.currentOverlayContext.isShared\n    );\n  }\n\n  private isConnectionTestStatusInvalid(): boolean {\n    return (\n      !this.isAdministratorOverlayConfigured ||\n      this.summarizationConfigurationForm.invalid ||\n      this.summarizationConfigurationForm.pristine ||\n      !this.summarizationConfigurationForm.controls.enableSummarization.value\n    );\n  }\n\n  resetConnectionTest(): void {\n    this.connectionTestStatus = this.isConnectionTestStatusInvalid()\n      ? ConnectionTestStatus.Invalid\n      : ConnectionTestStatus.Unknown;\n\n    if (this.summarizationConfigurationForm.controls.enableSummarization.value) {\n      this.summarizationConfigurationForm.get('summarizationPercentage').enable();\n    } else {\n      this.summarizationConfigurationForm.get('summarizationPercentage').disable();\n    }\n  }\n\n  private testConnection(): Observable<any> {\n    return this.rxCognitiveServiceService.testConnection({\n      resourceType: 'com.bmc.arsys.rx.application.cognitive.command.PingSummarizationServiceCommand'\n    });\n  }\n\n  onTestConnection(): void {\n    this.testConnection()\n      .pipe(\n        catchError((error: HttpErrorResponse) => {\n          this.connectionTestStatus = ConnectionTestStatus.Failed;\n\n          return throwError(error);\n        })\n      )\n      .subscribe(() => {\n        this.connectionTestStatus = ConnectionTestStatus.Passed;\n      });\n  }\n}\n","<adapt-alert\n  *ngIf=\"isSummarizationServiceConfigured === false\"\n  [config]=\"{ content: 'Summarization service has not been configured.', type: 'inline', variant: 'warning' }\"\n></adapt-alert>\n\n<form [formGroup]=\"summarizationConfigurationForm\" *ngIf=\"isSummarizationServiceConfigured\">\n  <adapt-accordion rx-id=\"accordion-summarization-configuration\">\n    <adapt-accordion-tab\n      title=\"{{ 'com.bmc.arsys.rx.client.admin.cognitive-service.summarization.title' | translate }}\"\n    >\n      <adapt-rx-switch\n        class=\"form-group\"\n        rx-id=\"enable-summarization-service\"\n        formControlName=\"enableSummarization\"\n        label=\"Enable summarization service\"\n        (ngModelChange)=\"resetConnectionTest()\"\n      ></adapt-rx-switch>\n\n      <adapt-rx-counter\n        class=\"d-block form-group\"\n        adaptRange\n        rx-id=\"summarization-percentage\"\n        [min]=\"1\"\n        [max]=\"50\"\n        label=\"Summarization %\"\n        required=\"true\"\n        [formControl]=\"summarizationConfigurationForm.controls.summarizationPercentage\"\n        [step]=\"1\"\n        [tooltip]=\"{\n          iconName: 'question_circle_o',\n          content: 'com.bmc.arsys.rx.client.admin.cognitive-service.summarization.percentage.tooltip' | translate,\n          placement: 'right',\n          popoverMode: true\n        }\"\n        (ngModelChange)=\"resetConnectionTest()\"\n      ></adapt-rx-counter>\n\n      <rx-connection-tester\n        class=\"mt-1\"\n        *ngIf=\"isAdministrator\"\n        [status]=\"connectionTestStatus\"\n        (testConnection)=\"onTestConnection()\"\n      ></rx-connection-tester>\n    </adapt-accordion-tab>\n\n    <button\n      adapt-button\n      rx-id=\"save-button\"\n      btn-type=\"primary\"\n      class=\"mt-4\"\n      [disabled]=\"isSaveButtonDisabled()\"\n      *ngIf=\"isAdministratorOverlayConfigured\"\n      (click)=\"save()\"\n    >\n      {{ 'com.bmc.arsys.rx.client.common.save.label' | translate }}\n    </button>\n  </adapt-accordion>\n</form>\n","import { Component, Input, OnInit } from '@angular/core';\nimport { FormBuilder, FormGroup } from '@angular/forms';\nimport { RX_COGNITIVE_SERVICE } from '../../cognitive-service.constant';\nimport {\n  IUserOverlayGroupDescriptorChildren,\n  RX_OVERLAY,\n  RxSystemConfigurationService\n} from '@helix/platform/shared/api';\nimport { RxCognitiveServiceService } from '../../cognitive-service.service';\nimport { RxNotificationService } from '@helix/platform/shared/api';\nimport { TranslateService } from '@ngx-translate/core';\n\n@Component({\n  selector: 'rx-cognitive-service-tone-analyzer',\n  templateUrl: './cognitive-service-tone-analyzer.component.html',\n  styleUrls: ['./cognitive-service-tone-analyzer.component.scss']\n})\nexport class CognitiveServiceToneAnalyzerComponent implements OnInit {\n  @Input()\n  isAdministrator: boolean;\n\n  @Input()\n  currentOverlayContext: IUserOverlayGroupDescriptorChildren;\n\n  toneAnalyzerConfigurationForm: FormGroup;\n\n  constructor(\n    private formBuilder: FormBuilder,\n    private rxCognitiveServiceService: RxCognitiveServiceService,\n    private rxNotificationService: RxNotificationService,\n    private rxSystemConfigurationService: RxSystemConfigurationService,\n    private translateService: TranslateService\n  ) {}\n\n  ngOnInit() {\n    this.toneAnalyzerConfigurationForm = this.formBuilder.group({\n      toneScoreThreshold: 0.5\n    });\n\n    this.loadSystemSettings();\n  }\n\n  isFormDirty(): boolean {\n    return this.toneAnalyzerConfigurationForm.dirty;\n  }\n\n  private loadSystemSettings(): void {\n    this.rxSystemConfigurationService\n      .getConfiguration(RX_COGNITIVE_SERVICE.toneAnalyzer.systemSettingsKey)\n      .subscribe((settingsData) => {\n        this.toneAnalyzerConfigurationForm.controls[settingsData.name].setValue(settingsData.value);\n      });\n  }\n\n  save(): void {\n    this.rxSystemConfigurationService\n      .setConfiguration(\n        RX_COGNITIVE_SERVICE.toneAnalyzer.systemSettingsKey,\n        this.toneAnalyzerConfigurationForm.value.toneScoreThreshold\n      )\n      .subscribe(() => {\n        this.rxNotificationService.addSuccessMessage(\n          this.translateService.instant(RX_COGNITIVE_SERVICE.notificationMessages.toneAnalyzerConfigurationSaved)\n        );\n\n        this.toneAnalyzerConfigurationForm.markAsPristine();\n      });\n  }\n\n  isSaveButtonDisabled(): boolean {\n    return this.toneAnalyzerConfigurationForm.pristine || this.toneAnalyzerConfigurationForm.invalid;\n  }\n\n  isSaveButtonVisible(): boolean {\n    return (\n      this.isAdministrator &&\n      this.currentOverlayContext.overlayGroupId !== RX_OVERLAY.overlayGroupIds.base &&\n      !this.currentOverlayContext.isShared\n    );\n  }\n}\n","<form [formGroup]=\"toneAnalyzerConfigurationForm\">\n  <adapt-accordion>\n    <adapt-accordion-tab title=\"Tone analyzer configuration\" isOpen=\"true\">\n      <adapt-rx-counter\n        adaptRange\n        label=\"Tone score threshold\"\n        required=\"true\"\n        class=\"d-block form-group\"\n        [max]=\"1\"\n        [min]=\"0.5\"\n        adaptFloatNumber\n        [formControl]=\"toneAnalyzerConfigurationForm.controls.toneScoreThreshold\"\n        [step]=\"0.1\"\n        [tooltip]=\"{\n          iconName: 'question_circle_o',\n          content: popoverContent,\n          placement: 'right',\n          popoverMode: true\n        }\"\n      ></adapt-rx-counter>\n\n      <ng-template #popoverContent>\n        <div\n          style=\"white-space: pre-wrap\"\n          [innerHTML]=\"\n            'com.bmc.arsys.rx.client.admin.cognitive-service.tone-analyzer.tone-score-threshold.tooltip' | translate\n          \"\n        ></div>\n      </ng-template>\n    </adapt-accordion-tab>\n\n    <button\n      adapt-button\n      type=\"button\"\n      rx-id=\"save-button\"\n      btn-type=\"primary\"\n      class=\"mt-4\"\n      [disabled]=\"isSaveButtonDisabled()\"\n      *ngIf=\"isSaveButtonVisible()\"\n      (click)=\"save()\"\n    >\n      {{ 'com.bmc.arsys.rx.client.common.save.label' | translate }}\n    </button>\n  </adapt-accordion>\n</form>\n","import { Component, OnInit, ViewChild } from '@angular/core';\nimport { RxSelectOption } from '@bmc-ux/adapt-angular';\nimport {\n  IUserOverlayGroupDescriptorChildren,\n  RX_OVERLAY,\n  RxCurrentUserService,\n  RxOverlayService,\n  RxSystemConfigurationService\n} from '@helix/platform/shared/api';\nimport { RxModalService } from '@helix/platform/ui-kit';\nimport { BaseViewComponent } from '@helix/platform/view/runtime';\nimport { TranslateService } from '@ngx-translate/core';\nimport { noop, reject } from 'lodash';\nimport { RX_COGNITIVE_SERVICE } from './cognitive-service.constant';\nimport { RxCognitiveServiceService } from './cognitive-service.service';\nimport { CognitiveServiceAdministrationCredentialsComponent } from './components/administration-credentials/cognitive-service-administration-credentials.component';\nimport { CognitiveServiceChatbotComponent } from './components/chatbot/cognitive-service-chatbot.component';\nimport { CognitiveServiceConnectionsComponent } from './components/connections/cognitive-service-connections.component';\nimport { CognitiveServiceOnboardComponent } from './components/onboard/cognitive-service-onboard.component';\nimport { CognitiveServiceRegionsComponent } from './components/regions/cognitive-service-regions.component';\nimport { CognitiveServiceSummarizationComponent } from './components/summarization/cognitive-service-summarization.component';\nimport { CognitiveServiceToneAnalyzerComponent } from './components/tone-analyzer/cognitive-service-tone-analyzer.component';\n\n@Component({\n  selector: 'rx-admin-cognitive-service',\n  templateUrl: './cognitive-service.component.html',\n  styleUrls: ['./cognitive-service.component.scss']\n})\nexport class CognitiveServiceAdminComponent extends BaseViewComponent implements OnInit {\n  @ViewChild('selectedConfiguration')\n  selectedConfiguration:\n    | CognitiveServiceAdministrationCredentialsComponent\n    | CognitiveServiceConnectionsComponent\n    | CognitiveServiceChatbotComponent\n    | CognitiveServiceRegionsComponent\n    | CognitiveServiceSummarizationComponent\n    | CognitiveServiceToneAnalyzerComponent;\n\n  cognitiveServices: RxSelectOption[] = RX_COGNITIVE_SERVICE.cognitiveServicesList.map((service) => ({\n    ...service,\n    name: this.translateService.instant(service.name)\n  }));\n\n  selectedService: [RxSelectOption] = [this.cognitiveServices[2]];\n  supportedCognitiveServices: RxSelectOption[] = [];\n  isAdministrator: boolean = this.rxCurrentUserService.isAdministrator();\n  currentOverlayContext: IUserOverlayGroupDescriptorChildren = this.rxOverlayService.getCurrentOverlayContext();\n  isNativeClassificationProvider: boolean;\n\n  constructor(\n    private rxModalService: RxModalService,\n    private rxCognitiveServiceService: RxCognitiveServiceService,\n    private rxCurrentUserService: RxCurrentUserService,\n    private rxOverlayService: RxOverlayService,\n    private rxSystemConfigurationService: RxSystemConfigurationService,\n    public translateService: TranslateService\n  ) {\n    super();\n  }\n\n  ngOnInit() {\n    this.notifyPropertyChanged('api', {\n      isDirty: () => this.selectedConfiguration.isFormDirty()\n    });\n\n    this.rxSystemConfigurationService\n      .getConfiguration(RX_COGNITIVE_SERVICE.connections.systemSettingKeys.classificationServiceProvider)\n      .subscribe((settingsData) => {\n        let cognitiveServices = this.cognitiveServices;\n\n        if (RX_COGNITIVE_SERVICE.nativeProvider === settingsData.value) {\n          this.isNativeClassificationProvider = true;\n\n          cognitiveServices = reject(cognitiveServices, {\n            id: RX_COGNITIVE_SERVICE.cognitiveServicesList[1].id\n          });\n        }\n\n        this.supportedCognitiveServices = cognitiveServices;\n      });\n  }\n\n  optionFormatter(option: RxSelectOption): string {\n    return option.name;\n  }\n\n  getSelectedServiceId(): string {\n    return this.selectedService[0].id;\n  }\n\n  isOwnCognitiveProviderButtonVisible(): boolean {\n    return (\n      this.isAdministrator &&\n      this.currentOverlayContext.overlayGroupId !== RX_OVERLAY.overlayGroupIds.base &&\n      !this.currentOverlayContext.isShared\n    );\n  }\n\n  openOnboardServicesPanel(): void {\n    this.rxModalService\n      .openDockedPanel({\n        title: this.translateService.instant('com.bmc.arsys.rx.client.admin.cognitive-service.onboard-services.label'),\n        content: CognitiveServiceOnboardComponent,\n        size: 'lg'\n      })\n      .catch(noop);\n  }\n}\n","<rx-admin-settings header=\" {{ 'com.bmc.arsys.rx.client.admin.cognitive-service.header.title' | translate }} \">\n  <div class=\"mb-4 d-flex align-items-baseline\" *ngIf=\"isOwnCognitiveProviderButtonVisible()\">\n    <adapt-button\n      class=\"text-truncate\"\n      rx-id=\"onboard-services-button\"\n      btn-type=\"secondary\"\n      (click)=\"openOnboardServicesPanel()\"\n    >\n      {{ 'com.bmc.arsys.rx.client.admin.cognitive-service-component.button.title' | translate }}\n    </adapt-button>\n\n    <adapt-icon\n      name=\"question_circle_o\"\n      class=\"ml-2\"\n      placement=\"bottom\"\n      maxWidth=\"400\"\n      [adaptPopover]=\"'com.bmc.arsys.rx.client.admin.cognitive-service-component.tooltip' | translate\"\n    >\n    </adapt-icon>\n  </div>\n\n  <div class=\"mb-4 align-items-end\">\n    <adapt-rx-select\n      label=\"{{ 'com.bmc.arsys.rx.client.admin.cognitive-service.configure.label' | translate }}\"\n      [options]=\"supportedCognitiveServices\"\n      [(ngModel)]=\"selectedService\"\n      [optionFormatter]=\"optionFormatter\"\n    >\n    </adapt-rx-select>\n  </div>\n\n  <div class=\"row pb-4\">\n    <div [ngSwitch]=\"getSelectedServiceId()\" class=\"col-12\">\n      <rx-cognitive-service-chatbot\n        [isAdministrator]=\"isAdministrator\"\n        [currentOverlayContext]=\"currentOverlayContext\"\n        *ngSwitchCase=\"cognitiveServices[0].id\"\n        #selectedConfiguration\n      >\n      </rx-cognitive-service-chatbot>\n\n      <rx-cognitive-service-administration-credentials\n        [isAdministrator]=\"isAdministrator\"\n        [currentOverlayContext]=\"currentOverlayContext\"\n        *ngSwitchCase=\"cognitiveServices[1].id\"\n        #selectedConfiguration\n      ></rx-cognitive-service-administration-credentials>\n\n      <rx-cognitive-service-connections\n        [isAdministrator]=\"isAdministrator\"\n        [currentOverlayContext]=\"currentOverlayContext\"\n        [isNativeClassificationProvider]=\"isNativeClassificationProvider\"\n        *ngSwitchCase=\"cognitiveServices[2].id\"\n        #selectedConfiguration\n      ></rx-cognitive-service-connections>\n\n      <rx-cognitive-service-summarization\n        [isAdministrator]=\"isAdministrator\"\n        [currentOverlayContext]=\"currentOverlayContext\"\n        *ngSwitchCase=\"cognitiveServices[3].id\"\n        #selectedConfiguration\n      ></rx-cognitive-service-summarization>\n\n      <rx-cognitive-service-regions\n        [isAdministrator]=\"isAdministrator\"\n        [currentOverlayContext]=\"currentOverlayContext\"\n        *ngSwitchCase=\"cognitiveServices[4].id\"\n        #selectedConfiguration\n      ></rx-cognitive-service-regions>\n\n      <rx-cognitive-service-tone-analyzer\n        [isAdministrator]=\"isAdministrator\"\n        [currentOverlayContext]=\"currentOverlayContext\"\n        *ngSwitchCase=\"cognitiveServices[5].id\"\n        #selectedConfiguration\n      ></rx-cognitive-service-tone-analyzer>\n    </div>\n  </div>\n</rx-admin-settings>\n","import { NgModule, ComponentFactoryResolver } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\nimport {\n  AdaptAccordionModule,\n  AdaptAlertModule,\n  AdaptBusyModule,\n  AdaptButtonModule,\n  AdaptIconModule,\n  AdaptPopoverModule,\n  AdaptRxCheckboxModule,\n  AdaptRxCounterModule,\n  AdaptRxSelectModule,\n  AdaptRxSwitchModule,\n  AdaptRxTextareaModule,\n  AdaptRxTextfieldModule,\n  AdaptRxValidatorsModule,\n  AdaptRxLabelModule\n} from '@bmc-ux/adapt-angular';\nimport { AdminSettingsModule } from '@helix/platform/shared/components';\nimport { RX_APPLICATION } from '@helix/platform/shared/api';\nimport { RxJsonModule } from '@helix/platform/utils';\nimport { RxViewComponentRegistryService } from '@helix/platform/view/api';\nimport { CognitiveServiceChatbotComponent } from './components/chatbot/cognitive-service-chatbot.component';\nimport { CognitiveServiceAdministrationCredentialsComponent } from './components/administration-credentials/cognitive-service-administration-credentials.component';\nimport { CognitiveServiceConnectionsComponent } from './components/connections/cognitive-service-connections.component';\nimport { CognitiveServiceOnboardComponent } from './components/onboard/cognitive-service-onboard.component';\nimport { CognitiveServiceRegionsComponent } from './components/regions/cognitive-service-regions.component';\nimport { CognitiveServiceSummarizationComponent } from './components/summarization/cognitive-service-summarization.component';\nimport { CognitiveServiceToneAnalyzerComponent } from './components/tone-analyzer/cognitive-service-tone-analyzer.component';\nimport { CognitiveServiceAdminComponent } from './cognitive-service.component';\nimport { RxConnectionTesterModule } from '@helix/platform/ui-kit';\nimport { TranslateModule } from '@ngx-translate/core';\n\n@NgModule({\n  declarations: [\n    CognitiveServiceAdminComponent,\n    CognitiveServiceAdministrationCredentialsComponent,\n    CognitiveServiceChatbotComponent,\n    CognitiveServiceConnectionsComponent,\n    CognitiveServiceOnboardComponent,\n    CognitiveServiceRegionsComponent,\n    CognitiveServiceSummarizationComponent,\n    CognitiveServiceToneAnalyzerComponent\n  ],\n  imports: [\n    AdaptAccordionModule,\n    AdaptAlertModule.forRoot(),\n    AdaptBusyModule,\n    AdaptButtonModule,\n    AdaptIconModule,\n    AdaptPopoverModule,\n    AdaptRxCheckboxModule,\n    AdaptRxCounterModule,\n    AdaptRxSelectModule,\n    AdaptRxSwitchModule,\n    AdaptRxTextareaModule,\n    AdaptRxTextfieldModule,\n    AdaptRxValidatorsModule,\n    AdminSettingsModule,\n    CommonModule,\n    FormsModule,\n    ReactiveFormsModule,\n    RxConnectionTesterModule,\n    RxJsonModule,\n    TranslateModule,\n    AdaptRxLabelModule\n  ],\n  entryComponents: [CognitiveServiceAdminComponent, CognitiveServiceOnboardComponent]\n})\nexport class CognitiveServiceRegistrationModule {\n  constructor(\n    private componentFactoryResolver: ComponentFactoryResolver,\n    private rxViewComponentRegistryService: RxViewComponentRegistryService\n  ) {\n    this.rxViewComponentRegistryService.register({\n      type: 'rx-admin-cognitive-service',\n      componentFactory: this.componentFactoryResolver.resolveComponentFactory(CognitiveServiceAdminComponent),\n      name: 'Cognitive service',\n      isPageComponent: true,\n      availableInBundles: [RX_APPLICATION.settingsBundleId]\n    });\n  }\n}\n","import { FileObj } from '@bmc-ux/adapt-angular';\nimport { IRecordGridFilterModel } from '@helix/platform/view/components';\nimport { IFieldDefinition } from '@helix/platform/record/api';\n\nexport enum CognitiveTrainingTabNames {\n  DataSets = 'dataSets',\n  TestResults = 'testResults'\n}\n\nexport enum CognitiveTrainingDataSourceNames {\n  InnovationSuiteDataSource = 'innovationSuiteDataSource',\n  FileDataSource = 'fileDataSource'\n}\n\nexport enum CognitiveTrainingEvaluationNames {\n  AutoClassificationTrainingAndEvaluation = 'autoClassificationTrainingAndEvaluation',\n  ChatbotEvaluation = 'chatbotEvaluation'\n}\n\nexport interface ICognitiveTrainingTab {\n  title: string;\n  name: string;\n  deletionConfirmationMessage: string;\n  deletionSuccessMessage: string;\n  recordDefinitionName: string;\n}\n\nexport interface ICognitiveTrainingType {\n  displayName: string;\n  name: string;\n  title: string;\n  value: number;\n  uniqueValue: number;\n}\n\nexport interface ICognitiveTrainingEvaluation {\n  isExpanded: boolean;\n  name: string;\n  queryExpression: string;\n  serviceProviderQueryExpresion?: string;\n  title: string;\n}\n\nexport interface ICognitiveTrainingClassification {\n  className: string;\n  confidence: number;\n}\n\nexport interface ICognitiveTrainingDataSourceType {\n  displayName: string;\n  name: string;\n  resourceType: string;\n  dataSourceHistory: ICognitiveTrainingDataSourceHistory;\n}\n\nexport interface ICognitiveTrainingDataSet {\n  chatbotDefinitionName?: string;\n  chatbotLocale?: string[];\n  csvFile: FileObj | FileObj[] | ICognitiveTrainingDataSetCsvFile[];\n  dataSetName: string;\n  dataSource?: ICognitiveTrainingDataSource;\n  dataSourceHistory?: ICognitiveTrainingDataSourceHistory;\n  description: string;\n  lastSubmittedDate: string;\n  lastTrainedDate?: string;\n  locale: string[];\n  machineLearningError?: string;\n  status?: ICognitiveTrainingDataSetStatus;\n  testDataPercent?: number;\n  trainDataPercent?: number;\n  useSeedTrainingData?: string;\n  trainingStatuses?: string[];\n  filterMode?: string;\n}\n\nexport interface ICognitiveTrainingDataSetStatus {\n  label: string;\n  value: number;\n}\n\nexport interface ICognitiveTrainingDataSetCsvFile {\n  data: ICognitiveTrainingDataSetCsvFileData;\n  downloadURL: string;\n  isUploading: boolean;\n}\n\nexport interface ICognitiveTrainingDataSetCsvFileData {\n  name: string;\n}\n\nexport interface ICognitiveTrainingDataSource {\n  file: FileObj | FileObj[] | ICognitiveTrainingDataSetCsvFile[];\n  value: string;\n}\n\nexport interface ICognitiveTrainingDataSourceHistory {\n  fileName?: string;\n  isScheduleEnabled?: boolean;\n  layout?: ICognitiveTrainingDataSourceHistoryLayout;\n  queryExpression?: string;\n  resourceType: string;\n  recordDefinitionName?: string;\n  trainingDataMapper?: ICognitiveTrainingDataSourceHistoryTrainingDataMapper;\n  timeCriteria?: ICognitiveTrainingDataSourceHistoryTimeCriteria;\n}\n\nexport interface ICognitiveTrainingDataSourceHistoryTimeCriteria {\n  resourceType: string;\n}\n\nexport interface ICognitiveTrainingDataSourceHistoryLayout {\n  queryExpressionBasic: IRecordGridFilterModel;\n  textFields: IFieldDefinition[];\n  categoryFields: IFieldDefinition[];\n}\n\nexport interface ICognitiveTrainingDataSourceHistoryTrainingDataMapper {\n  resourceType: string;\n  textFields: string[];\n  categoryFields: string[];\n}\n","import { MachineLearningProviderNames } from '@helix/platform/shared/api';\nimport {\n  CognitiveTrainingDataSourceNames,\n  CognitiveTrainingTabNames,\n  CognitiveTrainingEvaluationNames\n} from './cognitive-training.types';\n\nconst defaultTrainDataPercentage = 80;\n\nexport const RX_COGNITIVE_TRAINING = {\n  settings: {\n    sections: [\n      {\n        title: 'com.bmc.arsys.rx.client.admin.cognitive-training.auto-classification-training.evaluation.title',\n        evaluationName: CognitiveTrainingEvaluationNames.AutoClassificationTrainingAndEvaluation,\n        isExpanded: true\n      },\n      {\n        title: 'com.bmc.arsys.rx.client.admin.cognitive-training.chatbot-evaluation-ibm.watson.assistant.title',\n        evaluationName: CognitiveTrainingEvaluationNames.ChatbotEvaluation,\n        isExpanded: false\n      }\n    ],\n\n    tabs: {\n      [CognitiveTrainingTabNames.DataSets]: {\n        title: 'com.bmc.arsys.rx.client.admin.cognitive-training.data-sets.title',\n        name: CognitiveTrainingTabNames.DataSets,\n        deletionConfirmationMessage:\n          'com.bmc.arsys.rx.client.admin.cognitive-training.data-set-delete-confirmation.message',\n        deletionSuccessMessage: 'com.bmc.arsys.rx.client.admin.cognitive-training.data-set-deleted.message',\n        recordDefinitionName: 'Cognitive Service Data Set Descriptor'\n      },\n      [CognitiveTrainingTabNames.TestResults]: {\n        title: 'com.bmc.arsys.rx.client.admin.cognitive-training.test-results.title',\n        name: CognitiveTrainingTabNames.TestResults,\n        deletionConfirmationMessage:\n          'com.bmc.arsys.rx.client.admin.cognitive-training.test-results-delete-confirmation.message',\n        deletionSuccessMessage: 'com.bmc.arsys.rx.client.admin.cognitive-training.test-results-deleted.message',\n        recordDefinitionName: 'Cognitive Service Test Results'\n      }\n    },\n\n    evaluations: {\n      [CognitiveTrainingEvaluationNames.AutoClassificationTrainingAndEvaluation]: {\n        name: CognitiveTrainingEvaluationNames.AutoClassificationTrainingAndEvaluation,\n        queryExpression: \"'1732' = 0 AND '61001' = \",\n        serviceProviderQueryExpresion: \" AND '1820' = \"\n      },\n      [CognitiveTrainingEvaluationNames.ChatbotEvaluation]: {\n        name: CognitiveTrainingEvaluationNames.ChatbotEvaluation,\n        queryExpression: \"'1732' = 1 AND '61001' = \"\n      }\n    },\n\n    trainingTypes: {\n      [MachineLearningProviderNames.Watson]: {\n        title:\n          'com.bmc.arsys.rx.client.admin.cognitive-training.auto-classification-training.evaluation-ibm-watson.title',\n        displayName: 'com.bmc.arsys.rx.client.admin.cognitive-training.ibm-watson-conversation.title',\n        name: MachineLearningProviderNames.Watson,\n        value: 0,\n        uniqueValue: 0\n      },\n      [MachineLearningProviderNames.Native]: {\n        title:\n          'com.bmc.arsys.rx.client.admin.cognitive-training.auto-classification-training.evaluation-bmc-native-google.title',\n        displayName: 'com.bmc.arsys.rx.client.admin.cognitive-service.bmc-native.title',\n        name: 'native',\n        value: 0,\n        uniqueValue: 1\n      },\n      [MachineLearningProviderNames.Helix]: {\n        title:\n          'com.bmc.arsys.rx.client.admin.cognitive-training.auto-classification-training.evaluation-helix-ade.title',\n        displayName: 'com.bmc.arsys.rx.client.admin.cognitive-service.helix-ade.title',\n        name: MachineLearningProviderNames.Helix,\n        value: 0,\n        uniqueValue: 2\n      },\n      chatbot: {\n        value: 1\n      }\n    },\n\n    dataSourceTypes: {\n      [CognitiveTrainingDataSourceNames.InnovationSuiteDataSource]: {\n        displayName: 'com.bmc.arsys.rx.client.admin.cognitive-search.bmc-helix-platform-data-set.label',\n        name: CognitiveTrainingDataSourceNames.InnovationSuiteDataSource,\n        resourceType: 'com.bmc.arsys.rx.services.cognitive.domain.InnovationSuiteDataSource',\n        dataSourceHistory: {\n          layout: {\n            queryExpressionBasic: {\n              filtersJson: null,\n              basicFilters: null\n            },\n            textFields: [],\n            categoryFields: []\n          },\n          resourceType: 'com.bmc.arsys.rx.services.cognitive.domain.InnovationSuiteDataSource',\n          recordDefinitionName: '',\n          queryExpression: '',\n          trainingDataMapper: {\n            resourceType: 'com.bmc.arsys.rx.services.cognitive.domain.CategorizationTrainingDataMapper',\n            textFields: [],\n            categoryFields: []\n          },\n          timeCriteria: null,\n          isScheduleEnabled: false\n        }\n      },\n      [CognitiveTrainingDataSourceNames.FileDataSource]: {\n        displayName: 'com.bmc.arsys.rx.client.admin.cognitive-training.csv-data-set.label',\n        name: CognitiveTrainingDataSourceNames.FileDataSource,\n        resourceType: 'com.bmc.arsys.rx.services.cognitive.domain.FileDataSource',\n        dataSourceHistory: {\n          resourceType: 'com.bmc.arsys.rx.services.cognitive.domain.FileDataSource',\n          fileName: ''\n        }\n      }\n    },\n\n    commands: {\n      classify: 'com.bmc.arsys.rx.application.cognitive.command.AutomaticCategorySuggestionCommand',\n      train: 'com.bmc.arsys.rx.application.cognitive.command.TrainCognitiveServiceCommand',\n      test: 'com.bmc.arsys.rx.application.cognitive.command.TestChatbotCommand'\n    },\n\n    trainingStatuses: {\n      untrained: {\n        label: 'Untrained',\n        value: 0\n      },\n      training: {\n        label: 'Training',\n        value: 1\n      },\n      trained: {\n        label: 'Trained',\n        value: 2\n      },\n      failed: {\n        label: 'Failed',\n        value: 3\n      },\n      pendingRetraining: {\n        label: 'Pending retraining',\n        value: 4\n      },\n      inProgress: {\n        label: 'In progress',\n        value: 5\n      },\n      created: {\n        label: 'Created',\n        value: 6\n      }\n    },\n\n    evaluationStatuses: {\n      queued: {\n        label: 'Queued',\n        value: 0\n      },\n      running: {\n        label: 'Running',\n        value: 10\n      },\n      completed: {\n        label: 'Completed',\n        value: 20\n      },\n      failed: {\n        label: 'Failed',\n        value: 30\n      }\n    },\n\n    nativeProviderTrainingLocales: ['de', 'en', 'es', 'fr', 'it', 'pt'],\n\n    watsonProviderTrainingLocales: ['ar', 'de', 'en', 'es', 'fr', 'it', 'ja', 'ko', 'nl', 'pt', 'zh-cn', 'zh-tw'],\n\n    defaultTrainingLocale: 'en',\n\n    dataSetDefinitionName: 'Cognitive Service Data Set Descriptor',\n    testResultsDefinitionName: 'Cognitive Service Test Results',\n\n    fieldIds: {\n      modifiedDate: 6,\n      evaluationStatus: 7,\n      instanceId: 379,\n      dataSetID: 1730,\n      dataSetName: 1731,\n      trainingType: 1732,\n      machineLearningError: 1733,\n      error: 1733,\n      dataSource: 1734,\n      dateLastSubmitted: 1735,\n      dateLastTrained: 1736,\n      locale: 1737,\n      dataSourceHistory: 1738,\n      developerId: 1739,\n      newDataSetId: 1740,\n      useSeedTrainingData: 1741,\n      resultCsv: 1795,\n      serviceInstanceGuid: 1742,\n      trainDataPercent: 1796,\n      testDataPercent: 1797,\n      trainingDataCsv: 1798,\n      testDataCsv: 1799,\n      accuracy: 1806,\n      precision: 1807,\n      recall: 1808,\n      fScore: 1809,\n      dateLastTested: 1811,\n      chatbotName: 1816,\n      classificationServiceProvider: 1820,\n      dataSetLocale: 1829,\n      bundleId: 61001\n    },\n\n    defaultTrainDataPercentage: defaultTrainDataPercentage,\n    defaultTestDataPercentage: 100 - defaultTrainDataPercentage\n  }\n};\n","import { Injectable } from '@angular/core';\nimport { RxRecordInstanceDataPageService } from '@helix/platform/record/api';\nimport {\n  IDataPageResult,\n  ISystemConfiguration,\n  RxSystemConfigurationService,\n  RX_CHATBOT\n} from '@helix/platform/shared/api';\nimport { values } from 'lodash';\nimport { Observable } from 'rxjs';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class RxCognitiveTrainingService {\n  constructor(\n    private rxSystemConfigurationService: RxSystemConfigurationService,\n    private rxRecordInstanceDataPageService: RxRecordInstanceDataPageService\n  ) {}\n\n  getClassificationServiceProvider(): Observable<ISystemConfiguration> {\n    return this.rxSystemConfigurationService.getConfiguration('classificationServiceProvider');\n  }\n\n  getChatbotLocalesById(id: string): Observable<IDataPageResult> {\n    return this.rxRecordInstanceDataPageService.post({\n      params: {\n        recorddefinition: RX_CHATBOT.chatbotLocales.recordDefinitionName,\n        propertySelection: values(RX_CHATBOT.chatbotLocales.fieldIds).join(','),\n        queryExpression: `'${RX_CHATBOT.chatbotLocales.fieldIds.botConfigurationId}'=\"${id}\"`\n      }\n    });\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { MachineLearningProviderNames } from '@helix/platform/shared/api';\nimport { ICognitiveTrainingDataSourceHistory, ICognitiveTrainingDataSourceType } from './cognitive-training.types';\nimport { RX_COGNITIVE_TRAINING } from './cognitive-training.constant';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class RxCognitiveTrainingUtilsService {\n  getDataSourceType(dataSourceHistory: ICognitiveTrainingDataSourceHistory): ICognitiveTrainingDataSourceType {\n    let dataSourceType: ICognitiveTrainingDataSourceType;\n\n    if (dataSourceHistory.fileName) {\n      dataSourceType = RX_COGNITIVE_TRAINING.settings.dataSourceTypes.fileDataSource;\n    } else if (dataSourceHistory.recordDefinitionName) {\n      dataSourceType = RX_COGNITIVE_TRAINING.settings.dataSourceTypes.innovationSuiteDataSource;\n    }\n\n    return dataSourceType;\n  }\n\n  getTrainingLocales(trainingTypeValue: number): string[] {\n    let result: string[];\n\n    if (trainingTypeValue === RX_COGNITIVE_TRAINING.settings.trainingTypes[MachineLearningProviderNames.Native].value) {\n      result = RX_COGNITIVE_TRAINING.settings.nativeProviderTrainingLocales;\n    } else if (\n      trainingTypeValue === RX_COGNITIVE_TRAINING.settings.trainingTypes[MachineLearningProviderNames.Watson].value\n    ) {\n      result = RX_COGNITIVE_TRAINING.settings.watsonProviderTrainingLocales;\n    }\n\n    return result;\n  }\n}\n","import { Component, Injector, OnDestroy, OnInit, ViewChild } from '@angular/core';\nimport { NgForm } from '@angular/forms';\nimport { DismissReasons, DockedPanelContext, RxSelectOption, UploaderMode } from '@bmc-ux/adapt-angular';\nimport { RX_RECORD_DEFINITION, RxRecordInstanceService } from '@helix/platform/record/api';\nimport {\n  IChatbotDefinition,\n  IPlainObject,\n  RX_CHATBOT,\n  RxChatbotDefinitionDataPageService\n} from '@helix/platform/shared/api';\nimport { IDefinitionPickerComponentOptions, RxDefinitionPickerType } from '@helix/platform/shared/components';\nimport { assign, find, isEmpty } from 'lodash';\nimport moment from 'moment-es6';\nimport { BehaviorSubject, combineLatest, Observable, of } from 'rxjs';\nimport { map, shareReplay, switchMap } from 'rxjs/operators';\nimport { RxCognitiveTrainingUtilsService } from '../../cognitive-training-utils.service';\nimport { RX_COGNITIVE_TRAINING } from '../../cognitive-training.constant';\nimport { RxCognitiveTrainingService } from '../../cognitive-training.service';\nimport { ICognitiveTrainingDataSet } from '../../cognitive-training.types';\nimport { TranslateService } from '@ngx-translate/core';\nimport { RxModalClass } from '@helix/platform/ui-kit';\n\n@Component({\n  selector: 'rx-chatbot-data-set-blade',\n  templateUrl: './chatbot-data-set-blade.component.html'\n})\nexport class ChatbotDataSetBladeComponent extends RxModalClass implements OnInit, OnDestroy {\n  @ViewChild('chatbotDataSetForm', { static: true, read: NgForm })\n  chatbotDataSetForm: NgForm;\n\n  contextData: IPlainObject;\n  dataSet: ICognitiveTrainingDataSet;\n  localeOptions: RxSelectOption[];\n\n  chatbotDefinitionPickerOptions: IDefinitionPickerComponentOptions = {\n    label: this.translateService.instant('com.bmc.arsys.rx.client.admin.chatbots.name.label'),\n    definitionType: RxDefinitionPickerType.Chatbot,\n    required: true\n  };\n\n  csvFileUploadMode: number = UploaderMode.Auto;\n\n  private chatbotDefinitionName$ = new BehaviorSubject<string>('');\n\n  private chatbotDefinitions$: Observable<IChatbotDefinition[]> = this.rxChatbotDefinitionDataPageService\n    .get({\n      headers: {\n        'default-bundle-scope': ''\n      },\n      params: {\n        propertySelection: ['chatbotName', 'id', 'enableTranslation']\n      }\n    })\n    .pipe(map((dataPage) => dataPage.data as IChatbotDefinition[]));\n\n  chatbotDefinition$: Observable<IChatbotDefinition> = combineLatest([\n    this.chatbotDefinitionName$,\n    this.chatbotDefinitions$\n  ]).pipe(\n    map(\n      ([chatbotDefinitionName, chatbotDefinitions]) =>\n        find(chatbotDefinitions, { chatbotName: chatbotDefinitionName }) || null\n    ),\n    shareReplay(1)\n  );\n\n  isChatbotTranslationEnabled$: Observable<boolean> = this.chatbotDefinition$.pipe(\n    map((chatbotDefinition) => chatbotDefinition?.enableTranslation === 1)\n  );\n\n  chatbotLocaleOptions$: Observable<RxSelectOption[]> = this.chatbotDefinition$.pipe(\n    switchMap((chatbotDefinition) =>\n      chatbotDefinition\n        ? this.rxCognitiveTrainingService\n            .getChatbotLocalesById(chatbotDefinition.id)\n            .pipe(\n              map(\n                (dataPageResult) =>\n                  dataPageResult.data.map(\n                    (localeFieldIds) => localeFieldIds[RX_CHATBOT.chatbotLocales.fieldIds.locale]\n                  ) as RxSelectOption[]\n              )\n            )\n        : of([])\n    )\n  );\n\n  constructor(\n    private dockedPanelContext: DockedPanelContext,\n    private rxChatbotDefinitionDataPageService: RxChatbotDefinitionDataPageService,\n    private rxCognitiveTrainingService: RxCognitiveTrainingService,\n    private rxCognitiveTrainingUtilsService: RxCognitiveTrainingUtilsService,\n    private rxRecordInstanceService: RxRecordInstanceService,\n    private translateService: TranslateService,\n    protected injector: Injector\n  ) {\n    super(dockedPanelContext, injector);\n    this.contextData = this.dockedPanelContext.getData().data;\n  }\n\n  ngOnInit(): void {\n    super.ngOnInit();\n\n    this.localeOptions = this.rxCognitiveTrainingUtilsService.getTrainingLocales(\n      RX_COGNITIVE_TRAINING.settings.trainingTypes.chatbot.value\n    );\n\n    const dataSource = this.contextData.recordInstance.getFieldValue(\n      RX_COGNITIVE_TRAINING.settings.fieldIds.dataSource\n    );\n\n    this.dataSet = {\n      dataSetName: this.contextData.recordInstance.getFieldValue(RX_COGNITIVE_TRAINING.settings.fieldIds.dataSetName),\n      description: this.contextData.recordInstance.getFieldValue(RX_RECORD_DEFINITION.coreFieldIds.description),\n      csvFile: null,\n      chatbotLocale: [this.contextData.recordInstance.getFieldValue(RX_COGNITIVE_TRAINING.settings.fieldIds.locale)],\n\n      chatbotDefinitionName: this.contextData.recordInstance.getFieldValue(\n        RX_COGNITIVE_TRAINING.settings.fieldIds.chatbotName\n      ),\n\n      locale: [\n        this.contextData.recordInstance.getFieldValue(RX_COGNITIVE_TRAINING.settings.fieldIds.dataSetLocale) ||\n          RX_COGNITIVE_TRAINING.settings.defaultTrainingLocale\n      ],\n\n      lastSubmittedDate: this.contextData.recordInstance.getFieldValue(\n        RX_COGNITIVE_TRAINING.settings.fieldIds.dateLastSubmitted\n      ),\n\n      status: find(RX_COGNITIVE_TRAINING.settings.trainingStatuses, {\n        value: this.contextData.recordInstance.getFieldValue(RX_RECORD_DEFINITION.coreFieldIds.status)\n      })\n    };\n\n    if (dataSource && (this.contextData.editDataSet || this.contextData.copyDataSet)) {\n      this.rxRecordInstanceService\n        .getAttachment(\n          RX_COGNITIVE_TRAINING.settings.dataSetDefinitionName,\n          RX_COGNITIVE_TRAINING.settings.fieldIds.dataSource,\n          this.contextData.getAttachmentRecordInstanceId\n        )\n        .subscribe((blob) => {\n          this.dataSet.csvFile = [\n            {\n              data: assign(blob, {\n                name: dataSource\n              }),\n              downloadURL: this.rxRecordInstanceService.getAttachmentDownloadUrl(\n                RX_COGNITIVE_TRAINING.settings.dataSetDefinitionName,\n                RX_COGNITIVE_TRAINING.settings.fieldIds.dataSource,\n                this.contextData.recordInstance.id\n              ),\n              isUploading: true\n            }\n          ];\n        });\n    }\n\n    if (this.dataSet.chatbotDefinitionName) {\n      this.chatbotDefinitionName$.next(this.dataSet.chatbotDefinitionName);\n    }\n  }\n\n  isDirty(): boolean {\n    return this.chatbotDataSetForm.dirty;\n  }\n\n  ngOnDestroy(): void {\n    this.chatbotDefinitionName$.complete();\n  }\n\n  onChatbotDefinitionNameChange(chatbotDefinitionName: string): void {\n    this.dataSet.chatbotLocale = [];\n    this.dataSet.locale = [];\n\n    this.chatbotDefinitionName$.next(chatbotDefinitionName);\n  }\n\n  optionFormatter = (opt: RxSelectOption) => opt;\n\n  onSaveClick(): void {\n    this.contextData.recordInstance.setFieldValue(\n      RX_COGNITIVE_TRAINING.settings.fieldIds.dataSourceHistory,\n      JSON.stringify({\n        resourceType: this.contextData.dataSourceType.resourceType,\n        fileName: this.dataSet.csvFile && this.dataSet.csvFile[0].data.name\n      })\n    );\n\n    this.contextData.recordInstance.setFieldProp(\n      RX_COGNITIVE_TRAINING.settings.fieldIds.dataSource,\n      'file',\n      (!isEmpty(this.dataSet.csvFile) && this.dataSet.csvFile[0].data) || null\n    );\n\n    this.contextData.recordInstance.setFieldProp(\n      RX_COGNITIVE_TRAINING.settings.fieldIds.dataSource,\n      'value',\n      (!isEmpty(this.dataSet.csvFile) && this.dataSet.csvFile[0].data.name) || null\n    );\n\n    this.contextData.recordInstance.setFieldValue(\n      RX_RECORD_DEFINITION.coreFieldIds.description,\n      this.dataSet.description\n    );\n\n    this.contextData.recordInstance.setFieldValue(\n      RX_COGNITIVE_TRAINING.settings.fieldIds.dataSetLocale,\n      this.dataSet.locale[0] || null\n    );\n\n    this.contextData.recordInstance.setFieldValue(RX_COGNITIVE_TRAINING.settings.fieldIds.dateLastSubmitted, moment());\n\n    if (this.contextData.isNewDataSet || this.contextData.copyDataSet) {\n      this.contextData.recordInstance.setFieldValue(\n        RX_COGNITIVE_TRAINING.settings.fieldIds.bundleId,\n        this.contextData.bundleId\n      );\n\n      this.contextData.recordInstance.setFieldValue(\n        RX_COGNITIVE_TRAINING.settings.fieldIds.dataSetName,\n        this.dataSet.dataSetName\n      );\n\n      this.contextData.recordInstance.setFieldValue(RX_COGNITIVE_TRAINING.settings.fieldIds.dataSetID, '');\n\n      this.contextData.recordInstance.setFieldValue(\n        RX_COGNITIVE_TRAINING.settings.fieldIds.chatbotName,\n        this.dataSet.chatbotDefinitionName\n      );\n\n      this.contextData.recordInstance.setFieldValue(\n        RX_COGNITIVE_TRAINING.settings.fieldIds.locale,\n        this.dataSet.chatbotLocale[0]\n      );\n\n      this.contextData.recordInstance.setFieldValue(\n        RX_RECORD_DEFINITION.coreFieldIds.status,\n        RX_COGNITIVE_TRAINING.settings.trainingStatuses.untrained.value\n      );\n\n      this.contextData.recordInstance.setFieldValue(\n        RX_COGNITIVE_TRAINING.settings.fieldIds.trainingType,\n        RX_COGNITIVE_TRAINING.settings.trainingTypes.chatbot.value\n      );\n\n      this.rxRecordInstanceService.create(this.contextData.recordInstance).subscribe(() => {\n        this.dockedPanelContext.close('save');\n      });\n    } else if (this.contextData.editDataSet) {\n      if (\n        this.dataSet.status.value === RX_COGNITIVE_TRAINING.settings.trainingStatuses.trained.value ||\n        this.dataSet.status.value === RX_COGNITIVE_TRAINING.settings.trainingStatuses.failed.value\n      ) {\n        this.contextData.recordInstance.setFieldValue(\n          RX_RECORD_DEFINITION.coreFieldIds.status,\n          RX_COGNITIVE_TRAINING.settings.trainingStatuses.pendingRetraining.value\n        );\n      }\n\n      this.rxRecordInstanceService.save(this.contextData.recordInstance).subscribe(() => {\n        this.dockedPanelContext.close('save');\n      });\n    }\n  }\n\n  onCloseClick(): void {\n    this.dockedPanelContext.dismiss(DismissReasons.CLOSE_BTN);\n  }\n}\n","<div class=\"dp-body\">\n  <form #chatbotDataSetForm=\"ngForm\">\n    <div class=\"d-flex justify-content-between m-0 mb-4\" *ngIf=\"contextData.editDataSet\">\n      <label class=\"form-control-label\">\n        {{ 'com.bmc.arsys.rx.client.admin.cognitive-training.date-last-submitted.label' | translate }}\n      </label>\n\n      <div>{{ dataSet.lastSubmittedDate | date: 'medium' }}</div>\n    </div>\n\n    <adapt-rx-textfield\n      class=\"form-group d-block\"\n      name=\"data-set-name\"\n      label=\"{{ 'com.bmc.arsys.rx.client.admin.cognitive-search.data-set-name.label' | translate }}\"\n      rx-id=\"data-set-name-field\"\n      required\n      [(ngModel)]=\"dataSet.dataSetName\"\n    >\n    </adapt-rx-textfield>\n\n    <adapt-rx-textfield\n      class=\"form-group d-block\"\n      name=\"description\"\n      label=\"{{ 'com.bmc.arsys.rx.client.common.description.label' | translate }}\"\n      rx-id=\"description-field\"\n      required\n      [(ngModel)]=\"dataSet.description\"\n    >\n    </adapt-rx-textfield>\n\n    <adapt-rx-uploader\n      class=\"form-group d-block\"\n      name=\"csv-file\"\n      label=\"{{ 'com.bmc.arsys.rx.client.admin.cognitive-training.csv-file.label' | translate }}\"\n      rx-id=\"csv-file-field\"\n      required\n      reusable=\"true\"\n      [uploadMode]=\"csvFileUploadMode\"\n      [allowedTypes]=\"['csv']\"\n      [(ngModel)]=\"dataSet.csvFile\"\n    >\n    </adapt-rx-uploader>\n\n    <rx-definition-picker\n      class=\"form-group d-block\"\n      name=\"chatbot-name\"\n      rx-id=\"chatbot-name-field\"\n      required\n      [options]=\"chatbotDefinitionPickerOptions\"\n      [(ngModel)]=\"dataSet.chatbotDefinitionName\"\n      (ngModelChange)=\"onChatbotDefinitionNameChange($event)\"\n    >\n    </rx-definition-picker>\n\n    <div *ngIf=\"chatbotDefinition$ | async\">\n      <adapt-rx-select\n        class=\"form-group d-block\"\n        name=\"chatbot-locale\"\n        label=\"{{\n          'com.bmc.arsys.rx.client.admin.cognitive-training.chatbot-data-set-blade.chatbot-locale.label' | translate\n        }}\"\n        rx-id=\"chatbot-locale-field\"\n        required\n        [options]=\"(chatbotLocaleOptions$ | async) || []\"\n        [optionFormatter]=\"optionFormatter\"\n        [(ngModel)]=\"dataSet.chatbotLocale\"\n      >\n      </adapt-rx-select>\n\n      <adapt-rx-select\n        class=\"form-group d-block\"\n        *ngIf=\"isChatbotTranslationEnabled$ | async\"\n        name=\"locale\"\n        label=\"{{\n          'com.bmc.arsys.rx.client.admin.cognitive-training.chatbot-data-set-blade.data-set-locale.label' | translate\n        }}\"\n        rx-id=\"locale-field\"\n        required\n        [options]=\"localeOptions\"\n        [optionFormatter]=\"optionFormatter\"\n        [(ngModel)]=\"dataSet.locale\"\n      >\n      </adapt-rx-select>\n    </div>\n  </form>\n</div>\n\n<div class=\"dp-footer\">\n  <button\n    class=\"mr-2\"\n    type=\"button\"\n    rx-id=\"save-button\"\n    adapt-button\n    btn-type=\"primary\"\n    [disabled]=\"chatbotDataSetForm.pristine || chatbotDataSetForm.invalid\"\n    (click)=\"onSaveClick()\"\n  >\n    {{ 'com.bmc.arsys.rx.client.common.save.label' | translate }}\n  </button>\n\n  <button class=\"mr-2\" type=\"button\" rx-id=\"close-button\" adapt-button btn-type=\"secondary\" (click)=\"onCloseClick()\">\n    {{ 'com.bmc.arsys.rx.client.common.close.label' | translate }}\n  </button>\n</div>\n","import { Component, Injector, OnInit, ViewChild } from '@angular/core';\nimport { NgForm } from '@angular/forms';\nimport { assign, find, isEmpty } from 'lodash';\nimport moment from 'moment-es6';\nimport { DismissReasons, DockedPanelContext, RxSelectOption, UploaderMode } from '@bmc-ux/adapt-angular';\nimport { RX_RECORD_DEFINITION, RxRecordInstanceService } from '@helix/platform/record/api';\nimport { IPlainObject } from '@helix/platform/shared/api';\nimport { RxModalClass } from '@helix/platform/ui-kit';\nimport { ICognitiveTrainingDataSet } from '../../cognitive-training.types';\nimport { RX_COGNITIVE_TRAINING } from '../../cognitive-training.constant';\nimport { RxCognitiveTrainingUtilsService } from '../../cognitive-training-utils.service';\n\n@Component({\n  selector: 'rx-file-data-set-blade',\n  templateUrl: './file-data-set-blade.component.html'\n})\nexport class FileDataSetBladeComponent extends RxModalClass implements OnInit {\n  @ViewChild('fileDataSetForm', { static: true, read: NgForm })\n  fileDataSetForm: NgForm;\n\n  contextData: IPlainObject;\n  dataSet: ICognitiveTrainingDataSet;\n  localeOptions: RxSelectOption[];\n\n  csvFileUploadMode = UploaderMode.Auto;\n\n  constructor(\n    private dockedPanelContext: DockedPanelContext,\n    private rxCognitiveTrainingUtilsService: RxCognitiveTrainingUtilsService,\n    private rxRecordInstanceService: RxRecordInstanceService,\n    protected injector: Injector\n  ) {\n    super(dockedPanelContext, injector);\n    this.contextData = this.dockedPanelContext.getData().data;\n  }\n\n  ngOnInit(): void {\n    super.ngOnInit();\n\n    this.localeOptions = this.rxCognitiveTrainingUtilsService.getTrainingLocales(this.contextData.trainingType.value);\n\n    const dataSource = this.contextData.recordInstance.getFieldValue(\n      RX_COGNITIVE_TRAINING.settings.fieldIds.dataSource\n    );\n\n    this.dataSet = {\n      dataSetName: this.contextData.recordInstance.getFieldValue(RX_COGNITIVE_TRAINING.settings.fieldIds.dataSetName),\n      description: this.contextData.recordInstance.getFieldValue(RX_RECORD_DEFINITION.coreFieldIds.description),\n      csvFile: null,\n\n      locale: [\n        this.contextData.recordInstance.getFieldValue(RX_COGNITIVE_TRAINING.settings.fieldIds.locale) ||\n          RX_COGNITIVE_TRAINING.settings.defaultTrainingLocale\n      ],\n\n      testDataPercent: this.contextData.isNewDataSet\n        ? RX_COGNITIVE_TRAINING.settings.defaultTestDataPercentage\n        : this.contextData.recordInstance.getFieldValue(RX_COGNITIVE_TRAINING.settings.fieldIds.testDataPercent),\n\n      trainDataPercent: this.contextData.isNewDataSet\n        ? RX_COGNITIVE_TRAINING.settings.defaultTrainDataPercentage\n        : this.contextData.recordInstance.getFieldValue(RX_COGNITIVE_TRAINING.settings.fieldIds.trainDataPercent),\n\n      status: find(RX_COGNITIVE_TRAINING.settings.trainingStatuses, {\n        value: this.contextData.recordInstance.getFieldValue(RX_RECORD_DEFINITION.coreFieldIds.status)\n      }),\n\n      lastSubmittedDate: this.contextData.recordInstance.getFieldValue(\n        RX_COGNITIVE_TRAINING.settings.fieldIds.dateLastSubmitted\n      ),\n\n      lastTrainedDate: this.contextData.recordInstance.getFieldValue(\n        RX_COGNITIVE_TRAINING.settings.fieldIds.dateLastTrained\n      ),\n      machineLearningError: this.contextData.recordInstance.getFieldValue(\n        RX_COGNITIVE_TRAINING.settings.fieldIds.machineLearningError\n      )\n    };\n\n    if (dataSource && (this.contextData.editDataSet || this.contextData.copyDataSet)) {\n      this.rxRecordInstanceService\n        .getAttachment(\n          RX_COGNITIVE_TRAINING.settings.dataSetDefinitionName,\n          RX_COGNITIVE_TRAINING.settings.fieldIds.dataSource,\n          this.contextData.getAttachmentRecordInstanceId\n        )\n        .subscribe((blob) => {\n          this.dataSet.csvFile = [\n            {\n              data: assign(blob, {\n                name: dataSource\n              }),\n              downloadURL: this.rxRecordInstanceService.getAttachmentDownloadUrl(\n                RX_COGNITIVE_TRAINING.settings.dataSetDefinitionName,\n                RX_COGNITIVE_TRAINING.settings.fieldIds.dataSource,\n                this.contextData.recordInstance.id\n              ),\n              isUploading: true\n            }\n          ];\n        });\n    }\n  }\n\n  isDirty(): boolean {\n    return this.fileDataSetForm.dirty;\n  }\n\n  optionFormatter = (opt: RxSelectOption) => opt;\n\n  onTrainDataPercentCounterChange(trainDataPercent: number): void {\n    this.dataSet.testDataPercent = 100 - trainDataPercent;\n  }\n\n  onTestDataPercentCounterChange(testDataPercent: number): void {\n    this.dataSet.trainDataPercent = 100 - testDataPercent;\n  }\n\n  onSaveClick(): void {\n    this.contextData.recordInstance.setFieldValue(\n      RX_RECORD_DEFINITION.coreFieldIds.description,\n      this.dataSet.description\n    );\n\n    this.contextData.recordInstance.setFieldProp(\n      RX_COGNITIVE_TRAINING.settings.fieldIds.dataSource,\n      'file',\n      (!isEmpty(this.dataSet.csvFile) && this.dataSet.csvFile[0].data) || null\n    );\n\n    this.contextData.recordInstance.setFieldProp(\n      RX_COGNITIVE_TRAINING.settings.fieldIds.dataSource,\n      'value',\n      (!isEmpty(this.dataSet.csvFile) && this.dataSet.csvFile[0].data.name) || null\n    );\n\n    this.contextData.recordInstance.setFieldValue(\n      RX_COGNITIVE_TRAINING.settings.fieldIds.dataSourceHistory,\n      JSON.stringify({\n        resourceType: this.contextData.dataSourceType.resourceType,\n        fileName: this.dataSet.csvFile[0].data.name\n      })\n    );\n\n    this.contextData.recordInstance.setFieldValue(\n      RX_COGNITIVE_TRAINING.settings.fieldIds.locale,\n      this.dataSet.locale[0]\n    );\n\n    this.contextData.recordInstance.setFieldValue(RX_COGNITIVE_TRAINING.settings.fieldIds.dateLastSubmitted, moment());\n\n    this.contextData.recordInstance.setFieldValue(\n      RX_COGNITIVE_TRAINING.settings.fieldIds.testDataPercent,\n      this.dataSet.testDataPercent\n    );\n\n    this.contextData.recordInstance.setFieldValue(\n      RX_COGNITIVE_TRAINING.settings.fieldIds.trainDataPercent,\n      this.dataSet.trainDataPercent\n    );\n\n    if (this.contextData.isNewDataSet || this.contextData.copyDataSet) {\n      this.contextData.recordInstance.setFieldValue(\n        RX_COGNITIVE_TRAINING.settings.fieldIds.bundleId,\n        this.contextData.bundleId\n      );\n\n      this.contextData.recordInstance.setFieldValue(\n        RX_COGNITIVE_TRAINING.settings.fieldIds.dataSetName,\n        this.dataSet.dataSetName\n      );\n\n      this.contextData.recordInstance.setFieldValue(RX_COGNITIVE_TRAINING.settings.fieldIds.dataSetID, '');\n\n      this.contextData.recordInstance.setFieldValue(\n        RX_RECORD_DEFINITION.coreFieldIds.status,\n        RX_COGNITIVE_TRAINING.settings.trainingStatuses.untrained.value\n      );\n\n      this.contextData.recordInstance.setFieldValue(\n        RX_COGNITIVE_TRAINING.settings.fieldIds.classificationServiceProvider,\n        this.contextData.trainingType.uniqueValue\n      );\n\n      this.contextData.recordInstance.setFieldValue(\n        RX_COGNITIVE_TRAINING.settings.fieldIds.trainingType,\n        this.contextData.trainingType.value\n      );\n\n      this.rxRecordInstanceService.create(this.contextData.recordInstance).subscribe(() => {\n        this.dockedPanelContext.close('save');\n      });\n    } else if (this.contextData.editDataSet) {\n      if (\n        this.dataSet.status.value === RX_COGNITIVE_TRAINING.settings.trainingStatuses.trained.value ||\n        this.dataSet.status.value === RX_COGNITIVE_TRAINING.settings.trainingStatuses.failed.value\n      ) {\n        this.contextData.recordInstance.setFieldValue(\n          RX_RECORD_DEFINITION.coreFieldIds.status,\n          RX_COGNITIVE_TRAINING.settings.trainingStatuses.pendingRetraining.value\n        );\n      }\n\n      this.rxRecordInstanceService.save(this.contextData.recordInstance).subscribe(() => {\n        this.dockedPanelContext.close('save');\n      });\n    }\n  }\n\n  onCloseClick(): void {\n    this.dockedPanelContext.dismiss(DismissReasons.CLOSE_BTN);\n  }\n}\n","<div class=\"dp-body\">\n  <form #fileDataSetForm=\"ngForm\">\n    <div *ngIf=\"contextData.editDataSet\">\n      <div class=\"d-flex justify-content-between m-0 mb-3\">\n        <div>\n          <label class=\"form-control-label\">\n            {{ 'com.bmc.arsys.rx.client.admin.cognitive-training.status.label' | translate }}\n          </label>\n\n          <div>{{ dataSet.status.label }}</div>\n        </div>\n\n        <div>\n          <label class=\"form-control-label\">\n            {{ 'com.bmc.arsys.rx.client.admin.cognitive-training.date-last-submitted.label' | translate }}\n          </label>\n\n          <div>{{ dataSet.lastSubmittedDate | date: 'medium' }}</div>\n        </div>\n\n        <div>\n          <label class=\"form-control-label\">\n            {{ 'com.bmc.arsys.rx.client.admin.cognitive-training.date-last-trained.label' | translate }}\n          </label>\n\n          <div>{{ dataSet.lastTrainedDate | date: 'medium' }}</div>\n        </div>\n      </div>\n\n      <adapt-alert\n        *ngIf=\"dataSet.machineLearningError\"\n        [config]=\"{\n          content: dataSet.machineLearningError,\n          type: 'inline',\n          variant: 'danger'\n        }\"\n      ></adapt-alert>\n    </div>\n\n    <adapt-rx-textfield\n      class=\"form-group d-block\"\n      name=\"data-set-name\"\n      label=\"{{ 'com.bmc.arsys.rx.client.admin.cognitive-search.data-set-name.label' | translate }}\"\n      rx-id=\"data-set-name-field\"\n      required\n      [disabled]=\"contextData.editDataSet\"\n      [(ngModel)]=\"dataSet.dataSetName\"\n    >\n    </adapt-rx-textfield>\n\n    <adapt-rx-textfield\n      class=\"form-group d-block\"\n      name=\"description\"\n      label=\"{{ 'com.bmc.arsys.rx.client.admin.chatbots.description.title' | translate }}\"\n      rx-id=\"description-field\"\n      required\n      [(ngModel)]=\"dataSet.description\"\n    >\n    </adapt-rx-textfield>\n\n    <adapt-rx-textfield\n      class=\"form-group d-block\"\n      name=\"training-type\"\n      label=\"{{ 'com.bmc.arsys.rx.client.admin.cognitive-training.training-type.label' | translate }}\"\n      rx-id=\"training-type-field\"\n      required\n      disabled\n      [(ngModel)]=\"contextData.trainingType.displayName\"\n    >\n    </adapt-rx-textfield>\n\n    <adapt-rx-uploader\n      class=\"form-group d-block\"\n      name=\"csv-file\"\n      label=\"{{ 'com.bmc.arsys.rx.client.admin.cognitive-training.csv-file.label' | translate }}\"\n      rx-id=\"csv-file-field\"\n      required\n      reusable=\"true\"\n      [uploadMode]=\"csvFileUploadMode\"\n      [allowedTypes]=\"['csv']\"\n      [(ngModel)]=\"dataSet.csvFile\"\n    >\n    </adapt-rx-uploader>\n\n    <adapt-rx-select\n      class=\"form-group d-block\"\n      name=\"locale\"\n      label=\"{{ 'com.bmc.arsys.rx.client.admin.cognitive-search.locale.label' | translate }}\"\n      rx-id=\"locale-field\"\n      required\n      [options]=\"localeOptions\"\n      [optionFormatter]=\"optionFormatter\"\n      [(ngModel)]=\"dataSet.locale\"\n    >\n    </adapt-rx-select>\n\n    <adapt-rx-counter\n      class=\"form-group d-block\"\n      name=\"training-data\"\n      label=\"{{ 'com.bmc.arsys.rx.client.admin.cognitive-training.training-data.label' | translate }}\"\n      rx-id=\"training-data-field\"\n      placeholder=\"0\"\n      adaptMin=\"0\"\n      adaptMax=\"100\"\n      min=\"0\"\n      max=\"100\"\n      required\n      (ngModelChange)=\"onTrainDataPercentCounterChange($event)\"\n      [(ngModel)]=\"dataSet.trainDataPercent\"\n    >\n    </adapt-rx-counter>\n\n    <adapt-rx-counter\n      class=\"form-group d-block\"\n      name=\"test-data\"\n      label=\"{{ 'com.bmc.arsys.rx.client.admin.cognitive-training.test-data.label' | translate }}\"\n      rx-id=\"test-data-field\"\n      placeholder=\"0\"\n      adaptMin=\"0\"\n      adaptMax=\"100\"\n      min=\"0\"\n      max=\"100\"\n      required\n      (ngModelChange)=\"onTestDataPercentCounterChange($event)\"\n      [(ngModel)]=\"dataSet.testDataPercent\"\n    >\n    </adapt-rx-counter>\n  </form>\n</div>\n\n<div class=\"dp-footer\">\n  <button\n    class=\"mr-2\"\n    type=\"button\"\n    rx-id=\"save-button\"\n    adapt-button\n    btn-type=\"primary\"\n    [disabled]=\"fileDataSetForm.pristine || fileDataSetForm.invalid\"\n    (click)=\"onSaveClick()\"\n  >\n    {{ 'com.bmc.arsys.rx.client.common.save.label' | translate }}\n  </button>\n\n  <button class=\"mr-2\" type=\"button\" rx-id=\"close-button\" adapt-button btn-type=\"secondary\" (click)=\"onCloseClick()\">\n    {{ 'com.bmc.arsys.rx.client.common.close.label' | translate }}\n  </button>\n</div>\n","import { Component, Injector, OnInit, ViewChild } from '@angular/core';\nimport { NgForm } from '@angular/forms';\nimport { Subscription } from 'rxjs';\nimport { chain } from 'lodash';\nimport { DismissReasons, DockedPanelContext, RxSelectOption } from '@bmc-ux/adapt-angular';\nimport { RX_RECORD_DEFINITION, RxRecordInstanceDataPageService } from '@helix/platform/record/api';\nimport { IDataPageParams, IDataPageResult, IPlainObject, RxCommandFactoryService } from '@helix/platform/shared/api';\nimport { RxModalClass } from '@helix/platform/ui-kit';\nimport { RX_COGNITIVE_TRAINING } from '../../cognitive-training.constant';\nimport { ICognitiveTrainingClassification, ICognitiveTrainingDataSet } from '../../cognitive-training.types';\n\n@Component({\n  selector: 'rx-interactive-evaluation-blade',\n  templateUrl: './interactive-evaluation-blade.component.html'\n})\nexport class InteractiveEvaluationBladeComponent extends RxModalClass implements OnInit {\n  @ViewChild('interactiveEvaluationForm', { static: true, read: NgForm })\n  interactiveEvaluationForm: NgForm;\n\n  busy: Subscription;\n  contextData: IPlainObject;\n  trainedDataSet: RxSelectOption;\n\n  classifications: ICognitiveTrainingClassification[] = [];\n  evaluationText = '';\n  trainedDataSetOptions: RxSelectOption[] = [];\n\n  constructor(\n    private dockedPanelContext: DockedPanelContext,\n    private rxCommandFactoryService: RxCommandFactoryService,\n    private rxRecordInstanceDataPageService: RxRecordInstanceDataPageService,\n    protected injector: Injector\n  ) {\n    super(dockedPanelContext, injector);\n    this.contextData = this.dockedPanelContext.getData();\n  }\n\n  ngOnInit(): void {\n    super.ngOnInit();\n    this.getDataSetList();\n  }\n\n  isDirty(): boolean {\n    return this.interactiveEvaluationForm.dirty;\n  }\n\n  optionFormatter = (opt: RxSelectOption) => opt.name;\n\n  getDataSetList(): void {\n    const params: IDataPageParams = {\n      recorddefinition: RX_COGNITIVE_TRAINING.settings.dataSetDefinitionName,\n      sortBy: RX_COGNITIVE_TRAINING.settings.fieldIds.dataSetName,\n\n      queryExpression:\n        this.contextData.evaluation.queryExpression +\n        JSON.stringify(this.contextData.bundleId) +\n        this.contextData.evaluation.serviceProviderQueryExpresion +\n        this.contextData.trainingType.uniqueValue,\n\n      propertySelection: [\n        RX_COGNITIVE_TRAINING.settings.fieldIds.dataSetName,\n        RX_RECORD_DEFINITION.coreFieldIds.status\n      ].join(',')\n    };\n\n    this.busy = this.rxRecordInstanceDataPageService.post({ params }).subscribe((result: IDataPageResult) => {\n      this.trainedDataSetOptions = chain(result.data)\n        .filter(\n          (dataSet: ICognitiveTrainingDataSet) =>\n            dataSet[RX_RECORD_DEFINITION.coreFieldIds.status] ===\n              RX_COGNITIVE_TRAINING.settings.trainingStatuses.trained.value ||\n            dataSet[RX_RECORD_DEFINITION.coreFieldIds.status] ===\n              RX_COGNITIVE_TRAINING.settings.trainingStatuses.pendingRetraining.value\n        )\n        .map((dataSet: ICognitiveTrainingDataSet) => ({\n          id: this.trainedDataSetOptions.length + 1,\n          name: dataSet[RX_COGNITIVE_TRAINING.settings.fieldIds.dataSetName]\n        }))\n        .value();\n    });\n  }\n\n  classify(): void {\n    this.rxCommandFactoryService\n      .forResourceType(RX_COGNITIVE_TRAINING.settings.commands.classify)\n      .execute({\n        textToClassify: this.evaluationText,\n        trainingDataSetName: this.contextData.bundleId + ':' + this.trainedDataSet[0].name\n      })\n      .subscribe((classifications: ICognitiveTrainingClassification[]) => {\n        this.classifications = classifications;\n      });\n  }\n\n  displayClassification(classification: ICognitiveTrainingClassification): string {\n    return `${classification.className} ${classification.confidence.toFixed(2)}`;\n  }\n\n  onCloseClick(): void {\n    this.dockedPanelContext.dismiss(DismissReasons.CLOSE_BTN);\n  }\n}\n","<div class=\"dp-body\">\n  <form #interactiveEvaluationForm=\"ngForm\">\n    <rx-busy-indicator [options]=\"{ busy: busy, loaderType: 'section' }\"></rx-busy-indicator>\n\n    <div class=\"d-flex flex-row justify-content-between\">\n      <adapt-rx-select\n        class=\"form-group d-block w-100\"\n        name=\"trained-data-set\"\n        label=\"{{\n          'com.bmc.arsys.rx.client.admin.cognitive-training.interactive-evaluation-blade.trained-data-set.label'\n            | translate\n        }}\"\n        rx-id=\"trained-data-set-field\"\n        required\n        [options]=\"trainedDataSetOptions\"\n        [optionFormatter]=\"optionFormatter\"\n        [(ngModel)]=\"trainedDataSet\"\n      >\n      </adapt-rx-select>\n\n      <button\n        class=\"d-icon-refresh_adapt\"\n        type=\"button\"\n        rx-id=\"refresh-button\"\n        adapt-button\n        btn-type=\"tertiary\"\n        (click)=\"getDataSetList()\"\n      >\n        {{ 'com.bmc.arsys.rx.client.common.refresh.label' | translate }}\n      </button>\n    </div>\n\n    <adapt-rx-textfield\n      class=\"form-group d-block\"\n      name=\"evaluation-text\"\n      label=\"{{\n        'com.bmc.arsys.rx.client.admin.cognitive-training.interactive-evaluation-blade.text.label' | translate\n      }}\"\n      rx-id=\"evaluation-text-field\"\n      required\n      [tooltip]=\"{\n        iconName: 'question_circle_o',\n        content: 'Separate text entries for multiple fields with a comma.',\n        placement: 'right',\n        popoverMode: true\n      }\"\n      [(ngModel)]=\"evaluationText\"\n    >\n    </adapt-rx-textfield>\n\n    <button\n      type=\"button\"\n      rx-id=\"classify-button\"\n      adapt-button\n      btn-type=\"primary\"\n      [disabled]=\"interactiveEvaluationForm.invalid\"\n      (click)=\"classify()\"\n    >\n      {{ 'com.bmc.arsys.rx.client.admin.cognitive-training.interactive-evaluation.classify.label' | translate }}\n    </button>\n\n    <div *ngIf=\"classifications\">\n      <hr />\n\n      <div class=\"card card-well mb-2\" *ngFor=\"let classification of classifications; let index = index\">\n        {{ displayClassification(classification) }}\n      </div>\n    </div>\n  </form>\n</div>\n\n<div class=\"dp-footer\">\n  <button class=\"mr-2\" type=\"button\" rx-id=\"close-button\" adapt-button btn-type=\"secondary\" (click)=\"onCloseClick()\">\n    {{ 'com.bmc.arsys.rx.client.common.close.label' | translate }}\n  </button>\n</div>\n","import { Observable, of } from 'rxjs';\nimport { IDataDictionary, RxExpressionConfigurator } from '@helix/platform/shared/api';\n\nexport class RxRecordDataSetExpressionConfigurator extends RxExpressionConfigurator {\n  commonDataDictionary$: Observable<IDataDictionary> = of([\n    {\n      label: 'Keywords',\n      children: [\n        {\n          label: 'Current user',\n          icon: 'd-icon-dollar',\n          expression: `$USER$`\n        },\n        {\n          label: 'NULL',\n          icon: 'd-icon-dollar',\n          expression: '$NULL$',\n          hidden: true\n        },\n        {\n          label: 'Time stamp',\n          icon: 'd-icon-dollar',\n          expression: '$TIMESTAMP$'\n        }\n      ]\n    }\n  ]);\n}\n","import { Component, Injector, OnDestroy, OnInit, ViewChild } from '@angular/core';\nimport { NgForm } from '@angular/forms';\nimport { DismissReasons, DockedPanelContext, RxSelectOption, UploaderMode } from '@bmc-ux/adapt-angular';\nimport {\n  IRecordDefinition,\n  RX_RECORD_DEFINITION,\n  RxRecordDefinitionCacheService,\n  RxRecordInstanceService\n} from '@helix/platform/record/api';\nimport { ExpressionOperatorGroup, IPlainObject, RxDefinitionNameService } from '@helix/platform/shared/api';\nimport {\n  IDefinitionPickerComponentOptions,\n  IExpressionEditorPropertyChange,\n  IExpressionFormControlOptions,\n  IGroupButtonFormControlOptions,\n  RxDefinitionPickerType,\n  RxExpressionEditorService\n} from '@helix/platform/shared/components';\nimport { RxModalClass } from '@helix/platform/ui-kit';\nimport { RecordGridFilterMode } from '@helix/platform/view/components';\nimport { assign, find, isEmpty, map as _map, pick } from 'lodash';\nimport moment from 'moment-es6';\nimport { BehaviorSubject, Observable, of } from 'rxjs';\nimport { map, shareReplay, switchMap, withLatestFrom } from 'rxjs/operators';\nimport { RxCognitiveTrainingUtilsService } from '../../cognitive-training-utils.service';\nimport { RX_COGNITIVE_TRAINING } from '../../cognitive-training.constant';\nimport { ICognitiveTrainingDataSet } from '../../cognitive-training.types';\nimport { RxRecordDataSetExpressionConfigurator } from '../record-data-set-expression-configurator/record-data-set-expression-configurator.class';\nimport { TranslateService } from '@ngx-translate/core';\n\n@Component({\n  selector: 'rx-record-data-set-blade',\n  templateUrl: './record-data-set-blade.component.html'\n})\nexport class RecordDataSetBladeComponent extends RxModalClass implements OnInit, OnDestroy {\n  @ViewChild('recordDataSetForm', { read: NgForm })\n  recordDataSetForm: NgForm;\n\n  contextData: IPlainObject;\n  dataSet: ICognitiveTrainingDataSet;\n  localeOptions: RxSelectOption[];\n  queryExpressionOptions: IExpressionFormControlOptions;\n  csvFileUploadMode = UploaderMode.Auto;\n\n  recordDefinitionPickerOptions: IDefinitionPickerComponentOptions = {\n    label: this.translateService.instant('com.bmc.arsys.rx.client.approval.record-definition-field.label'),\n    definitionType: RxDefinitionPickerType.Record,\n    required: true\n  };\n\n  filterModeOptions: IGroupButtonFormControlOptions = {\n    label: this.translateService.instant(\n      'com.bmc.arsys.rx.client.admin.cognitive-training.record-data-set-blade.filters.label'\n    ),\n    items: [\n      {\n        name: this.translateService.instant(\n          'com.bmc.arsys.rx.client.admin.cognitive-training.record-data-set-blade.basic.label'\n        ),\n        value: RecordGridFilterMode.Basic\n      },\n      {\n        name: this.translateService.instant(\n          'com.bmc.arsys.rx.client.admin.cognitive-training.record-data-set-blade.expression.label'\n        ),\n        value: RecordGridFilterMode.Expression\n      }\n    ]\n  };\n\n  protected expressionConfigurator;\n\n  private recordDefinitionName$ = new BehaviorSubject<string>('');\n\n  recordDefinition$: Observable<IRecordDefinition> = this.recordDefinitionName$.pipe(\n    switchMap((recordDefinitionName) =>\n      recordDefinitionName ? this.rxRecordDefinitionCacheService.getRecordDefinition(recordDefinitionName) : of(null)\n    ),\n    shareReplay(1)\n  );\n\n  fieldOptions$: Observable<RxSelectOption[]> = this.recordDefinition$.pipe(\n    map((recordDefinition) =>\n      recordDefinition?.fieldDefinitions\n        .map((fieldDefinition) => pick(fieldDefinition, ['name', 'id']))\n        .sort((a, b) => a.name.localeCompare(b.name))\n    ),\n    shareReplay(1)\n  );\n\n  constructor(\n    private dockedPanelContext: DockedPanelContext,\n    private rxCognitiveTrainingUtilsService: RxCognitiveTrainingUtilsService,\n    private rxDefinitionNameService: RxDefinitionNameService,\n    private rxExpressionEditorService: RxExpressionEditorService,\n    private rxRecordDefinitionCacheService: RxRecordDefinitionCacheService,\n    private rxRecordInstanceService: RxRecordInstanceService,\n    private translateService: TranslateService,\n    protected injector: Injector\n  ) {\n    super(dockedPanelContext, injector);\n    this.contextData = this.dockedPanelContext.getData().data;\n  }\n\n  ngOnInit(): void {\n    super.ngOnInit();\n\n    this.expressionConfigurator = new RxRecordDataSetExpressionConfigurator();\n\n    this.expressionConfigurator.configureForProperty({\n      propertyPath: 'queryExpression',\n      operators: this.expressionConfigurator.getOperatorRowsByGroup(ExpressionOperatorGroup.All),\n      dataDictionary$: this.recordDefinition$.pipe(\n        withLatestFrom(this.expressionConfigurator.commonDataDictionary$),\n        map(([recordDefinition, commonDataDictionary]) => [\n          {\n            label: this.translateService.instant(\n              'com.bmc.arsys.rx.client.admin.cognitive-training.record-data-set-blade.filter-by.label'\n            ),\n            children: [\n              {\n                label: this.rxDefinitionNameService.getDisplayName(recordDefinition?.name),\n                children: recordDefinition?.fieldDefinitions.map((field) => ({\n                  label: field.name,\n                  icon: 'd-icon-field_text',\n                  expression: `'${field.id}'`\n                }))\n              }\n            ]\n          },\n          commonDataDictionary[0]\n        ])\n      )\n    });\n\n    this.queryExpressionOptions = {\n      label: this.translateService.instant(\n        'com.bmc.arsys.rx.client.admin.cognitive-training.record-data-set-blade.expression.label'\n      ),\n      dataDictionary$: this.expressionConfigurator.getDataDictionary('queryExpression'),\n      operators: this.expressionConfigurator.getOperators()\n    };\n\n    this.localeOptions = this.rxCognitiveTrainingUtilsService.getTrainingLocales(this.contextData.trainingType.value);\n\n    const dataSource = this.contextData.recordInstance.getFieldValue(\n      RX_COGNITIVE_TRAINING.settings.fieldIds.dataSource\n    );\n\n    this.dataSet = {\n      dataSetName: this.contextData.recordInstance.getFieldValue(RX_COGNITIVE_TRAINING.settings.fieldIds.dataSetName),\n      description: this.contextData.recordInstance.getFieldValue(RX_RECORD_DEFINITION.coreFieldIds.description),\n      csvFile: null,\n\n      locale: [\n        this.contextData.recordInstance.getFieldValue(RX_COGNITIVE_TRAINING.settings.fieldIds.locale) ||\n          RX_COGNITIVE_TRAINING.settings.defaultTrainingLocale\n      ],\n\n      useSeedTrainingData: this.contextData.recordInstance.getFieldValue(\n        RX_COGNITIVE_TRAINING.settings.fieldIds.useSeedTrainingData\n      ),\n\n      testDataPercent: this.contextData.isNewDataSet\n        ? RX_COGNITIVE_TRAINING.settings.defaultTestDataPercentage\n        : this.contextData.recordInstance.getFieldValue(RX_COGNITIVE_TRAINING.settings.fieldIds.testDataPercent),\n\n      trainDataPercent: this.contextData.isNewDataSet\n        ? RX_COGNITIVE_TRAINING.settings.defaultTrainDataPercentage\n        : this.contextData.recordInstance.getFieldValue(RX_COGNITIVE_TRAINING.settings.fieldIds.trainDataPercent),\n\n      status: find(RX_COGNITIVE_TRAINING.settings.trainingStatuses, {\n        value: this.contextData.recordInstance.getFieldValue(RX_RECORD_DEFINITION.coreFieldIds.status)\n      }),\n\n      lastSubmittedDate: this.contextData.recordInstance.getFieldValue(\n        RX_COGNITIVE_TRAINING.settings.fieldIds.dateLastSubmitted\n      ),\n\n      lastTrainedDate: this.contextData.recordInstance.getFieldValue(\n        RX_COGNITIVE_TRAINING.settings.fieldIds.dateLastTrained\n      ),\n\n      machineLearningError: this.contextData.recordInstance.getFieldValue(\n        RX_COGNITIVE_TRAINING.settings.fieldIds.machineLearningError\n      )\n    };\n\n    let dataSourceHistory = JSON.parse(\n      this.contextData.recordInstance.getFieldValue(RX_COGNITIVE_TRAINING.settings.fieldIds.dataSourceHistory)\n    );\n\n    if (dataSourceHistory) {\n      dataSourceHistory.layout = JSON.parse(dataSourceHistory.layout);\n\n      dataSourceHistory.layout.categoryFields = _map(dataSourceHistory.layout.categoryFields, (categoryField) =>\n        pick(categoryField, ['name', 'id'])\n      );\n\n      dataSourceHistory.layout.textFields = _map(dataSourceHistory.layout.textFields, (textField) =>\n        pick(textField, ['name', 'id'])\n      );\n\n      dataSourceHistory.layout.queryExpressionBasic = {\n        filtersJson: JSON.stringify(dataSourceHistory.layout.queryExpressionBasic.filtersJson),\n        basicFilters: dataSourceHistory.layout.queryExpressionBasic.basicFilters\n      };\n    } else {\n      dataSourceHistory = this.contextData.dataSourceType.dataSourceHistory;\n    }\n\n    this.dataSet.dataSourceHistory = dataSourceHistory;\n\n    this.dataSet.filterMode = dataSourceHistory.queryExpression\n      ? RecordGridFilterMode.Expression\n      : RecordGridFilterMode.Basic;\n\n    if (dataSource && (this.contextData.editDataSet || this.contextData.copyDataSet)) {\n      this.rxRecordInstanceService\n        .getAttachment(\n          RX_COGNITIVE_TRAINING.settings.dataSetDefinitionName,\n          RX_COGNITIVE_TRAINING.settings.fieldIds.dataSource,\n          this.contextData.getAttachmentRecordInstanceId\n        )\n        .subscribe((blob) => {\n          this.dataSet.csvFile = [\n            {\n              data: assign(blob, {\n                name: dataSource\n              }),\n              downloadURL: this.rxRecordInstanceService.getAttachmentDownloadUrl(\n                RX_COGNITIVE_TRAINING.settings.dataSetDefinitionName,\n                RX_COGNITIVE_TRAINING.settings.fieldIds.dataSource,\n                this.contextData.recordInstance.id\n              ),\n              isUploading: true\n            }\n          ];\n        });\n    }\n\n    if (this.dataSet.dataSourceHistory.recordDefinitionName) {\n      this.recordDefinitionName$.next(this.dataSet.dataSourceHistory.recordDefinitionName);\n    }\n  }\n\n  isDirty(): boolean {\n    return this.recordDataSetForm.dirty;\n  }\n\n  ngOnDestroy(): void {\n    this.recordDefinitionName$.complete();\n  }\n\n  openExpressionEditor(): void {\n    this.rxExpressionEditorService\n      .openEditor({\n        property: {\n          path: 'queryExpression',\n          value: this.dataSet.dataSourceHistory.queryExpression,\n          label: this.translateService.instant(\n            'com.bmc.arsys.rx.client.admin.cognitive-training.record-data-set-blade.filter-expression.label'\n          )\n        },\n        expressionConfigurator: this.expressionConfigurator,\n        legend: [\n          {\n            label: this.translateService.instant('com.bmc.arsys.rx.client.expression-editor.legend.keyword.label'),\n            icon: 'd-icon-dollar'\n          },\n          {\n            label: this.translateService.instant('com.bmc.arsys.rx.client.expression-editor.legend.field.label'),\n            icon: 'd-icon-arrow_right_square_input'\n          }\n        ]\n      })\n      .subscribe((expression: IExpressionEditorPropertyChange) => {\n        this.dataSet.dataSourceHistory.queryExpression = expression.value;\n      });\n  }\n\n  isBasicFilterMode(): boolean {\n    return this.dataSet.filterMode === RecordGridFilterMode.Basic;\n  }\n\n  isExpressionFilterMode(): boolean {\n    return this.dataSet.filterMode === RecordGridFilterMode.Expression;\n  }\n\n  optionFormatter = (opt: RxSelectOption) => opt;\n\n  fieldOptionsFormatter = (opt: RxSelectOption) => opt.name;\n\n  onRecordDefinitionNameChange(recordDefinitionName: string): void {\n    this.dataSet.filterMode = RecordGridFilterMode.Basic;\n\n    this.dataSet.dataSourceHistory.layout.queryExpressionBasic = {\n      filtersJson: null,\n      basicFilters: null\n    };\n\n    this.dataSet.dataSourceHistory.queryExpression = null;\n    this.dataSet.dataSourceHistory.layout.textFields = [];\n    this.dataSet.dataSourceHistory.layout.categoryFields = [];\n\n    this.recordDefinitionName$.next(recordDefinitionName);\n  }\n\n  onTrainDataPercentCounterChange(trainDataPercent: number): void {\n    this.dataSet.testDataPercent = 100 - trainDataPercent;\n  }\n\n  onTestDataPercentCounterChange(testDataPercent: number): void {\n    this.dataSet.trainDataPercent = 100 - testDataPercent;\n  }\n\n  onFilterModeChange(): void {\n    this.dataSet.dataSourceHistory.layout.queryExpressionBasic = {\n      filtersJson: null,\n      basicFilters: null\n    };\n\n    this.dataSet.dataSourceHistory.queryExpression = '';\n  }\n\n  onSaveClick(): void {\n    this.contextData.recordInstance.setFieldProp(\n      RX_COGNITIVE_TRAINING.settings.fieldIds.dataSource,\n      'file',\n      (!isEmpty(this.dataSet.csvFile) && this.dataSet.csvFile[0].data) || null\n    );\n\n    this.contextData.recordInstance.setFieldProp(\n      RX_COGNITIVE_TRAINING.settings.fieldIds.dataSource,\n      'value',\n      (!isEmpty(this.dataSet.csvFile) && this.dataSet.csvFile[0].data.name) || null\n    );\n\n    this.contextData.recordInstance.setFieldValue(RX_COGNITIVE_TRAINING.settings.fieldIds.dateLastSubmitted, moment());\n\n    this.contextData.recordInstance.setFieldValue(\n      RX_RECORD_DEFINITION.coreFieldIds.description,\n      this.dataSet.description\n    );\n\n    this.contextData.recordInstance.setFieldValue(\n      RX_COGNITIVE_TRAINING.settings.fieldIds.locale,\n      this.dataSet.locale[0]\n    );\n\n    this.contextData.recordInstance.setFieldValue(\n      RX_COGNITIVE_TRAINING.settings.fieldIds.testDataPercent,\n      this.dataSet.testDataPercent\n    );\n\n    this.contextData.recordInstance.setFieldValue(\n      RX_COGNITIVE_TRAINING.settings.fieldIds.trainDataPercent,\n      this.dataSet.trainDataPercent\n    );\n\n    this.contextData.recordInstance.setFieldValue(\n      RX_COGNITIVE_TRAINING.settings.fieldIds.dataSourceHistory,\n      JSON.stringify({\n        layout: JSON.stringify({\n          queryExpressionBasic: {\n            filtersJson: JSON.parse(this.dataSet.dataSourceHistory.layout.queryExpressionBasic.filtersJson),\n            basicFilters: this.dataSet.dataSourceHistory.layout.queryExpressionBasic.basicFilters\n          },\n          textFields: this.dataSet.dataSourceHistory.layout.textFields,\n          categoryFields: this.dataSet.dataSourceHistory.layout.categoryFields\n        }),\n        resourceType: this.contextData.dataSourceType.resourceType,\n        recordDefinitionName: this.dataSet.dataSourceHistory.recordDefinitionName,\n        queryExpression: this.dataSet.dataSourceHistory.queryExpression,\n        trainingDataMapper: {\n          resourceType: this.dataSet.dataSourceHistory.trainingDataMapper.resourceType,\n          textFields: _map(this.dataSet.dataSourceHistory.layout.textFields, 'id'),\n          categoryFields: _map(this.dataSet.dataSourceHistory.layout.categoryFields, 'id')\n        },\n        timeCriteria: this.dataSet.dataSourceHistory.timeCriteria,\n        isScheduleEnabled: this.dataSet.dataSourceHistory.isScheduleEnabled\n      })\n    );\n\n    if (this.contextData.isNewDataSet || this.contextData.copyDataSet) {\n      this.contextData.recordInstance.setFieldValue(\n        RX_COGNITIVE_TRAINING.settings.fieldIds.bundleId,\n        this.contextData.bundleId\n      );\n\n      this.contextData.recordInstance.setFieldValue(\n        RX_COGNITIVE_TRAINING.settings.fieldIds.dataSetName,\n        this.dataSet.dataSetName\n      );\n\n      this.contextData.recordInstance.setFieldValue(RX_COGNITIVE_TRAINING.settings.fieldIds.dataSetID, '');\n\n      this.contextData.recordInstance.setFieldValue(\n        RX_COGNITIVE_TRAINING.settings.fieldIds.classificationServiceProvider,\n        this.contextData.trainingType.uniqueValue\n      );\n\n      this.contextData.recordInstance.setFieldValue(\n        RX_RECORD_DEFINITION.coreFieldIds.status,\n        RX_COGNITIVE_TRAINING.settings.trainingStatuses.untrained.value\n      );\n\n      this.contextData.recordInstance.setFieldValue(\n        RX_COGNITIVE_TRAINING.settings.fieldIds.trainingType,\n        this.contextData.trainingType.value\n      );\n\n      this.rxRecordInstanceService.create(this.contextData.recordInstance).subscribe(() => {\n        this.dockedPanelContext.close('save');\n      });\n    } else if (this.contextData.editDataSet) {\n      if (\n        this.dataSet.status.value === RX_COGNITIVE_TRAINING.settings.trainingStatuses.trained.value ||\n        this.dataSet.status.value === RX_COGNITIVE_TRAINING.settings.trainingStatuses.failed.value\n      ) {\n        this.contextData.recordInstance.setFieldValue(\n          RX_RECORD_DEFINITION.coreFieldIds.status,\n          RX_COGNITIVE_TRAINING.settings.trainingStatuses.pendingRetraining.value\n        );\n      }\n\n      this.rxRecordInstanceService.save(this.contextData.recordInstance).subscribe(() => {\n        this.dockedPanelContext.close('save');\n      });\n    }\n  }\n\n  onCloseClick(): void {\n    this.dockedPanelContext.dismiss(DismissReasons.CLOSE_BTN);\n  }\n}\n","<div class=\"dp-body\">\n  <form #recordDataSetForm=\"ngForm\">\n    <div *ngIf=\"contextData.editDataSet\">\n      <div class=\"d-flex justify-content-between m-0 mb-3\">\n        <div>\n          <label class=\"form-control-label\">\n            {{ 'com.bmc.arsys.rx.client.admin.cognitive-training.status.label' | translate }}\n          </label>\n\n          <div>{{ dataSet.status.label }}</div>\n        </div>\n\n        <div>\n          <label class=\"form-control-label\">\n            {{ 'com.bmc.arsys.rx.client.admin.cognitive-training.date-last-submitted.label' | translate }}\n          </label>\n\n          <div>{{ dataSet.lastSubmittedDate | date: 'medium' }}</div>\n        </div>\n\n        <div>\n          <label class=\"form-control-label\">\n            {{ 'com.bmc.arsys.rx.client.admin.cognitive-training.date-last-trained.label' | translate }}\n          </label>\n\n          <div>{{ dataSet.lastTrainedDate | date: 'medium' }}</div>\n        </div>\n      </div>\n\n      <adapt-alert\n        *ngIf=\"dataSet.machineLearningError\"\n        [config]=\"{\n          content: dataSet.machineLearningError,\n          type: 'inline',\n          variant: 'danger'\n        }\"\n      ></adapt-alert>\n    </div>\n\n    <adapt-rx-textfield\n      class=\"form-group d-block\"\n      name=\"data-set-name\"\n      label=\"{{ 'com.bmc.arsys.rx.client.admin.cognitive-search.data-set-name.label' | translate }}\"\n      rx-id=\"data-set-name-field\"\n      required\n      [disabled]=\"contextData.editDataSet\"\n      [(ngModel)]=\"dataSet.dataSetName\"\n    >\n    </adapt-rx-textfield>\n\n    <adapt-rx-textfield\n      class=\"form-group d-block\"\n      name=\"description\"\n      label=\"{{ 'com.bmc.arsys.rx.client.common.description.label' | translate }}\"\n      rx-id=\"description-field\"\n      required\n      [(ngModel)]=\"dataSet.description\"\n    >\n    </adapt-rx-textfield>\n\n    <adapt-rx-textfield\n      class=\"form-group d-block\"\n      name=\"training-type\"\n      label=\"{{ 'com.bmc.arsys.rx.client.admin.cognitive-training.training-type.label' | translate }}\"\n      rx-id=\"training-type-field\"\n      required\n      disabled\n      [(ngModel)]=\"contextData.trainingType.displayName\"\n    >\n    </adapt-rx-textfield>\n\n    <span class=\"form-group d-block\" *ngIf=\"dataSet.useSeedTrainingData\">\n      {{ 'com.bmc.arsys.rx.client.admin.cognitive-training.record-data-set.seed-data-required.label' | translate }}\n    </span>\n\n    <span class=\"form-group d-block\" *ngIf=\"!dataSet.useSeedTrainingData\">\n      {{ 'com.bmc.arsys.rx.client.admin.cognitive-training.record-data-set.no-seed-data-required.label' | translate }}\n    </span>\n\n    <adapt-rx-uploader\n      class=\"form-group d-block\"\n      name=\"csv-file\"\n      label=\"{{ 'com.bmc.arsys.rx.client.admin.cognitive-training.csv-file.label' | translate }}\"\n      rx-id=\"csv-file-field\"\n      reusable=\"true\"\n      [uploadMode]=\"csvFileUploadMode\"\n      [allowedTypes]=\"['csv']\"\n      [(ngModel)]=\"dataSet.csvFile\"\n    >\n    </adapt-rx-uploader>\n\n    <adapt-rx-select\n      class=\"form-group d-block\"\n      name=\"locale\"\n      label=\"{{ 'com.bmc.arsys.rx.client.admin.cognitive-search.locale.label' | translate }}\"\n      rx-id=\"locale-field\"\n      required\n      [options]=\"localeOptions\"\n      [optionFormatter]=\"optionFormatter\"\n      [(ngModel)]=\"dataSet.locale\"\n    >\n    </adapt-rx-select>\n\n    <rx-definition-picker\n      class=\"form-group d-block\"\n      name=\"record-definition-name\"\n      rx-id=\"record-definition-name-field\"\n      required\n      [options]=\"recordDefinitionPickerOptions\"\n      [(ngModel)]=\"dataSet.dataSourceHistory.recordDefinitionName\"\n      (ngModelChange)=\"onRecordDefinitionNameChange($event)\"\n    >\n    </rx-definition-picker>\n\n    <div *ngIf=\"recordDefinition$ | async\">\n      <rx-group-button-form-control\n        class=\"form-group d-block\"\n        name=\"filter-mode\"\n        rx-id=\"filter-mode-field\"\n        [options]=\"filterModeOptions\"\n        (ngModelChange)=\"onFilterModeChange()\"\n        [(ngModel)]=\"dataSet.filterMode\"\n      >\n      </rx-group-button-form-control>\n\n      <div *ngIf=\"isBasicFilterMode()\">\n        <rx-record-grid-filter-select-control\n          class=\"form-group d-block\"\n          name=\"filters\"\n          rx-id=\"filters-field\"\n          [options]=\"{ primaryRecordDefinition: recordDefinition$ | async }\"\n          [(ngModel)]=\"dataSet.dataSourceHistory.layout.queryExpressionBasic\"\n        >\n        </rx-record-grid-filter-select-control>\n      </div>\n\n      <div *ngIf=\"isExpressionFilterMode()\">\n        <rx-expression-form-control\n          class=\"form-group d-block\"\n          name=\"query-expression\"\n          rx-id=\"query-expression-field\"\n          [options]=\"queryExpressionOptions\"\n          (events)=\"openExpressionEditor()\"\n          [(ngModel)]=\"dataSet.dataSourceHistory.queryExpression\"\n        >\n        </rx-expression-form-control>\n      </div>\n\n      <adapt-rx-select\n        class=\"form-group d-block\"\n        name=\"text-fields\"\n        label=\"{{\n          'com.bmc.arsys.rx.client.admin.cognitive-training.record-data-set-blade.text-fields.label' | translate\n        }}\"\n        rx-id=\"text-fields-field\"\n        required\n        multiple=\"true\"\n        [options]=\"fieldOptions$ | async\"\n        [optionFormatter]=\"fieldOptionsFormatter\"\n        [(ngModel)]=\"dataSet.dataSourceHistory.layout.textFields\"\n      >\n      </adapt-rx-select>\n\n      <adapt-rx-select\n        class=\"form-group d-block\"\n        name=\"category-fields\"\n        label=\"{{\n          'com.bmc.arsys.rx.client.admin.cognitive-training.record-data-set-blade.category-fields.label' | translate\n        }}\"\n        rx-id=\"category-fields-field\"\n        required\n        multiple=\"true\"\n        [options]=\"fieldOptions$ | async\"\n        [optionFormatter]=\"fieldOptionsFormatter\"\n        [(ngModel)]=\"dataSet.dataSourceHistory.layout.categoryFields\"\n      >\n      </adapt-rx-select>\n    </div>\n\n    <adapt-rx-counter\n      class=\"form-group d-block\"\n      name=\"training-data\"\n      label=\"{{ 'com.bmc.arsys.rx.client.admin.cognitive-training.training-data.label' | translate }}\"\n      rx-id=\"training-data-field\"\n      placeholder=\"0\"\n      adaptMin=\"0\"\n      adaptMax=\"100\"\n      min=\"0\"\n      max=\"100\"\n      required\n      (ngModelChange)=\"onTrainDataPercentCounterChange($event)\"\n      [(ngModel)]=\"dataSet.trainDataPercent\"\n    >\n    </adapt-rx-counter>\n\n    <adapt-rx-counter\n      class=\"form-group d-block\"\n      name=\"test-data\"\n      label=\"{{ 'com.bmc.arsys.rx.client.admin.cognitive-training.test-data.label' | translate }}\"\n      rx-id=\"test-data-field\"\n      placeholder=\"0\"\n      adaptMin=\"0\"\n      adaptMax=\"100\"\n      min=\"0\"\n      max=\"100\"\n      required\n      (ngModelChange)=\"onTestDataPercentCounterChange($event)\"\n      [(ngModel)]=\"dataSet.testDataPercent\"\n    >\n    </adapt-rx-counter>\n  </form>\n</div>\n\n<div class=\"dp-footer\">\n  <button\n    class=\"mr-2\"\n    type=\"button\"\n    rx-id=\"save-button\"\n    adapt-button\n    btn-type=\"primary\"\n    [disabled]=\"recordDataSetForm.pristine || recordDataSetForm.invalid\"\n    (click)=\"onSaveClick()\"\n  >\n    {{ 'com.bmc.arsys.rx.client.common.save.label' | translate }}\n  </button>\n\n  <button class=\"mr-2\" type=\"button\" rx-id=\"close-button\" adapt-button btn-type=\"secondary\" (click)=\"onCloseClick()\">\n    {{ 'com.bmc.arsys.rx.client.common.close.label' | translate }}\n  </button>\n</div>\n","import { Component, Input, OnInit, TemplateRef, ViewChild } from '@angular/core';\nimport { DockedPanel } from '@bmc-ux/adapt-angular';\nimport { ColumnConfig, DataCellTemplateParams } from '@bmc-ux/adapt-table';\nimport {\n  RecordInstance,\n  RX_RECORD_DEFINITION,\n  RxRecordInstanceDataPageService,\n  RxRecordInstanceService\n} from '@helix/platform/record/api';\nimport {\n  IDataPageParams,\n  IDataPageResult,\n  RxBundleCacheService,\n  RxCommandFactoryService,\n  RxCurrentUserService,\n  RxDefinitionNameService,\n  RxNotificationService\n} from '@helix/platform/shared/api';\nimport { RX_MODAL, RxModalService } from '@helix/platform/ui-kit';\nimport { RxJsonParserService } from '@helix/platform/utils';\nimport { IRowDataItem } from '@helix/platform/view/api';\nimport {\n  IRecordGridConfig,\n  IRecordGridDataPageParams,\n  RecordGridComponent,\n  RowSelectionMode\n} from '@helix/platform/view/components';\nimport { chain, cloneDeep, compact, head, map, noop, some } from 'lodash';\nimport { combineLatest, forkJoin, Observable, of, throwError } from 'rxjs';\nimport { catchError, finalize } from 'rxjs/operators';\nimport { RxCognitiveTrainingUtilsService } from '../../cognitive-training-utils.service';\nimport { RX_COGNITIVE_TRAINING } from '../../cognitive-training.constant';\nimport {\n  CognitiveTrainingDataSourceNames,\n  CognitiveTrainingEvaluationNames,\n  ICognitiveTrainingDataSourceHistory,\n  ICognitiveTrainingDataSourceType,\n  ICognitiveTrainingEvaluation,\n  ICognitiveTrainingTab,\n  ICognitiveTrainingType\n} from '../../cognitive-training.types';\nimport { ChatbotDataSetBladeComponent } from '../chatbot-data-set-blade/chatbot-data-set-blade.component';\nimport { FileDataSetBladeComponent } from '../file-data-set-blade/file-data-set-blade.component';\nimport { InteractiveEvaluationBladeComponent } from '../interactive-evaluation-blade/interactive-evaluation-blade.component';\nimport { RecordDataSetBladeComponent } from '../record-data-set-blade/record-data-set-blade.component';\nimport { TranslateService } from '@ngx-translate/core';\n\n@Component({\n  selector: 'rx-cognitive-training-record-grid',\n  templateUrl: './cognitive-training-record-grid.component.html'\n})\nexport class CognitiveTrainingRecordGridComponent implements OnInit {\n  @ViewChild('cognitiveTrainingRecordGrid', { static: true })\n  cognitiveTrainingRecordGrid: RecordGridComponent;\n\n  @ViewChild('chatbotNameCellTemplate', { static: true })\n  chatbotNameCellTemplate: TemplateRef<DataCellTemplateParams>;\n\n  @ViewChild('dataSourceHistoryNameCellTemplate', { static: true })\n  dataSourceHistoryNameCellTemplate: TemplateRef<DataCellTemplateParams>;\n\n  @Input()\n  tab: ICognitiveTrainingTab;\n\n  @Input()\n  evaluationName: string;\n\n  @Input()\n  recordDefinitionName: string;\n\n  @Input()\n  trainingType: ICognitiveTrainingType;\n\n  bundleId: string;\n  isAdministrator: boolean;\n  evaluation: ICognitiveTrainingEvaluation;\n  recordGridConfig: Observable<IRecordGridConfig>;\n\n  fileDataSourceType: ICognitiveTrainingDataSourceType =\n    RX_COGNITIVE_TRAINING.settings.dataSourceTypes[CognitiveTrainingDataSourceNames.FileDataSource];\n  innovationSuiteDataSourceType: ICognitiveTrainingDataSourceType =\n    RX_COGNITIVE_TRAINING.settings.dataSourceTypes[CognitiveTrainingDataSourceNames.InnovationSuiteDataSource];\n\n  constructor(\n    private rxBundleCacheService: RxBundleCacheService,\n    private rxCommandFactoryService: RxCommandFactoryService,\n    private rxCognitiveTrainingUtilsService: RxCognitiveTrainingUtilsService,\n    private rxCurrentUserService: RxCurrentUserService,\n    private rxDefinitionNameService: RxDefinitionNameService,\n    private rxJsonParserService: RxJsonParserService,\n    private rxModalService: RxModalService,\n    private rxNotificationService: RxNotificationService,\n    private rxRecordInstanceDataPageService: RxRecordInstanceDataPageService,\n    private rxRecordInstanceService: RxRecordInstanceService,\n    private translateService: TranslateService\n  ) {\n    this.bundleId = this.rxBundleCacheService.bundleId;\n    this.isAdministrator = this.rxCurrentUserService.isAdministrator();\n  }\n\n  ngOnInit() {\n    this.trainingType.displayName = this.translateService.instant(this.trainingType.displayName);\n\n    const availableActionButtons = {\n      [CognitiveTrainingEvaluationNames.AutoClassificationTrainingAndEvaluation]: {\n        dataSets: [\n          {\n            label: this.translateService.instant(\n              'com.bmc.arsys.rx.client.admin.cognitive-training.train-and-test.label'\n            ),\n            style: 'tertiary',\n            iconCls: 'play_o',\n            disabled: () => this.isDataSetActionButtonDisabled(),\n\n            actions: [\n              {\n                name: () => {\n                  this.trainDataSet(head(this.cognitiveTrainingRecordGrid.api.getSelectedRows()));\n                }\n              }\n            ]\n          }\n        ],\n        testResults: []\n      },\n      [CognitiveTrainingEvaluationNames.ChatbotEvaluation]: {\n        dataSets: [\n          {\n            label: this.translateService.instant('com.bmc.arsys.rx.client.admin.cognitive-training.test.label'),\n            style: 'tertiary',\n            iconCls: 'play_o',\n            disabled: () =>\n              !this.isAdministrator || this.cognitiveTrainingRecordGrid.api.getSelectedRows().length !== 1,\n\n            actions: [\n              {\n                name: () => {\n                  this.testDataSet(head(this.cognitiveTrainingRecordGrid.api.getSelectedRows()));\n                }\n              }\n            ]\n          }\n        ]\n      },\n      common: {\n        dataSets: [\n          {\n            label: this.translateService.instant('com.bmc.arsys.rx.client.common.edit.label'),\n            style: 'tertiary',\n            icon: 'pencil',\n            disabled: () => this.isChatbotDataSetEditButtonDisabled(),\n\n            actions: [\n              {\n                name: () => {\n                  this.editDataSet(head(this.cognitiveTrainingRecordGrid.api.getSelectedRows()));\n                }\n              }\n            ]\n          },\n          {\n            label: this.translateService.instant('com.bmc.arsys.rx.client.common.copy.label'),\n            style: 'tertiary',\n            icon: 'files_copy_o',\n            disabled: () =>\n              !this.isAdministrator || this.cognitiveTrainingRecordGrid.api.getSelectedRows().length !== 1,\n\n            actions: [\n              {\n                name: () => {\n                  this.copyDataSet(head(this.cognitiveTrainingRecordGrid.api.getSelectedRows()));\n                }\n              }\n            ]\n          },\n          {\n            label: this.translateService.instant('com.bmc.arsys.rx.client.common.delete.label'),\n            style: 'tertiary',\n            icon: 'trash',\n            disabled: () => !this.isAdministrator,\n\n            actions: [\n              {\n                name: () => {\n                  this.delete();\n                }\n              }\n            ]\n          }\n        ],\n        testResults: [\n          {\n            label: this.translateService.instant('com.bmc.arsys.rx.client.common.delete.label'),\n            style: 'tertiary',\n            icon: 'trash',\n            disabled: () => this.isTestResultsDeletionRestricted(),\n\n            actions: [\n              {\n                name: () => {\n                  this.delete();\n                }\n              }\n            ]\n          }\n        ]\n      }\n    };\n\n    const availableColumns = {\n      [CognitiveTrainingEvaluationNames.AutoClassificationTrainingAndEvaluation]: {\n        dataSets: [\n          {\n            index: 2,\n            fieldId: String(RX_RECORD_DEFINITION.coreFieldIds.status),\n            title: this.translateService.instant('com.bmc.arsys.rx.client.admin.cognitive-search.status.label')\n          },\n          {\n            index: 3,\n            fieldId: String(RX_RECORD_DEFINITION.coreFieldIds.description),\n            title: this.translateService.instant(\n              'com.bmc.arsys.rx.client.approval.configuration.grid.column.description'\n            ),\n            visible: false\n          },\n          {\n            index: 4,\n            fieldId: String(RX_COGNITIVE_TRAINING.settings.fieldIds.dataSourceHistory),\n            title: this.translateService.instant('com.bmc.arsys.rx.client.admin.cognitive-training.data-source.label'),\n            visible: false,\n            cellTemplate: this.dataSourceHistoryNameCellTemplate\n          },\n          {\n            index: 6,\n            fieldId: String(RX_COGNITIVE_TRAINING.settings.fieldIds.trainingType),\n            title: this.translateService.instant('com.bmc.arsys.rx.client.admin.cognitive-training.training-type.label')\n          },\n          {\n            index: 8,\n            fieldId: String(RX_COGNITIVE_TRAINING.settings.fieldIds.locale),\n            title: this.translateService.instant('com.bmc.arsys.rx.client.admin.cognitive-search.locale.label'),\n            visible: false\n          },\n          {\n            index: 11,\n            fieldId: String(RX_COGNITIVE_TRAINING.settings.fieldIds.trainDataPercent),\n            title: this.translateService.instant(\n              'com.bmc.arsys.rx.client.admin.cognitive-training.train-data-percent.label'\n            )\n          },\n          {\n            index: 12,\n            fieldId: String(RX_COGNITIVE_TRAINING.settings.fieldIds.testDataPercent),\n            title: this.translateService.instant(\n              'com.bmc.arsys.rx.client.admin.cognitive-training.test-data-percent.label'\n            )\n          },\n          {\n            index: 13,\n            fieldId: String(RX_COGNITIVE_TRAINING.settings.fieldIds.classificationServiceProvider),\n            title: this.translateService.instant(\n              'com.bmc.arsys.rx.client.admin.cognitive-training.classification-service-provider.label'\n            ),\n            visible: true\n          }\n        ],\n        testResults: [\n          {\n            index: 6,\n            fieldId: String(RX_COGNITIVE_TRAINING.settings.fieldIds.trainingDataCsv),\n            title: this.translateService.instant(\n              'com.bmc.arsys.rx.client.admin.cognitive-training.training-data.label'\n            ),\n            clickable: true,\n            actions: [\n              {\n                name: (previousActionResult: any, lastActionRow?: IRowDataItem) =>\n                  this.downloadTrainingData(lastActionRow)\n              }\n            ]\n          }\n        ]\n      },\n      [CognitiveTrainingEvaluationNames.ChatbotEvaluation]: {\n        dataSets: [\n          {\n            index: 2,\n            fieldId: String(RX_COGNITIVE_TRAINING.settings.fieldIds.chatbotName),\n            title: this.translateService.instant('com.bmc.arsys.rx.client.admin.chatbots.name.label'),\n            visible: true,\n            cellTemplate: this.chatbotNameCellTemplate\n          },\n          {\n            index: 3,\n            fieldId: String(RX_RECORD_DEFINITION.coreFieldIds.status),\n            title: this.translateService.instant('com.bmc.arsys.rx.client.admin.cognitive-search.status.label'),\n            visible: false\n          },\n          {\n            index: 4,\n            fieldId: String(RX_RECORD_DEFINITION.coreFieldIds.description),\n            title: this.translateService.instant('com.bmc.arsys.rx.client.admin.chatbots.description.title')\n          },\n          {\n            index: 5,\n            fieldId: String(RX_COGNITIVE_TRAINING.settings.fieldIds.dataSourceHistory),\n            title: this.translateService.instant('com.bmc.arsys.rx.client.admin.cognitive-training.data-source.label'),\n            cellTemplate: this.dataSourceHistoryNameCellTemplate\n          },\n          {\n            index: 7,\n            fieldId: String(RX_COGNITIVE_TRAINING.settings.fieldIds.trainingType),\n            title: this.translateService.instant(\n              'com.bmc.arsys.rx.client.admin.cognitive-training.training-type.label'\n            ),\n            visible: false\n          },\n          {\n            index: 9,\n            fieldId: String(RX_COGNITIVE_TRAINING.settings.fieldIds.locale),\n            title: 'Locale'\n          },\n          {\n            index: 12,\n            fieldId: String(RX_COGNITIVE_TRAINING.settings.fieldIds.dataSetLocale),\n            title: this.translateService.instant(\n              'com.bmc.arsys.rx.client.admin.cognitive-training.chatbot-data-set-blade.data-set-locale.label'\n            ),\n            visible: false\n          }\n        ]\n      },\n      common: {\n        dataSets: [\n          {\n            index: 0,\n            fieldId: String(RX_COGNITIVE_TRAINING.settings.fieldIds.dataSetID),\n            title: this.translateService.instant('com.bmc.arsys.rx.client.admin.cognitive-search.data-set-id.title'),\n            visible: false\n          },\n          {\n            index: 1,\n            fieldId: String(RX_COGNITIVE_TRAINING.settings.fieldIds.dataSetName),\n            title: this.translateService.instant('com.bmc.arsys.rx.client.admin.cognitive-search.data-set-name.label')\n          },\n          {\n            index: 5,\n            fieldId: String(RX_COGNITIVE_TRAINING.settings.fieldIds.dataSource),\n            title: this.translateService.instant(\n              'com.bmc.arsys.rx.client.admin.cognitive-training.current-data-source.title'\n            ),\n            visible: false\n          },\n          {\n            index: 7,\n            fieldId: String(RX_COGNITIVE_TRAINING.settings.fieldIds.dateLastTrained),\n            title: this.translateService.instant(\n              'com.bmc.arsys.rx.client.admin.cognitive-training.date-last-trained.label'\n            ),\n            visible: false\n          },\n          {\n            index: 10,\n            fieldId: String(RX_RECORD_DEFINITION.coreFieldIds.displayId),\n            title: this.translateService.instant('com.bmc.arsys.rx.client.admin.cognitive-search.request-id.title'),\n            visible: false\n          },\n          {\n            index: 10,\n            fieldId: String(RX_COGNITIVE_TRAINING.settings.fieldIds.instanceId),\n            title: this.translateService.instant('com.bmc.arsys.rx.client.admin.cognitive-search.instance-id.title'),\n            visible: false\n          }\n        ],\n        testResults: [\n          {\n            index: 0,\n            fieldId: String(RX_COGNITIVE_TRAINING.settings.fieldIds.dataSetID),\n            title: this.translateService.instant('com.bmc.arsys.rx.client.admin.cognitive-search.data-set-id.title'),\n            visible: false\n          },\n          {\n            index: 1,\n            fieldId: String(RX_COGNITIVE_TRAINING.settings.fieldIds.trainingType),\n            title: this.translateService.instant(\n              'com.bmc.arsys.rx.client.admin.cognitive-training.data-set-type.label'\n            ),\n            visible: false\n          },\n          {\n            index: 2,\n            fieldId: String(RX_COGNITIVE_TRAINING.settings.fieldIds.dataSetName),\n            title: this.translateService.instant('com.bmc.arsys.rx.client.admin.cognitive-search.data-set-name.label')\n          },\n          {\n            index: 3,\n            fieldId: String(RX_COGNITIVE_TRAINING.settings.fieldIds.evaluationStatus),\n            title: this.translateService.instant(\n              'com.bmc.arsys.rx.client.admin.cognitive-training.evaluation-status.label'\n            )\n          },\n          {\n            index: 4,\n            fieldId: String(RX_COGNITIVE_TRAINING.settings.fieldIds.dateLastTested),\n            title: this.translateService.instant(\n              'com.bmc.arsys.rx.client.admin.cognitive-training.data-last-tested.label'\n            ),\n            visible: false\n          },\n          {\n            index: 5,\n            fieldId: String(RX_COGNITIVE_TRAINING.settings.fieldIds.modifiedDate),\n            title: this.translateService.instant(\n              'com.bmc.arsys.rx.client.admin.cognitive-training.modified-date.label'\n            ),\n            visible: false\n          },\n          {\n            index: 7,\n            fieldId: String(RX_COGNITIVE_TRAINING.settings.fieldIds.testDataCsv),\n            title: this.translateService.instant('com.bmc.arsys.rx.client.admin.cognitive-training.test-data.label'),\n            clickable: true,\n            actions: [\n              {\n                name: (previousActionResult: any, lastActionRow?: IRowDataItem) => this.downloadTestData(lastActionRow)\n              }\n            ]\n          },\n          {\n            index: 8,\n            fieldId: String(RX_COGNITIVE_TRAINING.settings.fieldIds.accuracy),\n            title: this.translateService.instant('com.bmc.arsys.rx.client.admin.cognitive-training.accuracy.label')\n          },\n          {\n            index: 9,\n            fieldId: String(RX_COGNITIVE_TRAINING.settings.fieldIds.precision),\n            title: this.translateService.instant('com.bmc.arsys.rx.client.admin.cognitive-training.precision.label')\n          },\n          {\n            index: 10,\n            fieldId: String(RX_COGNITIVE_TRAINING.settings.fieldIds.recall),\n            title: this.translateService.instant('com.bmc.arsys.rx.client.admin.cognitive-training.recall.label')\n          },\n          {\n            index: 11,\n            fieldId: String(RX_COGNITIVE_TRAINING.settings.fieldIds.fScore),\n            title: this.translateService.instant('com.bmc.arsys.rx.client.admin.cognitive-training.f-score.label')\n          },\n          {\n            index: 12,\n            fieldId: String(RX_COGNITIVE_TRAINING.settings.fieldIds.resultCsv),\n            title: this.translateService.instant('com.bmc.arsys.rx.client.admin.cognitive-training.results.label'),\n            clickable: true,\n            actions: [\n              {\n                name: (previousActionResult: any, lastActionRow?: IRowDataItem) => this.downloadResults(lastActionRow)\n              }\n            ]\n          },\n          {\n            index: 13,\n            fieldId: String(RX_COGNITIVE_TRAINING.settings.fieldIds.instanceId),\n            title: this.translateService.instant('com.bmc.arsys.rx.client.admin.cognitive-search.instance-id.title'),\n            visible: false\n          },\n          {\n            index: 14,\n            fieldId: String(RX_COGNITIVE_TRAINING.settings.fieldIds.error),\n            title: this.translateService.instant(\n              'com.bmc.arsys.rx.client.approval.notification-configuration.notify-on.options.error.name'\n            ),\n            visible: false\n          }\n        ]\n      }\n    };\n\n    this.evaluation = RX_COGNITIVE_TRAINING.settings.evaluations[this.evaluationName];\n\n    this.recordGridConfig = of({\n      enableFiltering: true,\n      enableRowSelection: RowSelectionMode.Multiple,\n      recordDefinitionName: this.recordDefinitionName,\n\n      actionButtons: chain(availableActionButtons.common[this.tab.name])\n        .concat(availableActionButtons[this.evaluation.name][this.tab.name])\n        .compact()\n        .value(),\n\n      columns: chain(availableColumns.common[this.tab.name])\n        .concat(availableColumns[this.evaluation.name][this.tab.name])\n        .compact()\n        .value(),\n\n      getData: (queryParams: IRecordGridDataPageParams): Observable<IDataPageResult> => {\n        let queryExpression: string = this.evaluation.queryExpression + JSON.stringify(this.bundleId);\n\n        if (\n          this.evaluation.name ===\n          RX_COGNITIVE_TRAINING.settings.evaluations.autoClassificationTrainingAndEvaluation.name\n        ) {\n          queryExpression += this.evaluation.serviceProviderQueryExpresion + this.trainingType.uniqueValue;\n        }\n\n        const params: IDataPageParams = {\n          recorddefinition: queryParams.recorddefinition,\n          pageSize: queryParams.pageSize,\n          queryExpression: compact([queryParams.queryExpression, queryExpression]).join(' AND ')\n        };\n\n        return this.rxRecordInstanceDataPageService.post({ params });\n      }\n    });\n  }\n\n  createDataSet(dataSourceTypeName: string): void {\n    this.rxRecordInstanceService\n      .getNew(RX_COGNITIVE_TRAINING.settings.dataSetDefinitionName)\n      .subscribe((recordInstance: RecordInstance) => {\n        const data = {\n          bundleId: this.bundleId,\n          dataSourceType: cloneDeep(RX_COGNITIVE_TRAINING.settings.dataSourceTypes[dataSourceTypeName]),\n          evaluation: this.evaluation,\n          isNewDataSet: true,\n          recordInstance,\n          trainingType: this.trainingType\n        };\n\n        if (this.isAutoClassificationTrainingAndEvaluation()) {\n          if (dataSourceTypeName === RX_COGNITIVE_TRAINING.settings.dataSourceTypes.innovationSuiteDataSource.name) {\n            this.openDockedPanel({\n              title: this.translateService.instant(\n                'com.bmc.arsys.rx.client.admin.cognitive-training.new-data-set.title',\n                {\n                  dataSetName: this.translateService.instant(\n                    RX_COGNITIVE_TRAINING.settings.dataSourceTypes.innovationSuiteDataSource.displayName\n                  )\n                }\n              ),\n              content: RecordDataSetBladeComponent,\n              size: 'lg',\n              data: {\n                data\n              }\n            })\n              .then((result) => {\n                if (result) {\n                  this.cognitiveTrainingRecordGrid.api.refresh().subscribe();\n                }\n              })\n              .catch(noop);\n          } else if (dataSourceTypeName === RX_COGNITIVE_TRAINING.settings.dataSourceTypes.fileDataSource.name) {\n            this.openDockedPanel({\n              title: this.translateService.instant(\n                'com.bmc.arsys.rx.client.admin.cognitive-training.new-data-set.title',\n                {\n                  dataSetName: this.translateService.instant(\n                    RX_COGNITIVE_TRAINING.settings.dataSourceTypes.fileDataSource.displayName\n                  )\n                }\n              ),\n              content: FileDataSetBladeComponent,\n              size: 'lg',\n              data: {\n                data\n              }\n            })\n              .then((result) => {\n                if (result) {\n                  this.cognitiveTrainingRecordGrid.api.refresh().subscribe();\n                }\n              })\n              .catch(noop);\n          }\n        } else if (this.isChatbotEvaluation()) {\n          this.openDockedPanel({\n            title: this.translateService.instant(\n              'com.bmc.arsys.rx.client.admin.cognitive-training.new-chatbot-data-set.title'\n            ),\n            content: ChatbotDataSetBladeComponent,\n            size: 'lg',\n            data: {\n              data\n            }\n          })\n            .then((result) => {\n              if (result) {\n                this.cognitiveTrainingRecordGrid.api.refresh().subscribe();\n              }\n            })\n            .catch(noop);\n        }\n      });\n  }\n\n  editDataSet(dataSet: IRowDataItem): void {\n    const recordInstanceId: string = dataSet[RX_COGNITIVE_TRAINING.settings.fieldIds.instanceId];\n\n    this.rxRecordInstanceService\n      .get(RX_COGNITIVE_TRAINING.settings.dataSetDefinitionName, recordInstanceId)\n      .subscribe((recordInstance: RecordInstance) => {\n        const dataSourceHistory: ICognitiveTrainingDataSourceHistory = this.rxJsonParserService.tryParseJson(\n          recordInstance.getFieldValue(RX_COGNITIVE_TRAINING.settings.fieldIds.dataSourceHistory)\n        );\n\n        const dataSourceType: ICognitiveTrainingDataSourceType =\n          this.rxCognitiveTrainingUtilsService.getDataSourceType(dataSourceHistory);\n\n        const data = {\n          dataSourceType,\n          editDataSet: true,\n          evaluation: this.evaluation,\n          recordInstance,\n          trainingType: this.trainingType,\n          getAttachmentRecordInstanceId: recordInstance.id\n        };\n\n        if (this.isAutoClassificationTrainingAndEvaluation()) {\n          if (dataSourceType.name === RX_COGNITIVE_TRAINING.settings.dataSourceTypes.innovationSuiteDataSource.name) {\n            this.openDockedPanel({\n              title: this.translateService.instant(\n                'com.bmc.arsys.rx.client.admin.cognitive-training.edit-data-set.title',\n                {\n                  dataSetName: this.translateService.instant(\n                    RX_COGNITIVE_TRAINING.settings.dataSourceTypes.innovationSuiteDataSource.displayName\n                  )\n                }\n              ),\n              content: RecordDataSetBladeComponent,\n              size: 'lg',\n              data: {\n                data\n              }\n            })\n              .then((result) => {\n                if (result) {\n                  this.cognitiveTrainingRecordGrid.api.refresh().subscribe();\n                }\n              })\n              .catch(noop);\n          } else if (dataSourceType.name === RX_COGNITIVE_TRAINING.settings.dataSourceTypes.fileDataSource.name) {\n            this.openDockedPanel({\n              title: this.translateService.instant(\n                'com.bmc.arsys.rx.client.admin.cognitive-training.edit-data-set.title',\n                {\n                  dataSetName: this.translateService.instant(\n                    RX_COGNITIVE_TRAINING.settings.dataSourceTypes.fileDataSource.displayName\n                  )\n                }\n              ),\n              content: FileDataSetBladeComponent,\n              size: 'lg',\n              data: {\n                data\n              }\n            })\n              .then((result) => {\n                if (result) {\n                  this.cognitiveTrainingRecordGrid.api.refresh().subscribe();\n                }\n              })\n              .catch(noop);\n          }\n        } else if (this.isChatbotEvaluation()) {\n          this.openDockedPanel({\n            title: this.translateService.instant(\n              'com.bmc.arsys.rx.client.admin.cognitive-training.edit-chatbot-data-set.title'\n            ),\n            content: ChatbotDataSetBladeComponent,\n            size: 'lg',\n            data: {\n              data\n            }\n          })\n            .then((result) => {\n              if (result) {\n                this.cognitiveTrainingRecordGrid.api.refresh().subscribe();\n              }\n            })\n            .catch(noop);\n        }\n      });\n  }\n\n  copyDataSet(dataSet: IRowDataItem): void {\n    const recordInstanceId: string = dataSet[RX_COGNITIVE_TRAINING.settings.fieldIds.instanceId];\n\n    combineLatest([\n      this.rxRecordInstanceService.get(RX_COGNITIVE_TRAINING.settings.dataSetDefinitionName, recordInstanceId),\n      this.rxRecordInstanceService.getNew(RX_COGNITIVE_TRAINING.settings.dataSetDefinitionName)\n    ]).subscribe(([recordInstance, newRecordInstance]) => {\n      const dataSourceHistory: ICognitiveTrainingDataSourceHistory = this.rxJsonParserService.tryParseJson(\n        recordInstance.getFieldValue(RX_COGNITIVE_TRAINING.settings.fieldIds.dataSourceHistory)\n      );\n\n      const dataSourceType: ICognitiveTrainingDataSourceType =\n        this.rxCognitiveTrainingUtilsService.getDataSourceType(dataSourceHistory);\n\n      newRecordInstance.setFieldValue(RX_COGNITIVE_TRAINING.settings.fieldIds.dataSetName, '');\n\n      newRecordInstance.setFieldValue(\n        RX_RECORD_DEFINITION.coreFieldIds.description,\n        recordInstance.getFieldValue(RX_RECORD_DEFINITION.coreFieldIds.description)\n      );\n\n      newRecordInstance.setFieldValue(\n        RX_COGNITIVE_TRAINING.settings.fieldIds.trainingType,\n        recordInstance.getFieldValue(RX_COGNITIVE_TRAINING.settings.fieldIds.trainingType)\n      );\n\n      newRecordInstance.setFieldValue(\n        RX_COGNITIVE_TRAINING.settings.fieldIds.locale,\n        recordInstance.getFieldValue(RX_COGNITIVE_TRAINING.settings.fieldIds.locale)\n      );\n\n      newRecordInstance.setFieldProp(\n        RX_COGNITIVE_TRAINING.settings.fieldIds.dataSource,\n        'value',\n        recordInstance.getFieldValue(RX_COGNITIVE_TRAINING.settings.fieldIds.dataSource) || null\n      );\n\n      newRecordInstance.fieldInstances[RX_COGNITIVE_TRAINING.settings.fieldIds.dataSourceHistory].value =\n        JSON.stringify(dataSourceHistory);\n\n      const data = {\n        bundleId: this.bundleId,\n        dataSourceType,\n        copyDataSet: true,\n        evaluation: this.evaluation,\n        recordInstance: null,\n        trainingType: this.trainingType,\n        getAttachmentRecordInstanceId: recordInstance.id\n      };\n\n      if (this.isAutoClassificationTrainingAndEvaluation()) {\n        newRecordInstance.setFieldValue(\n          RX_COGNITIVE_TRAINING.settings.fieldIds.classificationServiceProvider,\n          recordInstance.getFieldValue(RX_COGNITIVE_TRAINING.settings.fieldIds.classificationServiceProvider)\n        );\n\n        newRecordInstance.setFieldValue(\n          RX_COGNITIVE_TRAINING.settings.fieldIds.trainDataPercent,\n          recordInstance.getFieldValue(RX_COGNITIVE_TRAINING.settings.fieldIds.trainDataPercent)\n        );\n\n        newRecordInstance.setFieldValue(\n          RX_COGNITIVE_TRAINING.settings.fieldIds.testDataPercent,\n          recordInstance.getFieldValue(RX_COGNITIVE_TRAINING.settings.fieldIds.testDataPercent)\n        );\n\n        data.recordInstance = newRecordInstance;\n\n        if (dataSourceType.name === RX_COGNITIVE_TRAINING.settings.dataSourceTypes.innovationSuiteDataSource.name) {\n          this.openDockedPanel({\n            title: this.translateService.instant(\n              'com.bmc.arsys.rx.client.admin.cognitive-training.copy-data-set.title',\n              {\n                dataSetName: this.translateService.instant(\n                  RX_COGNITIVE_TRAINING.settings.dataSourceTypes.innovationSuiteDataSource.displayName\n                )\n              }\n            ),\n            content: RecordDataSetBladeComponent,\n            size: 'lg',\n            data: {\n              data\n            }\n          })\n            .then((result) => {\n              if (result) {\n                this.cognitiveTrainingRecordGrid.api.refresh().subscribe();\n              }\n            })\n            .catch(noop);\n        } else if (dataSourceType.name === RX_COGNITIVE_TRAINING.settings.dataSourceTypes.fileDataSource.name) {\n          this.openDockedPanel({\n            title: this.translateService.instant(\n              'com.bmc.arsys.rx.client.admin.cognitive-training.copy-data-set.title',\n              {\n                dataSetName: this.translateService.instant(\n                  RX_COGNITIVE_TRAINING.settings.dataSourceTypes.fileDataSource.displayName\n                )\n              }\n            ),\n            content: FileDataSetBladeComponent,\n            size: 'lg',\n            data: {\n              data\n            }\n          })\n            .then((result) => {\n              if (result) {\n                this.cognitiveTrainingRecordGrid.api.refresh().subscribe();\n              }\n            })\n            .catch(noop);\n        }\n      } else if (this.isChatbotEvaluation()) {\n        newRecordInstance.setFieldValue(\n          RX_COGNITIVE_TRAINING.settings.fieldIds.chatbotName,\n          recordInstance.getFieldValue(RX_COGNITIVE_TRAINING.settings.fieldIds.chatbotName)\n        );\n\n        newRecordInstance.setFieldValue(\n          RX_COGNITIVE_TRAINING.settings.fieldIds.dataSetLocale,\n          recordInstance.getFieldValue(RX_COGNITIVE_TRAINING.settings.fieldIds.dataSetLocale)\n        );\n\n        data.recordInstance = newRecordInstance;\n\n        this.openDockedPanel({\n          title: this.translateService.instant(\n            'com.bmc.arsys.rx.client.admin.cognitive-training.copy-chatbot-data-set.title'\n          ),\n          content: ChatbotDataSetBladeComponent,\n          size: 'lg',\n          data: {\n            data\n          }\n        })\n          .then((result) => {\n            if (result) {\n              this.cognitiveTrainingRecordGrid.api.refresh().subscribe();\n            }\n          })\n          .catch(noop);\n      }\n    });\n  }\n\n  delete(): void {\n    this.rxModalService\n      .confirm({\n        title: this.translateService.instant('com.bmc.arsys.rx.client.common.warning.label'),\n        modalStyle: RX_MODAL.modalStyles.warning,\n        message: this.translateService.instant(this.tab.deletionConfirmationMessage)\n      })\n      .then((result: boolean) => {\n        if (result) {\n          forkJoin(\n            map(this.cognitiveTrainingRecordGrid.api.getSelectedRows(), (dataSet: IRowDataItem) =>\n              this.rxRecordInstanceService.delete(\n                this.tab.recordDefinitionName,\n                dataSet[RX_RECORD_DEFINITION.coreFieldIds.id]\n              )\n            )\n          ).subscribe(() => {\n            this.cognitiveTrainingRecordGrid.api.refresh().subscribe();\n\n            this.rxNotificationService.addSuccessMessage(\n              this.translateService.instant(this.tab.deletionSuccessMessage)\n            );\n          });\n        }\n      });\n  }\n\n  trainDataSet(dataSet: IRowDataItem): void {\n    this.rxCommandFactoryService\n      .forResourceType(RX_COGNITIVE_TRAINING.settings.commands.train)\n      .execute({\n        trainingDataSetName: `${this.bundleId}:${dataSet[RX_COGNITIVE_TRAINING.settings.fieldIds.dataSetName]}`\n      })\n      .pipe(\n        catchError((errorResponse) => throwError(errorResponse)),\n        finalize(() => this.cognitiveTrainingRecordGrid.api.refresh().subscribe())\n      )\n      .subscribe(() => {\n        this.rxNotificationService.addSuccessMessage(\n          this.translateService.instant(\n            'com.bmc.arsys.rx.client.admin.cognitive-training.training-process-triggered.message'\n          )\n        );\n      });\n  }\n\n  testDataSet(dataSet: IRowDataItem): void {\n    this.rxCommandFactoryService\n      .forResourceType(RX_COGNITIVE_TRAINING.settings.commands.test)\n      .execute({\n        trainingDataSetName: `${this.bundleId}:${dataSet[RX_COGNITIVE_TRAINING.settings.fieldIds.dataSetName]}`\n      })\n      .pipe(\n        catchError((errorResponse) => throwError(errorResponse)),\n        finalize(() => this.cognitiveTrainingRecordGrid.api.refresh().subscribe())\n      )\n      .subscribe(() => {\n        this.rxNotificationService.addSuccessMessage(\n          this.translateService.instant('com.bmc.arsys.rx.client.admin.cognitive-training.data-set-submitted.message')\n        );\n      });\n  }\n\n  downloadTrainingData(dataSet: IRowDataItem): void {\n    this.rxRecordInstanceService.downloadAttachment(\n      RX_COGNITIVE_TRAINING.settings.testResultsDefinitionName,\n      RX_COGNITIVE_TRAINING.settings.fieldIds.trainingDataCsv,\n      dataSet[RX_COGNITIVE_TRAINING.settings.fieldIds.instanceId],\n      dataSet[RX_COGNITIVE_TRAINING.settings.fieldIds.trainingDataCsv]\n    );\n  }\n\n  downloadTestData(dataSet: IRowDataItem): void {\n    this.rxRecordInstanceService.downloadAttachment(\n      RX_COGNITIVE_TRAINING.settings.testResultsDefinitionName,\n      RX_COGNITIVE_TRAINING.settings.fieldIds.testDataCsv,\n      dataSet[RX_COGNITIVE_TRAINING.settings.fieldIds.instanceId],\n      dataSet[RX_COGNITIVE_TRAINING.settings.fieldIds.testDataCsv]\n    );\n  }\n\n  downloadResults(dataSet: IRowDataItem): void {\n    this.rxRecordInstanceService.downloadAttachment(\n      RX_COGNITIVE_TRAINING.settings.testResultsDefinitionName,\n      RX_COGNITIVE_TRAINING.settings.fieldIds.resultCsv,\n      dataSet[RX_COGNITIVE_TRAINING.settings.fieldIds.instanceId],\n      dataSet[RX_COGNITIVE_TRAINING.settings.fieldIds.resultCsv]\n    );\n  }\n\n  openInteractiveEvaluationBlade(): void {\n    this.openDockedPanel({\n      title: this.translateService.instant(\n        'com.bmc.arsys.rx.client.admin.cognitive-training.auto-classification-interactive.evaluation.title'\n      ),\n      content: InteractiveEvaluationBladeComponent,\n      size: 'lg',\n      data: {\n        bundleId: this.bundleId,\n        evaluation: this.evaluation,\n        trainingType: this.trainingType\n      }\n    })\n      .then((result) => {\n        if (result) {\n          this.cognitiveTrainingRecordGrid.api.refresh().subscribe();\n        }\n      })\n      .catch(noop);\n  }\n\n  isDataSetsTab(): boolean {\n    return this.tab.name === 'dataSets';\n  }\n\n  isTestResultsTab(): boolean {\n    return this.tab.name === 'testResults';\n  }\n\n  isAutoClassificationTrainingAndEvaluation(): boolean {\n    return (\n      this.evaluation.name === RX_COGNITIVE_TRAINING.settings.evaluations.autoClassificationTrainingAndEvaluation.name\n    );\n  }\n\n  isChatbotEvaluation(): boolean {\n    return this.evaluation.name === RX_COGNITIVE_TRAINING.settings.evaluations.chatbotEvaluation.name;\n  }\n\n  formatDataSourceHistory(dataItem: string[], column: ColumnConfig): string {\n    const dataSourceHistory: ICognitiveTrainingDataSourceHistory = JSON.parse(this.getCellValue(dataItem, column));\n\n    return (\n      dataSourceHistory.fileName || this.rxDefinitionNameService.getDisplayName(dataSourceHistory.recordDefinitionName)\n    );\n  }\n\n  getCellValue(dataItem: string[], column: ColumnConfig): string {\n    return dataItem[column.field];\n  }\n\n  private isDataSetActionButtonDisabled(): boolean {\n    const dataSets = this.cognitiveTrainingRecordGrid.api.getSelectedRows();\n\n    return (\n      !this.isAdministrator ||\n      dataSets.length !== 1 ||\n      dataSets[0][RX_RECORD_DEFINITION.coreFieldIds.status] ===\n        RX_COGNITIVE_TRAINING.settings.trainingStatuses.training.value ||\n      dataSets[0][RX_RECORD_DEFINITION.coreFieldIds.status] ===\n        RX_COGNITIVE_TRAINING.settings.trainingStatuses.inProgress.value\n    );\n  }\n\n  private isChatbotDataSetEditButtonDisabled(): boolean {\n    const dataSets = this.cognitiveTrainingRecordGrid.api.getSelectedRows();\n\n    return (\n      !this.isAdministrator ||\n      dataSets.length !== 1 ||\n      dataSets[0][RX_RECORD_DEFINITION.coreFieldIds.status] ===\n        RX_COGNITIVE_TRAINING.settings.trainingStatuses.training.value\n    );\n  }\n\n  private isTestResultsDeletionRestricted(): boolean {\n    const dataSets = this.cognitiveTrainingRecordGrid.api.getSelectedRows();\n\n    return (\n      !this.isAdministrator ||\n      some(\n        dataSets,\n        (dataSet) =>\n          dataSet[RX_COGNITIVE_TRAINING.settings.fieldIds.evaluationStatus] ===\n          RX_COGNITIVE_TRAINING.settings.evaluationStatuses.queued.value\n      )\n    );\n  }\n\n  private openDockedPanel(config: DockedPanel): Promise<any> {\n    return this.rxModalService.openDockedPanel(config).catch(noop);\n  }\n}\n","<div *ngIf=\"isDataSetsTab()\">\n  <div class=\"dropdown\" *ngIf=\"isAutoClassificationTrainingAndEvaluation()\" adaptDropdown [autoFocusFirst]=\"false\">\n    <button\n      class=\"d-icon-plus_circle align-self-start\"\n      type=\"button\"\n      rx-id=\"data-set-dropdown\"\n      adapt-button\n      adaptDropdownToggle\n      btn-type=\"tertiary\"\n    >\n      {{ 'com.bmc.arsys.rx.client.common.new.label' | translate }}\n    </button>\n\n    <div class=\"dropdown-menu\" adaptDropdownMenu>\n      <button\n        class=\"dropdown-item\"\n        rx-id=\"create-record-data-set\"\n        [disabled]=\"!isAdministrator\"\n        (click)=\"createDataSet(innovationSuiteDataSourceType.name)\"\n      >\n        {{ innovationSuiteDataSourceType.displayName | translate }}\n      </button>\n\n      <button\n        class=\"dropdown-item\"\n        rx-id=\"create-file-data-set\"\n        [disabled]=\"!isAdministrator\"\n        (click)=\"createDataSet(fileDataSourceType.name)\"\n      >\n        {{ fileDataSourceType.displayName | translate }}\n      </button>\n    </div>\n  </div>\n\n  <button\n    class=\"d-icon-plus_circle align-self-start\"\n    *ngIf=\"isChatbotEvaluation()\"\n    type=\"button\"\n    rx-id=\"create-chatbot-data-set\"\n    adapt-button\n    btn-type=\"tertiary\"\n    [disabled]=\"!isAdministrator\"\n    (click)=\"createDataSet(fileDataSourceType.name)\"\n  >\n    {{ 'com.bmc.arsys.rx.client.common.new.label' | translate }}\n  </button>\n</div>\n\n<button\n  class=\"d-icon-target_cursor align-self-start\"\n  *ngIf=\"isAutoClassificationTrainingAndEvaluation() && isTestResultsTab()\"\n  type=\"button\"\n  rx-id=\"interactive-evaluation\"\n  adapt-button\n  btn-type=\"tertiary\"\n  [disabled]=\"!isAdministrator\"\n  (click)=\"openInteractiveEvaluationBlade()\"\n>\n  {{\n    'com.bmc.arsys.rx.client.admin.cognitive-training.cognitive-training-record-grid.interactive-evaluation.label'\n      | translate\n  }}\n</button>\n\n<rx-record-grid #cognitiveTrainingRecordGrid [config]=\"recordGridConfig\"></rx-record-grid>\n\n<ng-template #dataSourceHistoryNameCellTemplate let-dataItem=\"dataItem\" let-column=\"column\">\n  <ng-container>\n    {{ formatDataSourceHistory(dataItem, column) }}\n  </ng-container>\n</ng-template>\n\n<ng-template #chatbotNameCellTemplate let-dataItem=\"dataItem\" let-column=\"column\">\n  <ng-container>\n    {{ getCellValue(dataItem, column) | rxDefinitionNamePipe }}\n  </ng-container>\n</ng-template>\n","import { Component, OnDestroy, OnInit } from '@angular/core';\nimport { ReplaySubject, Subscription } from 'rxjs';\nimport { takeUntil } from 'rxjs/operators';\nimport { find } from 'lodash';\nimport { BaseViewComponent } from '@helix/platform/view/runtime';\nimport { ISystemConfiguration } from '@helix/platform/shared/api';\nimport { RX_COGNITIVE_TRAINING } from './cognitive-training.constant';\nimport { RxCognitiveTrainingService } from './cognitive-training.service';\nimport { CognitiveTrainingTabNames, ICognitiveTrainingTab, ICognitiveTrainingType } from './cognitive-training.types';\n\n@Component({\n  selector: 'rx-admin-cognitive-training',\n  templateUrl: './cognitive-training.component.html'\n})\nexport class CognitiveTrainingAdminComponent extends BaseViewComponent implements OnInit, OnDestroy {\n  busy: Subscription;\n  trainingType: ICognitiveTrainingType;\n\n  sections = RX_COGNITIVE_TRAINING.settings.sections;\n\n  tabs: ICognitiveTrainingTab[] = [\n    RX_COGNITIVE_TRAINING.settings.tabs[CognitiveTrainingTabNames.DataSets],\n    RX_COGNITIVE_TRAINING.settings.tabs[CognitiveTrainingTabNames.TestResults]\n  ];\n\n  protected destroyed$ = new ReplaySubject<boolean>(1);\n\n  constructor(private rxCognitiveTrainingService: RxCognitiveTrainingService) {\n    super();\n  }\n\n  ngOnInit(): void {\n    super.ngOnInit();\n\n    this.busy = this.rxCognitiveTrainingService\n      .getClassificationServiceProvider()\n      .pipe(takeUntil(this.destroyed$))\n      .subscribe((classificationServiceProvider: ISystemConfiguration) => {\n        this.trainingType = RX_COGNITIVE_TRAINING.settings.trainingTypes[classificationServiceProvider.value];\n\n        find(this.sections, {\n          evaluationName: RX_COGNITIVE_TRAINING.settings.evaluations.autoClassificationTrainingAndEvaluation.name\n        }).title = this.trainingType.title;\n      });\n  }\n\n  ngOnDestroy(): void {\n    this.destroyed$.next(true);\n    this.destroyed$.complete();\n  }\n}\n","<rx-admin-settings header=\"{{ 'com.bmc.arsys.rx.client.admin.cognitive-training.header.title' | translate }}\">\n  <adapt-accordion multiselect=\"true\">\n    <adapt-accordion-tab\n      *ngFor=\"let section of sections\"\n      [title]=\"section.title | translate\"\n      [isOpen]=\"section.isExpanded\"\n    >\n      <adapt-tabset *ngIf=\"trainingType\">\n        <adapt-tab-panel *ngFor=\"let tab of tabs\" [adapt-tab-title]=\"tab.title | translate\">\n          <rx-cognitive-training-record-grid\n            [evaluationName]=\"section.evaluationName\"\n            [tab]=\"tab\"\n            [recordDefinitionName]=\"tab.recordDefinitionName\"\n            [trainingType]=\"trainingType\"\n          >\n          </rx-cognitive-training-record-grid>\n        </adapt-tab-panel>\n      </adapt-tabset>\n    </adapt-accordion-tab>\n  </adapt-accordion>\n</rx-admin-settings>\n","import { ComponentFactoryResolver, NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport {\n  AdaptAccordionModule,\n  AdaptAlertModule,\n  AdaptButtonModule,\n  AdaptDockedPanelModule,\n  AdaptDropdownModule,\n  AdaptModalModule,\n  AdaptRxCounterModule,\n  AdaptRxSelectModule,\n  AdaptRxTextfieldModule,\n  AdaptRxUploaderModule,\n  AdaptRxValidatorsModule,\n  AdaptTabsModule\n} from '@bmc-ux/adapt-angular';\nimport { RX_APPLICATION, RxDefinitionModule } from '@helix/platform/shared/api';\nimport { RxViewComponentRegistryService } from '@helix/platform/view/api';\nimport {\n  ExpressionFormControlModule,\n  GroupButtonFormControlModule,\n  RxDefinitionPickerModule\n} from '@helix/platform/shared/components';\nimport {\n  RecordGridDesignModule,\n  RecordGridFilterSelectControlModule,\n  RecordGridModule\n} from '@helix/platform/view/components';\nimport { AdminSettingsModule } from '@helix/platform/shared/components';\nimport { RxBusyIndicatorModule } from '@helix/platform/ui-kit';\nimport { CognitiveTrainingAdminComponent } from './cognitive-training.component';\nimport { CognitiveTrainingRecordGridComponent } from './components/cognitive-training-record-grid/cognitive-training-record-grid.component';\nimport { RecordDataSetBladeComponent } from './components/record-data-set-blade/record-data-set-blade.component';\nimport { FileDataSetBladeComponent } from './components/file-data-set-blade/file-data-set-blade.component';\nimport { ChatbotDataSetBladeComponent } from './components/chatbot-data-set-blade/chatbot-data-set-blade.component';\nimport { InteractiveEvaluationBladeComponent } from './components/interactive-evaluation-blade/interactive-evaluation-blade.component';\nimport { TranslateModule } from '@ngx-translate/core';\n\n@NgModule({\n  declarations: [\n    ChatbotDataSetBladeComponent,\n    CognitiveTrainingAdminComponent,\n    CognitiveTrainingRecordGridComponent,\n    FileDataSetBladeComponent,\n    InteractiveEvaluationBladeComponent,\n    RecordDataSetBladeComponent\n  ],\n  imports: [\n    AdaptAccordionModule,\n    AdaptAlertModule,\n    AdaptButtonModule,\n    AdaptDockedPanelModule,\n    AdaptDropdownModule,\n    AdaptModalModule,\n    AdaptRxCounterModule,\n    AdaptRxSelectModule,\n    AdaptRxTextfieldModule,\n    AdaptRxUploaderModule,\n    AdaptRxValidatorsModule,\n    AdaptTabsModule,\n    AdminSettingsModule,\n    CommonModule,\n    ExpressionFormControlModule,\n    FormsModule,\n    GroupButtonFormControlModule,\n    RecordGridDesignModule,\n    RecordGridModule,\n    RxBusyIndicatorModule,\n    RxDefinitionModule,\n    RxDefinitionPickerModule,\n    TranslateModule,\n    RecordGridFilterSelectControlModule\n  ],\n  entryComponents: [\n    ChatbotDataSetBladeComponent,\n    CognitiveTrainingAdminComponent,\n    CognitiveTrainingRecordGridComponent,\n    FileDataSetBladeComponent,\n    InteractiveEvaluationBladeComponent,\n    RecordDataSetBladeComponent\n  ]\n})\nexport class CognitiveTrainingRegistrationModule {\n  constructor(\n    private componentFactoryResolver: ComponentFactoryResolver,\n    private rxViewComponentRegistryService: RxViewComponentRegistryService\n  ) {\n    rxViewComponentRegistryService.register({\n      type: 'rx-admin-cognitive-training',\n      componentFactory: this.componentFactoryResolver.resolveComponentFactory(CognitiveTrainingAdminComponent),\n      name: 'Cognitive training',\n      isPageComponent: true,\n      availableInBundles: [RX_APPLICATION.settingsBundleId]\n    });\n  }\n}\n","export const RX_COMAROUND_KNOWLEDGE = {\n  configName: 'ComAround Knowledge',\n  pingComAroundCommand: 'com.bmc.dsm.chatbot.command.PingComAroundCommand',\n\n  settingNames: {\n    serverUrl: 'ComAround Knowledge URL',\n    subscriptionId: 'ComAround Knowledge Subscription ID',\n    userName: 'ComAround Knowledge User',\n    password: 'ComAround Knowledge Password',\n    frameUrl: 'ComAround Knowledge Frame URL',\n    mainUrl: 'ComAround Knowledge Main URL',\n    portalId: 'ComAround Knowledge Portal ID'\n  }\n};\n","import { HttpClient, HttpErrorResponse } from '@angular/common/http';\nimport { Component, OnDestroy, OnInit } from '@angular/core';\nimport { AbstractControl, FormBuilder, FormControl, FormGroup, ValidationErrors, Validators } from '@angular/forms';\nimport {\n  IAdminComponentSetting,\n  IAdminComponentSettings,\n  RxAdminSettingsService,\n  RxCommandFactoryService,\n  RxNotificationService,\n  RX_APPLICATION\n} from '@helix/platform/shared/api';\nimport { ConnectionTestStatus } from '@helix/platform/ui-kit';\nimport { RxUrlUtilsService } from '@helix/platform/utils';\nimport { BaseViewComponent } from '@helix/platform/view/runtime';\nimport { find } from 'lodash';\nimport { Observable, of, Subscription, throwError } from 'rxjs';\nimport { catchError, finalize, switchMap, tap } from 'rxjs/operators';\nimport { RxCognitiveServiceService } from '../cognitive-service/cognitive-service.service';\nimport { RX_COMAROUND_KNOWLEDGE } from './comaround-knowledge.constant';\nimport { ComaroundPortal } from './comaround-knowledge.interfaces';\nimport { TranslateService } from '@ngx-translate/core';\n\n@Component({\n  selector: 'rx-admin-comaround-knowledge',\n  templateUrl: './comaround-knowledge.component.html',\n  styleUrls: ['./comaround-knowledge.component.scss']\n})\nexport class ComaroundKnowledgeAdminComponent extends BaseViewComponent implements OnInit, OnDestroy {\n  busy: Subscription;\n  knowledgeConfigForm: FormGroup;\n  connectionTestStatus: ConnectionTestStatus = ConnectionTestStatus.Invalid;\n  availablePortals: ComaroundPortal[] = [];\n  private isNewConfigurationSetting = false;\n  private comaroundComponentSettingsValues: IAdminComponentSetting[] = [];\n  private subscription = new Subscription();\n\n  constructor(\n    private formBuilder: FormBuilder,\n    private rxUrlUtilsService: RxUrlUtilsService,\n    private rxNotificationService: RxNotificationService,\n    private rxAdminSettingsService: RxAdminSettingsService,\n    private rxCommandFactoryService: RxCommandFactoryService,\n    private rxCognitiveServiceService: RxCognitiveServiceService,\n    private httpClient: HttpClient,\n    private translateService: TranslateService\n  ) {\n    super();\n  }\n\n  private get comaroundConfigFormGroup(): FormGroup {\n    return this.knowledgeConfigForm.controls.comaroundForm as FormGroup;\n  }\n\n  get portalControl(): FormControl {\n    return this.knowledgeConfigForm.controls.portal as FormControl;\n  }\n\n  ngOnInit(): void {\n    this.notifyPropertyChanged('api', {\n      isDirty: () => this.knowledgeConfigForm.dirty\n    });\n\n    this.knowledgeConfigForm = this.formBuilder.group({\n      comaroundForm: this.formBuilder.group({\n        mainUrl: this.formBuilder.control(null, this.validateUrl),\n        frameUrl: this.formBuilder.control(null, this.validateUrl),\n        subscriptionId: this.formBuilder.control(null, Validators.required),\n        userName: this.formBuilder.control(null, Validators.required),\n        password: this.formBuilder.control(null, Validators.required),\n        serverUrl: this.formBuilder.control(null, [Validators.required, this.validateUrl])\n      }),\n      portal: this.formBuilder.control({ value: [], disabled: true })\n    });\n\n    this.busy = this.getComaroundComponentSettings()\n      .pipe(\n        tap((componentSettings) => {\n          const settingNames = Object.values(RX_COMAROUND_KNOWLEDGE.settingNames);\n          const { values } = componentSettings;\n\n          this.isNewConfigurationSetting = values.length === 0;\n          this.comaroundComponentSettingsValues = values;\n\n          // complete the missing configuration settings\n          // works for new configuration too\n          if (values.length < settingNames.length) {\n            const ownerKey = values[0]?.ownerKeyValue1;\n\n            settingNames\n              .filter((name) => !values.find((setting) => setting.settingName === name))\n              .forEach((name) =>\n                values.push({\n                  // these fields satisfy update/create settings\n                  componentName: RX_COMAROUND_KNOWLEDGE.configName,\n                  ownerKeyValue1: ownerKey,\n                  settingName: name,\n                  settingValue: null\n                } as IAdminComponentSetting)\n              );\n          }\n\n          this.comaroundConfigFormGroup.patchValue({\n            serverUrl: this.getValue(RX_COMAROUND_KNOWLEDGE.settingNames.serverUrl),\n            subscriptionId: this.getValue(RX_COMAROUND_KNOWLEDGE.settingNames.subscriptionId),\n            userName: this.getValue(RX_COMAROUND_KNOWLEDGE.settingNames.userName),\n            password: this.getValue(RX_COMAROUND_KNOWLEDGE.settingNames.password),\n            frameUrl: this.getValue(RX_COMAROUND_KNOWLEDGE.settingNames.frameUrl),\n            mainUrl: this.getValue(RX_COMAROUND_KNOWLEDGE.settingNames.mainUrl)\n          });\n        }),\n        switchMap(() => {\n          return this.getValue(RX_COMAROUND_KNOWLEDGE.settingNames.portalId) ? this.getAvailablePortals() : of([]);\n        }),\n        tap((portals) => {\n          this.availablePortals = portals;\n\n          if (portals.length) {\n            const configuredPortalId = this.getValue(RX_COMAROUND_KNOWLEDGE.settingNames.portalId);\n            let selectedPortal: ComaroundPortal =\n              configuredPortalId && portals.find((portal) => portal.id == configuredPortalId);\n\n            selectedPortal ??= portals.find((portal) => portal.isDefault);\n            this.portalControl.setValue([selectedPortal]);\n          }\n        })\n      )\n      .subscribe();\n\n    this.subscription = this.comaroundConfigFormGroup.valueChanges.subscribe(() => {\n      this.connectionTestStatus =\n        this.comaroundConfigFormGroup.pristine || this.comaroundConfigFormGroup.invalid\n          ? ConnectionTestStatus.Invalid\n          : ConnectionTestStatus.Unknown;\n\n      if (this.portalControl.enabled) {\n        this.portalControl.disable();\n      }\n    });\n  }\n\n  private getComaroundComponentSettings(): Observable<IAdminComponentSettings> {\n    return this.rxAdminSettingsService.getComponentSettings(RX_COMAROUND_KNOWLEDGE.configName, {\n      'default-bundle-scope': RX_APPLICATION.chatbotBundleId\n    });\n  }\n\n  getAvailablePortals(): Observable<ComaroundPortal[]> {\n    return this.httpClient\n      .get<ComaroundPortal[]>('/api/rx/application/knowledge?ComAroundRequest=v1/user/portals')\n      .pipe(catchError(() => of([])));\n  }\n\n  portalOptionFormatter(option: ComaroundPortal) {\n    return option.name;\n  }\n\n  private getValue(settingName: string): string | number {\n    const setting = find(this.comaroundComponentSettingsValues, {\n      settingName\n    });\n\n    return setting?.settingValue;\n  }\n\n  ngOnDestroy(): void {\n    this.subscription.unsubscribe();\n  }\n\n  isSaveButtonDisabled(): boolean {\n    return (\n      this.knowledgeConfigForm.pristine ||\n      this.knowledgeConfigForm.invalid ||\n      this.connectionTestStatus !== ConnectionTestStatus.Passed\n    );\n  }\n\n  private setValue(settingName: string, value: string): void {\n    const setting = find(this.comaroundComponentSettingsValues, {\n      settingName\n    });\n\n    if (setting) {\n      setting.settingValue = value;\n    }\n  }\n\n  saveConfiguration(): void {\n    const formValue = {\n      ...this.comaroundConfigFormGroup.getRawValue(),\n      portal: this.portalControl.value\n    };\n\n    let adminSetting$: Observable<any>;\n\n    this.setValue(RX_COMAROUND_KNOWLEDGE.settingNames.serverUrl, formValue.serverUrl);\n    this.setValue(RX_COMAROUND_KNOWLEDGE.settingNames.subscriptionId, formValue.subscriptionId);\n    this.setValue(RX_COMAROUND_KNOWLEDGE.settingNames.userName, formValue.userName);\n    this.setValue(RX_COMAROUND_KNOWLEDGE.settingNames.password, formValue.password);\n    this.setValue(RX_COMAROUND_KNOWLEDGE.settingNames.frameUrl, formValue.frameUrl);\n    this.setValue(RX_COMAROUND_KNOWLEDGE.settingNames.mainUrl, formValue.mainUrl);\n    this.setValue(RX_COMAROUND_KNOWLEDGE.settingNames.portalId, formValue.portal[0]?.id);\n\n    if (this.isNewConfigurationSetting) {\n      adminSetting$ = this.rxAdminSettingsService\n        .createComponentSettings(RX_COMAROUND_KNOWLEDGE.configName, this.comaroundComponentSettingsValues)\n        .pipe(\n          switchMap(() => this.getComaroundComponentSettings()),\n          tap((response) => {\n            this.isNewConfigurationSetting = false;\n            this.comaroundComponentSettingsValues = response.values;\n          })\n        );\n    } else {\n      adminSetting$ = this.rxAdminSettingsService.updateComponentSettings(\n        `${RX_COMAROUND_KNOWLEDGE.configName}/${this.comaroundComponentSettingsValues[0].ownerKeyValue1}`,\n        this.comaroundComponentSettingsValues\n      );\n    }\n\n    this.busy = adminSetting$.subscribe(() => {\n      this.knowledgeConfigForm.markAsPristine();\n      this.updateComaroundTokenWithLatestValues();\n\n      this.rxNotificationService.addSuccessMessage(\n        this.translateService.instant('com.bmc.arsys.rx.client.admin.comaround-knowledge.configuration-saved.message')\n      );\n\n      this.connectionTestStatus = ConnectionTestStatus.Invalid;\n      this.portalControl.disable();\n    });\n  }\n\n  private updateComaroundTokenWithLatestValues(): void {\n    this.rxCommandFactoryService\n      .forResourceType('com.bmc.dsm.chatbot.command.UpdateComAroundTokenCommand')\n      .execute({})\n      .subscribe();\n  }\n\n  onTestConnection(): void {\n    const formValue = this.comaroundConfigFormGroup.getRawValue();\n\n    this.knowledgeConfigForm.disable();\n\n    this.rxCognitiveServiceService\n      .testConnection({\n        resourceType: RX_COMAROUND_KNOWLEDGE.pingComAroundCommand,\n        serverUrl: formValue.serverUrl,\n        subscriptionId: formValue.subscriptionId,\n        userName: formValue.userName,\n        password: formValue.password,\n        frameUrl: formValue.frameUrl,\n        mainUrl: formValue.mainUrl\n      })\n      .pipe(\n        finalize(() => this.comaroundConfigFormGroup.enable({ emitEvent: false })),\n        catchError((error: HttpErrorResponse) => {\n          this.connectionTestStatus = ConnectionTestStatus.Failed;\n\n          return throwError(error);\n        })\n      )\n      .subscribe((portals: ComaroundPortal[] | undefined) => {\n        this.availablePortals = portals || [];\n\n        if (portals) {\n          const configuredPortalId = this.getValue(RX_COMAROUND_KNOWLEDGE.settingNames.portalId);\n          let selectedPortal: ComaroundPortal =\n            configuredPortalId && portals.find((portal) => portal.id == configuredPortalId);\n\n          selectedPortal ??= portals.find((portal) => portal.isDefault);\n          this.portalControl.setValue([selectedPortal]);\n          this.portalControl.enable();\n        }\n\n        this.connectionTestStatus = ConnectionTestStatus.Passed;\n      });\n  }\n\n  validateUrl(): (control: AbstractControl) => ValidationErrors | null {\n    return (control: AbstractControl) => {\n      return control.value && !this.rxUrlUtilsService.isValidUrl(control.value, true)\n        ? { invalidUrl: { message: this.translateService.instant('com.bmc.arsys.rx.client.admin.invalid-url.label') } }\n        : null;\n    };\n  }\n}\n","<rx-admin-settings\n  header=\" {{ 'com.bmc.arsys.rx.client.admin.comaround-knowledge.header.title' | translate }}\"\n  [busy]=\"busy\">\n  <form [formGroup]=\"knowledgeConfigForm\">\n    <fieldset formGroupName=\"comaroundForm\">\n      <adapt-rx-textfield\n        rx-id=\"main-url\"\n        label=\"{{ 'com.bmc.arsys.rx.client.admin.comaround-knowledge.main-url.label' | translate }}\"\n        class=\"d-block form-group\"\n        formControlName=\"mainUrl\">\n      </adapt-rx-textfield>\n\n      <adapt-rx-textfield\n        rx-id=\"frame-url\"\n        label=\"{{ 'com.bmc.arsys.rx.client.admin.comaround-knowledge.frame-url.label' | translate }}\"\n        class=\"d-block form-group\"\n        formControlName=\"frameUrl\">\n      </adapt-rx-textfield>\n\n      <adapt-rx-textfield\n        rx-id=\"server-url\"\n        label=\"{{ 'com.bmc.arsys.rx.client.admin.comaround-knowledge.api-endpoint-url.label' | translate }}\"\n        class=\"d-block form-group\"\n        formControlName=\"serverUrl\">\n      </adapt-rx-textfield>\n\n      <adapt-rx-textfield\n        rx-id=\"subscription-id\"\n        label=\"{{ 'com.bmc.arsys.rx.client.admin.comaround-knowledge.subscription-id.label' | translate }}\"\n        formControlName=\"subscriptionId\"\n        class=\"d-block form-group\">\n      </adapt-rx-textfield>\n\n      <adapt-rx-textfield\n        rx-id=\"user-name\"\n        label=\"{{ 'com.bmc.arsys.rx.client.common.user-name.label' | translate }}\"\n        formControlName=\"userName\"\n        class=\"d-block form-group\">\n      </adapt-rx-textfield>\n\n      <adapt-rx-textfield\n        rx-id=\"password\"\n        label=\"{{ 'com.bmc.arsys.rx.client.common.password.label' | translate }}\"\n        formControlName=\"password\"\n        isPassword=\"true\"\n        class=\"d-block form-group\">\n      </adapt-rx-textfield>\n\n      <rx-connection-tester\n        buttonType=\"secondary\"\n        [status]=\"connectionTestStatus\"\n        (testConnection)=\"onTestConnection()\"\n        rx-id=\"test-button\"\n        class=\"d-block form-group\">\n      </rx-connection-tester>\n\n    </fieldset>\n\n    <hr />\n\n    <adapt-rx-select\n      rx-id=\"portal\"\n      label=\"{{ 'com.bmc.arsys.rx.client.admin.comaround-knowledge.portal.label' | translate }}\"\n      formControlName=\"portal\"\n      [options]=\"availablePortals\"\n      [optionFormatter]=\"portalOptionFormatter\"\n      class=\"d-block form-group\"></adapt-rx-select>\n\n    <adapt-alert\n      *ngIf=\"portalControl.disabled\"\n      [config]=\"{type: 'inline', variant: 'info', icon: true}\">\n      {{ \"com.bmc.arsys.rx.client.admin.comaround-knowledge.portal-cannot-be-selected.message\" | translate }}\n    </adapt-alert>\n\n    <div class=\"d-flex justify-content-start mt-5\">\n      <button\n        adapt-button\n        class=\"mr-2\"\n        btn-type=\"primary\"\n        type=\"button\"\n        rx-id=\"save-button\"\n        [disabled]=\"isSaveButtonDisabled()\"\n        (click)=\"saveConfiguration()\">\n        {{ 'com.bmc.arsys.rx.client.common.save.label' | translate }}\n      </button>\n    </div>\n  </form>\n</rx-admin-settings>\n","import { ComponentFactoryResolver, NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { ComaroundKnowledgeAdminComponent } from './comaround-knowledge.component';\nimport { RxViewComponentRegistryService } from '@helix/platform/view/api';\nimport { RX_APPLICATION } from '@helix/platform/shared/api';\nimport { ReactiveFormsModule } from '@angular/forms';\nimport { AdaptAccordionModule, AdaptAlertModule, AdaptButtonModule, AdaptRxSelectModule, AdaptRxTextfieldModule } from '@bmc-ux/adapt-angular';\nimport { RxConnectionTesterModule, RxDirectivesModule } from '@helix/platform/ui-kit';\nimport { AdminSettingsModule } from '@helix/platform/shared/components';\nimport { TranslateModule } from '@ngx-translate/core';\n\n@NgModule({\n  declarations: [ComaroundKnowledgeAdminComponent],\n  imports: [\n    AdaptButtonModule,\n    AdaptRxTextfieldModule,\n    AdaptRxSelectModule,\n    AdaptAlertModule,\n    AdaptAccordionModule,\n    AdminSettingsModule,\n    CommonModule,\n    ReactiveFormsModule,\n    RxConnectionTesterModule,\n    RxDirectivesModule,\n    TranslateModule\n  ],\n  entryComponents: [ComaroundKnowledgeAdminComponent]\n})\nexport class ComaroundKnowledgeRegistrationModule {\n  constructor(\n    private componentFactoryResolver: ComponentFactoryResolver,\n    private rxViewComponentRegistryService: RxViewComponentRegistryService\n  ) {\n    rxViewComponentRegistryService.register({\n      type: 'rx-admin-comaround-knowledge',\n      componentFactory: this.componentFactoryResolver.resolveComponentFactory(ComaroundKnowledgeAdminComponent),\n      name: 'ComAround knowledge',\n      isPageComponent: true,\n      availableInBundles: [RX_APPLICATION.settingsBundleId]\n    });\n  }\n}\n","export enum AliasType {\n  DataSource = 'dataSource',\n  WebRequest = 'webRequest',\n  Connector = 'connector'\n}\n","import { Component, Input, OnInit } from '@angular/core';\nimport { RxSelectOption } from '@bmc-ux/adapt-angular';\nimport { RxRecordInstanceService, RxRecordInstanceUpdateService } from '@helix/platform/record/api';\nimport { IPlainObject, RxNotificationService } from '@helix/platform/shared/api';\nimport { get } from 'lodash';\nimport { RX_CONNECTION_MAPPING } from './connection-mapping.constant';\nimport { AliasType } from './connection-mapping.types';\nimport { TranslateService } from '@ngx-translate/core';\n\n@Component({\n  selector: 'rx-connection-mapping',\n  templateUrl: './connection-mapping.component.html'\n})\nexport class ConnectionMappingComponent implements OnInit {\n  @Input()\n  configurations: IPlainObject;\n\n  @Input()\n  aliasMapping: IPlainObject;\n\n  @Input()\n  aliasType: AliasType;\n\n  aliasNameId: number = RX_CONNECTION_MAPPING.aliasMapping.fields.aliasName;\n  connectionConfiguration: RxSelectOption;\n\n  constructor(\n    private rxNotificationService: RxNotificationService,\n    private rxRecordInstanceService: RxRecordInstanceService,\n    private rxRecordInstanceUpdateService: RxRecordInstanceUpdateService,\n    private translateService: TranslateService\n  ) {\n    this.optionFormatter = this.optionFormatter.bind(this);\n  }\n\n  ngOnInit() {\n    if (this.aliasMapping[RX_CONNECTION_MAPPING.aliasMapping.fields.aliasValue]) {\n      const connectionConfiguration = this.configurations.find(\n        (config) =>\n          config[RX_CONNECTION_MAPPING.dataSource.fields.id] ===\n          this.aliasMapping[RX_CONNECTION_MAPPING.aliasMapping.fields.aliasValue]\n      );\n\n      this.connectionConfiguration = [connectionConfiguration];\n    }\n  }\n\n  optionFormatter(configurationOption: RxSelectOption): string {\n    const fieldName =\n      this.aliasType === AliasType.Connector\n        ? RX_CONNECTION_MAPPING.connector.fields.target_name\n        : RX_CONNECTION_MAPPING.dataSource.fields.name;\n\n    return get(configurationOption, fieldName, 'Select configuration');\n  }\n\n  onConnectionConfigurationChange(configuration): void {\n    this.rxRecordInstanceService\n      .get(\n        RX_CONNECTION_MAPPING.aliasMapping.recordDefinitionName,\n        this.aliasMapping[RX_CONNECTION_MAPPING.aliasMapping.fields.id]\n      )\n      .subscribe((recordInstance) => {\n        recordInstance.setFieldValue(\n          RX_CONNECTION_MAPPING.aliasMapping.fields.aliasValue,\n          configuration[0][RX_CONNECTION_MAPPING.dataSource.fields.id]\n        );\n\n        this.rxRecordInstanceUpdateService.execute(recordInstance).subscribe(() => {\n          this.rxNotificationService.addSuccessMessage(\n            this.translateService.instant('com.bmc.arsys.rx.client.admin.connection-mapping.mapping-saved.message')\n          );\n        });\n      });\n  }\n}\n","<div class=\"row\">\n  <adapt-rx-textfield\n    class=\"col-md-6 form-group\"\n    rx-id=\"connection-target\"\n    label=\"{{ 'com.bmc.arsys.rx.client.admin.connection-mapping.connection-target.label' | translate }}\"\n    disabled=\"true\"\n    [(ngModel)]=\"aliasMapping[this.aliasNameId]\"\n  ></adapt-rx-textfield>\n\n  <adapt-rx-select\n    class=\"d-block col-md-6 form-group\"\n    rx-id=\"connection-configuration\"\n    label=\"{{ 'com.bmc.arsys.rx.client.admin.connection-mapping.connection-configuration.label' | translate }}\"\n    [ngModel]=\"connectionConfiguration\"\n    [options]=\"configurations\"\n    [optionFormatter]=\"optionFormatter\"\n    (ngModelChange)=\"onConnectionConfigurationChange($event)\"\n  ></adapt-rx-select>\n</div>\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { FormsModule } from '@angular/forms';\nimport { AdaptRxSelectModule, AdaptRxTextfieldModule } from '@bmc-ux/adapt-angular';\nimport { ConnectionMappingComponent } from './connection-mapping.component';\nimport { TranslateModule } from '@ngx-translate/core';\n\n@NgModule({\n  imports: [CommonModule, AdaptRxSelectModule, FormsModule, AdaptRxTextfieldModule, TranslateModule],\n  declarations: [ConnectionMappingComponent],\n  exports: [ConnectionMappingComponent]\n})\nexport class RxConnectionMappingModule {}\n","import { Component, OnInit } from '@angular/core';\nimport { RxSelectOption } from '@bmc-ux/adapt-angular';\nimport { RxRecordInstanceDataPageService } from '@helix/platform/record/api';\nimport { IDataPageParams, IDataPageResult, IPlainObject } from '@helix/platform/shared/api';\nimport { get, uniqBy, values } from 'lodash';\nimport { forkJoin, Observable, Subscription } from 'rxjs';\nimport { RX_CONNECTION_MAPPING } from '../common/connection-mapping.constant';\nimport { TranslateService } from '@ngx-translate/core';\n\n@Component({\n  selector: 'rx-connector-mapping',\n  templateUrl: './connector-mapping.component.html'\n})\nexport class ConnectorMappingAdminComponent implements OnInit {\n  mappingSelectOptions: RxSelectOption[] = [];\n  selectedMapping: RxSelectOption;\n  mappingList: IPlainObject[];\n  configurationList: IPlainObject[];\n  busy: Subscription;\n  constructor(\n    private rxRecordInstanceDataPageService: RxRecordInstanceDataPageService,\n    private translateService: TranslateService\n  ) {}\n\n  ngOnInit() {\n    this.busy = this.getRecordInstanceDataPage({\n      recorddefinition: RX_CONNECTION_MAPPING.aliasMapping.recordDefinitionName,\n      queryExpression: `'${RX_CONNECTION_MAPPING.aliasMapping.fields.aliasType}'!=\"email\"`,\n      propertySelection: values(RX_CONNECTION_MAPPING.aliasMapping.fields).join()\n    }).subscribe((response) => {\n      this.mappingSelectOptions = uniqBy(response.data, RX_CONNECTION_MAPPING.aliasMapping.fields.applicationId);\n    });\n  }\n\n  optionFormatter(application: RxSelectOption): string {\n    return application[RX_CONNECTION_MAPPING.aliasMapping.fields.applicationName];\n  }\n\n  private getRecordInstanceDataPage(params: IDataPageParams): Observable<IDataPageResult> {\n    return this.rxRecordInstanceDataPageService.post({ params });\n  }\n\n  onApplicationChange(selectedApplication: RxSelectOption): void {\n    const applicationId = get(selectedApplication, `0.${RX_CONNECTION_MAPPING.aliasMapping.fields.applicationId}`);\n\n    if (applicationId) {\n      forkJoin({\n        configurationList: this.getRecordInstanceDataPage({\n          recorddefinition: RX_CONNECTION_MAPPING.connector.recordDefinitionName,\n          propertySelection: values(RX_CONNECTION_MAPPING.connector.fields).join()\n        }),\n        applicationMappingList: this.getRecordInstanceDataPage({\n          recorddefinition: RX_CONNECTION_MAPPING.aliasMapping.recordDefinitionName,\n          propertySelection: values(RX_CONNECTION_MAPPING.aliasMapping.fields).join(),\n          queryExpression:\n            `(('${RX_CONNECTION_MAPPING.aliasMapping.fields.applicationId}'=\"${applicationId}\" AND ` +\n            `'${RX_CONNECTION_MAPPING.aliasMapping.fields.aliasType}'=\"${RX_CONNECTION_MAPPING.aliasTypes.connector}\"))`\n        })\n      }).subscribe((result) => {\n        this.configurationList = result.configurationList.data;\n        this.mappingList = result.applicationMappingList.data;\n      });\n    }\n  }\n}\n","<rx-admin-settings\n  header=\"{{ 'com.bmc.arsys.rx.client.admin.connection-mapping.connector-mapping.header.title' | translate }}\"\n  [busy]=\"busy\"\n>\n  <div class=\"row\">\n    <adapt-rx-select\n      class=\"col-md-6 form-group\"\n      rx-id=\"application\"\n      label=\"{{ 'com.bmc.arsys.rx.client.admin.connection-mapping.connector-mapping.application.label' | translate }}\"\n      [ngModel]=\"selectedMapping\"\n      [options]=\"mappingSelectOptions\"\n      [optionFormatter]=\"optionFormatter\"\n      (ngModelChange)=\"onApplicationChange($event)\"\n    ></adapt-rx-select>\n  </div>\n\n  <rx-connection-mapping\n    *ngFor=\"let mapping of mappingList\"\n    [configurations]=\"configurationList\"\n    [aliasMapping]=\"mapping\"\n    aliasType=\"connector\"\n  >\n  </rx-connection-mapping>\n</rx-admin-settings>\n","import { CommonModule } from '@angular/common';\nimport { ComponentFactoryResolver, NgModule } from '@angular/core';\nimport { FormsModule } from '@angular/forms';\nimport { AdaptRxSelectModule, AdaptRxTextfieldModule } from '@bmc-ux/adapt-angular';\nimport { RX_APPLICATION } from '@helix/platform/shared/api';\nimport { RxViewComponentRegistryService } from '@helix/platform/view/api';\nimport { AdminSettingsModule } from '@helix/platform/shared/components';\nimport { RxConnectionMappingModule } from '../common/connection-mapping.module';\nimport { ConnectorMappingAdminComponent } from './connector-mapping.component';\nimport { TranslateModule } from '@ngx-translate/core';\n\n@NgModule({\n  declarations: [ConnectorMappingAdminComponent],\n  imports: [\n    AdminSettingsModule,\n    AdaptRxTextfieldModule,\n    AdaptRxSelectModule,\n    CommonModule,\n    FormsModule,\n    RxConnectionMappingModule,\n    TranslateModule\n  ],\n  entryComponents: [ConnectorMappingAdminComponent]\n})\nexport class ConnectorMappingRegistrationModule {\n  constructor(\n    private componentFactoryResolver: ComponentFactoryResolver,\n    private rxViewComponentRegistryService: RxViewComponentRegistryService\n  ) {\n    rxViewComponentRegistryService.register({\n      type: 'rx-admin-connector-mapping',\n      componentFactory: this.componentFactoryResolver.resolveComponentFactory(ConnectorMappingAdminComponent),\n      name: 'Connector mapping',\n      isPageComponent: true,\n      availableInBundles: [RX_APPLICATION.settingsBundleId]\n    });\n  }\n}\n","import { Component, OnInit } from '@angular/core';\nimport { RxSelectOption } from '@bmc-ux/adapt-angular';\nimport { RxRecordInstanceDataPageService } from '@helix/platform/record/api';\nimport { IDataPageParams, IDataPageResult, IPlainObject } from '@helix/platform/shared/api';\nimport { get, uniqBy, values } from 'lodash';\nimport { forkJoin, Observable, Subscription } from 'rxjs';\nimport { RX_CONNECTION_MAPPING } from '../common/connection-mapping.constant';\n\n@Component({\n  selector: 'rx-admin-data-source-mapping',\n  templateUrl: './data-source-mapping.component.html'\n})\nexport class DataSourceMappingAdminComponent implements OnInit {\n  applicationSelectOptions: RxSelectOption[] = [];\n  selectedApplication: RxSelectOption;\n  applicationMappingList: IPlainObject[];\n  configurationList: IPlainObject[];\n  busy: Subscription;\n\n  constructor(private rxRecordInstanceDataPageService: RxRecordInstanceDataPageService) {}\n\n  ngOnInit() {\n    this.busy = this.getRecordInstanceDataPage({\n      recorddefinition: RX_CONNECTION_MAPPING.aliasMapping.recordDefinitionName,\n      queryExpression: `'${RX_CONNECTION_MAPPING.aliasMapping.fields.aliasType}'!=\"email\"`,\n      propertySelection: values(RX_CONNECTION_MAPPING.aliasMapping.fields).join()\n    }).subscribe((response) => {\n      this.applicationSelectOptions = uniqBy(response.data, RX_CONNECTION_MAPPING.aliasMapping.fields.applicationId);\n    });\n  }\n\n  optionFormatter(application: RxSelectOption): string {\n    return application[RX_CONNECTION_MAPPING.aliasMapping.fields.applicationName];\n  }\n\n  private getRecordInstanceDataPage(params: IDataPageParams): Observable<IDataPageResult> {\n    return this.rxRecordInstanceDataPageService.post({ params });\n  }\n\n  onApplicationChange(selectedApplication: RxSelectOption): void {\n    const applicationId = get(selectedApplication, `0.${RX_CONNECTION_MAPPING.aliasMapping.fields.applicationId}`);\n\n    if (applicationId) {\n      forkJoin({\n        configurationList: this.getRecordInstanceDataPage({\n          recorddefinition: RX_CONNECTION_MAPPING.dataSource.recordDefinitionName,\n          propertySelection: values(RX_CONNECTION_MAPPING.dataSource.fields).join()\n        }),\n        applicationMappingList: this.getRecordInstanceDataPage({\n          recorddefinition: RX_CONNECTION_MAPPING.aliasMapping.recordDefinitionName,\n          propertySelection: values(RX_CONNECTION_MAPPING.aliasMapping.fields).join(),\n          queryExpression:\n            `(('${RX_CONNECTION_MAPPING.aliasMapping.fields.applicationId}'=\"${applicationId}\" AND ` +\n            `'${RX_CONNECTION_MAPPING.aliasMapping.fields.aliasType}'=\"${RX_CONNECTION_MAPPING.aliasTypes.dataSource}\"))`\n        })\n      }).subscribe((result) => {\n        this.configurationList = result.configurationList.data;\n        this.applicationMappingList = result.applicationMappingList.data;\n      });\n    }\n  }\n}\n","<rx-admin-settings header=\"Data source mapping\" [busy]=\"busy\">\n  <div class=\"row\">\n    <adapt-rx-select\n      class=\"col-md-6 form-group\"\n      rx-id=\"data-source-application\"\n      label=\"Application\"\n      [ngModel]=\"selectedApplication\"\n      [options]=\"applicationSelectOptions\"\n      [optionFormatter]=\"optionFormatter\"\n      (ngModelChange)=\"onApplicationChange($event)\"\n    ></adapt-rx-select>\n  </div>\n\n  <rx-connection-mapping\n    *ngFor=\"let applicationMapping of applicationMappingList\"\n    [configurations]=\"configurationList\"\n    [aliasMapping]=\"applicationMapping\"\n    aliasType=\"dataSource\"\n  >\n  </rx-connection-mapping>\n</rx-admin-settings>\n","import { CommonModule } from '@angular/common';\nimport { ComponentFactoryResolver, NgModule } from '@angular/core';\nimport { FormsModule } from '@angular/forms';\nimport { AdaptRxSelectModule, AdaptRxTextfieldModule } from '@bmc-ux/adapt-angular';\nimport { RX_APPLICATION } from '@helix/platform/shared/api';\nimport { RxViewComponentRegistryService } from '@helix/platform/view/api';\nimport { AdminSettingsModule } from '@helix/platform/shared/components';\nimport { RxConnectionMappingModule } from '../common/connection-mapping.module';\nimport { DataSourceMappingAdminComponent } from './data-source-mapping.component';\n\n@NgModule({\n  declarations: [DataSourceMappingAdminComponent],\n  imports: [\n    CommonModule,\n    AdminSettingsModule,\n    AdaptRxSelectModule,\n    FormsModule,\n    AdaptRxTextfieldModule,\n    RxConnectionMappingModule\n  ],\n  entryComponents: [DataSourceMappingAdminComponent]\n})\nexport class DataSourceMappingModule {\n  constructor(\n    private componentFactoryResolver: ComponentFactoryResolver,\n    private rxViewComponentRegistryService: RxViewComponentRegistryService\n  ) {\n    rxViewComponentRegistryService.register({\n      type: 'rx-admin-data-source-mapping',\n      componentFactory: this.componentFactoryResolver.resolveComponentFactory(DataSourceMappingAdminComponent),\n      name: 'Data source mapping',\n      isPageComponent: true,\n      availableInBundles: [RX_APPLICATION.settingsBundleId]\n    });\n  }\n}\n","import { Component, OnInit } from '@angular/core';\nimport { RxSelectOption } from '@bmc-ux/adapt-angular';\nimport { RxRecordInstanceDataPageService } from '@helix/platform/record/api';\nimport { IDataPageParams, IDataPageResult, IPlainObject, RxGlobalCacheService } from '@helix/platform/shared/api';\nimport { find, get, uniqBy, values } from 'lodash';\nimport { forkJoin, Observable, Subscription } from 'rxjs';\nimport { RX_CONNECTION_MAPPING } from '../common/connection-mapping.constant';\n\n@Component({\n  selector: 'rx-web-api-mapping',\n  templateUrl: './web-api-mapping.component.html'\n})\nexport class WebApiMappingAdminComponent implements OnInit {\n  mappingSelectOptions: RxSelectOption[] = [];\n  selectedMapping: RxSelectOption;\n  mappingList: IPlainObject[];\n  configurationList: IPlainObject[];\n  busy: Subscription;\n\n  constructor(\n    private rxGlobalCacheService: RxGlobalCacheService,\n    private rxRecordInstanceDataPageService: RxRecordInstanceDataPageService\n  ) {}\n\n  ngOnInit() {\n    this.busy = forkJoin([\n      this.getRecordInstanceDataPage({\n        recorddefinition: RX_CONNECTION_MAPPING.aliasMapping.recordDefinitionName,\n        queryExpression: `'${RX_CONNECTION_MAPPING.aliasMapping.fields.aliasType}'!=\"email\"`,\n        propertySelection: values(RX_CONNECTION_MAPPING.aliasMapping.fields).join()\n      }),\n      this.rxGlobalCacheService.getBundleDescriptors()\n    ]).subscribe(([dataPage, bundleDescriptors]) => {\n      this.mappingSelectOptions = uniqBy(dataPage.data, RX_CONNECTION_MAPPING.aliasMapping.fields.applicationId)\n        .map((mapping: { [fieldId: number]: string }) => ({\n          ...mapping,\n          friendlyName: find(bundleDescriptors, {\n            id: mapping[RX_CONNECTION_MAPPING.aliasMapping.fields.applicationId]\n          }).friendlyName\n        }))\n        .sort((a, b) => a.friendlyName.localeCompare(b.friendlyName));\n    });\n  }\n\n  optionFormatter(application: RxSelectOption): string {\n    return application.friendlyName;\n  }\n\n  private getRecordInstanceDataPage(params: IDataPageParams): Observable<IDataPageResult> {\n    return this.rxRecordInstanceDataPageService.post({ params });\n  }\n\n  onApplicationChange(selectedApplication: RxSelectOption): void {\n    const applicationId = get(selectedApplication, `0.${RX_CONNECTION_MAPPING.aliasMapping.fields.applicationId}`);\n\n    if (applicationId) {\n      forkJoin({\n        configurationList: this.getRecordInstanceDataPage({\n          recorddefinition: RX_CONNECTION_MAPPING.webRequest.recordDefinitionName,\n          propertySelection: values(RX_CONNECTION_MAPPING.webRequest.fields).join()\n        }),\n        applicationMappingList: this.getRecordInstanceDataPage({\n          recorddefinition: RX_CONNECTION_MAPPING.aliasMapping.recordDefinitionName,\n          propertySelection: values(RX_CONNECTION_MAPPING.aliasMapping.fields).join(),\n          queryExpression:\n            `(('${RX_CONNECTION_MAPPING.aliasMapping.fields.applicationId}'=\"${applicationId}\" AND ` +\n            `'${RX_CONNECTION_MAPPING.aliasMapping.fields.aliasType}'=\"${RX_CONNECTION_MAPPING.aliasTypes.webRequest}\"))`\n        })\n      }).subscribe((result) => {\n        this.configurationList = result.configurationList.data;\n        this.mappingList = result.applicationMappingList.data;\n      });\n    }\n  }\n}\n","<rx-admin-settings\n  header=\"{{ 'com.bmc.arsys.rx.client.admin.web-api-mapping.header.title' | translate }}\"\n  [busy]=\"busy\"\n>\n  <div class=\"row\">\n    <adapt-rx-select\n      class=\"col-md-6 form-group\"\n      rx-id=\"application\"\n      label=\"{{ 'com.bmc.arsys.rx.client.common.application.label' | translate }}\"\n      [ngModel]=\"selectedMapping\"\n      [options]=\"mappingSelectOptions\"\n      [optionFormatter]=\"optionFormatter\"\n      (ngModelChange)=\"onApplicationChange($event)\"\n    ></adapt-rx-select>\n  </div>\n\n  <rx-connection-mapping\n    *ngFor=\"let mapping of mappingList\"\n    [configurations]=\"configurationList\"\n    [aliasMapping]=\"mapping\"\n    aliasType=\"webRequest\"\n  >\n  </rx-connection-mapping>\n</rx-admin-settings>\n","import { CommonModule } from '@angular/common';\nimport { ComponentFactoryResolver, NgModule } from '@angular/core';\nimport { FormsModule } from '@angular/forms';\nimport { AdaptRxSelectModule, AdaptRxTextfieldModule } from '@bmc-ux/adapt-angular';\nimport { RX_APPLICATION } from '@helix/platform/shared/api';\nimport { RxViewComponentRegistryService } from '@helix/platform/view/api';\nimport { AdminSettingsModule } from '@helix/platform/shared/components';\nimport { RxConnectionMappingModule } from '../common/connection-mapping.module';\nimport { WebApiMappingAdminComponent } from './web-api-mapping.component';\nimport { TranslateModule } from '@ngx-translate/core';\n\n@NgModule({\n  declarations: [WebApiMappingAdminComponent],\n  imports: [\n    AdminSettingsModule,\n    AdaptRxTextfieldModule,\n    AdaptRxSelectModule,\n    CommonModule,\n    FormsModule,\n    RxConnectionMappingModule,\n    TranslateModule\n  ],\n  entryComponents: [WebApiMappingAdminComponent]\n})\nexport class WebApiMappingRegistrationModule {\n  constructor(\n    private componentFactoryResolver: ComponentFactoryResolver,\n    private rxViewComponentRegistryService: RxViewComponentRegistryService\n  ) {\n    rxViewComponentRegistryService.register({\n      type: 'rx-admin-web-api-mapping',\n      componentFactory: this.componentFactoryResolver.resolveComponentFactory(WebApiMappingAdminComponent),\n      name: 'Web API mapping',\n      isPageComponent: true,\n      availableInBundles: [RX_APPLICATION.settingsBundleId]\n    });\n  }\n}\n","export const RX_CONNECTOR_CONFIGURATION = {\n  dataPageType: 'com.bmc.arsys.rx.application.record.datapage.RecordInstanceDataPageQuery',\n  recordDefinitionName: 'Connector Configurations',\n  connectorType: 'connector',\n\n  fields: {\n    targetName: 56110,\n    connectorId: 56111,\n    connectorName: 56112,\n    connectorConfigId: 56113,\n    connectorConfigName: 56114,\n    connectorProfileId: 56115,\n    connectorProfileName: 56116\n  }\n};\n","import { Injectable, Injector } from '@angular/core';\nimport { DataPage } from '@helix/platform/shared/api';\n\nconst connectorConfigurationDataPageQuery = 'com.bmc.arsys.rx.application.integration.ConnectorConfigDataPageQuery';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class RxConnectorConfigurationDataPageService extends DataPage {\n  constructor(private injector: Injector) {\n    super(injector, connectorConfigurationDataPageQuery);\n  }\n}\n","import { Injectable, Injector } from '@angular/core';\nimport { DataPage } from '@helix/platform/shared/api';\n\nconst connectorsDataPageQuery = 'com.bmc.arsys.rx.application.integration.ConnectorDataPageQuery';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class RxConnectorsDataPageService extends DataPage {\n  constructor(private injector: Injector) {\n    super(injector, connectorsDataPageQuery);\n  }\n}\n","import { HttpClient } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\nimport { IDataPageResult } from '@helix/platform/shared/api';\nimport { find } from 'lodash';\nimport { Observable } from 'rxjs';\nimport { map, shareReplay } from 'rxjs/operators';\nimport { RxConnectorConfigurationDataPageService } from './connector-configuration-data-page.service';\nimport { IConnector, IConnectorConfiguration, IConnectorProfile } from './connector-configuration.interface';\nimport { RxConnectorsDataPageService } from './connectors-data-page.service';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class RxConnectorConfigurationService {\n  private readonly connectorConfigs: {\n    [connectorId: string]: Observable<IConnectorConfiguration[]>;\n  };\n\n  private readonly connectorProfiles: {\n    [configId: string]: Observable<IConnectorProfile[]>;\n  };\n\n  constructor(\n    private httpClient: HttpClient,\n    private rxConnectorsDataPageService: RxConnectorsDataPageService,\n    private rxConnectorConfigurationDataPageService: RxConnectorConfigurationDataPageService\n  ) {\n    this.connectorConfigs = {};\n    this.connectorProfiles = {};\n  }\n\n  getConnectors(): Observable<IConnector[]> {\n    return this.rxConnectorsDataPageService.get().pipe(\n      map((response: IDataPageResult) => {\n        return response.data.map((connector: IConnector) => ({\n          id: connector.id,\n          name: connector.name\n        }));\n      })\n    );\n  }\n\n  getConnectorConfigurations(connectorId): Observable<IConnectorConfiguration[]> {\n    if (!this.connectorConfigs[connectorId]) {\n      this.connectorConfigs[connectorId] = this.rxConnectorConfigurationDataPageService\n        .get({\n          params: {\n            connectorId: connectorId\n          }\n        })\n        .pipe(\n          map((response: IDataPageResult) => {\n            return response.data.map((connectorConfig: IConnectorConfiguration) => ({\n              id: connectorConfig.id,\n              name: connectorConfig.name,\n              profiles: connectorConfig.profiles\n            }));\n          }),\n          shareReplay(1)\n        );\n    }\n\n    return this.connectorConfigs[connectorId];\n  }\n\n  getConnectorProfiles(connectorId, configId): Observable<IConnectorProfile[]> {\n    if (!this.connectorProfiles[configId]) {\n      this.connectorProfiles[configId] = this.getConnectorConfigurations(connectorId).pipe(\n        map((configs: IConnectorConfiguration[]) => {\n          const config = find(configs, { id: configId });\n\n          return config.profiles;\n        })\n      );\n    }\n\n    return this.connectorProfiles[configId];\n  }\n}\n","import { Component, Injector, OnInit } from '@angular/core';\nimport { FormBuilder, FormGroup } from '@angular/forms';\nimport { DismissReasons, DockedPanelContext, RxSelectionChangeEvent } from '@bmc-ux/adapt-angular';\nimport { RecordInstance, RX_RECORD_DEFINITION, RxRecordInstanceService } from '@helix/platform/record/api';\nimport { RxNotificationService } from '@helix/platform/shared/api';\nimport { RxModalClass } from '@helix/platform/ui-kit';\nimport { isUndefined } from 'lodash';\nimport { Observable } from 'rxjs';\nimport { map, switchMap } from 'rxjs/operators';\nimport { RX_CONNECTOR_CONFIGURATION } from '../connector-configuration.constant';\nimport { IConnector, IConnectorConfiguration, IConnectorProfile } from '../connector-configuration.interface';\nimport { RxConnectorConfigurationService } from '../connector-configuration.service';\n\n@Component({\n  selector: 'rx-connector-configuration-editor',\n  templateUrl: './connector-configuration-editor.component.html'\n})\nexport class ConnectorConfigurationEditorComponent extends RxModalClass implements OnInit {\n  connectorConfigurationForm: FormGroup;\n  loadingConfigs: boolean;\n  loadingProfiles: boolean;\n  loadingConnectors: boolean;\n\n  connectorProfiles: IConnectorProfile[] = [];\n  connectorList: IConnector[] = [];\n  connectorConfigurations: IConnectorConfiguration[] = [];\n\n  currentRecordInstance: Observable<RecordInstance>;\n  isNewConfiguration: boolean;\n\n  constructor(\n    private dockedPanelContext: DockedPanelContext,\n    private formBuilder: FormBuilder,\n    private rxRecordInstanceService: RxRecordInstanceService,\n    private rxNotificationService: RxNotificationService,\n    private rxConnectorConfigurationService: RxConnectorConfigurationService,\n    protected injector: Injector\n  ) {\n    super(dockedPanelContext, injector);\n  }\n\n  ngOnInit() {\n    super.ngOnInit();\n\n    this.isNewConfiguration = this.dockedPanelContext.getData().isNewConfiguration;\n    this.connectorList = this.dockedPanelContext.getData().connectorList;\n\n    this.connectorConfigurationForm = this.formBuilder.group({\n      configurationName: '',\n      connector: [\n        {\n          id: '',\n          name: ''\n        }\n      ],\n      connectorConfiguration: [\n        {\n          id: '',\n          name: ''\n        }\n      ],\n      connectorProfile: [\n        {\n          id: '',\n          name: ''\n        }\n      ]\n    });\n\n    if (!this.isNewConfiguration) {\n      this.currentRecordInstance = this.rxRecordInstanceService.get(\n        RX_CONNECTOR_CONFIGURATION.recordDefinitionName,\n        this.dockedPanelContext.getData().recordId\n      );\n\n      this.currentRecordInstance.subscribe((recordInstance) => {\n        this.connectorConfigurationForm\n          .get('configurationName')\n          .setValue(recordInstance.fieldInstances[RX_CONNECTOR_CONFIGURATION.fields.targetName].value);\n\n        this.connectorConfigurationForm.get('connector').setValue([\n          {\n            id: recordInstance.fieldInstances[RX_CONNECTOR_CONFIGURATION.fields.connectorId].value,\n            name: recordInstance.fieldInstances[RX_CONNECTOR_CONFIGURATION.fields.connectorName].value\n          }\n        ]);\n\n        this.connectorConfigurationForm.get('connectorConfiguration').setValue([\n          {\n            id: recordInstance.fieldInstances[RX_CONNECTOR_CONFIGURATION.fields.connectorConfigId].value,\n            name: recordInstance.fieldInstances[RX_CONNECTOR_CONFIGURATION.fields.connectorConfigName].value\n          }\n        ]);\n\n        this.connectorConfigurationForm.get('connectorProfile').setValue(\n          recordInstance.fieldInstances[RX_CONNECTOR_CONFIGURATION.fields.connectorProfileId].value\n            ? [\n                {\n                  id: recordInstance.fieldInstances[RX_CONNECTOR_CONFIGURATION.fields.connectorProfileId].value,\n                  name: recordInstance.fieldInstances[RX_CONNECTOR_CONFIGURATION.fields.connectorProfileName].value\n                }\n              ]\n            : []\n        );\n\n        this.loadConnectorConfigurations(\n          recordInstance.fieldInstances[RX_CONNECTOR_CONFIGURATION.fields.connectorId].value\n        );\n\n        this.loadConnectorProfiles(\n          recordInstance.fieldInstances[RX_CONNECTOR_CONFIGURATION.fields.connectorConfigId].value\n        );\n      });\n    }\n  }\n\n  isDirty(): boolean {\n    return this.connectorConfigurationForm.dirty;\n  }\n\n  loadConnectorConfigurations(event: RxSelectionChangeEvent): void {\n    if (this.isSelectionChangeEvent(event)) {\n      this.resetFields();\n    }\n\n    this.loadingConfigs = true;\n    const selectedConnectorId = this.isSelectionChangeEvent(event) ? event.options[0].id : event;\n\n    this.rxConnectorConfigurationService\n      .getConnectorConfigurations(selectedConnectorId)\n      .subscribe((configurations: IConnectorConfiguration[]) => {\n        this.connectorConfigurations = configurations;\n        this.loadingConfigs = false;\n      });\n  }\n\n  loadConnectorProfiles(event: RxSelectionChangeEvent): void {\n    if (this.isSelectionChangeEvent(event)) {\n      this.connectorConfigurationForm.get('connectorProfile').setValue([]);\n    }\n\n    this.loadingProfiles = true;\n\n    const selectedConfigId = this.isSelectionChangeEvent(event) ? event.options[0].id : event;\n    const selectedConnectorId = this.connectorConfigurationForm.get('connector').value[0].id;\n\n    this.rxConnectorConfigurationService\n      .getConnectorProfiles(selectedConnectorId, selectedConfigId)\n      .subscribe((profiles: IConnectorProfile[]) => {\n        this.connectorProfiles = profiles;\n        this.loadingProfiles = false;\n      });\n  }\n\n  saveConnectorConfiguration(): void {\n    if (this.isNewConfiguration) {\n      this.currentRecordInstance = this.rxRecordInstanceService.getNew(RX_CONNECTOR_CONFIGURATION.recordDefinitionName);\n    }\n\n    this.currentRecordInstance\n      .pipe(\n        map((recordInstance) => {\n          recordInstance.fieldInstances[RX_CONNECTOR_CONFIGURATION.fields.connectorId].value =\n            this.connectorConfigurationForm.value.connector[0].id;\n\n          recordInstance.fieldInstances[RX_CONNECTOR_CONFIGURATION.fields.connectorName].value =\n            this.connectorConfigurationForm.value.connector[0].name;\n\n          recordInstance.fieldInstances[RX_CONNECTOR_CONFIGURATION.fields.connectorConfigId].value =\n            this.connectorConfigurationForm.value.connectorConfiguration[0].id;\n\n          recordInstance.fieldInstances[RX_CONNECTOR_CONFIGURATION.fields.connectorConfigName].value =\n            this.connectorConfigurationForm.value.connectorConfiguration[0].name;\n\n          if (this.connectorConfigurationForm.value.connectorProfile.length) {\n            recordInstance.fieldInstances[RX_CONNECTOR_CONFIGURATION.fields.connectorProfileId].value =\n              this.connectorConfigurationForm.value.connectorProfile[0].id;\n\n            recordInstance.fieldInstances[RX_CONNECTOR_CONFIGURATION.fields.connectorProfileName].value =\n              this.connectorConfigurationForm.value.connectorProfile[0].name;\n          } else {\n            recordInstance.fieldInstances[RX_CONNECTOR_CONFIGURATION.fields.connectorProfileId].value = null;\n            recordInstance.fieldInstances[RX_CONNECTOR_CONFIGURATION.fields.connectorProfileName].value = null;\n          }\n\n          recordInstance.fieldInstances[RX_RECORD_DEFINITION.coreFieldIds.description].value =\n            this.connectorConfigurationForm.value.configurationName;\n\n          recordInstance.fieldInstances[RX_CONNECTOR_CONFIGURATION.fields.targetName].value =\n            this.connectorConfigurationForm.value.configurationName;\n\n          return recordInstance;\n        }),\n        switchMap((recordInstance) => {\n          if (this.isNewConfiguration) {\n            return this.rxRecordInstanceService.create(recordInstance);\n          } else {\n            return this.rxRecordInstanceService.save(recordInstance);\n          }\n        })\n      )\n      .subscribe(() => {\n        this.rxNotificationService.addSuccessMessage('Configuration saved successfully.');\n        this.dockedPanelContext.close(null);\n      });\n  }\n\n  optionFormatter(option: IConnector): string {\n    return option.name;\n  }\n\n  cancel(): void {\n    this.dockedPanelContext.dismiss(DismissReasons.CLOSE_BTN);\n  }\n\n  private isSelectionChangeEvent(event: RxSelectionChangeEvent | string): event is RxSelectionChangeEvent {\n    return !isUndefined((event as RxSelectionChangeEvent).options);\n  }\n\n  private resetFields(): void {\n    this.connectorProfiles = [];\n    this.connectorConfigurations = [];\n    this.connectorConfigurationForm.get('connectorConfiguration').setValue([]);\n    this.connectorConfigurationForm.get('connectorProfile').setValue([]);\n    this.connectorConfigurationForm.markAsPristine();\n  }\n}\n","<div class=\"dp-body\">\n  <form [formGroup]=\"connectorConfigurationForm\">\n    <adapt-rx-textfield\n      class=\"form-group d-block\"\n      rx-id=\"configuration-name\"\n      label=\"{{ 'com.bmc.arsys.rx.client.common.name.label' | translate }}\"\n      formControlName=\"configurationName\"\n      required=\"true\"\n      [readonly]=\"!isNewConfiguration\"\n    >\n    </adapt-rx-textfield>\n\n    <adapt-rx-select\n      class=\"form-group d-block\"\n      label=\"{{ 'com.bmc.arsys.rx.client.admin.connector-configuration.connector-type.label' | translate }}\"\n      rx-id=\"connector\"\n      formControlName=\"connector\"\n      [options]=\"connectorList\"\n      enableFilter=\"true\"\n      [optionFormatter]=\"optionFormatter\"\n      (onSelectionChange)=\"loadConnectorConfigurations($event)\"\n      [loadingState]=\"loadingConnectors\"\n      required=\"true\"\n    >\n    </adapt-rx-select>\n\n    <adapt-rx-select\n      class=\"form-group d-block\"\n      label=\"{{ 'com.bmc.arsys.rx.client.admin.connector-configuration.configuration.label' | translate }}\"\n      rx-id=\"connector-configuration\"\n      formControlName=\"connectorConfiguration\"\n      [options]=\"connectorConfigurations\"\n      [optionFormatter]=\"optionFormatter\"\n      enableFilter=\"true\"\n      (onSelectionChange)=\"loadConnectorProfiles($event)\"\n      [loadingState]=\"loadingConfigs\"\n      required=\"true\"\n    >\n    </adapt-rx-select>\n\n    <adapt-rx-select\n      class=\"form-group d-block\"\n      label=\"{{ 'com.bmc.arsys.rx.client.admin.connector-configuration.profile.label' | translate }}\"\n      rx-id=\"connector-profile\"\n      formControlName=\"connectorProfile\"\n      [options]=\"connectorProfiles\"\n      [optionFormatter]=\"optionFormatter\"\n      [loadingState]=\"loadingProfiles\"\n    >\n    </adapt-rx-select>\n  </form>\n</div>\n\n<div class=\"dp-footer\">\n  <button\n    type=\"button\"\n    adapt-button\n    size=\"small\"\n    btn-type=\"primary\"\n    rx-id=\"save-button\"\n    class=\"mr-2\"\n    [disabled]=\"connectorConfigurationForm.pristine || connectorConfigurationForm.invalid\"\n    (click)=\"saveConnectorConfiguration()\"\n  >\n    {{ 'com.bmc.arsys.rx.client.common.save.label' | translate }}\n  </button>\n\n  <button type=\"button\" size=\"small\" adapt-button (click)=\"cancel()\" btn-type=\"secondary\" rx-id=\"cancel-button\">\n    {{ 'com.bmc.arsys.rx.client.common.cancel.label' | translate }}\n  </button>\n</div>\n","import { HttpErrorResponse } from '@angular/common/http';\nimport { Component, OnInit, TemplateRef, ViewChild } from '@angular/core';\nimport { FormBuilder } from '@angular/forms';\nimport { IRecordDefinition, RX_RECORD_DEFINITION } from '@helix/platform/record/api';\nimport { RxModalService } from '@helix/platform/ui-kit';\nimport { IRowDataItem } from '@helix/platform/view/api';\nimport {\n  IRecordGridColumn,\n  IRecordGridConfig,\n  RecordGridComponent,\n  RowSelectionMode\n} from '@helix/platform/view/components';\nimport { get, noop } from 'lodash';\nimport { Observable, of, Subscription } from 'rxjs';\nimport { ConnectorConfigurationEditorComponent } from './connector-configuration-editor/connector-configuration-editor.component';\nimport { RX_CONNECTOR_CONFIGURATION } from './connector-configuration.constant';\nimport { IConnector } from './connector-configuration.interface';\nimport { RxConnectorConfigurationService } from './connector-configuration.service';\n\n@Component({\n  selector: 'rx-admin-connector-configuration',\n  templateUrl: './connector-configuration.component.html'\n})\nexport class ConnectorConfigurationAdminComponent implements OnInit {\n  errorText: string;\n  gridConfig: Observable<IRecordGridConfig>;\n  connectorList: IConnector[] = [];\n  busySubscription: Subscription;\n\n  @ViewChild('grid')\n  grid: RecordGridComponent;\n\n  @ViewChild('connectorConfigurationTemplate', { static: true })\n  connectorConfigurationTemplate: TemplateRef<any>;\n\n  constructor(\n    private formBuilder: FormBuilder,\n    private rxModalService: RxModalService,\n    private rxConnectorConfigurationService: RxConnectorConfigurationService\n  ) {}\n\n  ngOnInit() {\n    this.busySubscription = this.rxConnectorConfigurationService.getConnectors().subscribe(\n      (connectors: IConnector[]) => {\n        this.connectorList = connectors;\n      },\n      (response: HttpErrorResponse) => {\n        this.errorText = get(response, 'error[0].appendedText', 'Unknown error.');\n      }\n    );\n\n    this.gridConfig = of({\n      actionButtons: [\n        {\n          label: 'Edit',\n          style: 'tertiary',\n          icon: 'pencil',\n          actions: [\n            {\n              name: () => {\n                this.openConnectionConfiguration(this.grid.api.getFirstSelectedRow());\n              }\n            }\n          ]\n        }\n      ],\n      recordDefinitionName: RX_CONNECTOR_CONFIGURATION.recordDefinitionName,\n      enableRowSelection: RowSelectionMode.Single,\n      getRecordDefinition: () => of(this.getRecordDefinition()),\n      columns: this.getColumns(),\n      styles: 'flex-fill'\n    });\n  }\n\n  newConnectionConfiguration(): void {\n    this.openConnectorConfigurationEditor(true);\n  }\n\n  private openConnectionConfiguration(selectedRecord): void {\n    this.openConnectorConfigurationEditor(false, selectedRecord[RX_RECORD_DEFINITION.coreFieldIds.id]);\n  }\n\n  private getRecordDefinition(): IRecordDefinition {\n    return {\n      fieldDefinitions: [\n        {\n          id: RX_RECORD_DEFINITION.coreFieldIds.id,\n          resourceType: RX_RECORD_DEFINITION.resourceTypes.character\n        },\n        {\n          id: RX_CONNECTOR_CONFIGURATION.fields.targetName,\n          resourceType: RX_RECORD_DEFINITION.resourceTypes.character\n        },\n        {\n          id: RX_CONNECTOR_CONFIGURATION.fields.connectorName,\n          resourceType: RX_RECORD_DEFINITION.resourceTypes.character\n        },\n        {\n          id: RX_CONNECTOR_CONFIGURATION.fields.connectorConfigName,\n          resourceType: RX_RECORD_DEFINITION.resourceTypes.character\n        },\n        {\n          id: RX_CONNECTOR_CONFIGURATION.fields.connectorProfileName,\n          resourceType: RX_RECORD_DEFINITION.resourceTypes.character\n        }\n      ]\n    };\n  }\n\n  private getColumns(): IRecordGridColumn[] {\n    return [\n      {\n        index: 0,\n        title: 'Name',\n        fieldId: String(RX_CONNECTOR_CONFIGURATION.fields.targetName),\n        clickable: true,\n        actions: [\n          {\n            name: (previousAction: any, selectedRow: IRowDataItem) => this.openConnectionConfiguration(selectedRow)\n          }\n        ]\n      },\n      {\n        index: 1,\n        title: 'Connector type',\n        fieldId: String(RX_CONNECTOR_CONFIGURATION.fields.connectorName)\n      },\n      {\n        index: 2,\n        title: 'Configuration',\n        fieldId: String(RX_CONNECTOR_CONFIGURATION.fields.connectorConfigName)\n      },\n      {\n        index: 3,\n        title: 'Profile',\n        fieldId: String(RX_CONNECTOR_CONFIGURATION.fields.connectorProfileName)\n      },\n      {\n        index: 4,\n        title: 'ID',\n        fieldId: String(RX_RECORD_DEFINITION.coreFieldIds.id),\n        visible: false\n      }\n    ];\n  }\n\n  private openConnectorConfigurationEditor(isNewConfiguration: boolean, recordId?: string): Promise<any> {\n    return this.rxModalService\n      .openDockedPanel({\n        title: 'Connector configuration',\n        content: ConnectorConfigurationEditorComponent,\n        data: {\n          connectorList: this.connectorList,\n          isNewConfiguration,\n          recordId\n        }\n      })\n      .then(() => {\n        this.grid.api.refresh().subscribe();\n      })\n      .catch(noop);\n  }\n}\n","<rx-admin-settings\n  header=\"{{ 'com.bmc.arsys.rx.client.admin.connector-configuration.header.title' | translate }}\"\n  [busy]=\"busySubscription\"\n>\n  <adapt-alert\n    [config]=\"{\n      title:\n        'com.bmc.arsys.rx.client.admin.connection-configuration.invalid-integration-service-configuration.message'\n        | translate,\n      content: errorText,\n      variant: 'danger',\n      dismissible: false\n    }\"\n    *ngIf=\"errorText\"\n  >\n  </adapt-alert>\n\n  <ng-container *ngIf=\"!errorText\">\n    <button\n      adapt-button\n      type=\"button\"\n      btn-type=\"tertiary\"\n      class=\"d-icon-plus_circle align-self-start\"\n      rx-id=\"new-button\"\n      (click)=\"newConnectionConfiguration()\"\n    >\n      {{ 'com.bmc.arsys.rx.client.common.new.label' | translate }}\n    </button>\n\n    <rx-record-grid #grid [config]=\"gridConfig\"></rx-record-grid>\n  </ng-container>\n</rx-admin-settings>\n","import { CommonModule } from '@angular/common';\nimport { ComponentFactoryResolver, NgModule } from '@angular/core';\nimport { ReactiveFormsModule } from '@angular/forms';\nimport {\n  AdaptAlertModule,\n  AdaptButtonModule,\n  AdaptRxSelectModule,\n  AdaptRxTextfieldModule\n} from '@bmc-ux/adapt-angular';\nimport { RX_APPLICATION } from '@helix/platform/shared/api';\nimport { RxViewComponentRegistryService } from '@helix/platform/view/api';\nimport { RecordGridModule } from '@helix/platform/view/components';\nimport { AdminSettingsModule } from '@helix/platform/shared/components';\nimport { ConnectorConfigurationEditorComponent } from './connector-configuration-editor/connector-configuration-editor.component';\nimport { ConnectorConfigurationAdminComponent } from './connector-configuration.component';\nimport { TranslateModule } from '@ngx-translate/core';\n\n@NgModule({\n  declarations: [ConnectorConfigurationAdminComponent, ConnectorConfigurationEditorComponent],\n  imports: [\n    CommonModule,\n    AdaptButtonModule,\n    AdminSettingsModule,\n    RecordGridModule,\n    AdaptRxTextfieldModule,\n    ReactiveFormsModule,\n    AdaptRxSelectModule,\n    AdaptAlertModule,\n    TranslateModule\n  ],\n  entryComponents: [ConnectorConfigurationAdminComponent]\n})\nexport class ConnectorConfigurationRegistrationModule {\n  constructor(\n    private componentFactoryResolver: ComponentFactoryResolver,\n    private rxViewComponentRegistryService: RxViewComponentRegistryService\n  ) {\n    rxViewComponentRegistryService.register({\n      type: 'rx-admin-connector-configuration',\n      componentFactory: this.componentFactoryResolver.resolveComponentFactory(ConnectorConfigurationAdminComponent),\n      name: 'Connector configuration',\n      isPageComponent: true,\n      availableInBundles: [RX_APPLICATION.settingsBundleId]\n    });\n  }\n}\n","import { Component, ElementRef, Input, Renderer2, ViewChild } from '@angular/core';\nimport { NG_VALUE_ACCESSOR } from '@angular/forms';\nimport { AdaptDropdownDirective } from '@bmc-ux/adapt-angular';\nimport { ValueAccessor } from '@helix/platform/shared/components';\nimport { TranslateService } from '@ngx-translate/core';\nimport { ICustomDataSourceProviderPickerComponentOptions } from './custom-data-source-provider-picker-component.types';\n\n@Component({\n  selector: 'rx-custom-data-source-provider-picker',\n  templateUrl: './custom-data-source-provider-picker.component.html',\n  styleUrls: ['./custom-data-source-provider-picker.component.scss'],\n  providers: [\n    {\n      provide: NG_VALUE_ACCESSOR,\n      useExisting: RxCustomDataSourceProviderPickerComponent,\n      multi: true\n    }\n  ]\n})\nexport class RxCustomDataSourceProviderPickerComponent extends ValueAccessor<string> {\n  @Input()\n  options: ICustomDataSourceProviderPickerComponentOptions;\n\n  @ViewChild('dropdownButton', { static: true })\n  dropdownButton: ElementRef;\n\n  @ViewChild('providerPicker', { static: true })\n  dropdown: AdaptDropdownDirective;\n\n  defaultText = this.translateService.instant('com.bmc.arsys.rx.client.common.select.label');\n  dropdownWidth: number;\n\n  constructor(private translateService: TranslateService, private renderer: Renderer2) {\n    super();\n  }\n\n  setDropdownWidth(): void {\n    const dropdownButton = this.renderer.selectRootElement(this.dropdownButton.nativeElement, true);\n\n    this.dropdownWidth = dropdownButton.clientWidth + 2;\n  }\n\n  selectProvider(providerName: string): void {\n    this.dropdown.close();\n    this.value = providerName;\n  }\n}\n","<div class=\"d-flex\">\n  <adapt-rx-control-label\n    *ngIf=\"options.label\"\n    [label]=\"options.label | translate\"\n    [showRequiredLabel]=\"options.required\"\n  ></adapt-rx-control-label>\n</div>\n\n<div class=\"dropdown\" adaptDropdown [autoClose]=\"'outside'\" [autoFocusFirst]=\"false\" #providerPicker=\"adaptDropdown\">\n  <button\n    rx-id=\"toggle-button\"\n    #dropdownButton\n    class=\"btn btn-secondary\"\n    (click)=\"setDropdownWidth()\"\n    adaptDropdownToggle\n    type=\"button\"\n  >\n    <span class=\"rx-selected-item rx-ellipsis\">\n      {{ (value | rxDefinitionNamePipe) || defaultText }}\n    </span>\n  </button>\n\n  <div class=\"dropdown-menu p-0\" [style.width.px]=\"dropdownWidth\" adaptDropdownMenu>\n    <ul class=\"providers\" *ngIf=\"options.providersTree.length\">\n      <li\n        class=\"provider rx-ellipsis\"\n        *ngFor=\"let providersTreeNode of options.providersTree\"\n        (click)=\"providersTreeNode.isExpanded = !providersTreeNode.isExpanded\"\n      >\n        <span\n          rx-id=\"expand-button\"\n          class=\"expand-arrow d-icon-angle_right\"\n          [class.open]=\"providersTreeNode.isExpanded\"\n        ></span>\n        <span> {{ providersTreeNode.label }} </span>\n\n        <div *ngIf=\"providersTreeNode.isExpanded\">\n          <button\n            class=\"dropdown-item rx-ellipsis\"\n            type=\"button\"\n            *ngFor=\"let provider of providersTreeNode.providers\"\n            (click)=\"$event.stopPropagation(); selectProvider(provider)\"\n            [class.active]=\"value === provider\"\n          >\n            <span>{{ provider | rxDefinitionNamePipe }}</span>\n          </button>\n        </div>\n      </li>\n    </ul>\n  </div>\n</div>\n","import { head } from 'lodash';\n\nconst resourceTypes = {\n  arSystem: {\n    value: 'com.bmc.arsys.rx.services.datasource.domain.ARSystemDataSource',\n    name: 'com.bmc.arsys.rx.client.admin.data-source-connections.ar-system.label'\n  },\n  custom: {\n    value: 'com.bmc.arsys.rx.services.datasource.domain.CustomDataSource',\n    name: 'com.bmc.arsys.rx.client.admin.data-source-connections.custom.label'\n  },\n  webApi: {\n    value: 'com.bmc.arsys.rx.services.datasource.domain.WebApiDataSource',\n    name: 'com.bmc.arsys.rx.client.admin.data-source-connections.web-api.label'\n  }\n};\n\nconst authTypes = [\n  {\n    name: 'com.bmc.arsys.rx.client.admin.data-source-connections.rsso.label',\n    value: 'rsso'\n  },\n  {\n    name: 'com.bmc.arsys.rx.client.admin.data-source-connections.ras.label',\n    value: 'ras'\n  }\n];\n\nexport const RX_DATA_SOURCE_CONNECTIONS = {\n  recordDefinitionName: 'Data Source',\n  dataPageQueryType: 'com.bmc.arsys.rx.application.datasource.datapage.DataSourceDataPageQuery',\n  dataSourceConnectionUrl: '/api/rx/application/datasource/configuration',\n  resourceTypes,\n  authTypes,\n  portMinValue: 0,\n  portMaxValue: 65535,\n  hostNameMaxLength: 254,\n  pingConfigurationCommand: 'com.bmc.arsys.rx.application.datasource.command.ValidateDataSourceCommand',\n  initialWizardContext: {\n    dataSourceName: '',\n    resourceType: resourceTypes.arSystem,\n    hostName: '',\n    portNumber: null,\n    authType: head(authTypes).name,\n    rasPassword: '',\n    enforceAuthorization: false,\n    webApiDataSourceGuid: '',\n    isEditMode: false,\n    isGeneralFormPristine: true\n  }\n};\n","import { Component, OnDestroy, OnInit } from '@angular/core';\nimport { FormControl, FormGroup, Validators } from '@angular/forms';\nimport { RxSelectOption } from '@bmc-ux/adapt-angular';\nimport { get, head } from 'lodash';\nimport { ReplaySubject } from 'rxjs';\nimport { TranslateService } from '@ngx-translate/core';\nimport { withLatestFrom, take, tap, takeUntil } from 'rxjs/operators';\n\nimport { RxWizardModalComponent } from '@helix/platform/shared/components';\nimport { RX_DATA_SOURCE_CONNECTIONS } from './data-source-connections.constant';\n\n@Component({\n  selector: 'rx-data-source-connection-general',\n  templateUrl: './data-source-connection-general.component.html',\n  styleUrls: ['./data-source-connection-general.component.scss']\n})\nexport class DataSourceConnectionGeneralComponent implements OnInit, OnDestroy {\n  generalForm: FormGroup;\n\n  dataSourceConfigTypes: RxSelectOption[] = Object.values(RX_DATA_SOURCE_CONNECTIONS.resourceTypes).map(\n    (resourceType) => ({\n      ...resourceType,\n      name: this.translateService.instant(resourceType.name)\n    })\n  );\n\n  private defaultSelection = this.translateService.instant('com.bmc.arsys.rx.client.common.select.label');\n\n  private destroyed$ = new ReplaySubject<boolean>(1);\n\n  constructor(private rxWizardModalComponent: RxWizardModalComponent, private translateService: TranslateService) {}\n\n  ngOnInit(): void {\n    this.rxWizardModalComponent.context$.pipe(take(1)).subscribe((context) => {\n      this.generalForm = new FormGroup({\n        dataSourceName: new FormControl(context.dataSourceName, [Validators.required]),\n        resourceType: new FormControl([context.resourceType], [Validators.required])\n      });\n\n      if (this.generalForm.invalid) {\n        this.rxWizardModalComponent.api.disableNextButton();\n      }\n    });\n\n    this.generalForm.valueChanges\n      .pipe(withLatestFrom(this.rxWizardModalComponent.context$), takeUntil(this.destroyed$))\n      .subscribe(([value, context]) => {\n        this.rxWizardModalComponent.api.updateContext({\n          ...value,\n          resourceType: head(value.resourceType),\n          isGeneralFormPristine: this.generalForm.pristine\n        });\n\n        if (this.generalForm.valid) {\n          this.rxWizardModalComponent.api.enableNextButton();\n        } else {\n          this.rxWizardModalComponent.api.disableNextButton();\n        }\n      });\n  }\n\n  optionFormatter = (dataSourceOption: RxSelectOption): string => {\n    return get(dataSourceOption, 'name', this.defaultSelection);\n  };\n\n  ngOnDestroy(): void {\n    this.destroyed$.next();\n    this.destroyed$.complete();\n  }\n}\n","<form [formGroup]=\"generalForm\">\n  <div class=\"row\">\n    <div class=\"col-md-6\">\n      <adapt-rx-textfield\n        label=\"{{ 'com.bmc.arsys.rx.client.common.name.label' | translate }}\"\n        name=\"dataSourceName\"\n        formControlName=\"dataSourceName\"\n        rx-id=\"name-field\"\n        class=\"d-block form-group\"\n      >\n      </adapt-rx-textfield>\n    </div>\n  </div>\n  <div class=\"row\">\n    <div class=\"col-md-6\">\n      <adapt-rx-select\n        label=\"{{ 'com.bmc.arsys.rx.client.common.item-type.label' | translate }}\"\n        name=\"resourceType\"\n        class=\"d-block form-group\"\n        rx-id=\"type-field\"\n        formControlName=\"resourceType\"\n        [options]=\"dataSourceConfigTypes\"\n        [optionFormatter]=\"optionFormatter\"\n      >\n      </adapt-rx-select>\n    </div>\n  </div>\n</form>\n","import { DataPage } from '@helix/platform/shared/api';\nimport { Injectable, Injector } from '@angular/core';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class RxCustomDataSourceProviderDataPageService extends DataPage {\n  constructor(private injector: Injector) {\n    super(injector, 'com.bmc.arsys.rx.application.query.CustomDataSourceProviderDataPageQuery');\n  }\n}\n","import { HttpErrorResponse } from '@angular/common/http';\nimport { Component, OnDestroy, OnInit } from '@angular/core';\nimport { FormControl, FormGroup, Validators } from '@angular/forms';\nimport { RxSelectionChangeEvent, RxSelectOption } from '@bmc-ux/adapt-angular';\nimport { RX_RECORD_DEFINITION, RxRecordInstanceDataPageService } from '@helix/platform/record/api';\nimport {\n  IDataPageParams,\n  IDataPageResult,\n  IPlainObject,\n  RxDefinitionNameService,\n  RxGlobalCacheService\n} from '@helix/platform/shared/api';\nimport { RxWizardModalComponent } from '@helix/platform/shared/components';\nimport { ConnectionTestStatus } from '@helix/platform/ui-kit';\nimport { TranslateService } from '@ngx-translate/core';\nimport { filter, find, get, groupBy, omit } from 'lodash';\nimport { forkJoin, ReplaySubject, throwError } from 'rxjs';\nimport { catchError, map, shareReplay, switchMap, take, takeUntil, withLatestFrom } from 'rxjs/operators';\nimport { RxCognitiveServiceService } from '../cognitive-service/cognitive-service.service';\nimport { RxCustomDataSourceProviderDataPageService } from './custom-data-source-provider-data-page.service';\nimport { ICustomDataSourceProviderPickerComponentOptions } from './custom-data-source-provider-picker/custom-data-source-provider-picker-component.types';\nimport { RX_DATA_SOURCE_CONNECTIONS } from './data-source-connections.constant';\nimport { ICustomDataSourceProvider } from './data-source-connections.types';\n\n@Component({\n  selector: 'rx-data-source-connection-properties',\n  templateUrl: './data-source-connection-properties.component.html',\n  styleUrls: ['./data-source-connection-properties.component.scss']\n})\nexport class DataSourceConnectionPropertiesComponent implements OnInit, OnDestroy {\n  connectionPropertiesForm: FormGroup;\n\n  isRasPasswordDisabled = true;\n  connectionTestStatus: ConnectionTestStatus = ConnectionTestStatus.Invalid;\n  webApis: RxSelectOption[] = [];\n\n  customDataSourceProvidersPickerOptions = {\n    label: 'com.bmc.arsys.rx.client.admin.data-source-connection-properties.custom-data-source-provider.label',\n    required: true,\n    providersTree: []\n  } as ICustomDataSourceProviderPickerComponentOptions;\n\n  dataSourceAuthenticationTypes: RxSelectOption[] = RX_DATA_SOURCE_CONNECTIONS.authTypes.map((authType) => ({\n    ...authType,\n    name: this.translateService.instant(authType.name)\n  }));\n\n  isResourceTypeArSystem$ = this.rxWizardModalComponent.context$.pipe(\n    map((context) => context.resourceType.value === RX_DATA_SOURCE_CONNECTIONS.resourceTypes.arSystem.value),\n    shareReplay(1)\n  );\n\n  isResourceTypeCustom$ = this.rxWizardModalComponent.context$.pipe(\n    map((context) => context.resourceType.value === RX_DATA_SOURCE_CONNECTIONS.resourceTypes.custom.value),\n    shareReplay(1)\n  );\n\n  isResourceTypeWebApi$ = this.rxWizardModalComponent.context$.pipe(\n    map((context) => context.resourceType.value === RX_DATA_SOURCE_CONNECTIONS.resourceTypes.webApi.value),\n    shareReplay(1)\n  );\n\n  private destroyed$ = new ReplaySubject<boolean>(1);\n  private defaultSelection = this.translateService.instant('com.bmc.arsys.rx.client.common.select.label');\n  private isDataLoaded: { [key: string]: boolean } = {};\n\n  constructor(\n    private rxCognitiveServiceService: RxCognitiveServiceService,\n    private rxRecordInstanceDataPageService: RxRecordInstanceDataPageService,\n    private rxCustomDataSourceProviderDataPageService: RxCustomDataSourceProviderDataPageService,\n    private rxDefinitionNameService: RxDefinitionNameService,\n    private rxWizardModalComponent: RxWizardModalComponent,\n    private translateService: TranslateService,\n    private rxGlobalCacheService: RxGlobalCacheService\n  ) {}\n\n  ngOnInit(): void {\n    this.rxWizardModalComponent.context$.pipe(take(1)).subscribe((context) => {\n      this.connectionPropertiesForm = new FormGroup({\n        hostName: new FormControl(context.hostName, [Validators.required]),\n        port: new FormControl(context.port, [Validators.required]),\n        authType: new FormControl(context.authType, [Validators.required]),\n        rasPassword: new FormControl(context.rasPassword),\n        enforceAuthorization: new FormControl(context.enforceAuthorization),\n        selectedWebApi: new FormControl(context.webApiDataSourceGuid, [Validators.required]),\n        providerId: new FormControl(context.providerId, [Validators.required])\n      });\n    });\n\n    this.rxWizardModalComponent.context$.pipe(takeUntil(this.destroyed$)).subscribe((context) => {\n      const arSystemControls = ['hostName', 'port', 'authType', 'rasPassword', 'enforceAuthorization'];\n\n      if (context.resourceType.value === RX_DATA_SOURCE_CONNECTIONS.resourceTypes.arSystem.value) {\n        arSystemControls.forEach((control) => this.connectionPropertiesForm.get(control).enable({ emitEvent: false }));\n        this.connectionPropertiesForm.get('selectedWebApi').disable({ emitEvent: false });\n        this.connectionPropertiesForm.get('providerId').disable({ emitEvent: false });\n      } else if (context.resourceType.value === RX_DATA_SOURCE_CONNECTIONS.resourceTypes.webApi.value) {\n        arSystemControls.forEach((control) => this.connectionPropertiesForm.get(control).disable({ emitEvent: false }));\n        this.connectionPropertiesForm.get('selectedWebApi').enable({ emitEvent: false });\n        this.connectionPropertiesForm.get('providerId').disable({ emitEvent: false });\n      } else if (context.resourceType.value === RX_DATA_SOURCE_CONNECTIONS.resourceTypes.custom.value) {\n        arSystemControls.forEach((control) => this.connectionPropertiesForm.get(control).disable({ emitEvent: false }));\n        this.connectionPropertiesForm.get('selectedWebApi').disable({ emitEvent: false });\n        this.connectionPropertiesForm.get('providerId').enable({ emitEvent: false });\n      }\n\n      this.loadCustomDataSourceProviders(context);\n      this.loadWebApis(context);\n\n      if (this.connectionPropertiesForm.valid && !context.isGeneralFormPristine) {\n        this.rxWizardModalComponent.api.enableFinishButton();\n      } else {\n        this.rxWizardModalComponent.api.disableFinishButton();\n      }\n    });\n\n    this.connectionPropertiesForm.valueChanges\n      .pipe(withLatestFrom(this.isResourceTypeWebApi$), takeUntil(this.destroyed$))\n      .subscribe(([value, isResourceTypeWebApi]) => {\n        this.rxWizardModalComponent.api.updateContext(omit(value, ['selectedWebApi']));\n\n        if (!isResourceTypeWebApi) {\n          this.connectionTestStatus =\n            this.connectionPropertiesForm.pristine || this.connectionPropertiesForm.invalid\n              ? ConnectionTestStatus.Invalid\n              : ConnectionTestStatus.Unknown;\n        }\n      });\n\n    this.connectionPropertiesForm.valueChanges\n      .pipe(withLatestFrom(this.rxWizardModalComponent.context$), takeUntil(this.destroyed$))\n      .subscribe(([_, context]) => {\n        if (\n          this.connectionPropertiesForm.invalid ||\n          (this.connectionPropertiesForm.pristine && context.isGeneralFormPristine)\n        ) {\n          this.rxWizardModalComponent.api.disableFinishButton();\n        } else {\n          this.rxWizardModalComponent.api.enableFinishButton();\n        }\n      });\n  }\n\n  setAuthType(type: string): void {\n    const newContext: IPlainObject = {\n      authType: type\n    };\n\n    this.isRasPasswordDisabled = type !== RX_DATA_SOURCE_CONNECTIONS.authTypes[1].name;\n\n    if (this.isRasPasswordDisabled) {\n      newContext.rasPassword = null;\n    }\n\n    this.rxWizardModalComponent.api.updateContext(newContext);\n  }\n\n  onTestConnection(): void {\n    this.rxWizardModalComponent.context$\n      .pipe(\n        switchMap((context) =>\n          this.rxCognitiveServiceService.testConnection({\n            resourceType: RX_DATA_SOURCE_CONNECTIONS.pingConfigurationCommand,\n            dataSource: {\n              resourceType: RX_DATA_SOURCE_CONNECTIONS.resourceTypes.arSystem.value,\n              authType: context.authType,\n              hostName: context.hostName,\n              port: context.port,\n              rasPassword: context.rasPassword,\n              enforceAuthorization: context.enforceAuthorization\n            }\n          })\n        ),\n        catchError((error: HttpErrorResponse) => {\n          this.connectionTestStatus = ConnectionTestStatus.Failed;\n\n          return throwError(error);\n        })\n      )\n      .subscribe(() => {\n        this.connectionTestStatus = ConnectionTestStatus.Passed;\n      });\n  }\n\n  private loadCustomDataSourceProviders(context: IPlainObject): void {\n    if (\n      context.resourceType.value === RX_DATA_SOURCE_CONNECTIONS.resourceTypes.custom.value &&\n      !this.isDataLoaded[RX_DATA_SOURCE_CONNECTIONS.resourceTypes.custom.value]\n    ) {\n      const globalLabel = this.translateService.instant('com.bmc.arsys.rx.client.common.global-items.label');\n\n      this.isDataLoaded[RX_DATA_SOURCE_CONNECTIONS.resourceTypes.custom.value] = true;\n\n      this.rxCustomDataSourceProviderDataPageService\n        .get()\n        .pipe(\n          switchMap((dataPage: IDataPageResult<ICustomDataSourceProvider>) =>\n            forkJoin(\n              dataPage.data.map((customDataSourceProvider: ICustomDataSourceProvider) => {\n                const bundleId = this.rxDefinitionNameService.getBundleId(customDataSourceProvider.name) || globalLabel;\n\n                return this.rxGlobalCacheService.getBundleFriendlyName(bundleId, bundleId).pipe(\n                  map((bundleFriendlyName) => ({\n                    bundleFriendlyName,\n                    value: customDataSourceProvider.name\n                  }))\n                );\n              })\n            )\n          )\n        )\n        .subscribe((providers) => {\n          const customDataSourceProvidersByBundleFriendlyName = groupBy(providers, 'bundleFriendlyName');\n\n          this.customDataSourceProvidersPickerOptions.providersTree = Object.keys(\n            customDataSourceProvidersByBundleFriendlyName\n          )\n            .map((bundleFriendlyName: string) => ({\n              label: bundleFriendlyName,\n              isExpanded: true,\n              providers: customDataSourceProvidersByBundleFriendlyName[bundleFriendlyName]\n                .map((provider) => provider.value)\n                .sort()\n            }))\n            .sort((provider1, provider2) => {\n              if (provider1.label === globalLabel) {\n                return -1;\n              }\n\n              return provider1.label > provider2.label ? 1 : -1;\n            });\n\n          this.connectionPropertiesForm\n            .get('providerId')\n            .setValue(find(providers, (provider) => provider.value === context.providerId)?.value, {\n              emitEvent: false\n            });\n        });\n    }\n  }\n\n  private loadWebApis(context: IPlainObject): void {\n    if (\n      context.resourceType.value === RX_DATA_SOURCE_CONNECTIONS.resourceTypes.webApi.value &&\n      !this.isDataLoaded[RX_DATA_SOURCE_CONNECTIONS.resourceTypes.webApi.value]\n    ) {\n      const params: IDataPageParams = {\n        recorddefinition: 'WebAPI Connection'\n      };\n\n      this.isDataLoaded[RX_DATA_SOURCE_CONNECTIONS.resourceTypes.webApi.value] = true;\n\n      this.rxRecordInstanceDataPageService.post({ params }).subscribe((result) => {\n        this.webApis = result.data.map((webApi) => ({\n          name: webApi[RX_RECORD_DEFINITION.coreFieldIds.description],\n          id: webApi[RX_RECORD_DEFINITION.coreFieldIds.id]\n        }));\n\n        this.connectionPropertiesForm\n          .get('selectedWebApi')\n          .setValue(filter(this.webApis, ['id', context.webApiDataSourceGuid]), { emitEvent: false });\n      });\n    }\n  }\n\n  optionFormatter = (dataSourceOption: RxSelectOption): string => get(dataSourceOption, 'name', this.defaultSelection);\n\n  onWebApiChange(event: RxSelectionChangeEvent): void {\n    this.rxWizardModalComponent.api.updateContext({\n      webApiDataSourceGuid: event.options[0].id\n    });\n  }\n\n  ngOnDestroy(): void {\n    this.destroyed$.next();\n    this.destroyed$.complete();\n  }\n}\n","<form [formGroup]=\"connectionPropertiesForm\">\n  <ng-container *ngIf=\"isResourceTypeArSystem$ | async\">\n    <div class=\"row\">\n      <div class=\"col-md-6\">\n        <adapt-rx-textfield\n          label=\"{{ 'com.bmc.arsys.rx.client.admin.data-source-connection-properties.host-name.label' | translate }}\"\n          name=\"hostName\"\n          formControlName=\"hostName\"\n          rx-id=\"host-name-field\"\n          class=\"d-block form-group\"\n          maxlength=\"254\"\n        >\n        </adapt-rx-textfield>\n      </div>\n    </div>\n    <div class=\"row\">\n      <div class=\"col-md-6\">\n        <adapt-rx-counter\n          label=\"{{ 'com.bmc.arsys.rx.client.admin.data-source-connection-properties.port.label' | translate }}\"\n          name=\"port\"\n          adaptRange\n          [formControl]=\"connectionPropertiesForm.controls.port\"\n          [min]=\"0\"\n          [max]=\"65535\"\n          adaptIntegerNumber\n          rx-id=\"port-field\"\n          class=\"d-block form-group\"\n        >\n        </adapt-rx-counter>\n      </div>\n    </div>\n    <div class=\"row\">\n      <div class=\"col-md-6\">\n        <adapt-rx-radiobutton-group\n          label=\"{{\n            'com.bmc.arsys.rx.client.admin.data-source-connection-properties.authentication.label' | translate\n          }}\"\n          name=\"authType\"\n          rx-id=\"authentication-field\"\n          formControlName=\"authType\"\n          (ngModelChange)=\"setAuthType($event)\"\n        >\n          <adapt-rx-radiobutton\n            *ngFor=\"let selectionValue of dataSourceAuthenticationTypes\"\n            [value]=\"selectionValue.name\"\n            [label]=\"selectionValue.name\"\n          >\n          </adapt-rx-radiobutton>\n        </adapt-rx-radiobutton-group>\n      </div>\n    </div>\n    <div class=\"row\">\n      <div class=\"col-md-6\">\n        <adapt-rx-textfield\n          formControlName=\"rasPassword\"\n          [isPassword]=\"true\"\n          name=\"password\"\n          rx-id=\"password-field\"\n          class=\"d-block form-group\"\n          [disabled]=\"isRasPasswordDisabled\"\n        >\n        </adapt-rx-textfield>\n      </div>\n      <div class=\"col-md-6\">\n        <adapt-rx-checkbox\n          name=\"permission\"\n          label=\"{{\n            'com.bmc.arsys.rx.client.admin.data-source-connection-properties.use-current-user-permissions.label'\n              | translate\n          }}\"\n          rx-id=\"permission-field\"\n          formControlName=\"enforceAuthorization\"\n          [tooltip]=\"{\n            iconName: 'question_circle_o',\n            content: 'com.bmc.arsys.rx.client.admin.data-source-connection-properties.permission.tooltip' | translate,\n            placement: 'top',\n            popoverMode: true\n          }\"\n        >\n        </adapt-rx-checkbox>\n      </div>\n    </div>\n    <div class=\"row\">\n      <div class=\"col-md-8 mt-2\">\n        <rx-connection-tester\n          buttonType=\"secondary\"\n          [status]=\"connectionTestStatus\"\n          (testConnection)=\"onTestConnection()\"\n          rx-id=\"test-connection-button\"\n        ></rx-connection-tester>\n      </div>\n    </div>\n  </ng-container>\n\n  <ng-container *ngIf=\"isResourceTypeCustom$ | async\">\n    <div class=\"row\">\n      <rx-custom-data-source-provider-picker\n        class=\"col-md-6\"\n        name=\"providerId\"\n        formControlName=\"providerId\"\n        rx-id=\"custom-data-source-provider-field\"\n        [options]=\"customDataSourceProvidersPickerOptions\"\n      ></rx-custom-data-source-provider-picker>\n    </div>\n  </ng-container>\n\n  <ng-container *ngIf=\"isResourceTypeWebApi$ | async\">\n    <div class=\"row\">\n      <div class=\"col-md-6\">\n        <adapt-rx-select\n          label=\"{{\n            'com.bmc.arsys.rx.client.admin.data-source-connection-properties.web-api-connection.label' | translate\n          }}\"\n          name=\"webApiConnection\"\n          class=\"d-block form-group\"\n          rx-id=\"web-api-connection-field\"\n          [options]=\"webApis\"\n          formControlName=\"selectedWebApi\"\n          (onSelectionChange)=\"onWebApiChange($event)\"\n          [optionFormatter]=\"optionFormatter\"\n        >\n        </adapt-rx-select>\n      </div>\n    </div>\n  </ng-container>\n</form>\n","import { Injectable } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\nimport { forkJoin, Observable } from 'rxjs';\nimport { map } from 'lodash';\nimport { RX_DATA_SOURCE_CONNECTIONS } from './data-source-connections.constant';\nimport { IDataSourceConnection } from './data-source-connections.types';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class RxDataSourceConnectionsService {\n  constructor(private httpClient: HttpClient) {}\n\n  getDataSourceConnection(connectionId: string): Observable<any> {\n    return this.httpClient.get(`${RX_DATA_SOURCE_CONNECTIONS.dataSourceConnectionUrl}/${connectionId}`);\n  }\n\n  createDataSourceConnection(dataSourceConnection: IDataSourceConnection): Observable<any> {\n    return this.httpClient.post(RX_DATA_SOURCE_CONNECTIONS.dataSourceConnectionUrl, dataSourceConnection);\n  }\n\n  updateDataSourceConnection(connectionId: string, dataSourceConnection: IDataSourceConnection): Observable<any> {\n    return this.httpClient.put(\n      `${RX_DATA_SOURCE_CONNECTIONS.dataSourceConnectionUrl}/${connectionId}`,\n      dataSourceConnection\n    );\n  }\n\n  deleteDataSourceConnections(recordInstanceIds: string[]): Observable<any> {\n    return forkJoin(\n      map(recordInstanceIds, (id) =>\n        this.httpClient.delete(`${RX_DATA_SOURCE_CONNECTIONS.dataSourceConnectionUrl}/${id}`)\n      )\n    );\n  }\n}\n","import { Component, ComponentFactoryResolver, OnInit, ViewChild } from '@angular/core';\nimport { Observable, of } from 'rxjs';\nimport {\n  IRecordGridActionButton,\n  IRecordGridColumn,\n  IRecordGridConfig,\n  IRecordGridDataPageParams,\n  RecordGridComponent,\n  RowSelectionMode\n} from '@helix/platform/view/components';\nimport { RX_DATA_SOURCE_CONNECTIONS } from './data-source-connections.constant';\nimport { IRecordDefinition, RX_RECORD_DEFINITION } from '@helix/platform/record/api';\nimport { RX_CONNECTION_MAPPING } from '../connection-mapping/common/connection-mapping.constant';\nimport { ColumnConfig, RowDataItem } from '@bmc-ux/adapt-table';\nimport { IRowDataItem } from '@helix/platform/view/api';\nimport { RX_MODAL, RxModalService } from '@helix/platform/ui-kit';\nimport { DataPage, IDataPageResult, RxDataPageFactoryService, RxNotificationService } from '@helix/platform/shared/api';\nimport { cloneDeep, map, pick } from 'lodash';\nimport { RxDataSourceConnectionsService } from './data-source-connections.service';\nimport { AdaptModalService } from '@bmc-ux/adapt-angular';\nimport { IDataSourceConnection, IDataSourceConnectionWizardContext } from './data-source-connections.types';\nimport { DataSourceConnectionGeneralComponent } from './data-source-connection-general.component';\nimport { DataSourceConnectionPropertiesComponent } from './data-source-connection-properties.component';\nimport { RxWizardService } from '@helix/platform/shared/components';\nimport { TranslateService } from '@ngx-translate/core';\n\n@Component({\n  selector: 'rx-admin-data-source-connections',\n  templateUrl: './data-source-connections.component.html'\n})\nexport class DataSourceConnectionsAdminComponent implements OnInit {\n  @ViewChild('dataSourceConnectionsGrid', { static: true })\n  dataSourceConnectionsGrid: RecordGridComponent;\n\n  private resource: DataPage;\n  private selectedConnectionId: string;\n  private wizardTitle: string;\n  private finishButtonLabel: string;\n\n  recordGridConfig: Observable<IRecordGridConfig>;\n  wizardConfigData: IDataSourceConnectionWizardContext;\n\n  constructor(\n    private rxModalService: RxModalService,\n    private rxDataPageService: RxDataPageFactoryService,\n    private rxDataSourceConnectionsService: RxDataSourceConnectionsService,\n    private rxNotificationService: RxNotificationService,\n    private adaptModalService: AdaptModalService,\n    private componentFactoryResolver: ComponentFactoryResolver,\n    private rxWizardService: RxWizardService,\n    private translateService: TranslateService\n  ) {\n    this.resource = this.rxDataPageService.withType(RX_DATA_SOURCE_CONNECTIONS.dataPageQueryType);\n  }\n\n  ngOnInit(): void {\n    RX_DATA_SOURCE_CONNECTIONS.resourceTypes = Object.entries(RX_DATA_SOURCE_CONNECTIONS.resourceTypes).reduce(\n      (resourceTypesWithTranslatedName, [key, resourceType]) => ({\n        ...resourceTypesWithTranslatedName,\n        [key]: {\n          value: resourceType.value,\n          name: this.translateService.instant(resourceType.name)\n        }\n      }),\n      {}\n    ) as any;\n\n    RX_DATA_SOURCE_CONNECTIONS.authTypes = RX_DATA_SOURCE_CONNECTIONS.authTypes.map((authType) => ({\n      ...authType,\n      name: this.translateService.instant(authType.name)\n    }));\n\n    RX_DATA_SOURCE_CONNECTIONS.initialWizardContext.resourceType = RX_DATA_SOURCE_CONNECTIONS.resourceTypes.arSystem;\n    RX_DATA_SOURCE_CONNECTIONS.initialWizardContext.authType = RX_DATA_SOURCE_CONNECTIONS.authTypes[0].name;\n\n    const gridColumns: IRecordGridColumn[] = [\n      {\n        index: 0,\n        fieldId: String(RX_RECORD_DEFINITION.coreFieldIds.id),\n        title: this.translateService.instant('com.bmc.arsys.rx.client.common.id.label'),\n        visible: false\n      },\n      {\n        index: 1,\n        fieldId: String(RX_RECORD_DEFINITION.coreFieldIds.description),\n        title: this.translateService.instant('com.bmc.arsys.rx.client.common.name.label'),\n        clickable: true,\n        actions: [\n          {\n            name: (previousActionResult: any, lastActionRow: IRowDataItem) =>\n              this.editDataSourceConnection(lastActionRow)\n          }\n        ]\n      },\n      {\n        index: 2,\n        fieldId: String(RX_CONNECTION_MAPPING.dataSource.fields.sourceType),\n        title: this.translateService.instant('com.bmc.arsys.rx.client.admin.data-source-connections.source-type.title')\n      }\n    ];\n\n    const recordDefinition: IRecordDefinition = {\n      fieldDefinitions: [\n        {\n          id: RX_RECORD_DEFINITION.coreFieldIds.id,\n          resourceType: RX_RECORD_DEFINITION.resourceTypes.character\n        },\n        {\n          id: RX_RECORD_DEFINITION.coreFieldIds.description,\n          resourceType: RX_RECORD_DEFINITION.resourceTypes.character\n        },\n        {\n          id: RX_CONNECTION_MAPPING.dataSource.fields.sourceType,\n          resourceType: RX_RECORD_DEFINITION.resourceTypes.character\n        }\n      ]\n    };\n\n    const actionButtons: IRecordGridActionButton[] = [\n      {\n        label: this.translateService.instant('com.bmc.arsys.rx.client.common.delete.label'),\n        style: 'tertiary',\n        icon: 'trash',\n        actions: [\n          {\n            name: () => {\n              this.rxModalService\n                .confirm({\n                  title: this.translateService.instant('com.bmc.arsys.rx.client.common.warning.label'),\n                  modalStyle: RX_MODAL.modalStyles.warning,\n                  message: this.translateService.instant(\n                    'com.bmc.arsys.rx.client.admin.data-source-connections.delete-confirmation.message'\n                  )\n                })\n                .then((result: boolean) => {\n                  if (result) {\n                    const selectedDataSourceConnections = this.dataSourceConnectionsGrid.api.getSelectedRows();\n\n                    const selectedDataSourceConnectionsIds = map(\n                      selectedDataSourceConnections,\n                      RX_RECORD_DEFINITION.coreFieldIds.id\n                    );\n\n                    this.rxDataSourceConnectionsService\n                      .deleteDataSourceConnections(selectedDataSourceConnectionsIds)\n                      .subscribe(() => {\n                        this.rxNotificationService.addSuccessMessage('Data source connection(s) deleted successfully.');\n                        this.refreshDataSourceConnectionsGrid();\n                      });\n                  }\n                });\n            }\n          }\n        ]\n      }\n    ];\n\n    this.recordGridConfig = of({\n      enableFiltering: true,\n      columns: gridColumns,\n      getRecordDefinition: () => of(recordDefinition),\n      enableRowSelection: RowSelectionMode.Multiple,\n      recordDefinitionName: RX_DATA_SOURCE_CONNECTIONS.recordDefinitionName,\n      actionButtons: actionButtons,\n      getData: this.getData,\n      styles: 'flex-fill'\n    });\n  }\n\n  private getData = (queryParams: IRecordGridDataPageParams): Observable<IDataPageResult> => {\n    delete queryParams.searchText;\n    delete queryParams.shouldIncludeTotalSize;\n\n    return this.resource.get({ params: queryParams });\n  };\n\n  getCellValue(dataItem: string[], column: ColumnConfig): string {\n    return dataItem[column.field];\n  }\n\n  createDataSourceConnection(): void {\n    this.wizardTitle = this.translateService.instant(\n      'com.bmc.arsys.rx.client.admin.data-source-connections.new-data-source-connection.label'\n    );\n    this.finishButtonLabel = 'Save';\n    this.wizardConfigData = cloneDeep(RX_DATA_SOURCE_CONNECTIONS.initialWizardContext);\n\n    this.openWizard();\n  }\n\n  editDataSourceConnection(dataItem: RowDataItem): void {\n    this.wizardTitle = this.translateService.instant(\n      'com.bmc.arsys.rx.client.admin.data-source-connections.edit-data-source-connection.label'\n    );\n    this.finishButtonLabel = this.translateService.instant('com.bmc.arsys.rx.client.approval.update.button.label');\n    this.selectedConnectionId = dataItem[RX_RECORD_DEFINITION.coreFieldIds.id];\n\n    this.rxDataSourceConnectionsService.getDataSourceConnection(this.selectedConnectionId).subscribe((result) => {\n      this.wizardConfigData = {\n        dataSourceName: result.dataSourceName,\n        resourceType: Object.values(RX_DATA_SOURCE_CONNECTIONS.resourceTypes).find(\n          (resourceType) => resourceType.value === result.resourceType\n        ),\n        hostName: result.hostName,\n        port: result.port,\n        authType: result.authType,\n        rasPassword: result.rasPassword,\n        enforceAuthorization: result.enforceAuthorization,\n        webApiDataSourceGuid: result.webApiDataSourceGuid,\n        isEditMode: true,\n        isGeneralFormPristine: true,\n        providerId: result.providerId\n      };\n\n      this.openWizard();\n    });\n  }\n\n  private refreshDataSourceConnectionsGrid(): void {\n    this.dataSourceConnectionsGrid.api.refresh().subscribe();\n  }\n\n  openWizard(): void {\n    const dataSourceWizardConfig = {\n      title: this.wizardTitle,\n      allowFinish: true,\n      finishButtonLabel: this.finishButtonLabel,\n      steps: [\n        {\n          id: 'general',\n          name: this.translateService.instant('com.bmc.arsys.rx.client.common.general-items.label'),\n          componentFactory: this.componentFactoryResolver.resolveComponentFactory(DataSourceConnectionGeneralComponent)\n        },\n        {\n          id: 'connection-properties',\n          name: this.translateService.instant(\n            'com.bmc.arsys.rx.client.admin.data-source-connections.connection-properties.label'\n          ),\n          componentFactory: this.componentFactoryResolver.resolveComponentFactory(\n            DataSourceConnectionPropertiesComponent\n          )\n        }\n      ]\n    };\n\n    this.rxWizardService\n      .open<IDataSourceConnectionWizardContext>({\n        context: this.wizardConfigData,\n        options: dataSourceWizardConfig\n      })\n      .then((result) => {\n        if (result) {\n          this.save();\n        }\n      });\n  }\n\n  save(): void {\n    let dataSourceConnection: IDataSourceConnection = {\n      dataSourceName: this.wizardConfigData.dataSourceName,\n      resourceType: this.wizardConfigData.resourceType.value,\n      hostName: this.wizardConfigData.hostName,\n      port: this.wizardConfigData.port,\n      rasPassword: this.wizardConfigData.rasPassword || null,\n      authType: this.wizardConfigData.authType,\n      enforceAuthorization: this.wizardConfigData.enforceAuthorization,\n      providerId: this.wizardConfigData.providerId\n    };\n\n    if (this.wizardConfigData.resourceType.value === RX_DATA_SOURCE_CONNECTIONS.resourceTypes.webApi.value) {\n      dataSourceConnection = pick(dataSourceConnection, ['dataSourceName', 'resourceType']);\n      dataSourceConnection.webApiDataSourceGuid = this.wizardConfigData.webApiDataSourceGuid;\n    } else if (this.wizardConfigData.resourceType.value === RX_DATA_SOURCE_CONNECTIONS.resourceTypes.custom.value) {\n      dataSourceConnection = pick(dataSourceConnection, ['dataSourceName', 'resourceType', 'providerId']);\n    }\n\n    const writeEvent = this.wizardConfigData.isEditMode\n      ? this.rxDataSourceConnectionsService.updateDataSourceConnection(this.selectedConnectionId, dataSourceConnection)\n      : this.rxDataSourceConnectionsService.createDataSourceConnection(dataSourceConnection);\n\n    writeEvent.subscribe(() => {\n      this.rxNotificationService.addSuccessMessage(\n        this.translateService.instant(\n          'com.bmc.arsys.rx.client.admin.data-source-connections.edit-data-source-connection-saved.message'\n        )\n      );\n\n      this.refreshDataSourceConnectionsGrid();\n    });\n  }\n}\n","<rx-admin-settings header=\"{{ 'com.bmc.arsys.rx.client.admin.data-source-connections.header.title' | translate }}\">\n  <ng-container>\n    <button\n      adapt-button\n      type=\"button\"\n      btn-type=\"tertiary\"\n      class=\"d-icon-plus_circle align-self-start\"\n      rx-id=\"new-button\"\n      (click)=\"createDataSourceConnection()\"\n    >\n      {{ 'com.bmc.arsys.rx.client.common.new.label' | translate }}\n    </button>\n\n    <rx-record-grid #dataSourceConnectionsGrid [config]=\"recordGridConfig\"></rx-record-grid>\n  </ng-container>\n</rx-admin-settings>\n","import { CommonModule } from '@angular/common';\nimport { ComponentFactoryResolver, NgModule } from '@angular/core';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\nimport {\n  AdaptButtonModule,\n  AdaptDropdownModule,\n  AdaptRxCheckboxModule,\n  AdaptRxCounterModule,\n  AdaptRxFormControlModule,\n  AdaptRxRadiobuttonModule,\n  AdaptRxSelectModule,\n  AdaptRxTextfieldModule,\n  AdaptRxValidatorsModule,\n  AdaptTreeModule\n} from '@bmc-ux/adapt-angular';\nimport { RxDefinitionModule, RX_APPLICATION } from '@helix/platform/shared/api';\nimport { AdminSettingsModule, RxWizardModule } from '@helix/platform/shared/components';\nimport { RxConnectionTesterModule } from '@helix/platform/ui-kit';\nimport { RxViewComponentRegistryService } from '@helix/platform/view/api';\nimport { RecordGridModule } from '@helix/platform/view/components';\nimport { TranslateModule } from '@ngx-translate/core';\nimport { RxCustomDataSourceProviderPickerComponent } from './custom-data-source-provider-picker/custom-data-source-provider-picker.component';\nimport { DataSourceConnectionGeneralComponent } from './data-source-connection-general.component';\nimport { DataSourceConnectionPropertiesComponent } from './data-source-connection-properties.component';\nimport { DataSourceConnectionsAdminComponent } from './data-source-connections.component';\n\n@NgModule({\n  declarations: [\n    DataSourceConnectionsAdminComponent,\n    DataSourceConnectionGeneralComponent,\n    DataSourceConnectionPropertiesComponent,\n    RxCustomDataSourceProviderPickerComponent\n  ],\n  imports: [\n    AdaptButtonModule,\n    AdaptDropdownModule,\n    AdaptRxCheckboxModule,\n    AdaptRxCounterModule,\n    AdaptRxFormControlModule,\n    AdaptRxRadiobuttonModule,\n    AdaptRxSelectModule,\n    AdaptRxTextfieldModule,\n    AdaptRxValidatorsModule,\n    AdaptTreeModule,\n    AdminSettingsModule,\n    CommonModule,\n    FormsModule,\n    ReactiveFormsModule,\n    RecordGridModule,\n    RxConnectionTesterModule,\n    RxDefinitionModule,\n    RxWizardModule,\n    TranslateModule\n  ],\n  entryComponents: [\n    DataSourceConnectionsAdminComponent,\n    DataSourceConnectionGeneralComponent,\n    DataSourceConnectionPropertiesComponent\n  ]\n})\nexport class DataSourceConnectionsRegistrationModule {\n  constructor(\n    private componentFactoryResolver: ComponentFactoryResolver,\n    private rxViewComponentRegistryService: RxViewComponentRegistryService\n  ) {\n    rxViewComponentRegistryService.register({\n      type: 'rx-admin-data-source-connections',\n      componentFactory: this.componentFactoryResolver.resolveComponentFactory(DataSourceConnectionsAdminComponent),\n      name: 'Data source connections',\n      isPageComponent: true,\n      availableInBundles: [RX_APPLICATION.settingsBundleId]\n    });\n  }\n}\n","import { RX_RECORD_DEFINITION } from '@helix/platform/record/api';\n\nconst aliasTypeFieldId = 56150;\nconst aliasTypeDefaultValue = 'email';\nconst incomingMailboxType = 0;\nconst outgoingMailboxType = 1;\n\nexport const RX_EMAIL_PROFILES = {\n  aliasMapping: {\n    recordDefinitionName: 'Alias Mapping',\n    queryExpression: `'${aliasTypeFieldId}' = \"${aliasTypeDefaultValue}\"`,\n    fieldIds: {\n      aliasType: {\n        id: aliasTypeFieldId,\n        defaultValue: aliasTypeDefaultValue\n      },\n      applicationId: 56151,\n      applicationName: 56152,\n      aliasName: 56153,\n      aliasValue: 56154,\n      description: RX_RECORD_DEFINITION.coreFieldIds.description,\n      assignee: RX_RECORD_DEFINITION.coreFieldIds.assignee,\n      status: RX_RECORD_DEFINITION.coreFieldIds.status\n    },\n    mailboxType: {\n      outgoing: 0,\n      incoming: 1\n    },\n    status: {\n      new: 0,\n      assigned: 1\n    }\n  },\n  mailbox: {\n    recordDefinitionName: 'AR System Email Mailbox Configuration',\n    queryExpression: `'${RX_RECORD_DEFINITION.coreFieldIds.status}' = \"0\"`,\n    fieldIds: {\n      mailboxName: {\n        id: 18037,\n        label: 'Mailbox name'\n      },\n      mailboxFunction: 18049\n    },\n    mailboxFunctions: {\n      incoming: {\n        id: incomingMailboxType,\n        label: 'com.bmc.arsys.rx.client.admin.email-profiles.incoming-mailbox.label',\n        value: String(incomingMailboxType)\n      },\n      outgoing: {\n        id: outgoingMailboxType,\n        label: 'com.bmc.arsys.rx.client.admin.email-profiles.outgoing-mailbox.label',\n        value: String(outgoingMailboxType)\n      }\n    }\n  }\n};\n","import { Component, Injector, OnDestroy, OnInit } from '@angular/core';\nimport { FormBuilder, FormGroup } from '@angular/forms';\nimport { DismissReasons, DockedPanelContext, RxSelectOption } from '@bmc-ux/adapt-angular';\nimport { RX_RECORD_DEFINITION, RxRecordInstanceDataPageService } from '@helix/platform/record/api';\nimport { IBundleDescriptor, RX_APPLICATION, RxGlobalCacheService } from '@helix/platform/shared/api';\nimport { RxModalClass } from '@helix/platform/ui-kit';\nimport { filter, includes, reject } from 'lodash';\nimport { forkJoin, Subscription } from 'rxjs';\nimport { RX_EMAIL_PROFILES } from '../email-profiles.constant';\nimport { IEmailProfile } from '../email-profiles.interfaces';\n\n@Component({\n  selector: 'rx-create-email-profile',\n  templateUrl: './create-email-profile.component.html'\n})\nexport class CreateEmailProfileComponent extends RxModalClass implements OnInit, OnDestroy {\n  emailProfile: IEmailProfile;\n  createEmailProfileFormGroup: FormGroup;\n  mailboxFunctions = RX_EMAIL_PROFILES.mailbox.mailboxFunctions;\n  bundleOptions: RxSelectOption[] = [];\n  mailboxOptions: RxSelectOption[] = [];\n  availableMailboxOptions: RxSelectOption[] = [];\n  validDefinitionNameRegex = RX_RECORD_DEFINITION.validDefinitionNameRegex;\n\n  private subscription = new Subscription();\n\n  constructor(\n    private formBuilder: FormBuilder,\n    private rxGlobalCacheService: RxGlobalCacheService,\n    private rxRecordInstanceDataPageService: RxRecordInstanceDataPageService,\n    private dockedPanelContext: DockedPanelContext,\n    protected injector: Injector\n  ) {\n    super(dockedPanelContext, injector);\n  }\n\n  ngOnInit(): void {\n    super.ngOnInit();\n    this.emailProfile = this.dockedPanelContext.getData().profile;\n\n    this.createEmailProfileFormGroup = this.formBuilder.group({\n      profileName: '',\n      mailboxFunction: this.mailboxFunctions.incoming.value,\n      mailbox: [],\n      application: []\n    });\n\n    forkJoin({\n      bundleDescriptors: this.rxGlobalCacheService.getBundleDescriptors(),\n      mailboxes: this.rxRecordInstanceDataPageService.post({\n        params: {\n          recorddefinition: RX_EMAIL_PROFILES.mailbox.recordDefinitionName,\n          queryExpression: RX_EMAIL_PROFILES.mailbox.queryExpression\n        }\n      })\n    }).subscribe((result) => {\n      this.bundleOptions = reject(result.bundleDescriptors, (bundleDescriptor: IBundleDescriptor) => {\n        return includes(\n          [RX_APPLICATION.innovationStudioBundleId, RX_APPLICATION.platformBundleId],\n          bundleDescriptor.id\n        );\n      }).sort((a: IBundleDescriptor, b: IBundleDescriptor) => a.friendlyName.localeCompare(b.friendlyName));\n\n      this.availableMailboxOptions = result.mailboxes.data;\n\n      if (this.emailProfile) {\n        this.createEmailProfileFormGroup.controls.mailboxFunction.disable();\n        this.loadEmailProfileData();\n      } else {\n        this.filterMailboxes(this.mailboxFunctions.incoming.value);\n      }\n\n      this.subscription = this.createEmailProfileFormGroup\n        .get('mailboxFunction')\n        .valueChanges.subscribe((mailboxFunctionName) => {\n          this.createEmailProfileFormGroup.controls.mailbox.setValue([]);\n          this.filterMailboxes(mailboxFunctionName);\n        });\n    });\n  }\n\n  isDirty(): boolean {\n    return this.createEmailProfileFormGroup.dirty;\n  }\n\n  ngOnDestroy(): void {\n    this.subscription.unsubscribe();\n  }\n\n  private filterMailboxes(mailBoxFunctionName: string): void {\n    this.mailboxOptions = filter(this.availableMailboxOptions, (mailbox: RxSelectOption) => {\n      return mailbox[RX_EMAIL_PROFILES.mailbox.fieldIds.mailboxFunction] === parseInt(mailBoxFunctionName, 10);\n    });\n  }\n\n  private loadEmailProfileData(): void {\n    let selectedMailboxType = '';\n\n    if (this.emailProfile.mailboxType === RX_EMAIL_PROFILES.mailbox.mailboxFunctions.incoming.id) {\n      selectedMailboxType = this.mailboxFunctions.incoming.value;\n    } else if (this.emailProfile.mailboxType === RX_EMAIL_PROFILES.mailbox.mailboxFunctions.outgoing.id) {\n      selectedMailboxType = this.mailboxFunctions.outgoing.value;\n    }\n\n    this.filterMailboxes(selectedMailboxType);\n\n    const selectedApplication: RxSelectOption = this.bundleOptions.find(\n      (bundle) => bundle.id === this.emailProfile.application\n    );\n\n    const selectedMailbox: RxSelectOption = this.availableMailboxOptions.find(\n      (mailbox) => mailbox[RX_RECORD_DEFINITION.coreFieldIds.id] === this.emailProfile.mailbox\n    );\n\n    this.createEmailProfileFormGroup.patchValue({\n      profileName: this.emailProfile.profileName,\n      mailboxFunction: selectedMailboxType,\n      mailbox: selectedMailbox ? [selectedMailbox] : [],\n      application: selectedApplication ? [selectedApplication] : []\n    });\n  }\n\n  bundleNameFormatter(bundleOption: RxSelectOption): string {\n    return bundleOption.friendlyName;\n  }\n\n  mailboxNameFormatter(mailboxOption: RxSelectOption): string {\n    return mailboxOption[RX_EMAIL_PROFILES.mailbox.fieldIds.mailboxName.id];\n  }\n\n  save(): void {\n    this.dockedPanelContext.close(this.createEmailProfileFormGroup.getRawValue());\n  }\n\n  cancel(): void {\n    this.dockedPanelContext.dismiss(DismissReasons.CLOSE_BTN);\n  }\n}\n","<div class=\"dp-body\">\n  <form [formGroup]=\"createEmailProfileFormGroup\">\n    <adapt-rx-textfield\n      class=\"d-block form-group\"\n      rx-id=\"profile-name\"\n      formControlName=\"profileName\"\n      label=\"{{ 'com.bmc.arsys.rx.client.admin.create-email-profile.profile-name.label' | translate }}\"\n      required\n      maxlength=\"254\"\n      [pattern]=\"validDefinitionNameRegex\"\n    ></adapt-rx-textfield>\n\n    <adapt-rx-radiobutton-group\n      class=\"d-block form-group\"\n      rx-id=\"mailbox-function\"\n      label=\"{{ 'com.bmc.arsys.rx.client.admin.create-email-profile.mailbox-function.label' | translate }}\"\n      required\n      [formControl]=\"createEmailProfileFormGroup.controls.mailboxFunction\"\n    >\n      <adapt-rx-radiobutton\n        class=\"mb-0 mt-0 radio-inline\"\n        *ngFor=\"let mailboxFunction of mailboxFunctions | keyvalue\"\n        [value]=\"mailboxFunction.value.value\"\n        [label]=\"mailboxFunction.value.label | translate\"\n      ></adapt-rx-radiobutton>\n    </adapt-rx-radiobutton-group>\n\n    <adapt-rx-select\n      class=\"d-block form-group\"\n      formControlName=\"mailbox\"\n      label=\"{{ 'com.bmc.arsys.rx.client.admin.create-email-profile.mailbox.label' | translate }}\"\n      rx-id=\"mailbox\"\n      required\n      [options]=\"mailboxOptions\"\n      [optionFormatter]=\"mailboxNameFormatter\"\n    ></adapt-rx-select>\n\n    <adapt-rx-select\n      class=\"d-block form-group\"\n      emptyOption=\"true\"\n      formControlName=\"application\"\n      label=\"{{ 'com.bmc.arsys.rx.client.admin.create-email-profile.application.label' | translate }}\"\n      rx-id=\"application\"\n      [options]=\"bundleOptions\"\n      [optionFormatter]=\"bundleNameFormatter\"\n    ></adapt-rx-select>\n  </form>\n</div>\n\n<div class=\"dp-footer\">\n  <button\n    adapt-button\n    type=\"button\"\n    btn-type=\"primary\"\n    class=\"mr-2\"\n    rx-id=\"save-button\"\n    [disabled]=\"createEmailProfileFormGroup.invalid || createEmailProfileFormGroup.pristine\"\n    (click)=\"save()\"\n  >\n    {{ 'com.bmc.arsys.rx.client.common.save.label' | translate }}\n  </button>\n  <button adapt-button type=\"button\" btn-type=\"secondary\" rx-id=\"close-button\" class=\"mr-2\" (click)=\"cancel()\">\n    {{ 'com.bmc.arsys.rx.client.common.cancel.label' | translate }}\n  </button>\n</div>\n","import { Injectable } from '@angular/core';\nimport { RxRecordInstanceService } from '@helix/platform/record/api';\nimport { map } from 'lodash';\nimport { forkJoin, Observable } from 'rxjs';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class RxEmailProfilesService {\n  constructor(private rxRecordInstanceService: RxRecordInstanceService) {}\n\n  deleteEmailProfiles(recordDefinitionName: string, recordInstanceIds: string[]): Observable<any[]> {\n    return forkJoin(\n      map(recordInstanceIds, (id) => {\n        return this.rxRecordInstanceService.delete(recordDefinitionName, id);\n      })\n    );\n  }\n}\n","import { Component, OnInit, TemplateRef, ViewChild } from '@angular/core';\nimport { DataCellTemplateParams } from '@bmc-ux/adapt-table';\nimport {\n  IRecordDefinition,\n  RecordInstance,\n  RX_RECORD_DEFINITION,\n  RxRecordInstanceDataPageService,\n  RxRecordInstanceService\n} from '@helix/platform/record/api';\nimport { IDataPageResult, RxNotificationService } from '@helix/platform/shared/api';\nimport { RX_MODAL, RxModalService } from '@helix/platform/ui-kit';\nimport { IRowDataItem } from '@helix/platform/view/api';\nimport {\n  IRecordGridActionButton,\n  IRecordGridColumn,\n  IRecordGridConfig,\n  IRecordGridDataPageParams,\n  RecordGridComponent\n} from '@helix/platform/view/components';\nimport { find, get, isEmpty, map as _map, noop, parseInt, transform } from 'lodash';\nimport { Observable, of } from 'rxjs';\nimport { map, switchMap } from 'rxjs/operators';\nimport { CreateEmailProfileComponent } from './create-email-profile/create-email-profile.component';\nimport { RX_EMAIL_PROFILES } from './email-profiles.constant';\nimport { IEmailProfile } from './email-profiles.interfaces';\nimport { RxEmailProfilesService } from './email-profiles.service';\nimport { TranslateService } from '@ngx-translate/core';\n\n@Component({\n  selector: 'rx-admin-email-profiles',\n  templateUrl: './email-profiles.component.html'\n})\nexport class EmailProfilesAdminComponent implements OnInit {\n  constructor(\n    private rxRecordInstanceDataPageService: RxRecordInstanceDataPageService,\n    private rxRecordInstanceService: RxRecordInstanceService,\n    private rxNotificationService: RxNotificationService,\n    private rxModalService: RxModalService,\n    private rxEmailProfilesService: RxEmailProfilesService,\n    private translateService: TranslateService\n  ) {}\n\n  @ViewChild('emailProfilesGrid')\n  emailProfilesGrid: RecordGridComponent;\n\n  @ViewChild('mailboxFunctionCellTemplate', { static: true })\n  mailboxFunctionCellTemplate: TemplateRef<DataCellTemplateParams>;\n\n  currentRecordInstance: Observable<RecordInstance>;\n  emailProfilesGridConfig$: Observable<IRecordGridConfig>;\n\n  ngOnInit(): void {\n    const gridColumns: IRecordGridColumn[] = [\n      {\n        fieldId: `${RX_RECORD_DEFINITION.coreFieldIds.id}`,\n        index: 0,\n        title: this.translateService.instant('com.bmc.arsys.rx.client.common.id.label'),\n        visible: false\n      },\n      {\n        fieldId: `${RX_EMAIL_PROFILES.aliasMapping.fieldIds.aliasName}`,\n        index: 1,\n        title: this.translateService.instant('com.bmc.arsys.rx.client.admin.create-email-profile.profile-name.label'),\n        clickable: true,\n        actions: [\n          {\n            name: (previousActionResult: any, selectedRow: IRowDataItem) => {\n              this.currentRecordInstance = this.rxRecordInstanceService.get(\n                RX_EMAIL_PROFILES.aliasMapping.recordDefinitionName,\n                selectedRow[RX_RECORD_DEFINITION.coreFieldIds.id]\n              );\n\n              const profileData: IEmailProfile = {\n                profileName: selectedRow[RX_EMAIL_PROFILES.aliasMapping.fieldIds.aliasName],\n                mailbox: selectedRow[RX_EMAIL_PROFILES.aliasMapping.fieldIds.aliasValue],\n                application: selectedRow[RX_EMAIL_PROFILES.aliasMapping.fieldIds.applicationId],\n                mailboxType: (() => {\n                  const assignee = parseInt(selectedRow[RX_EMAIL_PROFILES.aliasMapping.fieldIds.assignee], 10);\n\n                  return _map(\n                    RX_EMAIL_PROFILES.mailbox.mailboxFunctions,\n                    (mailboxFunction) => mailboxFunction.id\n                  ).includes(assignee)\n                    ? assignee\n                    : null;\n                })()\n              };\n\n              this.createEmailProfile(profileData);\n            }\n          }\n        ]\n      },\n      {\n        fieldId: `${RX_EMAIL_PROFILES.aliasMapping.fieldIds.description}`,\n        index: 2,\n        title: this.translateService.instant('com.bmc.arsys.rx.client.admin.create-email-profile.mailbox.label'),\n        sortable: false,\n        filterable: false\n      },\n      {\n        fieldId: `${RX_EMAIL_PROFILES.aliasMapping.fieldIds.assignee}`,\n        index: 3,\n        title: this.translateService.instant(\n          'com.bmc.arsys.rx.client.admin.create-email-profile.mailbox-function.label'\n        ),\n        sortable: false,\n        filterable: false,\n        cellTemplate: this.mailboxFunctionCellTemplate\n      },\n      {\n        fieldId: `${RX_EMAIL_PROFILES.aliasMapping.fieldIds.aliasValue}`,\n        index: 4,\n        title: this.translateService.instant('com.bmc.arsys.rx.client.admin.email-profiles.outgoing-mailbox-id.label'),\n        visible: false\n      },\n      {\n        fieldId: `${RX_EMAIL_PROFILES.aliasMapping.fieldIds.applicationName}`,\n        index: 5,\n        title: this.translateService.instant('com.bmc.arsys.rx.client.admin.create-email-profile.application.label')\n      }\n    ];\n\n    const recordDefinition: IRecordDefinition = {\n      fieldDefinitions: [\n        {\n          id: RX_RECORD_DEFINITION.coreFieldIds.description,\n          resourceType: RX_RECORD_DEFINITION.resourceTypes.character\n        },\n        {\n          id: RX_EMAIL_PROFILES.aliasMapping.fieldIds.assignee,\n          resourceType: RX_RECORD_DEFINITION.resourceTypes.character\n        },\n        {\n          id: RX_RECORD_DEFINITION.coreFieldIds.id,\n          resourceType: RX_RECORD_DEFINITION.resourceTypes.character\n        },\n        {\n          id: RX_EMAIL_PROFILES.aliasMapping.fieldIds.aliasName,\n          resourceType: RX_RECORD_DEFINITION.resourceTypes.character\n        },\n        {\n          id: RX_EMAIL_PROFILES.aliasMapping.fieldIds.applicationName,\n          resourceType: RX_RECORD_DEFINITION.resourceTypes.character\n        },\n        {\n          id: RX_EMAIL_PROFILES.aliasMapping.fieldIds.aliasValue,\n          resourceType: RX_RECORD_DEFINITION.resourceTypes.character\n        }\n      ]\n    };\n\n    const actionButtons: IRecordGridActionButton[] = [\n      {\n        label: 'Delete',\n        style: 'tertiary',\n        icon: 'trash',\n        actions: [\n          {\n            name: () => {\n              this.rxModalService\n                .confirm({\n                  title: this.translateService.instant('com.bmc.arsys.rx.client.common.warning.label'),\n                  modalStyle: RX_MODAL.modalStyles.warning,\n                  message: this.translateService.instant(\n                    'com.bmc.arsys.rx.client.admin.email-profiles.delete-confirmation.message'\n                  )\n                })\n                .then((response) => {\n                  if (response) {\n                    const selectedEmailProfiles = this.emailProfilesGrid.api.getSelectedRows();\n                    const selectedEmailProfileIds = _map(selectedEmailProfiles, RX_RECORD_DEFINITION.coreFieldIds.id);\n\n                    this.rxEmailProfilesService\n                      .deleteEmailProfiles(RX_EMAIL_PROFILES.aliasMapping.recordDefinitionName, selectedEmailProfileIds)\n                      .subscribe(() => {\n                        this.rxNotificationService.addSuccessMessage(\n                          this.translateService.instant(\n                            'com.bmc.arsys.rx.client.admin.email-profiles.deleted-email-profile.message'\n                          )\n                        );\n                        this.refreshEmailProfilesGrid();\n                      });\n                  }\n                });\n            }\n          }\n        ]\n      }\n    ];\n\n    this.emailProfilesGridConfig$ = of({\n      enableFiltering: true,\n      columns: gridColumns,\n      getRecordDefinition: () => of(recordDefinition),\n      actionButtons: actionButtons,\n      getData: this.getData,\n      styles: 'flex-fill'\n    });\n  }\n\n  private getData = (queryParams: IRecordGridDataPageParams): Observable<IDataPageResult> => {\n    delete queryParams.searchText;\n    delete queryParams.shouldIncludeTotalSize;\n\n    queryParams.recorddefinition = RX_EMAIL_PROFILES.aliasMapping.recordDefinitionName;\n\n    queryParams.propertySelection.push(\n      `${RX_RECORD_DEFINITION.coreFieldIds.status}`,\n      `${RX_EMAIL_PROFILES.aliasMapping.fieldIds.applicationId}`\n    );\n\n    if (!queryParams.queryExpression) {\n      queryParams.queryExpression = RX_EMAIL_PROFILES.aliasMapping.queryExpression;\n    } else {\n      queryParams.queryExpression += `AND ${RX_EMAIL_PROFILES.aliasMapping.queryExpression}`;\n    }\n\n    return this.rxRecordInstanceDataPageService.post({ params: queryParams }).pipe(\n      switchMap((aliasMappings: IDataPageResult) => {\n        if (aliasMappings.totalSize === 0) {\n          return of(aliasMappings);\n        } else {\n          let expression = '';\n\n          aliasMappings.data.forEach((aliasMapping) => {\n            if (aliasMapping[RX_EMAIL_PROFILES.aliasMapping.fieldIds.aliasValue] !== null) {\n              if (!isEmpty(expression)) {\n                expression += ' OR ';\n              }\n\n              expression += `'${RX_RECORD_DEFINITION.coreFieldIds.id}' = \"${\n                aliasMapping[RX_EMAIL_PROFILES.aliasMapping.fieldIds.aliasValue]\n              }\"`;\n            }\n          });\n\n          const query = {\n            queryExpression: RX_EMAIL_PROFILES.mailbox.queryExpression,\n            recorddefinition: RX_EMAIL_PROFILES.mailbox.recordDefinitionName\n          };\n\n          if (!isEmpty(expression)) {\n            query.queryExpression += ` AND ((${expression}))`;\n          }\n\n          return this.rxRecordInstanceDataPageService.post({ params: query }).pipe(\n            map((outgoingMailboxes: IDataPageResult) => {\n              if (outgoingMailboxes.totalSize === 0) {\n                return aliasMappings;\n              } else {\n                outgoingMailboxes.data.forEach((outgoingMailbox) => {\n                  aliasMappings.data = transform(\n                    aliasMappings.data,\n                    (result, value) => {\n                      if (\n                        value[RX_EMAIL_PROFILES.aliasMapping.fieldIds.aliasValue] ===\n                        outgoingMailbox[RX_RECORD_DEFINITION.coreFieldIds.id]\n                      ) {\n                        value[RX_EMAIL_PROFILES.aliasMapping.fieldIds.description] =\n                          outgoingMailbox[RX_EMAIL_PROFILES.mailbox.fieldIds.mailboxName.id];\n\n                        value[RX_EMAIL_PROFILES.aliasMapping.fieldIds.assignee] =\n                          outgoingMailbox[RX_EMAIL_PROFILES.mailbox.fieldIds.mailboxFunction];\n                      }\n\n                      result.push(value);\n                    },\n                    []\n                  );\n                });\n\n                return aliasMappings;\n              }\n            })\n          );\n        }\n      })\n    );\n  };\n\n  createEmailProfile(profile?: IEmailProfile): void {\n    this.rxModalService\n      .openDockedPanel({\n        title: profile\n          ? this.translateService.instant('com.bmc.arsys.rx.client.admin.email-profiles.update-email-profile.message')\n          : this.translateService.instant('com.bmc.arsys.rx.client.admin.email-profiles.add-new-email-profile.message'),\n        content: CreateEmailProfileComponent,\n        size: 'lg',\n        data: {\n          profile\n        }\n      })\n      .then((emailProfile) => {\n        if (!profile) {\n          this.currentRecordInstance = this.rxRecordInstanceService.getNew(\n            RX_EMAIL_PROFILES.aliasMapping.recordDefinitionName\n          );\n        }\n\n        return this.currentRecordInstance\n          .pipe(\n            map((recordInstance) => {\n              recordInstance.setFieldValue(\n                RX_EMAIL_PROFILES.aliasMapping.fieldIds.aliasType.id,\n                this.translateService.instant(RX_EMAIL_PROFILES.aliasMapping.fieldIds.aliasType.defaultValue)\n              );\n\n              recordInstance.setFieldValue(RX_EMAIL_PROFILES.aliasMapping.fieldIds.aliasName, emailProfile.profileName);\n\n              recordInstance.setFieldValue(\n                RX_EMAIL_PROFILES.aliasMapping.fieldIds.applicationId,\n                get(emailProfile, 'application[0].id', 'None')\n              );\n\n              recordInstance.setFieldValue(\n                RX_EMAIL_PROFILES.aliasMapping.fieldIds.applicationName,\n                get(emailProfile, 'application[0].name', 'None')\n              );\n\n              recordInstance.setFieldValue(\n                RX_EMAIL_PROFILES.aliasMapping.fieldIds.aliasValue,\n                emailProfile.mailbox[0][RX_RECORD_DEFINITION.coreFieldIds.id]\n              );\n\n              recordInstance.setFieldValue(RX_EMAIL_PROFILES.aliasMapping.fieldIds.description, 'Email profile');\n\n              recordInstance.setFieldValue(\n                RX_EMAIL_PROFILES.aliasMapping.fieldIds.status,\n                parseInt(emailProfile.mailboxFunction, 10) === RX_EMAIL_PROFILES.mailbox.mailboxFunctions.outgoing.id\n                  ? RX_EMAIL_PROFILES.aliasMapping.status.new\n                  : RX_EMAIL_PROFILES.aliasMapping.status.assigned\n              );\n\n              return recordInstance;\n            }),\n            switchMap((recordInstance) => {\n              if (profile) {\n                return this.rxRecordInstanceService.save(recordInstance);\n              } else {\n                return this.rxRecordInstanceService.create(recordInstance);\n              }\n            })\n          )\n          .subscribe(() => {\n            this.refreshEmailProfilesGrid();\n            this.rxNotificationService.addSuccessMessage(\n              this.translateService.instant('com.bmc.arsys.rx.client.admin.email-profiles.saved-email-profile.message')\n            );\n          });\n      })\n      .catch(noop);\n  }\n\n  private refreshEmailProfilesGrid(): void {\n    this.emailProfilesGrid.api.refresh().subscribe();\n  }\n\n  getMailboxFunctionType(dataItem: IRowDataItem): string {\n    const mailbox = find(\n      RX_EMAIL_PROFILES.mailbox.mailboxFunctions,\n      (mailboxFunction) => mailboxFunction.id === dataItem[RX_EMAIL_PROFILES.aliasMapping.fieldIds.assignee]\n    );\n\n    return mailbox ? this.translateService.instant(mailbox.label) : 'None';\n  }\n}\n","<rx-admin-settings header=\"{{ 'com.bmc.arsys.rx.client.admin.email-profiles.header.title' | translate }}\">\n  <div>\n    <button\n      adapt-button\n      type=\"button\"\n      btn-type=\"tertiary\"\n      class=\"d-icon-left-plus_circle\"\n      rx-id=\"new-email-profile-button\"\n      (click)=\"createEmailProfile()\"\n    >\n      {{ 'com.bmc.arsys.rx.client.common.new.label' | translate }}\n    </button>\n  </div>\n  <rx-record-grid rx-id=\"email-profile-grid\" #emailProfilesGrid [config]=\"emailProfilesGridConfig$\"></rx-record-grid>\n</rx-admin-settings>\n\n<ng-template #mailboxFunctionCellTemplate let-dataItem=\"dataItem\">\n  <div>\n    {{ getMailboxFunctionType(dataItem) }}\n  </div>\n</ng-template>\n","import { NgModule, ComponentFactoryResolver } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { EmailProfilesAdminComponent } from './email-profiles.component';\nimport { RxViewComponentRegistryService } from '@helix/platform/view/api';\nimport { RX_APPLICATION } from '@helix/platform/shared/api';\nimport { RecordGridModule } from '@helix/platform/view/components';\nimport { AdminSettingsModule } from '@helix/platform/shared/components';\nimport { CreateEmailProfileComponent } from './create-email-profile/create-email-profile.component';\nimport {\n  AdaptButtonModule,\n  AdaptRxRadiobuttonModule,\n  AdaptRxSelectModule,\n  AdaptRxTextfieldModule\n} from '@bmc-ux/adapt-angular';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\nimport { TranslateModule } from '@ngx-translate/core';\n\n@NgModule({\n  declarations: [EmailProfilesAdminComponent, CreateEmailProfileComponent],\n  imports: [\n    AdminSettingsModule,\n    CommonModule,\n    RecordGridModule,\n    AdaptRxTextfieldModule,\n    AdaptRxRadiobuttonModule,\n    AdaptRxSelectModule,\n    FormsModule,\n    ReactiveFormsModule,\n    AdaptButtonModule,\n    TranslateModule\n  ],\n  entryComponents: [EmailProfilesAdminComponent, CreateEmailProfileComponent]\n})\nexport class EmailProfilesRegistrationModule {\n  constructor(\n    private componentFactoryResolver: ComponentFactoryResolver,\n    private rxViewComponentRegistryService: RxViewComponentRegistryService\n  ) {\n    rxViewComponentRegistryService.register({\n      type: 'rx-admin-email-profiles',\n      componentFactory: this.componentFactoryResolver.resolveComponentFactory(EmailProfilesAdminComponent),\n      name: 'Email profiles',\n      isPageComponent: true,\n      availableInBundles: [RX_APPLICATION.settingsBundleId]\n    });\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\nimport { forkJoin, Observable } from 'rxjs';\nimport { IFunctionalRole, IFunctionalRoleDescriptor } from '@helix/platform/shared/api';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class RxFuntionalRoleService {\n  private path = '/api/rx/application/functionalrole';\n\n  constructor(private httpClient: HttpClient) {}\n\n  private getUrl(functionalRoleDescriptor: IFunctionalRoleDescriptor): string {\n    return `${this.path}/${encodeURIComponent(functionalRoleDescriptor.applicationName)}/${encodeURIComponent(\n      functionalRoleDescriptor.name\n    )}`;\n  }\n\n  get(functionalRoleDescriptor: IFunctionalRoleDescriptor): Observable<IFunctionalRole> {\n    return <Observable<IFunctionalRole>>this.httpClient.get(this.getUrl(functionalRoleDescriptor));\n  }\n\n  private deleteFunctionalRole(functionalRoleDescriptor: IFunctionalRoleDescriptor): Observable<any> {\n    return this.httpClient.delete(this.getUrl(functionalRoleDescriptor));\n  }\n\n  delete(roles: IFunctionalRoleDescriptor[]): Observable<any> {\n    const deleteObservables = roles.map((role) => this.deleteFunctionalRole(role));\n\n    return forkJoin(deleteObservables);\n  }\n\n  create(functionalRole: IFunctionalRole): Observable<any> {\n    return this.httpClient.post(this.path, functionalRole);\n  }\n\n  save(functionalRole: IFunctionalRole, roleName: string): Observable<any> {\n    return this.httpClient.put(\n      this.getUrl({ applicationName: functionalRole.applicationName, name: roleName }),\n      functionalRole\n    );\n  }\n}\n","import { Component, Injector, OnDestroy, OnInit, ViewChild } from '@angular/core';\nimport { AbstractControl, NgForm, ValidationErrors } from '@angular/forms';\nimport { ActiveModalRef, AdaptTreeNodeTyped, DismissReasons, RxSelectOption, TreeWrap } from '@bmc-ux/adapt-angular';\nimport {\n  IBundleDescriptor,\n  IFunctionalRole,\n  IFunctionalRoleDescriptor,\n  IRole,\n  RX_APPLICATION,\n  RxGlobalCacheService,\n  RxNotificationService,\n  RxRoleDataPageService\n} from '@helix/platform/shared/api';\nimport { RxModalClass } from '@helix/platform/ui-kit';\nimport { chain, filter, find, has, map as _map } from 'lodash';\nimport { forkJoin, ReplaySubject, Subscription } from 'rxjs';\nimport { distinctUntilChanged, finalize, takeUntil } from 'rxjs/operators';\nimport { RxFuntionalRoleService } from '../functional-role.service';\nimport { TranslateService } from '@ngx-translate/core';\nimport { RX_RECORD_DEFINITION } from '@helix/platform/record/api';\n\n@Component({\n  selector: 'rx-functional-role-editor',\n  templateUrl: './functional-role-editor.component.html',\n  styleUrls: ['./functional-role-editor.component.scss']\n})\nexport class FunctionalRoleEditorComponent extends RxModalClass implements OnInit, OnDestroy {\n  applicationOptions: RxSelectOption[];\n  availableRoles: AdaptTreeNodeTyped<IFunctionalRoleDescriptor>[] = [];\n  busy: Subscription;\n  functionalRole: IFunctionalRole;\n  isEditMode = false;\n  isSaveButtonDisabled = true;\n  selectedApplication: RxSelectOption;\n\n  private oldRoleName: string;\n  private selectedRolesList: AdaptTreeNodeTyped<IFunctionalRoleDescriptor>[] = [];\n  private destroyed$: ReplaySubject<boolean> = new ReplaySubject(1);\n  treeWrap: TreeWrap = TreeWrap.WrapAll;\n\n  @ViewChild('functionalRoleEditorForm', { read: NgForm, static: true })\n  functionalRoleEditorForm: NgForm;\n\n  validatorFn = this.functionalRoleNameValidator.bind(this);\n\n  constructor(\n    private rxGlobalCacheService: RxGlobalCacheService,\n    private activeModalRef: ActiveModalRef,\n    private rxRoleDataPage: RxRoleDataPageService,\n    private rxFuntionalRoleService: RxFuntionalRoleService,\n    private rxNotificationService: RxNotificationService,\n    private translateService: TranslateService,\n    protected injector: Injector\n  ) {\n    super(activeModalRef, injector);\n  }\n\n  get selectedRoles(): AdaptTreeNodeTyped<IFunctionalRoleDescriptor>[] {\n    return this.selectedRolesList;\n  }\n\n  set selectedRoles(roles: AdaptTreeNodeTyped<IFunctionalRoleDescriptor>[]) {\n    this.selectedRolesList = roles;\n    this.isSaveButtonDisabled = !this.functionalRoleEditorForm.valid;\n  }\n\n  ngOnInit(): void {\n    super.ngOnInit();\n\n    const roleQueryParams = {\n      propertySelection: ['applicationName', 'roleName'].join(','),\n      includeSmartAppRolesOnly: true\n    };\n\n    const excludedBundles = [\n      RX_APPLICATION.innovationStudioBundleId,\n      RX_APPLICATION.standardlib,\n      RX_APPLICATION.settingsBundleId,\n      RX_APPLICATION.platformBundleId\n    ];\n\n    const startIndex = 0;\n    const pageSize = -1;\n\n    this.functionalRole = this.activeModalRef.getData().functionalRole;\n    this.isEditMode = Boolean(this.functionalRole.id);\n\n    this.busy = forkJoin([\n      this.rxRoleDataPage.get({\n        params: { startIndex, pageSize, ...roleQueryParams }\n      }),\n      this.rxGlobalCacheService.getBundleDescriptors()\n    ]).subscribe(([roleDataPage, bundleDescriptors]) => {\n      this.applicationOptions = bundleDescriptors\n        .filter((bundleDescriptor) => !excludedBundles.includes(bundleDescriptor.id))\n        .sort((bundleDescriptor: IBundleDescriptor, bundleDescriptorToCompare: IBundleDescriptor) =>\n          bundleDescriptor.friendlyName.localeCompare(bundleDescriptorToCompare.friendlyName)\n        )\n        .map((bundleDescriptor: IBundleDescriptor) => ({\n          displayValue: bundleDescriptor.friendlyName,\n          value: bundleDescriptor.id\n        }));\n\n      if (!this.isEditMode) {\n        this.selectedApplication = [this.applicationOptions[0]];\n      } else {\n        let selectedApplication = find(this.applicationOptions, { value: this.functionalRole.applicationName });\n\n        if (!selectedApplication) {\n          selectedApplication = {\n            displayValue: this.functionalRole.applicationName,\n            value: this.functionalRole.applicationName\n          };\n\n          this.applicationOptions.push(selectedApplication);\n        }\n\n        this.selectedApplication = [selectedApplication];\n        this.oldRoleName = this.functionalRole.name;\n      }\n\n      this.availableRoles = chain(roleDataPage.data)\n        .groupBy('applicationName')\n        .map((roles, application) => ({\n          children: this.getChildren(roles as IRole[]),\n          leaf: false,\n          label: find(bundleDescriptors, { id: application }).friendlyName,\n          key: application,\n          data: { name: '', applicationName: application }\n        }))\n        .value();\n\n      if (this.isEditMode) {\n        this.updateParentNodesForSelectedRoles();\n      }\n    });\n\n    this.functionalRoleEditorForm.statusChanges\n      .pipe(distinctUntilChanged(), takeUntil(this.destroyed$))\n      .subscribe((value) => {\n        this.isSaveButtonDisabled = !this.functionalRoleEditorForm.valid || this.functionalRoleEditorForm.pristine;\n      });\n\n    this.functionalRoleEditorForm.valueChanges\n      .pipe(distinctUntilChanged(), takeUntil(this.destroyed$))\n      .subscribe((value) => {\n        this.isSaveButtonDisabled = !this.functionalRoleEditorForm.valid || this.functionalRoleEditorForm.pristine;\n      });\n  }\n\n  isDirty(): boolean {\n    return this.functionalRoleEditorForm.dirty;\n  }\n\n  private getChildren(rolesForApplication: IRole[]): AdaptTreeNodeTyped<IFunctionalRoleDescriptor>[] {\n    return rolesForApplication.map((role): AdaptTreeNodeTyped<IFunctionalRoleDescriptor> => {\n      const node: AdaptTreeNodeTyped<IFunctionalRoleDescriptor> = {\n        children: null,\n        leaf: true,\n        label: role.roleName,\n        key: `${role.applicationName}:${role.roleName}`,\n        data: { name: role.roleName, applicationName: role.applicationName }\n      };\n\n      if (this.isEditMode) {\n        this.checkAndAddToSelectedRoles(node);\n      }\n\n      return node;\n    });\n  }\n\n  private checkAndAddToSelectedRoles(node: AdaptTreeNodeTyped<IFunctionalRoleDescriptor>) {\n    if (this.functionalRole.applicationRoles) {\n      if (has(this.functionalRole.applicationRoles, node.data.applicationName)) {\n        const selectedRolesList = this.functionalRole.applicationRoles[node.data.applicationName];\n\n        if (selectedRolesList.includes(node.data.name)) {\n          this.selectedRolesList.push(node);\n        }\n      }\n    }\n  }\n\n  private updateParentNodesForSelectedRoles() {\n    _map(this.selectedRolesList, (role) => {\n      const parentNode = find(\n        this.availableRoles,\n        (availableRole) => availableRole.data.applicationName === role.data.applicationName\n      );\n\n      const selectedChildNodes = filter(this.selectedRolesList, (selectedRole) =>\n        parentNode.children.find(\n          (child) =>\n            child.data.name === selectedRole.data.name &&\n            parentNode.data.applicationName === selectedRole.data.applicationName\n        )\n      );\n\n      if (selectedChildNodes.length === parentNode.children.length) {\n        if (!this.selectedRolesList.includes(parentNode)) {\n          this.selectedRolesList.push(parentNode);\n        }\n      } else {\n        parentNode.partialSelected = true;\n      }\n    });\n  }\n\n  optionFormatter(option: RxSelectOption): string {\n    return option.displayValue;\n  }\n\n  save(): void {\n    this.allowDismiss = false;\n    this.isSaveButtonDisabled = true;\n\n    if (!this.isEditMode) {\n      this.functionalRole.applicationName = this.selectedApplication[0].value;\n    }\n\n    const leafNodes = filter(this.selectedRolesList, (role) => role.leaf);\n\n    this.functionalRole.applicationRoles = chain(leafNodes)\n      .groupBy((role) => role.data.applicationName)\n      .map((roles, applicationName) => ({\n        [applicationName]: roles.map((role) => role.label)\n      }))\n      .reduce((applicationName, roles) => Object.assign(applicationName, roles), {})\n      .value();\n\n    const result$ = this.isEditMode\n      ? this.rxFuntionalRoleService.save(this.functionalRole, this.oldRoleName)\n      : this.rxFuntionalRoleService.create(this.functionalRole);\n\n    result$\n      .pipe(\n        finalize(() => {\n          this.allowDismiss = true;\n          this.isSaveButtonDisabled = false;\n        })\n      )\n      .subscribe(() => {\n        this.rxNotificationService.addSuccessMessage(\n          this.translateService.instant('com.bmc.arsys.rx.client.admin.functional-roles.functional-role-saved.label')\n        );\n\n        this.activeModalRef.close(true);\n      });\n  }\n\n  functionalRoleNameValidator(control: AbstractControl): ValidationErrors | null {\n    return control.value && !RX_RECORD_DEFINITION.validDefinitionNameRegex.test(control.value)\n      ? {\n          invalidRoleName: {\n            message: this.translateService.instant(\n              'com.bmc.arsys.rx.client.admin.functional-roles.functional-role-name-validation.message'\n            )\n          }\n        }\n      : null;\n  }\n\n  cancel(): void {\n    this.activeModalRef.dismiss(DismissReasons.CLOSE_BTN);\n  }\n\n  ngOnDestroy(): void {\n    this.destroyed$.next(true);\n    this.destroyed$.complete();\n  }\n}\n","<div class=\"modal-header\">\n  <h5 class=\"modal-title\">\n    {{\n      (isEditMode\n        ? 'com.bmc.arsys.rx.client.admin.functional-roles.edit-functional-role.label'\n        : 'com.bmc.arsys.rx.client.admin.functional-roles.create-functional-role.label'\n      ) | translate\n    }}\n  </h5>\n\n  <button class=\"close dp-close\" type=\"button\" rx-id=\"x-button\" [disabled]=\"!allowDismiss\" (click)=\"cancel()\"></button>\n</div>\n\n<div class=\"modal-body functional-role-editor-modal-body d-flex\">\n  <rx-busy-indicator [options]=\"{ busy: busy, loaderType: 'section' }\"></rx-busy-indicator>\n\n  <form #functionalRoleEditorForm=\"ngForm\" class=\"w-100\">\n    <div class=\"row h-100\" *ngIf=\"applicationOptions\">\n      <div class=\"col-6 d-flex flex-column mh-100 mt-2\">\n        <adapt-rx-select\n          class=\"form-group d-block\"\n          label=\"{{ 'com.bmc.arsys.rx.client.common.application-or-library.label' | translate }}\"\n          rx-id=\"application-name\"\n          [(ngModel)]=\"selectedApplication\"\n          [options]=\"applicationOptions\"\n          [optionFormatter]=\"optionFormatter\"\n          required=\"true\"\n          name=\"application\"\n          [readonly]=\"isEditMode\"\n        >\n        </adapt-rx-select>\n        <adapt-rx-textfield\n          rx-id=\"name\"\n          class=\"form-group d-block\"\n          label=\"{{ 'com.bmc.arsys.rx.client.admin.functional-roles.functional-role-name.label' | translate }}\"\n          required=\"true\"\n          [(ngModel)]=\"functionalRole.name\"\n          name=\"name\"\n          [rxCustomValidators]=\"validatorFn\"\n        >\n        </adapt-rx-textfield>\n        <adapt-rx-textfield\n          rx-id=\"description\"\n          class=\"form-group d-block\"\n          required=\"true\"\n          [(ngModel)]=\"functionalRole.description\"\n          label=\"{{ 'com.bmc.arsys.rx.client.common.description.label' | translate }}\"\n          name=\"description\"\n        ></adapt-rx-textfield>\n        <adapt-rx-textfield\n          *ngIf=\"isEditMode\"\n          rx-id=\"id\"\n          class=\"form-group d-block\"\n          [(ngModel)]=\"functionalRole.id\"\n          label=\"{{ 'com.bmc.arsys.rx.client.common.id.label' | translate }}\"\n          name=\"id\"\n          [readonly]=\"true\"\n          [disabledStyleForReadonlyState]=\"true\"\n        ></adapt-rx-textfield>\n      </div>\n      <div class=\"col-6 d-flex flex-column mh-100 mt-2\">\n        <adapt-rx-control-label label=\"Roles\"> </adapt-rx-control-label>\n        <div class=\"card roles-list-wrapper flex-grow-1\">\n          <div class=\"card-block\">\n            <adapt-tree\n              *ngIf=\"availableRoles.length\"\n              [value]=\"availableRoles\"\n              filter=\"true\"\n              selectionMode=\"checkbox\"\n              [(selection)]=\"selectedRoles\"\n              [wrap]=\"treeWrap\"\n            >\n            </adapt-tree>\n          </div>\n        </div>\n      </div>\n    </div>\n  </form>\n</div>\n<div class=\"modal-footer\">\n  <button\n    adapt-button\n    btn-type=\"primary\"\n    type=\"button\"\n    rx-id=\"save-button\"\n    (click)=\"save()\"\n    [adaptInlineLoader]=\"!allowDismiss\"\n    [disabled]=\"isSaveButtonDisabled || !allowDismiss\"\n  >\n    {{ 'com.bmc.arsys.rx.client.common.save.label' | translate }}\n  </button>\n  <button\n    adapt-button\n    btn-type=\"secondary\"\n    type=\"button\"\n    rx-id=\"cancel-button\"\n    (click)=\"cancel()\"\n    [disabled]=\"!allowDismiss\"\n  >\n    {{ 'com.bmc.arsys.rx.client.common.cancel.label' | translate }}\n  </button>\n</div>\n","export const RX_FUNCTIONAL_ROLES = {\n  recordDefinitionName: 'Functional Roles',\n  fieldIds: {\n    applicationName: 1720,\n    name: 1721\n  }\n};\n","import { Component, ViewChild } from '@angular/core';\nimport { RX_RECORD_DEFINITION } from '@helix/platform/record/api';\nimport { IFunctionalRole, RxNotificationService } from '@helix/platform/shared/api';\nimport { RX_MODAL, RxModalService } from '@helix/platform/ui-kit';\nimport { IRowDataItem } from '@helix/platform/view/api';\nimport {\n  IRecordGridActionButton,\n  IRecordGridColumn,\n  IRecordGridConfig,\n  RecordGridComponent\n} from '@helix/platform/view/components';\nimport { castArray, noop } from 'lodash';\nimport { Observable } from 'rxjs';\nimport { FunctionalRoleEditorComponent } from './functional-role-editor/functional-role-editor.component';\nimport { RxFuntionalRoleService } from './functional-role.service';\nimport { RX_FUNCTIONAL_ROLES } from './functional-roles.constant';\nimport { TranslateService } from '@ngx-translate/core';\n\n@Component({\n  selector: 'rx-admin-functional-roles',\n  templateUrl: './functional-roles.component.html'\n})\nexport class FunctionalRolesAdminComponent {\n  gridConfig$: Observable<IRecordGridConfig>;\n\n  @ViewChild('functionalRolesRecordGrid', { static: false })\n  functionalRolesRecordGrid: RecordGridComponent;\n\n  constructor(\n    private rxFuntionalRoleService: RxFuntionalRoleService,\n    private rxNotificationService: RxNotificationService,\n    private rxModalService: RxModalService,\n    private translateService: TranslateService\n  ) {\n    this.gridConfig$ = new Observable((observer) => {\n      observer.next({\n        recordDefinitionName: RX_FUNCTIONAL_ROLES.recordDefinitionName,\n        columns: this.getColumns(),\n        actionButtons: this.getActionButtons(),\n        styles: 'flex-fill'\n      });\n\n      observer.complete();\n    });\n  }\n\n  private getActionButtons(): IRecordGridActionButton[] {\n    return [\n      {\n        label: this.translateService.instant('com.bmc.arsys.rx.client.common.delete.label'),\n        style: 'tertiary',\n        iconCls: 'trash',\n        actions: [\n          {\n            name: () => {\n              this.rxModalService\n                .confirm({\n                  title: this.translateService.instant('com.bmc.arsys.rx.client.dialog.warning.label'),\n                  modalStyle: RX_MODAL.modalStyles.warning,\n                  message: this.translateService.instant(\n                    'com.bmc.arsys.rx.client.admin.functional-roles.functional-role-delete-confirmation.message'\n                  )\n                })\n                .then((response) => {\n                  if (response) {\n                    const selectedRecords = castArray(this.functionalRolesRecordGrid.api.getSelectedRows());\n\n                    const rolesToDelete = selectedRecords.map((record) => {\n                      return {\n                        applicationName: record[RX_FUNCTIONAL_ROLES.fieldIds.applicationName],\n                        name: record[RX_FUNCTIONAL_ROLES.fieldIds.name]\n                      };\n                    });\n\n                    this.rxFuntionalRoleService.delete(rolesToDelete).subscribe(() => {\n                      this.rxNotificationService.addSuccessMessage(\n                        this.translateService.instant(\n                          'com.bmc.arsys.rx.client.admin.functional-roles.functional-role-deleted.message'\n                        )\n                      );\n                      this.functionalRolesRecordGrid.api.refresh().subscribe();\n                    });\n                  }\n                });\n            }\n          }\n        ]\n      }\n    ];\n  }\n\n  private getColumns(): IRecordGridColumn[] {\n    return [\n      {\n        fieldId: `${RX_FUNCTIONAL_ROLES.fieldIds.name}`,\n        index: 0,\n        title: this.translateService.instant('com.bmc.arsys.rx.client.common.name.label'),\n        clickable: true,\n        actions: [\n          {\n            name: (previousActionResult: any, lastActionRow: IRowDataItem) => this.editFunctionalRole(lastActionRow)\n          }\n        ]\n      },\n      {\n        fieldId: `${RX_FUNCTIONAL_ROLES.fieldIds.applicationName}`,\n        index: 1,\n        title: this.translateService.instant(\n          'com.bmc.arsys.rx.client.admin.functional-roles.application-library-name.label'\n        )\n      },\n      {\n        fieldId: `${RX_RECORD_DEFINITION.coreFieldIds.description}`,\n        index: 2,\n        title: this.translateService.instant('com.bmc.arsys.rx.client.admin.chatbots.description.title')\n      },\n      {\n        fieldId: `${RX_RECORD_DEFINITION.coreFieldIds.id}`,\n        index: 3,\n        title: 'ID'\n      }\n    ];\n  }\n\n  private openModal(data: IFunctionalRole): void {\n    this.rxModalService\n      .openModal({\n        content: FunctionalRoleEditorComponent,\n        size: 'default',\n        data: {\n          functionalRole: data\n        }\n      })\n      .then((result) => {\n        if (result) {\n          this.functionalRolesRecordGrid.api.refresh().subscribe();\n        }\n      })\n      .catch(noop);\n  }\n\n  createFunctionalRole(): void {\n    this.openModal({\n      name: '',\n      applicationName: '',\n      description: '',\n      applicationRoles: {}\n    });\n  }\n\n  private editFunctionalRole(functionalRoleRow: IRowDataItem): void {\n    this.rxFuntionalRoleService\n      .get({\n        applicationName: functionalRoleRow[RX_FUNCTIONAL_ROLES.fieldIds.applicationName],\n        name: functionalRoleRow[RX_FUNCTIONAL_ROLES.fieldIds.name]\n      })\n      .subscribe((functionalRole: IFunctionalRole) => {\n        this.openModal(functionalRole);\n      });\n  }\n}\n","<rx-admin-settings header=\"{{ 'com.bmc.arsys.rx.client.approval.configuration.functional.roles' | translate }}\">\n  <button\n    adapt-button\n    type=\"button\"\n    btn-type=\"tertiary\"\n    class=\"d-icon-plus_circle align-self-start\"\n    rx-id=\"new-button\"\n    (click)=\"createFunctionalRole()\"\n  >\n    {{ 'com.bmc.arsys.rx.client.common.new.label' | translate }}\n  </button>\n  <rx-record-grid rx-id=\"functional-roles-grid\" #functionalRolesRecordGrid [config]=\"gridConfig$\"> </rx-record-grid>\n</rx-admin-settings>\n","import { CommonModule } from '@angular/common';\nimport { ComponentFactoryResolver, NgModule } from '@angular/core';\nimport { FormsModule } from '@angular/forms';\nimport {\n  AdaptBusyModule,\n  AdaptButtonModule,\n  AdaptRxFormControlModule,\n  AdaptRxSelectModule,\n  AdaptRxTextfieldModule,\n  AdaptTreeModule\n} from '@bmc-ux/adapt-angular';\nimport { RX_APPLICATION } from '@helix/platform/shared/api';\nimport { AdminSettingsModule } from '@helix/platform/shared/components';\nimport { RxBusyIndicatorModule, RxDirectivesModule } from '@helix/platform/ui-kit';\nimport { RxViewComponentRegistryService } from '@helix/platform/view/api';\nimport { RecordGridModule } from '@helix/platform/view/components';\nimport { FunctionalRoleEditorComponent } from './functional-role-editor/functional-role-editor.component';\nimport { FunctionalRolesAdminComponent } from './functional-roles.component';\nimport { TranslateModule } from '@ngx-translate/core';\n\n@NgModule({\n  declarations: [FunctionalRolesAdminComponent, FunctionalRoleEditorComponent],\n  imports: [\n    CommonModule,\n    FormsModule,\n    AdminSettingsModule,\n    RecordGridModule,\n    AdaptRxTextfieldModule,\n    AdaptButtonModule,\n    AdaptBusyModule,\n    AdaptRxSelectModule,\n    AdaptRxFormControlModule,\n    AdaptTreeModule,\n    RxBusyIndicatorModule,\n    TranslateModule,\n    RxDirectivesModule\n  ],\n  entryComponents: [FunctionalRolesAdminComponent]\n})\nexport class FunctionalRolesRegistrationModule {\n  constructor(\n    private componentFactoryResolver: ComponentFactoryResolver,\n    private rxViewComponentRegistryService: RxViewComponentRegistryService\n  ) {\n    rxViewComponentRegistryService.register({\n      type: 'rx-admin-functional-roles',\n      componentFactory: this.componentFactoryResolver.resolveComponentFactory(FunctionalRolesAdminComponent),\n      name: 'Functional roles',\n      isPageComponent: true,\n      availableInBundles: [RX_APPLICATION.settingsBundleId]\n    });\n  }\n}\n","import { HttpClient } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\nimport { IDataPageResult } from '@helix/platform/shared/api';\nimport { of } from 'rxjs';\nimport { tap } from 'rxjs/operators';\n\nimport { IHkmFolder, IHkmMappingConfiguration, IHkmPortal, IItsmCompany } from './hkm-access-mapping.types';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class RxHkmAccessMappingService {\n  constructor(private httpClient: HttpClient) {}\n\n  private readonly knowledgeApi = '/api/rx/application/knowledge';\n  private readonly folderCache = new Map<String, IHkmFolder[]>();\n\n  public callItsmMappingApi() {\n    return this.httpClient.get<IDataPageResult<IItsmCompany>>(`${this.knowledgeApi}/mapping/itsm`);\n  }\n\n  public callHkmMappingApi() {\n    return this.httpClient.get<IHkmPortal[]>(`${this.knowledgeApi}/mapping/hkm`);\n  }\n\n  public getFolderAccess(userGroupId: number, portalId: number, nodeId: number) {\n    const cacheKey = `${userGroupId}-${portalId}-${nodeId}`;\n\n    if (this.folderCache.has(cacheKey)) {\n      return of(this.folderCache.get(cacheKey));\n    }\n\n    const request = encodeURIComponent(`v1/contentaccess/${userGroupId}/${portalId}/${nodeId}`);\n\n    return this.httpClient\n      .get<IHkmFolder[]>(`${this.knowledgeApi}?ComAroundRequest=${request}`)\n      .pipe(tap((folders) => this.folderCache.set(cacheKey, folders)));\n  }\n\n  public deleteAccessMappings(hkmGroupMappingIds: string[]) {\n    return this.httpClient.delete<void>(`${this.knowledgeApi}/mapping/delete/${hkmGroupMappingIds.join(',')}`);\n  }\n\n  public saveAccessMappings(hkmGroupMappings: IHkmMappingConfiguration[]) {\n    return this.httpClient.post<void>(`${this.knowledgeApi}/mapping/save`, hkmGroupMappings);\n  }\n}\n","import { Component, OnInit, OnDestroy, ViewChild } from '@angular/core';\nimport { uniqBy, flatMap } from 'lodash';\n\nimport { AdaptTreeNode, DockedPanelContext, DismissReasons, Alert } from '@bmc-ux/adapt-angular';\n\nimport { RxNotificationService } from '@helix/platform/shared/api';\nimport { TranslateService } from '@ngx-translate/core';\n\nimport {\n  IHkmFolder,\n  IHkmPortal,\n  IHkmPortalUserGroup,\n  IItsmCompany,\n  IItsmSupportGroup\n} from '../hkm-access-mapping.types';\n\nimport { RxModalService, RX_MODAL } from '@helix/platform/ui-kit';\nimport { FormControl } from '@angular/forms';\nimport { forkJoin, of, ReplaySubject } from 'rxjs';\nimport { startWith, switchMap, map, takeUntil, tap } from 'rxjs/operators';\nimport { RxHkmAccessMappingService } from '../hkm-access-mapping.service';\n\n@Component({\n  selector: 'rx-hkm-access-map-editor',\n  templateUrl: './hkm-access-map-editor.component.html'\n})\nexport class HkmAccessMapEditorComponent implements OnInit, OnDestroy {\n  constructor(\n    private dockedPanelContext: DockedPanelContext,\n    private rxNotificationService: RxNotificationService,\n    private translateService: TranslateService,\n    private rxModalService: RxModalService,\n    private rxHkmAccessMappingService: RxHkmAccessMappingService\n  ) {\n    const contextData = this.dockedPanelContext.getData();\n\n    this.selectedItsmSupportGroups = contextData.selectedSupportGroups;\n    this.portals = contextData.hkmPortals;\n    this.company = contextData.company;\n    this.portalUserGroups = contextData.selectedHkmPortal.userGroups;\n    this.selectedPortal = new FormControl([contextData.selectedHkmPortal]);\n    this.selectedUserGroups = new FormControl(contextData.selectedHkmUserGroups);\n  }\n\n  private destroyed$ = new ReplaySubject<boolean>(1);\n  private userGroupToFoldersMap = new Map<IHkmPortalUserGroup, IHkmFolder[]>();\n  private hkmFolders: IHkmFolder[];\n\n  filesTree: AdaptTreeNode[];\n  company: IItsmCompany;\n  selectedItsmSupportGroups: IItsmSupportGroup[] = [];\n  selectedUserGroups: FormControl;\n  portalUserGroups: IHkmPortalUserGroup[];\n  portals: IHkmPortal[];\n  selectedPortal: FormControl;\n\n  alertConfig: Alert = {\n    title: '',\n    content: this.translateService.instant('com.bmc.arsys.rx.client.hkm-access-mapping-editor.mapping-info.message'),\n    type: 'inline',\n    variant: 'info'\n  };\n\n  ngOnInit(): void {\n    this.selectedPortal.valueChanges.pipe(takeUntil(this.destroyed$)).subscribe(([portal]: IHkmPortal[]) => {\n      this.portalUserGroups = portal.userGroups;\n      this.selectedUserGroups.reset([]);\n    });\n\n    this.selectedUserGroups.valueChanges\n      .pipe(\n        takeUntil(this.destroyed$),\n        startWith(this.selectedUserGroups.value || []),\n        switchMap((userGroups: IHkmPortalUserGroup[]) => {\n          if (userGroups.length === 0) {\n            return of(userGroups);\n          }\n\n          const [selectedPortal]: IHkmPortal[] = this.selectedPortal.value;\n\n          const folderAcecssRequests = userGroups.map((userGroup) => {\n            return this.rxHkmAccessMappingService\n              .getFolderAccess(userGroup.id, selectedPortal.portalId, selectedPortal.nodeId)\n              .pipe(tap((folders) => this.userGroupToFoldersMap.set(userGroup, folders)));\n          });\n\n          return forkJoin(folderAcecssRequests).pipe(map(() => userGroups));\n        })\n      )\n      .subscribe((userGroups) => {\n        this.setUpFoldersFromHkmPortalUserGroups(userGroups);\n      });\n  }\n\n  ngOnDestroy(): void {\n    this.destroyed$.next(true);\n    this.destroyed$.complete();\n  }\n\n  cancel(): void {\n    this.dockedPanelContext.dismiss(DismissReasons.ESC);\n  }\n\n  save(): void {\n    if (this.selectedItsmSupportGroups.length === 0) {\n      this.rxNotificationService.addErrorMessage(\n        this.translateService.instant('com.bmc.arsys.rx.client.hkm-access-mapping-editor.select-support-group.message')\n      );\n\n      return;\n    }\n\n    if (this.selectedUserGroups.value.length === 0) {\n      this.rxNotificationService.addErrorMessage(\n        this.translateService.instant('com.bmc.arsys.rx.client.hkm-access-mapping-editor.select-user-group.message')\n      );\n\n      return;\n    }\n\n    const hkmGroupFoldersNames: string[] = this.hkmFolders.map((data) => data.name);\n    const selectedUserGroups = this.selectedUserGroups.value as IHkmPortalUserGroup[];\n\n    const mappingConfigurations = this.selectedItsmSupportGroups.map((itsmSupportGroup: IItsmSupportGroup) => ({\n      AppCompanyID: this.company.permissionId,\n      AppCompanyName: this.company.name,\n      AppGroupName: itsmSupportGroup.supportGroupName,\n      AppName: 'ITSM',\n      IsMapped: true,\n      AppGroupID: itsmSupportGroup.permissionGroupId,\n      HKMPortalID: this.selectedPortal.value[0].portalId,\n      HKMPortalName: this.selectedPortal.value[0].portalName,\n      HKMRoleName: selectedUserGroups.map((group) => group.role).join(','),\n      HKMGroupID: selectedUserGroups.map((group) => group.id).join(','),\n      HKMGroupFoldersNames: hkmGroupFoldersNames,\n      HKMGroupName: selectedUserGroups.map((group) => group.name).join(',')\n    }));\n\n    this.rxHkmAccessMappingService.saveAccessMappings(mappingConfigurations).subscribe(\n      () => {\n        this.rxNotificationService.addSuccessMessage(\n          this.translateService.instant('com.bmc.arsys.rx.client.admin.connection-mapping.mapping-saved.message')\n        );\n\n        this.dockedPanelContext.close(DismissReasons.CLOSE_BTN);\n      },\n      () => {\n        this.dockedPanelContext.close(DismissReasons.BACKDROP_CLICK);\n      }\n    );\n  }\n\n  private hkmFolderSortFn(first: IHkmFolder, second: IHkmFolder): number {\n    if (first.hasFolderChildren !== second.hasFolderChildren) {\n      return +second.hasFolderChildren - +first.hasFolderChildren;\n    }\n\n    return first.name.localeCompare(second.name);\n  }\n\n  private setUpFoldersFromHkmPortalUserGroups(userGroups: IHkmPortalUserGroup[]): void {\n    const items = flatMap(userGroups, (group) =>\n      this.userGroupToFoldersMap\n        .get(group)\n        .filter((folder) => folder.haveAccess)\n        .map((folder) => ({ group, folder }))\n    );\n\n    items.sort((first, second) => this.hkmFolderSortFn(first.folder, second.folder));\n\n    const uniqueItems = uniqBy(items, (item) => item.folder.nodeId);\n\n    this.hkmFolders = uniqueItems.map((item) => item.folder);\n\n    this.filesTree = uniqueItems.map((item) => ({\n      data: item,\n      expandedIcon: item.folder.hasFolderChildren ? 'd-icon-folder_open' : 'd-icon-folder_o',\n      collapsedIcon: item.folder.hasFolderChildren ? 'd-icon-folder' : 'd-icon-folder_o',\n      label: item.folder.name,\n      level: 1,\n      expression: `'${item.folder.nodeId}'`,\n      children: null,\n      leaf: !item.folder.hasFolderChildren\n    }));\n  }\n\n  deleteVisibilityGroup(group: IItsmSupportGroup): void {\n    this.rxModalService\n      .confirm({\n        title: this.translateService.instant('com.bmc.arsys.rx.client.common.warning.label'),\n        modalStyle: RX_MODAL.modalStyles.warning,\n        message: this.translateService.instant(\n          'com.bmc.arsys.rx.client.hkm-access-mapping-editor.delete-visibility-group.message'\n        )\n      })\n      .then((result: boolean) => {\n        if (result) {\n          this.selectedItsmSupportGroups.forEach((element, index) => {\n            if (element.supportGroupName === group.supportGroupName) {\n              this.selectedItsmSupportGroups.splice(index, 1);\n            }\n          });\n        }\n      });\n  }\n\n  onNodeExpand({ node }: { node: AdaptTreeNode }): void {\n    if (node && !node.children) {\n      this.rxHkmAccessMappingService\n        .getFolderAccess(node.data.group.id, node.data.folder.portalId, node.data.folder.nodeId)\n        .subscribe((hkmFolders: IHkmFolder[]) => {\n          node.children = hkmFolders\n            .filter((folder) => folder.haveAccess)\n            .sort(this.hkmFolderSortFn)\n            .map((folder: IHkmFolder) => ({\n              data: { group: node.data.group, folder },\n              expandedIcon: folder.hasFolderChildren ? 'd-icon-folder_open' : 'd-icon-folder_o',\n              collapsedIcon: folder.hasFolderChildren ? 'd-icon-folder' : 'd-icon-folder_o',\n              label: folder.name,\n              level: 1,\n              expression: `'${folder.nodeId}'`,\n              children: null,\n              leaf: !folder.hasFolderChildren\n            }));\n        });\n    }\n  }\n\n  supportGroupFormatter(group: IItsmSupportGroup): string {\n    return group.supportGroupName;\n  }\n\n  userGroupOptionformatter(group: IHkmPortalUserGroup): string {\n    return group.name;\n  }\n\n  hkmPortalFormatter(portal: IHkmPortal): string {\n    return portal.portalName;\n  }\n}\n","<div class=\"container col d-flex flex-column\" style=\"overflow-y: auto\">\n  <div class=\"row justify-content-between\">\n    <div class=\"col-5 form-control-label\">\n      <adapt-rx-textfield\n        [disabled]=\"true\"\n        rx-id=\"company-field\"\n        [label]=\"'com.bmc.arsys.rx.client.hkm-access-mapping.company.label' | translate\"\n        [(ngModel)]=\"company.name\"\n      ></adapt-rx-textfield>\n    </div>\n    <div class=\"col-1 d-flex align-items-end p-2 justify-content-center\">\n      <adapt-icon name=\"arrow_right\"></adapt-icon>\n    </div>\n    <div class=\"col-6 form-control-label\">\n      <adapt-rx-select\n        [formControl]=\"selectedPortal\"\n        [options]=\"portals\"\n        rx-id=\"portal-select\"\n        [optionFormatter]=\"hkmPortalFormatter\"\n        [label]=\"'com.bmc.arsys.rx.client.hkm-access-mapping-editor.header.label' | translate\"\n      ></adapt-rx-select>\n    </div>\n  </div>\n  <hr />\n  <div class=\"row\">\n    <div class=\"col\">\n      <adapt-alert [config]=\"alertConfig\"></adapt-alert>\n    </div>\n  </div>\n  <div class=\"row flex-grow-1 py-3 justify-content-between\">\n    <div class=\"col-5 d-flex flex-column\">\n      <div class=\"pb-1\">\n        <span class=\"form-control-label\">\n          {{\n            'com.bmc.arsys.rx.client.hkm-access-mapping-editor.support-group.label'\n              | translate: { count: selectedItsmSupportGroups.length }\n          }}\n        </span>\n      </div>\n      <div class=\"card flex-grow-1\" rx-id=\"selected-support-groups\">\n        <div\n          class=\"d-flex px-2 align-items-center adapt-rx-list-item cursor-pointer\"\n          *ngFor=\"let group of selectedItsmSupportGroups\"\n        >\n          <span>{{ group.supportGroupName }}</span>\n          <button\n            type=\"button\"\n            [disabled]=\"false\"\n            class=\"btn btn-link d-icon-trash p-1\"\n            rx-id=\"delete-button\"\n            (click)=\"deleteVisibilityGroup(group)\"\n          ></button>\n        </div>\n      </div>\n    </div>\n    <div class=\"col-1 d-flex p-2 mt-4 justify-content-center\">\n      <adapt-icon [name]=\"'arrow_right'\"></adapt-icon>\n    </div>\n    <div class=\"col-6 d-flex flex-column\">\n      <adapt-rx-select\n        [formControl]=\"selectedUserGroups\"\n        rx-id=\"user-groups-select\"\n        [label]=\"'com.bmc.arsys.rx.client.hkm-access-mapping-editor.select-hkm-user-groups.label' | translate\"\n        [options]=\"portalUserGroups\"\n        [optionFormatter]=\"userGroupOptionformatter\"\n        [selectAllButton]=\"true\"\n        [deselectAllButton]=\"true\"\n        [enableFilter]=\"true\"\n        [multiple]=\"true\"\n      >\n      </adapt-rx-select>\n      <div class=\"mt-3 pb-1\">\n        <span class=\"form-control-label\">\n          {{ 'com.bmc.arsys.rx.client.hkm-access-mapping-editor.accessible-folders.title' | translate }}\n        </span>\n      </div>\n      <div class=\"card flex-grow-1 p-2\">\n        <div class=\"mh-100\" style=\"overflow-y: auto\">\n          <adapt-tree [value]=\"filesTree\" (onNodeExpand)=\"onNodeExpand($event)\"> </adapt-tree>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n\n<div class=\"dp-footer\">\n  <div>\n    <button rx-id=\"save-button\" type=\"button\" class=\"btn btn-primary mr-2\" (click)=\"save()\">\n      {{ 'com.bmc.arsys.rx.client.common.save.label' | translate }}\n    </button>\n  </div>\n  <div>\n    <button rx-id=\"cancel-button\" type=\"button\" class=\"btn btn-secondary\" (click)=\"cancel()\">\n      {{ 'com.bmc.arsys.rx.client.common.cancel.label' | translate }}\n    </button>\n  </div>\n</div>\n","import { IRowDataItem } from '@helix/platform/view/api';\n\nexport interface IHkmPortals {\n  portals: IHkmPortal[];\n}\n\nexport interface IItsmCompanies {\n  Companies: IItsmCompany[];\n}\n\nexport interface IItsmCompany {\n  permissionId: string;\n  name: string;\n  type: string;\n  category: string;\n  supportGroups: IItsmSupportGroup[];\n}\n\nexport interface IItsmSupportGroup {\n  requestId: string;\n  supportGroupId: string;\n  permissionGroup: string;\n  permissionGroupId: string;\n  description: string;\n  viewAccess: string;\n  supportCompany: string;\n  supportGroupOrganization: string;\n  supportGroupName: string;\n  navigationTier1: string;\n  navigationTier2: string;\n  navigationTier3: string;\n  navigationTier4: string;\n  lineOfBusiness: string[];\n  isCompany: boolean;\n  id: string;\n  appName: string;\n  isMapped: boolean;\n  appCompanyName: string;\n  hkmportalName: string;\n  hkmroleName: string;\n  hkmgroupID: string;\n  hkmgroupFoldersName: string;\n  hkmgroupName: string;\n}\n\nexport interface ILineOfBusiness {\n  id: string;\n  name: string;\n}\n\nexport interface IHkmPortal {\n  portalId: number;\n  portalName: string;\n  status: string;\n  type: string;\n  nodeId: number;\n  userGroups: IHkmPortalUserGroup[];\n}\n\nexport interface IHkmPortalUserGroup {\n  id: number;\n  name: string;\n  status: string;\n  type: string;\n  role: string;\n  portalId: number;\n  portalNames: string[];\n}\n\nexport interface IHkmFolder {\n  nodeId: number;\n  name: string;\n  portalId: number;\n  type: string;\n  tag: string;\n  isReadonly: boolean;\n  haveAccess: boolean;\n  hasFolderChildren: boolean;\n}\n\nexport interface IHkmMappingConfiguration {\n  AppName: string;\n  IsMapped: boolean;\n  AppCompanyName: string;\n  AppGroupName: string;\n  AppCompanyID: string;\n  AppGroupID: string;\n  HKMPortalName: string;\n  HKMPortalID: string;\n  HKMGroupName: string;\n  HKMRoleName: string;\n  HKMGroupFoldersNames: string[];\n  HKMGroupID: string;\n}\n\nexport enum PredefinedLobOptions {\n  All = '$ALL$',\n  None = '$NONE$'\n}\n\nexport type ISupportGroupRow = IItsmSupportGroup & IRowDataItem;\n","import { Component, OnInit, ViewChild, TemplateRef } from '@angular/core';\nimport { BaseViewComponent } from '@helix/platform/view/runtime';\nimport { TranslateService } from '@ngx-translate/core';\nimport { DataCellTemplateParams } from '@bmc-ux/adapt-table';\nimport { AdaptDockedPanelService, DismissReasons } from '@bmc-ux/adapt-angular';\nimport { chain, isEmpty, noop } from 'lodash';\nimport { Observable } from 'rxjs/internal/Observable';\nimport { HkmAccessMapEditorComponent } from './hkm-access-map-editor/hkm-access-map-editor.component';\nimport { RxHkmAccessMappingService } from './hkm-access-mapping.service';\n\nimport {\n  IHkmPortal,\n  IHkmPortalUserGroup,\n  IItsmCompany,\n  IItsmSupportGroup,\n  ILineOfBusiness,\n  ISupportGroupRow,\n  PredefinedLobOptions\n} from './hkm-access-mapping.types';\n\nimport { IRecordDefinition, RX_RECORD_DEFINITION } from '@helix/platform/record/api';\nimport { RxModalService, RX_MODAL } from '@helix/platform/ui-kit';\nimport { of, Subscription } from 'rxjs';\n\nimport {\n  IRecordGridActionButton,\n  IRecordGridColumn,\n  IRecordGridConfig,\n  RecordGridComponent,\n  RecordGridFilterMode,\n  RowSelectionMode\n} from '@helix/platform/view/components';\n\nimport { OpenViewActionModalSize } from '@helix/platform/view/api';\n\n@Component({\n  selector: 'rx-admin-hkm-access-mapping',\n  templateUrl: './hkm-access-mapping.component.html'\n})\nexport class HkmAccessMappingAdminComponent extends BaseViewComponent implements OnInit {\n  constructor(\n    private adaptDockedPanelService: AdaptDockedPanelService,\n    private translateService: TranslateService,\n    private rxModalService: RxModalService,\n    private rxHkmAccessMappingService: RxHkmAccessMappingService\n  ) {\n    super();\n  }\n\n  @ViewChild('itsmHkmMappingDataGrid')\n  itsmHkmMappingDataGrid: RecordGridComponent;\n\n  @ViewChild('statusColTemplate', { static: true })\n  statusColTemplate: TemplateRef<DataCellTemplateParams>;\n\n  @ViewChild('visibilityGroupColTemplate', { static: true })\n  visibilityGroupColTemplate: TemplateRef<DataCellTemplateParams>;\n\n  private readonly predefinedLinesOfBusiness: ILineOfBusiness[] = [\n    { id: PredefinedLobOptions.All, name: this.translateService.instant('com.bmc.arsys.rx.client.common.all.label') },\n    { id: PredefinedLobOptions.None, name: this.translateService.instant('com.bmc.arsys.rx.client.common.none.label') }\n  ];\n\n  private gridColumns: IRecordGridColumn[];\n  private hkmPortals: IHkmPortal[] = [];\n  private supportGroups: IItsmSupportGroup[] = [];\n  selectedLob: ILineOfBusiness = this.predefinedLinesOfBusiness[0];\n  busy: Subscription;\n  itsmCompanies: IItsmCompany[] = [];\n  selectedCompany: IItsmCompany;\n  linesOfBusiness: ILineOfBusiness[] = [];\n  recordGridConfig$: Observable<IRecordGridConfig>;\n\n  ngOnInit(): void {\n    this.loadItsmHkmMappingData();\n\n    this.rxHkmAccessMappingService.callHkmMappingApi().subscribe((portals) => {\n      this.hkmPortals = portals;\n    });\n\n    this.setupGridInit();\n  }\n\n  private setupGridInit(): void {\n    this.gridColumns = [\n      {\n        fieldId: 'supportGroupName',\n        title: this.translateService.instant(\n          'com.bmc.arsys.rx.client.hkm-access-mapping.grid.column.hkm-permission-group.title'\n        ),\n        filterable: false,\n        cellTemplate: this.visibilityGroupColTemplate\n      },\n      {\n        fieldId: 'description',\n        title: this.translateService.instant(\n          'com.bmc.arsys.rx.client.hkm-access-mapping.grid.column.support-group-description.title'\n        ),\n        filterable: false\n      },\n      {\n        fieldId: 'permissionGroupId',\n        title: this.translateService.instant(\n          'com.bmc.arsys.rx.client.hkm-access-mapping.grid.column.hkm-permission-group-id.title'\n        ),\n        filterable: false,\n        visible: false\n      },\n      {\n        filterable: true,\n        fieldId: 'isMapped',\n        title: this.translateService.instant('com.bmc.arsys.rx.client.hkm-access-mapping.grid.column.status.title'),\n        cellTemplate: this.statusColTemplate\n      },\n      {\n        fieldId: 'hkmportalName',\n        title: this.translateService.instant(\n          'com.bmc.arsys.rx.client.hkm-access-mapping.grid.column.hkm-portal-name.title'\n        ),\n        visible: true,\n        filterable: false\n      },\n      {\n        fieldId: 'hkmgroupName',\n        title: this.translateService.instant(\n          'com.bmc.arsys.rx.client.hkm-access-mapping.grid.column.hkm-group-name.title'\n        ),\n        visible: true,\n        filterable: false\n      },\n      {\n        fieldId: 'hkmgroupID',\n        title: this.translateService.instant(\n          'com.bmc.arsys.rx.client.hkm-access-mapping.grid.column.hkm-group-id.title'\n        ),\n        visible: false,\n        filterable: false\n      },\n      {\n        fieldId: 'hkmroleName',\n        title: this.translateService.instant('com.bmc.arsys.rx.client.hkm-access-mapping.grid.column.hkm-role.title'),\n        visible: true,\n        filterable: false\n      }\n    ];\n\n    const gridRecordDefinition: IRecordDefinition = {\n      fieldDefinitions: [\n        {\n          id: 'supportGroupName',\n          resourceType: RX_RECORD_DEFINITION.resourceTypes.character\n        },\n        {\n          id: 'description',\n          resourceType: RX_RECORD_DEFINITION.resourceTypes.character\n        },\n        {\n          id: 'permissionGroupId',\n          resourceType: RX_RECORD_DEFINITION.resourceTypes.character\n        },\n        {\n          id: 'isMapped',\n          resourceType: RX_RECORD_DEFINITION.resourceTypes.selection,\n          optionNamesById: {\n            true: this.translateService.instant(\n              'com.bmc.arsys.rx.client.hkm-access-mapping.grid.column.status.mapped.label'\n            ),\n            false: this.translateService.instant(\n              'com.bmc.arsys.rx.client.hkm-access-mapping.grid.column.status.unmapped.label'\n            )\n          }\n        },\n        {\n          id: 'hkmportalName',\n          resourceType: RX_RECORD_DEFINITION.resourceTypes.character\n        },\n        {\n          id: 'hkmgroupName',\n          resourceType: RX_RECORD_DEFINITION.resourceTypes.character\n        },\n        {\n          id: 'hkmgroupID',\n          resourceType: RX_RECORD_DEFINITION.resourceTypes.character\n        },\n        {\n          id: 'hkmroleName',\n          resourceType: RX_RECORD_DEFINITION.resourceTypes.character\n        }\n      ]\n    };\n\n    const actionButtons: IRecordGridActionButton[] = [\n      {\n        label: this.translateService.instant('com.bmc.arsys.rx.client.hkm-access-mapping.grid.map-access.button.label'),\n        style: 'tertiary',\n        iconCls: 'cubes_restart',\n        disabled: (selectedRows: ISupportGroupRow[]) =>\n          !this.hasPortals() || selectedRows.length === 0 || selectedRows.some((row) => row.isMapped),\n        actions: [{ name: () => this.openAccessMappingDialog() }]\n      },\n      {\n        label: this.translateService.instant(\n          'com.bmc.arsys.rx.client.hkm-access-mapping.grid.unmap-access.button.label'\n        ),\n        style: 'tertiary',\n        iconCls: 'cube_cross_circle',\n        disabled: (selectedRows: ISupportGroupRow[]) =>\n          !this.hasPortals() || selectedRows.length === 0 || selectedRows.some((row) => !row.isMapped),\n        actions: [{ name: () => this.deleteMapping() }]\n      }\n    ];\n\n    this.recordGridConfig$ = of({\n      columns: this.gridColumns,\n      emptyStateLabelText: this.translateService.instant(\n        'com.bmc.arsys.rx.innovation-studio.external-record-wizard.document-selection.grid.empty-state.label'\n      ),\n      enableRowSelection: RowSelectionMode.Multiple,\n      enableFiltering: true,\n      recordIdField: 'requestId',\n      styles: 'flex-fill',\n      useExternalFiltering: false,\n      getRecordDefinition: () => of(gridRecordDefinition),\n      getData: () =>\n        of({\n          totalSize: this.supportGroups.length,\n          data: this.supportGroups\n        }),\n      actionButtons,\n      filterMode: RecordGridFilterMode.Basic\n    });\n  }\n\n  private setUpValues(): void {\n    if (this.selectedLob.id === PredefinedLobOptions.All) {\n      this.supportGroups = [...this.selectedCompany.supportGroups];\n    } else if (this.selectedLob.id === PredefinedLobOptions.None) {\n      this.supportGroups = this.selectedCompany.supportGroups.filter((group) => isEmpty(group.lineOfBusiness));\n    } else {\n      this.supportGroups = this.selectedCompany.supportGroups.filter((group) =>\n        group.lineOfBusiness?.some((lob) => lob === this.selectedLob.id)\n      );\n    }\n\n    this.itsmHkmMappingDataGrid.api.refresh().subscribe();\n  }\n\n  private loadItsmHkmMappingData(): void {\n    this.busy = this.rxHkmAccessMappingService\n      .callItsmMappingApi()\n      .subscribe(({ data }: { data: IItsmCompany[] }): void => {\n        this.itsmCompanies = [...data];\n\n        const extractedLinesOfBusiness = chain(data)\n          .flatMap((company) => company.supportGroups)\n          .filter((group) => !isEmpty(group.lineOfBusiness))\n          .flatMap((group) => group.lineOfBusiness)\n          .sort()\n          .sortedUniq()\n          .map((lob) => ({ id: lob, name: lob }))\n          .value();\n\n        this.linesOfBusiness = [...this.predefinedLinesOfBusiness, ...extractedLinesOfBusiness];\n\n        if (isEmpty(this.selectedCompany?.name)) {\n          this.setSelected(0);\n        } else {\n          const currentCompanyId = this.selectedCompany.permissionId;\n          this.selectedCompany = this.itsmCompanies.find((company) => company.permissionId === currentCompanyId);\n          this.setUpValues();\n        }\n      });\n  }\n\n  setSelected(index: number): void {\n    this.selectedCompany = this.itsmCompanies[index];\n    this.setUpValues();\n  }\n\n  setSelectedLineOfBusiness(lob: ILineOfBusiness): void {\n    this.selectedLob = lob;\n    this.setUpValues();\n  }\n\n  openAccessMappingDialog(supportGroup: IItsmSupportGroup = null): void {\n    let title = this.translateService.instant('com.bmc.arsys.rx.client.hkm-access-mapping-editor.new.title');\n    let portal = this.hkmPortals[0];\n    let selectedSupportGroups: IItsmSupportGroup[] =\n      this.itsmHkmMappingDataGrid.api.getSelectedRows() as ISupportGroupRow[];\n    let userGroups = [];\n\n    if (supportGroup) {\n      const mappedUserGroupsIds = supportGroup.hkmgroupID.split(',').map(Number);\n      title = this.translateService.instant('com.bmc.arsys.rx.client.hkm-access-mapping-editor.edit.title');\n      portal = this.hkmPortals.find((hkmPortal) => hkmPortal.portalName === supportGroup.hkmportalName);\n      selectedSupportGroups = [supportGroup];\n      userGroups = portal.userGroups.filter((group) => mappedUserGroupsIds.includes(group.id));\n    }\n\n    this.openDetailDialog(title, selectedSupportGroups, portal, userGroups);\n  }\n\n  private openDetailDialog(\n    dialogTitle: string,\n    selectedSupportGroups: IItsmSupportGroup[],\n    selectedHkmPortal: IHkmPortal,\n    selectedHkmUserGroups: IHkmPortalUserGroup[] = []\n  ): void {\n    if (this.hkmPortals?.length > 0) {\n      this.adaptDockedPanelService\n        .open({\n          title: dialogTitle,\n          content: HkmAccessMapEditorComponent,\n          size: OpenViewActionModalSize.Small,\n          data: {\n            company: this.selectedCompany,\n            hkmPortals: this.hkmPortals,\n            selectedLob: this.selectedLob,\n            selectedSupportGroups,\n            selectedHkmPortal,\n            selectedHkmUserGroups\n          }\n        })\n        .then((result) => {\n          if (result === DismissReasons.CLOSE_BTN) {\n            this.loadItsmHkmMappingData();\n          }\n        })\n        .catch(noop);\n    }\n  }\n\n  private deleteMapping(): void {\n    const selectedGroups = this.itsmHkmMappingDataGrid.api.getSelectedRows() as ISupportGroupRow[];\n    const selectedGroupIds = selectedGroups.map((group) => group.id);\n\n    this.rxModalService\n      .confirm({\n        title: this.translateService.instant('com.bmc.arsys.rx.client.common.warning.label'),\n        modalStyle: RX_MODAL.modalStyles.warning,\n        message: this.translateService.instant('com.bmc.arsys.rx.client.hkm-access-mapping.delete-mapping.message')\n      })\n      .then((result: boolean) => {\n        if (result) {\n          this.rxHkmAccessMappingService\n            .deleteAccessMappings(selectedGroupIds)\n            .subscribe(() => this.loadItsmHkmMappingData());\n        }\n      });\n  }\n\n  hasPortals(): boolean {\n    return !isEmpty(this.hkmPortals);\n  }\n}\n","<rx-admin-settings header=\"{{ 'com.bmc.arsys.rx.client.hkm-access-mapping.header.label' | translate }}\" [busy]=\"busy\">\n  <div class=\"d-flex\">\n    <div class=\"d-flex pr-3 align-items-baseline\">\n      <label class=\"text-strong\">{{ 'com.bmc.arsys.rx.client.hkm-access-mapping.company.label' | translate }}:</label>\n      <div class=\"d-flex\" adaptDropdown>\n        <button\n          class=\"pl-1\"\n          adapt-button\n          #dropdownButton\n          rx-id=\"company-dropdown\"\n          adaptDropdownToggle\n          type=\"button\"\n          btn-type=\"tertiary\">\n          {{ selectedCompany?.name }}\n        </button>\n        <div class=\"dropdown-menu\" adaptDropdownMenu>\n          <button\n            *ngFor=\"let company of itsmCompanies; let index = index\"\n            [class.text-active]=\"company?.permissionId === selectedCompany?.permissionId\"\n            [class.active]=\"company?.permissionId === selectedCompany?.permissionId\"\n            type=\"button\"\n            class=\"dropdown-item\"\n            (click)=\"setSelected(index)\">\n            {{ company.name }}\n          </button>\n        </div>\n      </div>\n    </div>\n\n    <div class=\"d-flex align-items-baseline\">\n      <label class=\"text-strong\">{{ 'com.bmc.arsys.rx.client.hkm-access-mapping.line-of-business.label' | translate\n        }}:</label>\n      <div class=\"d-flex\" adaptDropdown >\n        <button\n          adapt-button\n          #dropdownButton\n          adaptDropdownToggle\n          type=\"button\"\n          rx-id=\"lob-dropdown\"\n          btn-type=\"tertiary\"\n          class=\"pl-1\">\n          {{ selectedLob?.name }}\n        </button>\n        <div class=\"dropdown-menu\" adaptDropdownMenu>\n          <button\n            type=\"button\"\n            *ngFor=\"let lob of linesOfBusiness\"\n            [class.text-active]=\"lob.id === selectedLob.id\"\n            [class.active]=\"lob.id === selectedLob.id\"\n            class=\"dropdown-item\"\n            (click)=\"setSelectedLineOfBusiness(lob)\">\n            {{ lob.name }}\n          </button>\n        </div>\n      </div>\n    </div>\n  </div>\n\n  <rx-record-grid class=\"mb-3 mt-1\" [config]=\"recordGridConfig$\" #itsmHkmMappingDataGrid></rx-record-grid>\n\n  <ng-template #statusColTemplate let-dataItem=\"dataItem\">\n    <div class=\"cm-container container\">\n      <div class=\"row\">\n        <div class=\"col-sm-6 align-start\">\n          <adapt-badge\n            [animate]=\"animation\"\n            variant=\"warning\"\n            [showAlert]=\"false\"\n            alertVariant=\"warning\"\n            *ngIf=\"!dataItem.isMapped\"\n          >\n            {{ 'com.bmc.arsys.rx.client.hkm-access-mapping.grid.column.status.unmapped.label' | translate }}\n          </adapt-badge>\n          <adapt-badge\n            [animate]=\"animation\"\n            variant=\"success\"\n            [showAlert]=\"false\"\n            alertVariant=\"success\"\n            *ngIf=\"dataItem.isMapped\"\n          >\n            {{ 'com.bmc.arsys.rx.client.hkm-access-mapping.grid.column.status.mapped.label' | translate }}\n          </adapt-badge>\n        </div>\n      </div>\n    </div>\n  </ng-template>\n\n  <ng-template #visibilityGroupColTemplate let-dataItem=\"dataItem\">\n    <div class=\"cm-container container\">\n      <div class=\"row align-start\" *ngIf=\"dataItem.isMapped && hasPortals()\">\n        <a href=\"javascript:void(0)\" (click)=\"openAccessMappingDialog(dataItem)\" class=\"alert-link\">{{\n          dataItem.supportGroupName\n        }}</a>\n      </div>\n      <div class=\"row align-start\" *ngIf=\"!dataItem.isMapped || !hasPortals()\">\n        {{ dataItem.supportGroupName }}\n      </div>\n    </div>\n  </ng-template>\n</rx-admin-settings>\n","import {\n  ComponentFactoryResolver,\n  NgModule,\n} from '@angular/core';\n\nimport { CommonModule } from '@angular/common';\nimport { RX_APPLICATION } from '@helix/platform/shared/api';\nimport { RxViewComponentRegistryService } from '@helix/platform/view/api';\nimport { AdminSettingsModule } from '@helix/platform/shared/components';\nimport { TranslateModule } from '@ngx-translate/core';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\nimport { HkmAccessMappingAdminComponent } from './hkm-access-mapping.component';\nimport { AdaptAlertModule, AdaptRxListBuilderModule, AdaptRxSelectModule } from '@bmc-ux/adapt-angular';\nimport { AdaptTableModule } from '@bmc-ux/adapt-table';\n\nimport {\n  AdaptButtonModule,\n  AdaptDropdownModule,\n  AdaptPopoverModule,\n  AdaptEmptyStateModule,\n  AdaptIconModule,\n  AdaptRxTextfieldModule,\n  AdaptTabsModule,\n  AdaptBadgeModule,\n  AdaptAdvancedFilteringModule,\n  AdaptTreeModule,\n  ActiveModalRef,\n  AdaptSubnavModule\n} from '@bmc-ux/adapt-angular';\n\nimport { HkmAccessMapEditorComponent } from './hkm-access-map-editor/hkm-access-map-editor.component';\nimport { AdaptBusyModule } from '@bmc-ux/adapt-angular';\nimport { RecordGridModule } from '@helix/platform/view/components';\n\n@NgModule({\n  declarations: [HkmAccessMappingAdminComponent, HkmAccessMapEditorComponent],\n  imports: [\n    AdminSettingsModule,\n    FormsModule,\n    ReactiveFormsModule,\n    CommonModule,\n    TranslateModule,\n    AdaptButtonModule,\n    AdaptRxTextfieldModule,\n    AdaptRxListBuilderModule,\n    AdaptEmptyStateModule,\n    AdaptIconModule,\n    AdaptRxSelectModule,\n    AdaptPopoverModule,\n    AdaptTabsModule,\n    AdaptTableModule,\n    AdaptDropdownModule,\n    AdaptBadgeModule,\n    AdaptAdvancedFilteringModule,\n    AdaptTreeModule,\n    AdaptSubnavModule,\n    AdaptBusyModule,\n    RecordGridModule,\n    AdaptAlertModule\n  ],\n  providers: [ActiveModalRef],\n  entryComponents: [HkmAccessMappingAdminComponent]\n})\nexport class HkmAccessMappingRegistrationModule {\n  constructor(\n    private componentFactoryResolver: ComponentFactoryResolver,\n    private rxViewComponentRegistryService: RxViewComponentRegistryService\n  ) {\n    rxViewComponentRegistryService.register({\n      type: 'rx-admin-hkm-access-mapping',\n      componentFactory: this.componentFactoryResolver.resolveComponentFactory(HkmAccessMappingAdminComponent),\n      name: 'HKM Access Mapping',\n      isPageComponent: true,\n      availableInBundles: [RX_APPLICATION.settingsBundleId]\n    });\n  }\n}\n","export const RX_IFRAME_SECURITY = {\n  sections: {\n    iframeAllowedSites: {\n      infoMessage: 'com.bmc.arsys.rx.client.admin.iframe-security.allowed-sites-info.message',\n      name: 'iframeAllowedSites',\n      settingName: 'iframeAllowedSites',\n      title: 'com.bmc.arsys.rx.client.admin.iframe-security.trusted-web-applications.title',\n      urls: []\n    },\n    trustedWebsites: {\n      infoMessage: 'com.bmc.arsys.rx.client.admin.iframe-security.trusted-sites-info.message',\n      name: 'trustedWebsites',\n      settingName: 'trustedWebsites',\n      title: 'com.bmc.arsys.rx.client.admin.iframe-security.trusted-websites.title',\n      urls: []\n    }\n  }\n};\n","import { Injectable } from '@angular/core';\nimport { forkJoin, Observable } from 'rxjs';\nimport { IIframeSecurities } from './iframe-security.types';\nimport { RX_IFRAME_SECURITY } from './iframe-security.constant';\nimport { RxSystemConfigurationService, ISystemConfiguration } from '@helix/platform/shared/api';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class RxIframeSecurityService {\n  constructor(private rxSystemConfigurationService: RxSystemConfigurationService) {}\n\n  getIframeSecurities(): Observable<IIframeSecurities> {\n    return forkJoin({\n      iframeAllowedSites: this.rxSystemConfigurationService.getConfiguration(\n        RX_IFRAME_SECURITY.sections.iframeAllowedSites.settingName\n      ),\n      trustedWebsites: this.rxSystemConfigurationService.getConfiguration(\n        RX_IFRAME_SECURITY.sections.trustedWebsites.settingName\n      )\n    });\n  }\n\n  postIframeSecurities(\n    allowedSitesData: ISystemConfiguration,\n    trustedWebsitesData: ISystemConfiguration\n  ): Observable<any[]> {\n    return forkJoin([\n      this.rxSystemConfigurationService.setConfiguration(\n        RX_IFRAME_SECURITY.sections.iframeAllowedSites.settingName,\n        allowedSitesData.value\n      ),\n      this.rxSystemConfigurationService.setConfiguration(\n        RX_IFRAME_SECURITY.sections.trustedWebsites.settingName,\n        trustedWebsitesData.value\n      )\n    ]);\n  }\n}\n","import { Component, HostBinding, OnInit, ViewChild } from '@angular/core';\nimport { NgModel } from '@angular/forms';\nimport { Subscription } from 'rxjs';\nimport { cloneDeep, map, some } from 'lodash';\nimport { IIframeSecurities } from './iframe-security.types';\nimport { ListBuilderTextsModel, RxListBuilderItem } from '@bmc-ux/adapt-angular';\nimport { RX_IFRAME_SECURITY } from './iframe-security.constant';\nimport { RxIframeSecurityService } from './iframe-security.service';\nimport { ISystemConfiguration, RxNotificationService } from '@helix/platform/shared/api';\nimport { RxUrlUtilsService } from '@helix/platform/utils';\nimport { BaseViewComponent } from '@helix/platform/view/runtime';\nimport { TranslateService } from '@ngx-translate/core';\n\n@Component({\n  selector: 'rx-admin-iframe-security',\n  templateUrl: './iframe-security.component.html'\n})\nexport class IframeSecurityAdminComponent extends BaseViewComponent implements OnInit {\n  @HostBinding('class')\n  hostClass = 'd-block col-12 col-sm-12 col-md-10 col-lg-8 col-xl-6 p-0';\n\n  @ViewChild('iframeAllowedSitesListBuilder', { read: NgModel, static: true })\n  iframeAllowedSitesListBuilder: NgModel;\n\n  @ViewChild('trustedWebsitesListBuilder', { read: NgModel, static: true })\n  trustedWebsitesListBuilder: NgModel;\n\n  busy: Subscription;\n  sections = cloneDeep(RX_IFRAME_SECURITY.sections);\n\n  listBuilderTexts: ListBuilderTextsModel = {\n    searchPlaceholder: this.translateService.instant(\n      'com.bmc.arsys.rx.client.admin.iframe-security.filter-or-add-urls.label'\n    ),\n    notFound: this.translateService.instant('com.bmc.arsys.rx.client.admin.iframe-security.no-urls-added.label')\n  };\n\n  private counter = 0;\n\n  private invalidUrlMsg = this.translateService.instant('com.bmc.arsys.rx.client.admin.invalid-url.label');\n\n  private duplicateUrlMsg = this.translateService.instant(\n    'com.bmc.arsys.rx.client.designer.validation.duplicate-value.message'\n  );\n\n  constructor(\n    private rxIframeSecurityService: RxIframeSecurityService,\n    private rxNotificationService: RxNotificationService,\n    private rxUrlUtilsService: RxUrlUtilsService,\n    private translateService: TranslateService\n  ) {\n    super();\n  }\n\n  ngOnInit(): void {\n    this.notifyPropertyChanged('api', {\n      isDirty: () => this.isDirty()\n    });\n\n    this.busy = this.rxIframeSecurityService.getIframeSecurities().subscribe((result: IIframeSecurities) => {\n      const iframeAllowedSites: ISystemConfiguration = result.iframeAllowedSites;\n      const trustedWebsites: ISystemConfiguration = result.trustedWebsites;\n\n      if (iframeAllowedSites.value) {\n        this.sections.iframeAllowedSites.urls = map((iframeAllowedSites.value as string).split(' '), (url) => ({\n          id: this.generateId(),\n          name: url\n        }));\n      }\n\n      if (trustedWebsites.value) {\n        this.sections.trustedWebsites.urls = map((trustedWebsites.value as string).split(' '), (url) => ({\n          id: this.generateId(),\n          name: url\n        }));\n      }\n    });\n  }\n\n  generateId = (): number => {\n    return this.counter++;\n  };\n\n  iframeAllowedSitesValidation = (value: string, items: RxListBuilderItem[]): string => {\n    return this.itemValidation(value, items, false);\n  };\n\n  trustedWebsitesValidation = (value: string, items: RxListBuilderItem[]): string => {\n    return this.itemValidation(value, items);\n  };\n\n  isDirty(): boolean {\n    return this.iframeAllowedSitesListBuilder.dirty || this.trustedWebsitesListBuilder.dirty;\n  }\n\n  onSaveClick(): void {\n    const iframeAllowedSitesData: ISystemConfiguration = {\n      id: this.sections.iframeAllowedSites.name,\n      name: this.sections.iframeAllowedSites.name,\n      value: map(this.sections.iframeAllowedSites.urls, 'name').join(' ')\n    };\n\n    const trustedWebsitesData: ISystemConfiguration = {\n      id: this.sections.trustedWebsites.name,\n      name: this.sections.trustedWebsites.name,\n      value: map(this.sections.trustedWebsites.urls, 'name').join(' ')\n    };\n\n    this.rxIframeSecurityService.postIframeSecurities(iframeAllowedSitesData, trustedWebsitesData).subscribe(() => {\n      this.rxNotificationService.addSuccessMessage(\n        this.translateService.instant(\n          'com.bmc.arsys.rx.client.admin.iframe-security.iframe-security-information-saved.message'\n        )\n      );\n\n      this.iframeAllowedSitesListBuilder.control.markAsPristine();\n      this.trustedWebsitesListBuilder.control.markAsPristine();\n    });\n  }\n\n  private itemValidation(value: string, items: RxListBuilderItem[], isProtocolRequired = true): string {\n    let errorMessage: string = null;\n\n    if (some(items, { name: value })) {\n      errorMessage = this.duplicateUrlMsg;\n    } else if (!this.rxUrlUtilsService.isValidUrl(value, isProtocolRequired)) {\n      errorMessage = this.invalidUrlMsg;\n    }\n    \n    return errorMessage;\n  }\n}\n","<rx-admin-settings header=\"Iframe security\" [busy]=\"busy\">\n  <h4>{{ sections.iframeAllowedSites.title | translate }}</h4>\n\n  <adapt-rx-list-builder\n    class=\"d-block mb-4\"\n    name=\"iframeAllowedSitesListBuilder\"\n    [(ngModel)]=\"sections.iframeAllowedSites.urls\"\n    [label]=\"sections.iframeAllowedSites.infoMessage | translate\"\n    [texts]=\"listBuilderTexts\"\n    [itemValidation]=\"iframeAllowedSitesValidation\"\n    hideListAreaLabel=\"true\"\n    #iframeAllowedSitesListBuilder=\"ngModel\"\n  ></adapt-rx-list-builder>\n\n  <h4>{{ sections.trustedWebsites.title | translate }}</h4>\n\n  <adapt-rx-list-builder\n    class=\"d-block mb-4\"\n    name=\"trustedWebsitesListBuilder\"\n    [(ngModel)]=\"sections.trustedWebsites.urls\"\n    [label]=\"sections.trustedWebsites.infoMessage | translate\"\n    [texts]=\"listBuilderTexts\"\n    [itemValidation]=\"trustedWebsitesValidation\"\n    hideListAreaLabel=\"true\"\n    #trustedWebsitesListBuilder=\"ngModel\"\n  ></adapt-rx-list-builder>\n\n  <button\n    class=\"align-self-start\"\n    rx-id=\"save-button\"\n    adapt-button\n    btn-type=\"primary\"\n    size=\"small\"\n    type=\"button\"\n    [disabled]=\"!isDirty()\"\n    (click)=\"onSaveClick()\"\n  >\n    {{ 'com.bmc.arsys.rx.client.common.save.label' | translate }}\n  </button>\n</rx-admin-settings>\n","import { ComponentFactoryResolver, NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { AdaptButtonModule, AdaptRxListBuilderModule } from '@bmc-ux/adapt-angular';\nimport { RX_APPLICATION } from '@helix/platform/shared/api';\nimport { RxViewComponentRegistryService } from '@helix/platform/view/api';\nimport { IframeSecurityAdminComponent } from './iframe-security.component';\nimport { AdminSettingsModule } from '@helix/platform/shared/components';\nimport { TranslateModule } from '@ngx-translate/core';\n\n@NgModule({\n  declarations: [IframeSecurityAdminComponent],\n  imports: [\n    AdaptButtonModule,\n    AdaptRxListBuilderModule,\n    AdminSettingsModule,\n    CommonModule,\n    FormsModule,\n    TranslateModule\n  ],\n  entryComponents: [IframeSecurityAdminComponent]\n})\nexport class IframeSecurityRegistrationModule {\n  constructor(\n    private componentFactoryResolver: ComponentFactoryResolver,\n    private rxViewComponentRegistryService: RxViewComponentRegistryService\n  ) {\n    rxViewComponentRegistryService.register({\n      type: 'rx-admin-iframe-security',\n      componentFactory: this.componentFactoryResolver.resolveComponentFactory(IframeSecurityAdminComponent),\n      name: 'Iframe security',\n      isPageComponent: true,\n      availableInBundles: [RX_APPLICATION.settingsBundleId]\n    });\n  }\n}\n","import { KeyValueObject } from '@bmc-ux/adapt-angular';\nimport { INameValuePair } from '@helix/platform/ui-kit';\n\nexport interface IIpaasApiDefinition {\n  id?: string;\n  organization: string;\n  organizationId?: string;\n  environment: string;\n  environmentId?: string;\n  group: string;\n  name: string;\n  path: string;\n  method: string;\n  authType: number;\n  queryParams: string;\n  headers: string;\n  description: string;\n  authTypeDetails: IAuthTypeDetails;\n}\n\nexport interface IAuthTypeDetails {\n  username?: string;\n  password?: string;\n  key?: string;\n  value?: string;\n  authServerEndpoint?: string;\n  tokenPath?: string;\n  credentials?: string;\n  redirectUri?: string;\n  scope?: string;\n  httpHeaders?: INameValuePair[];\n  queryParams?: INameValuePair[];\n}\n\nexport interface IIpaasApiInfo {\n  id?: string;\n  apiName?: string;\n  groupName: string;\n  recordDefinitionName: string;\n}\n\nexport interface IApiPath {\n  [key: string]: KeyValueObject;\n}\n\nexport interface IOrganizationList {\n  [key: string]: string[];\n}\n\nexport interface IOrganizationData {\n  environments?: IEnvironmentData[];\n  name: string;\n  id?: string;\n}\n\nexport interface IEnvironmentData {\n  name: string;\n  id?: string;\n}\n\nexport interface IAuthType {\n  id: number;\n  key: string;\n  labelKey: string;\n}\n\nexport interface IAuthTypeFields {\n  name: string;\n  labelKey: string;\n  rxId: string;\n  isPassword?: boolean;\n  isRequired?: boolean;\n}\n\nexport interface IIpaasApisConfig {\n  titleKey: string;\n  recordDefinitionName: string;\n  resourceType: string;\n}\n\nexport interface IApiEditorFormData {\n  apiGroupName: string;\n  apiName: string;\n  apiPath: string[];\n  authTypeDetails: KeyValueObject[];\n  authorizationType: KeyValueObject[];\n  environment: IEnvironmentData[];\n  headers: IEnvironmentData[];\n  organization: IOrganizationData[];\n  queryParameters: IEnvironmentData[];\n  requestMethod: string[];\n  customAuthTypeHeaders: INameValuePair[];\n  customAuthTypeQueryParams: INameValuePair[];\n}\n\nexport enum AuthTypes {\n  ANONYMOUS = 0,\n  BASIC = 10,\n  APIKEY = 20,\n  OAUTH2 = 30,\n  CUSTOM = 40\n}\n","import { AuthTypes } from './ipaas-base-apis.types';\n\nconst authTypeOptions = [\n  {\n    id: AuthTypes.ANONYMOUS,\n    key: 'ANONYMOUS',\n    labelKey: 'com.bmc.arsys.rx.client.admin.jitterbit-api-editor.anonymous.label'\n  },\n  {\n    id: AuthTypes.BASIC,\n    key: 'BASIC',\n    labelKey: 'com.bmc.arsys.rx.client.admin.cognitive-training.record-data-set-blade.basic.label'\n  },\n  {\n    id: AuthTypes.APIKEY,\n    key: 'APIKEY',\n    labelKey: 'com.bmc.arsys.rx.client.admin.cognitive-service.api-key.label'\n  },\n  {\n    id: AuthTypes.OAUTH2,\n    key: 'OAUTH2',\n    labelKey: 'com.bmc.arsys.rx.client.admin.jitterbit-api-editor.oauth.label'\n  },\n  {\n    id: AuthTypes.CUSTOM,\n    key: 'CUSTOM',\n    labelKey: 'com.bmc.arsys.rx.client.admin.web-api-connections.endpoint-type.custom.label'\n  }\n];\n\nexport const RX_IPAAS_APIS = {\n  fieldIds: {\n    groupName: 71003,\n    apiName: 71004,\n    organization: 71001,\n    environment: 71002,\n    path: 71005,\n    method: 71006\n  },\n  methods: {\n    0: 'GET',\n    10: 'POST',\n    20: 'PUT',\n    30: 'DELETE'\n  },\n  authTypeOptions,\n  authTypeFields: {\n    0: [],\n    10: [\n      {\n        name: 'username',\n        labelKey: 'com.bmc.arsys.rx.client.common.user-name.label',\n        rxId: 'username',\n        isRequired: true\n      },\n      {\n        name: 'credentials',\n        labelKey: 'com.bmc.arsys.rx.client.common.password.label',\n        rxId: 'password',\n        isPassword: true,\n        isRequired: true\n      }\n    ],\n    20: [\n      {\n        name: 'key',\n        labelKey: 'com.bmc.arsys.rx.client.admin.jitterbit-api-editor.api-key-name.label',\n        rxId: 'key',\n        isRequired: true\n      },\n      {\n        name: 'value',\n        labelKey: 'com.bmc.arsys.rx.client.admin.jitterbit-api-editor.api-key-value.label',\n        rxId: 'value',\n        isPassword: true,\n        isRequired: true\n      }\n    ],\n    30: [\n      {\n        name: 'authServerEndpoint',\n        labelKey: 'com.bmc.arsys.rx.client.admin.jitterbit-api-editor.auth-server-endpoint.label',\n        rxId: 'authServerEndpoint',\n        isRequired: true\n      },\n      {\n        name: 'tokenPath',\n        labelKey: 'com.bmc.arsys.rx.client.admin.jitterbit-api-editor.token-url.label',\n        rxId: 'tokenPath',\n        isRequired: true\n      },\n      {\n        name: 'username',\n        labelKey: 'com.bmc.arsys.rx.client.admin.rsso-auth.client-id.label',\n        rxId: 'username',\n        isRequired: true\n      },\n      {\n        name: 'credentials',\n        labelKey: 'com.bmc.arsys.rx.client.admin.rsso-auth.client-secret.label',\n        rxId: 'credentials',\n        isPassword: true,\n        isRequired: true\n      },\n      {\n        name: 'redirectUri',\n        labelKey: 'com.bmc.arsys.rx.client.admin.web-api-connections.redirect-uri.label',\n        rxId: 'redirectUri'\n      },\n      {\n        name: 'scope',\n        labelKey: 'com.bmc.arsys.rx.client.admin.web-api-connections.scope.label',\n        rxId: 'scope'\n      }\n    ]\n  }\n};\n","import { Injectable, Injector, OnDestroy, OnInit } from '@angular/core';\nimport { FormArray, FormBuilder, FormGroup, Validators } from '@angular/forms';\nimport { TranslateService } from '@ngx-translate/core';\nimport { ActiveModalRef, ActiveTabChangeEvent, DismissReasons, RxSelectOption } from '@bmc-ux/adapt-angular';\nimport { IDataPageResult, RxNotificationService } from '@helix/platform/shared/api';\nimport { RX_RECORD_DEFINITION, RxRecordInstanceDataPageService } from '@helix/platform/record/api';\nimport {\n  cloneDeep,\n  compact,\n  find,\n  findKey,\n  forEach,\n  get,\n  groupBy,\n  includes,\n  keys,\n  map as _map,\n  merge,\n  pull,\n  some,\n  sortBy,\n  trim\n} from 'lodash';\nimport { Observable, ReplaySubject, Subscription } from 'rxjs';\nimport { distinctUntilChanged, map, switchMap, takeUntil } from 'rxjs/operators';\nimport { RX_IPAAS_APIS } from '../ipaas-base-apis.constant';\nimport {\n  AuthTypes,\n  IApiEditorFormData,\n  IApiPath,\n  IAuthType,\n  IAuthTypeDetails,\n  IAuthTypeFields,\n  IEnvironmentData,\n  IIpaasApiDefinition,\n  IIpaasApiInfo,\n  IOrganizationData\n} from '../ipaas-base-apis.types';\nimport { INameValuePair, RxModalClass } from '@helix/platform/ui-kit';\n\n@Injectable()\nexport abstract class ApiEditorBase extends RxModalClass implements OnInit, OnDestroy {\n  private formBuilder: FormBuilder = this.injector.get(FormBuilder);\n  private rxNotificationService: RxNotificationService = this.injector.get(RxNotificationService);\n  private translateService: TranslateService = this.injector.get(TranslateService);\n\n  private rxRecordInstanceDataPageService: RxRecordInstanceDataPageService = this.injector.get(\n    RxRecordInstanceDataPageService\n  );\n\n  ipaasApiEditorForm: FormGroup;\n  headers: FormArray;\n  queryParameters: FormArray;\n  organizations: IOrganizationData[] = [];\n  environments: IEnvironmentData[] = [];\n  groupNameList: string[] = [];\n  methodTypeOptions: RxSelectOption[] = [];\n  authTypeOptions: RxSelectOption[] = [];\n  activeIndex = 0;\n  isEditMode = false;\n  authTypeFields: IAuthTypeFields[] = [];\n  busy: Subscription;\n  apiPaths: RxSelectOption[] = [];\n  loadingState = false;\n  isCustomAuthType: boolean;\n\n  private defaultSelection = this.translateService.instant('com.bmc.arsys.rx.client.common.select.label');\n  private groupAndApiNameList: RxSelectOption;\n  private apiPathDetails: IApiPath;\n  private selectedApiPath: string;\n  private readonly selectedApiDefinition: IIpaasApiInfo;\n  private initialApiDefinition: IIpaasApiDefinition;\n  private destroyed$ = new ReplaySubject<boolean>(1);\n  private authTypeFieldDetails: IApiPath[];\n  protected selectedOrganization: IOrganizationData;\n\n  protected constructor(protected activeModalRef: ActiveModalRef, protected injector: Injector) {\n    super(activeModalRef, injector);\n\n    this.selectedApiDefinition = this.activeModalRef.getData();\n    this.isEditMode = Boolean(this.selectedApiDefinition.id);\n  }\n\n  ngOnInit(): void {\n    super.ngOnInit();\n\n    this.ipaasApiEditorForm = this.formBuilder.group({\n      organization: [[], Validators.required],\n      environment: [[], Validators.required],\n      apiPath: [[], Validators.required],\n      apiGroupName: ['', [Validators.required, Validators.maxLength(254), Validators.pattern('^[a-zA-Z0-9 _-]+$')]],\n      apiName: ['', [Validators.required, Validators.maxLength(254), Validators.pattern('^[a-zA-Z0-9 _-]+$')]],\n      requestMethod: [[], Validators.required],\n      authorizationType: [[], Validators.required],\n      headers: this.formBuilder.array([]),\n      queryParameters: this.formBuilder.array([]),\n      authTypeDetails: this.formBuilder.array([]),\n      customAuthTypeHeaders: this.formBuilder.array([]),\n      customAuthTypeQueryParams: this.formBuilder.array([])\n    });\n\n    this.ipaasApiEditorForm.patchValue({ apiGroupName: this.selectedApiDefinition.groupName });\n\n    this.busy = this.getOrganizationsAndEnvironments().subscribe((data) => {\n      this.organizations = data;\n\n      if (this.organizations.length === 1) {\n        this.ipaasApiEditorForm.get('organization').setValue([this.organizations[0]]);\n        this.getEnvironments(this.organizations[0]);\n      }\n    });\n\n    this.getGroupAndApiDetails();\n\n    if (this.isEditMode) {\n      this.busy = this.getApiDefinition(this.selectedApiDefinition.id)\n        .pipe(\n          switchMap((data) => {\n            this.initialApiDefinition = cloneDeep(data);\n\n            this.ipaasApiEditorForm.patchValue({\n              organization: [{ name: data.organization, id: data.organizationId }],\n              environment: [{ name: data.environment, id: data.environmentId }],\n              apiPath: [data.path],\n              apiGroupName: data.group,\n              apiName: data.name,\n              requestMethod: [RX_IPAAS_APIS.methods[data.method]],\n              authorizationType: [find(RX_IPAAS_APIS.authTypeOptions, (type) => type.id === data.authType)]\n            });\n\n            this.selectedOrganization = { id: data.organizationId, name: data.organization };\n            this.authTypeFields = RX_IPAAS_APIS.authTypeFields[data.authType];\n            this.isCustomAuthType = data.authType === AuthTypes.CUSTOM;\n\n            if (this.isCustomAuthType) {\n              forEach(data.authTypeDetails.httpHeaders, (httpHeader) =>\n                (this.ipaasApiEditorForm.get('customAuthTypeHeaders') as FormArray).push(\n                  this.customAuthTypeFormItem(httpHeader)\n                )\n              );\n\n              forEach(data.authTypeDetails.queryParams, (queryParam) =>\n                (this.ipaasApiEditorForm.get('customAuthTypeQueryParams') as FormArray).push(\n                  this.customAuthTypeFormItem(queryParam)\n                )\n              );\n            } else {\n              this.createAuthTypeFormFields();\n            }\n\n            forEach(compact(data.headers?.split(',')), (header) => {\n              this.setApiVariables('headers', header);\n            });\n\n            forEach(compact(data.queryParams?.split(',')), (param) => {\n              this.setApiVariables('queryParameters', param);\n            });\n\n            return this.getApiPathDefinitions({ name: data.environment, id: data.environmentId });\n          })\n        )\n        .subscribe((apiPath) => {\n          this.onEditMethodAndAuthTypeUpdate(apiPath);\n        });\n    }\n\n    this.ipaasApiEditorForm\n      .get('apiName')\n      .valueChanges.pipe(takeUntil(this.destroyed$))\n      .subscribe((value) => {\n        const isApiNameAlreadyExists =\n          !(this.selectedApiDefinition?.apiName === value) &&\n          some(\n            this.groupAndApiNameList,\n            (group) =>\n              group[RX_IPAAS_APIS.fieldIds.groupName] === trim(this.ipaasApiEditorForm.get('apiGroupName').value) &&\n              includes(group.apis, trim(value))\n          );\n\n        if (isApiNameAlreadyExists) {\n          this.ipaasApiEditorForm.get('apiName').setErrors({\n            invalidApi: {\n              message: this.translateService.instant(\n                'com.bmc.arsys.rx.client.admin.ipaas-api-editor.api-name-exists.error.message'\n              )\n            }\n          });\n        }\n      });\n\n    this.ipaasApiEditorForm\n      .get('apiGroupName')\n      .valueChanges.pipe(distinctUntilChanged(), takeUntil(this.destroyed$))\n      .subscribe(() => {\n        this.ipaasApiEditorForm.get('apiName').updateValueAndValidity();\n      });\n  }\n\n  isDirty(): boolean {\n    return this.ipaasApiEditorForm.dirty;\n  }\n\n  private createFormItem(value: string): FormGroup {\n    return this.formBuilder.group({\n      name: [value, [Validators.maxLength(254), Validators.pattern('^[a-zA-Z0-9_-]+$')]]\n    });\n  }\n\n  private customAuthTypeFormItem(fieldData: INameValuePair): FormGroup {\n    return this.formBuilder.group({\n      key: [fieldData.key, [Validators.required, Validators.maxLength(254), Validators.pattern('^[a-zA-Z0-9_-]+$')]],\n      value: [fieldData.value, [Validators.required, Validators.maxLength(254), Validators.pattern('^[a-zA-Z0-9_-]+$')]]\n    });\n  }\n\n  optionFormatterLabel = (option: RxSelectOption): string =>\n    this.translateService.instant(get(option, 'labelKey', this.defaultSelection));\n\n  optionFormatterName = (option: RxSelectOption): string =>\n    this.translateService.instant(get(option, 'name', this.defaultSelection));\n\n  getEnvironments(organization: IOrganizationData): void {\n    this.selectedOrganization = organization;\n    this.environments = organization.environments || [];\n\n    if (this.environments.length === 1) {\n      this.ipaasApiEditorForm.get('environment').setValue([this.environments[0]]);\n      this.getApiPaths(this.environments[0]);\n    } else {\n      this.ipaasApiEditorForm.get('environment').setValue([]);\n      this.getApiPaths();\n    }\n  }\n\n  private setApiVariables(type: string, value: string): void {\n    const apiVariable = this.ipaasApiEditorForm.get(type) as FormArray;\n    apiVariable.push(this.createFormItem(value));\n  }\n\n  getAuthTypes(method: string): void {\n    this.ipaasApiEditorForm.get('authorizationType').setValue([]);\n    this.authTypeFieldDetails = this.apiPathDetails[this.selectedApiPath][method]?.authTypes;\n\n    this.authTypeOptions = _map(this.authTypeFieldDetails, (option) =>\n      find(RX_IPAAS_APIS.authTypeOptions, (type) => type.id === AuthTypes[keys(option)[0]])\n    );\n\n    if (this.authTypeOptions?.length === 1) {\n      this.ipaasApiEditorForm.get('authorizationType').setValue([this.authTypeOptions[0]]);\n      this.getAuthTypeFields(this.authTypeOptions[0]);\n    } else {\n      this.authTypeFields = RX_IPAAS_APIS.authTypeFields[0];\n      this.createAuthTypeFormFields();\n    }\n\n    forEach(this.apiPathDetails[this.selectedApiPath][method]?.headers, (header) => {\n      this.setApiVariables('headers', header);\n    });\n\n    forEach(this.apiPathDetails[this.selectedApiPath][method]?.queryParams, (param) => {\n      this.setApiVariables('queryParameters', param);\n    });\n  }\n\n  private onEditMethodAndAuthTypeUpdate(apiPath: IApiPath): void {\n    this.environments = this.getEnvironmentList();\n    this.apiPaths = keys(apiPath);\n    this.apiPathDetails = apiPath;\n    this.selectedApiPath = this.initialApiDefinition.path;\n    this.methodTypeOptions = keys(apiPath[this.initialApiDefinition.path]);\n    this.authTypeFieldDetails =\n      this.apiPathDetails[this.selectedApiPath][RX_IPAAS_APIS.methods[this.initialApiDefinition.method]]?.authTypes;\n\n    this.authTypeOptions = _map(this.authTypeFieldDetails, (option) =>\n      find(RX_IPAAS_APIS.authTypeOptions, { id: AuthTypes[keys(option)[0]] })\n    );\n  }\n\n  getApiPaths(environment?: IEnvironmentData): void {\n    this.ipaasApiEditorForm.get('apiPath').setValue([]);\n    this.apiPaths = [];\n    this.resetFormFields();\n\n    if (environment) {\n      this.loadingState = true;\n\n      this.getApiPathDefinitions(environment).subscribe(\n        (response) => {\n          this.apiPathDetails = response;\n          this.apiPaths = keys(response);\n\n          if (this.apiPaths.length === 1) {\n            this.ipaasApiEditorForm.get('apiPath').setValue([this.apiPaths[0]]);\n            this.getApiMethods(this.apiPaths[0]);\n          }\n\n          this.loadingState = false;\n        },\n        () => {\n          this.loadingState = false;\n        }\n      );\n    }\n  }\n\n  getApiMethods(apiPath: string): void {\n    this.resetFormFields();\n    this.selectedApiPath = apiPath;\n    this.methodTypeOptions = keys(this.apiPathDetails[this.selectedApiPath]);\n\n    if (this.methodTypeOptions?.length === 1) {\n      this.ipaasApiEditorForm.get('requestMethod').setValue([this.methodTypeOptions[0]]);\n      this.getAuthTypes(this.methodTypeOptions[0]);\n    }\n  }\n\n  private getGroupAndApiDetails(): void {\n    const params = {\n      startIndex: 0,\n      pageSize: -1,\n      recorddefinition: this.selectedApiDefinition.recordDefinitionName,\n      propertySelection: [\n        RX_IPAAS_APIS.fieldIds.groupName,\n        RX_IPAAS_APIS.fieldIds.apiName,\n        RX_RECORD_DEFINITION.coreFieldIds.id\n      ]\n    };\n\n    this.rxRecordInstanceDataPageService\n      .post({ params })\n      .pipe(\n        map((response: IDataPageResult) => ({\n          data: _map(groupBy(response.data, RX_IPAAS_APIS.fieldIds.groupName), (options, id) => {\n            return {\n              [RX_IPAAS_APIS.fieldIds.groupName]: id,\n              apis: _map(options, (option) => option[RX_IPAAS_APIS.fieldIds.apiName])\n            };\n          })\n        }))\n      )\n      .subscribe((response) => {\n        this.groupAndApiNameList = response.data;\n        this.groupNameList = sortBy(\n          _map(this.groupAndApiNameList, (option) => option[RX_IPAAS_APIS.fieldIds.groupName])\n        );\n      });\n  }\n\n  getAuthTypeFields(authType: IAuthType) {\n    const authTypeDetail = find(this.authTypeFieldDetails, authType.key)[authType.key];\n\n    this.isCustomAuthType = authType.id === AuthTypes.CUSTOM;\n\n    if (this.isCustomAuthType) {\n      // \"[foo, bar]\" => [\"foo\", \"bar\"]\n      const headerKeys = authTypeDetail.headers?.replace(/[\\[\\] ]/g, '')?.split(',') || [];\n      const queryParamKeys = authTypeDetail.queryParams?.replace(/[\\[\\] ]/g, '')?.split(',') || [];\n\n      (this.ipaasApiEditorForm.get('customAuthTypeHeaders') as FormArray).clear();\n      (this.ipaasApiEditorForm.get('customAuthTypeQueryParams') as FormArray).clear();\n\n      forEach(headerKeys, (headerKey) =>\n        (this.ipaasApiEditorForm.get('customAuthTypeHeaders') as FormArray).push(\n          this.customAuthTypeFormItem({ key: headerKey, value: '' })\n        )\n      );\n\n      forEach(queryParamKeys, (queryParamKey) =>\n        (this.ipaasApiEditorForm.get('customAuthTypeQueryParams') as FormArray).push(\n          this.customAuthTypeFormItem({ key: queryParamKey, value: '' })\n        )\n      );\n    } else {\n      this.authTypeFields = RX_IPAAS_APIS.authTypeFields[authType.id];\n\n      this.createAuthTypeFormFields(authTypeDetail);\n    }\n  }\n\n  private createAuthTypeFormFields(fieldDetails?: IAuthTypeDetails): void {\n    const formArrayFields = this.authTypeFields.reduce((obj, item) => Object.assign(obj, { [item.name]: '' }), {});\n    const authTypeDetails = this.ipaasApiEditorForm.get('authTypeDetails') as FormArray;\n\n    this.isCustomAuthType = false;\n\n    if (authTypeDetails?.length) {\n      authTypeDetails.removeAt(0);\n    }\n\n    authTypeDetails.push(this.formBuilder.group(formArrayFields));\n\n    fieldDetails =\n      (this.initialApiDefinition && merge(this.initialApiDefinition.authTypeDetails, fieldDetails)) || fieldDetails;\n\n    if (fieldDetails) {\n      this.ipaasApiEditorForm.controls.authTypeDetails.patchValue([fieldDetails]);\n    }\n  }\n\n  tabChanged({ index }: ActiveTabChangeEvent): void {\n    this.activeIndex = index;\n  }\n\n  addHeader(): void {\n    this.headers = this.ipaasApiEditorForm.get('headers') as FormArray;\n    this.headers.push(this.createFormItem(''));\n  }\n\n  removeHeader(index: number): void {\n    this.headers = this.ipaasApiEditorForm.get('headers') as FormArray;\n    this.headers.removeAt(index);\n    this.ipaasApiEditorForm.markAsDirty();\n  }\n\n  addQueryParameter(): void {\n    this.queryParameters = this.ipaasApiEditorForm.get('queryParameters') as FormArray;\n    this.queryParameters.push(this.createFormItem(''));\n  }\n\n  removeQueryParameter(index: number): void {\n    this.queryParameters = this.ipaasApiEditorForm.get('queryParameters') as FormArray;\n    this.queryParameters.removeAt(index);\n    this.ipaasApiEditorForm.markAsDirty();\n  }\n\n  addCustomAuthTypeHeader(): void {\n    (this.ipaasApiEditorForm.get('customAuthTypeHeaders') as FormArray).push(\n      this.customAuthTypeFormItem({ key: '', value: '' })\n    );\n  }\n\n  removeCustomAuthTypeHeader(index: number): void {\n    (this.ipaasApiEditorForm.get('customAuthTypeHeaders') as FormArray).removeAt(index);\n    this.ipaasApiEditorForm.markAsDirty();\n  }\n\n  addCustomAuthTypeQueryParam(): void {\n    (this.ipaasApiEditorForm.get('customAuthTypeQueryParams') as FormArray).push(\n      this.customAuthTypeFormItem({ key: '', value: '' })\n    );\n  }\n\n  removeCustomAuthTypeQueryParam(index: number): void {\n    (this.ipaasApiEditorForm.get('customAuthTypeQueryParams') as FormArray).removeAt(index);\n    this.ipaasApiEditorForm.markAsDirty();\n  }\n\n  isSaveButtonDisabled(): boolean {\n    return this.ipaasApiEditorForm.pristine || this.ipaasApiEditorForm.invalid;\n  }\n\n  save(): void {\n    let adminSetting$: Observable<any>;\n    const formValue: IApiEditorFormData = this.ipaasApiEditorForm.getRawValue();\n    const headers = _map(formValue.headers, (header) => header.name);\n    const queryParams = _map(formValue.queryParameters, (parameter) => parameter.name);\n\n    if (this.isCustomAuthType) {\n      formValue.authTypeDetails = [\n        {\n          httpHeaders: formValue.customAuthTypeHeaders,\n          queryParams: formValue.customAuthTypeQueryParams\n        }\n      ];\n    }\n\n    const param: IIpaasApiDefinition = {\n      organization: formValue.organization[0].name,\n      environment: formValue.environment[0].name,\n      group: formValue.apiGroupName,\n      name: formValue.apiName,\n      path: formValue.apiPath[0],\n      method: findKey(RX_IPAAS_APIS.methods, (value) => value === formValue.requestMethod[0]),\n      authType: formValue.authorizationType[0].id,\n      queryParams: pull(queryParams, '').toString(),\n      headers: pull(headers, '').toString(),\n      description: `${formValue.apiGroupName}: ${formValue.apiName}`,\n      authTypeDetails: formValue.authTypeDetails[0] || {}\n    };\n\n    if (this.isEditMode) {\n      param.id = this.initialApiDefinition.id;\n\n      adminSetting$ = this.editApiDefinition(param, formValue);\n    } else {\n      adminSetting$ = this.createApiDefinition(param, formValue);\n    }\n\n    this.busy = adminSetting$.subscribe(() => {\n      this.rxNotificationService.addSuccessMessage(\n        this.translateService.instant('com.bmc.arsys.rx.client.admin.ipaas-api-editor.save.success.message')\n      );\n\n      this.activeModalRef.close(adminSetting$);\n    });\n  }\n\n  cancel(): void {\n    this.activeModalRef.dismiss(DismissReasons.CLOSE_BTN);\n  }\n\n  ngOnDestroy(): void {\n    this.destroyed$.next(true);\n    this.destroyed$.complete();\n  }\n\n  private resetFormFields(): void {\n    this.methodTypeOptions = [];\n    this.ipaasApiEditorForm.get('requestMethod').setValue([]);\n    this.authTypeOptions = [];\n    this.ipaasApiEditorForm.get('authorizationType').setValue([]);\n    this.authTypeFields = RX_IPAAS_APIS.authTypeFields[0];\n    this.createAuthTypeFormFields();\n  }\n\n  protected abstract getOrganizationsAndEnvironments(): Observable<IOrganizationData[]>;\n\n  protected abstract getApiPathDefinitions(environment: IEnvironmentData): Observable<IApiPath>;\n\n  protected abstract getApiDefinition(apiId: string): Observable<IIpaasApiDefinition>;\n\n  protected abstract editApiDefinition(\n    apiDefinition: IIpaasApiDefinition,\n    formData?: IApiEditorFormData\n  ): Observable<any>;\n\n  protected abstract createApiDefinition(\n    apiDefinition: IIpaasApiDefinition,\n    formData?: IApiEditorFormData\n  ): Observable<any>;\n\n  protected abstract getEnvironmentList(organization?: IOrganizationData): IEnvironmentData[];\n}\n","import { Injectable } from '@angular/core';\nimport { Observable } from 'rxjs';\nimport { IApiPath, IIpaasApiDefinition, IOrganizationList } from '../ipaas-base-apis/ipaas-base-apis.types';\nimport { HttpClient } from '@angular/common/http';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class RxJitterbitApisService {\n  private readonly apiDefinitionUrl = '/api/com.bmc.dsm.ipaas-jitterbit/rx/application/ipaas/jitterbit';\n\n  constructor(private httpClient: HttpClient) {}\n\n  deleteApiDefinition(apiId: string): Observable<any> {\n    return this.httpClient.delete(`${this.apiDefinitionUrl}/apidefinition/${apiId}`);\n  }\n\n  createApiDefinition(apiDefinition: IIpaasApiDefinition): Observable<any> {\n    return this.httpClient.post(`${this.apiDefinitionUrl}/apidefinition`, apiDefinition);\n  }\n\n  getApiDefinition(apiId: string): Observable<IIpaasApiDefinition> {\n    return this.httpClient.get<IIpaasApiDefinition>(`${this.apiDefinitionUrl}/apidefinition/${apiId}`);\n  }\n\n  editApiDefinition(apiDefinition: IIpaasApiDefinition): Observable<any> {\n    return this.httpClient.put(`${this.apiDefinitionUrl}/apidefinition/${apiDefinition.id}`, apiDefinition);\n  }\n\n  getOrganizationsAndEnvironments(): Observable<IOrganizationList> {\n    return this.httpClient.get<IOrganizationList>(`${this.apiDefinitionUrl}/organization-info`);\n  }\n\n  getApiPathDefinitions(organization: string, environment: string): Observable<IApiPath> {\n    return this.httpClient.get<IApiPath>(\n      `${this.apiDefinitionUrl}/api-specs/${encodeURIComponent(organization)}/${encodeURIComponent(environment)}`\n    );\n  }\n}\n","import { Component, Injector, OnInit } from '@angular/core';\nimport { ActiveModalRef } from '@bmc-ux/adapt-angular';\nimport { Observable } from 'rxjs';\nimport {\n  IApiPath,\n  IEnvironmentData,\n  IIpaasApiDefinition,\n  IOrganizationData\n} from '../ipaas-base-apis/ipaas-base-apis.types';\nimport { ApiEditorBase } from '../ipaas-base-apis/api-editor/api-editor-base.class';\nimport { RxJitterbitApisService } from './jitterbit-apis.service';\nimport { map } from 'rxjs/operators';\nimport { map as _map } from 'lodash';\n\n@Component({\n  selector: 'rx-jitterbit-api-editor',\n  templateUrl: '../ipaas-base-apis/api-editor/api-editor.component.html',\n  styleUrls: ['../ipaas-base-apis/api-editor/api-editor.component.scss']\n})\nexport class JitterbitApiEditorComponent extends ApiEditorBase implements OnInit {\n  constructor(\n    private rxJitterbitApisService: RxJitterbitApisService,\n    protected activeModalRef: ActiveModalRef,\n    protected injector: Injector\n  ) {\n    super(activeModalRef, injector);\n  }\n\n  ngOnInit(): void {\n    super.ngOnInit();\n  }\n\n  protected getOrganizationsAndEnvironments(): Observable<IOrganizationData[]> {\n    return this.rxJitterbitApisService.getOrganizationsAndEnvironments().pipe(\n      map((organizationEnvironmentList) =>\n        _map(organizationEnvironmentList, (environments, organization) => ({\n          name: organization,\n          environments: _map(environments, (environment) => ({ name: environment }))\n        }))\n      )\n    );\n  }\n\n  protected getApiPathDefinitions(environment: IEnvironmentData): Observable<IApiPath> {\n    return this.rxJitterbitApisService.getApiPathDefinitions(this.selectedOrganization.name, environment.name);\n  }\n\n  protected getApiDefinition(apiId: string): Observable<IIpaasApiDefinition> {\n    return this.rxJitterbitApisService.getApiDefinition(apiId);\n  }\n\n  protected editApiDefinition(apiDefinition: IIpaasApiDefinition): Observable<any> {\n    return this.rxJitterbitApisService.editApiDefinition(apiDefinition);\n  }\n\n  protected createApiDefinition(apiDefinition: IIpaasApiDefinition): Observable<any> {\n    return this.rxJitterbitApisService.createApiDefinition(apiDefinition);\n  }\n\n  protected getEnvironmentList(): IEnvironmentData[] {\n    return this.organizations.find((value) => value.name === this.selectedOrganization.name)?.environments || [];\n  }\n}\n","<div class=\"modal-body api-editor-modal-body\">\n  <rx-busy-indicator [options]=\"{ busy: busy, loaderType: 'section' }\"></rx-busy-indicator>\n\n  <form [formGroup]=\"ipaasApiEditorForm\">\n    <div class=\"row\">\n      <div class=\"col-md-4\">\n        <h6 class=\"mt-1 mb-3\">\n          {{ 'com.bmc.arsys.rx.client.admin.jitterbit-api-editor.api-path.label' | translate }}\n        </h6>\n\n        <adapt-rx-select\n          formControlName=\"organization\"\n          [options]=\"organizations\"\n          [optionFormatter]=\"optionFormatterName\"\n          rx-id=\"organization\"\n          label=\"{{ 'com.bmc.arsys.rx.client.approval.configuration.org' | translate }}\"\n          (onSelectionChange)=\"getEnvironments($event.options[0])\"\n          class=\"form-group d-block\"\n        >\n        </adapt-rx-select>\n\n        <adapt-rx-select\n          formControlName=\"environment\"\n          [options]=\"environments\"\n          [optionFormatter]=\"optionFormatterName\"\n          rx-id=\"environment\"\n          label=\"{{ 'com.bmc.arsys.rx.client.admin.jitterbit-apis.environment.label' | translate }}\"\n          (onSelectionChange)=\"getApiPaths($event.options[0])\"\n          class=\"form-group d-block\"\n        >\n        </adapt-rx-select>\n\n        <adapt-rx-select\n          formControlName=\"apiPath\"\n          label=\"{{ 'com.bmc.arsys.rx.client.admin.jitterbit-api-editor.api-path.label' | translate }}\"\n          [options]=\"apiPaths\"\n          [enableFilter]=\"true\"\n          [loadingState]=\"loadingState\"\n          (onSelectionChange)=\"getApiMethods($event.options[0])\"\n          [tooltip]=\"{\n            iconName: 'question_circle_o',\n            content: 'com.bmc.arsys.rx.client.admin.jitterbit-api-editor.api-paths.tooltip' | translate,\n            placement: 'right',\n            popoverMode: true\n          }\"\n        >\n        </adapt-rx-select>\n      </div>\n\n      <div class=\"col-md-4\">\n        <h6 class=\"mt-1 mb-3\">\n          {{ 'com.bmc.arsys.rx.client.admin.jitterbit-api-editor.api-properties.label' | translate }}\n        </h6>\n\n        <adapt-rx-select-editable\n          formControlName=\"apiGroupName\"\n          [options]=\"groupNameList\"\n          rx-id=\"api-group-name\"\n          label=\"{{ 'com.bmc.arsys.rx.client.admin.ipaas-apis.api-group-name.label' | translate }}\"\n          class=\"form-group d-block\"\n          customOptionTitle=\"{{ 'com.bmc.arsys.rx.client.admin.jitterbit-api-editor.add-new.label' | translate }}\"\n          [customOptionOnTop]=\"true\"\n          [tooltip]=\"{\n            iconName: 'question_circle_o',\n            content: 'com.bmc.arsys.rx.client.admin.jitterbit-api-editor.api-group-name.tooltip' | translate,\n            placement: 'right',\n            popoverMode: true\n          }\"\n        >\n        </adapt-rx-select-editable>\n\n        <adapt-rx-textfield\n          formControlName=\"apiName\"\n          rx-id=\"api-name\"\n          label=\"{{ 'com.bmc.arsys.rx.client.admin.jitterbit-apis.api-name.label' | translate }}\"\n          class=\"form-group d-block\"\n          [tooltip]=\"\n            isEditMode\n              ? {\n                  iconName: 'question_circle_o',\n                  content: 'com.bmc.arsys.rx.client.admin.jitterbit-api-editor.edit-api.api-name.tooltip' | translate,\n                  placement: 'right',\n                  popoverMode: true\n                }\n              : null\n          \"\n        >\n        </adapt-rx-textfield>\n\n        <adapt-rx-select\n          formControlName=\"requestMethod\"\n          [options]=\"methodTypeOptions\"\n          (onSelectionChange)=\"getAuthTypes($event.options[0])\"\n          rx-id=\"request-method\"\n          label=\"{{ 'com.bmc.arsys.rx.client.admin.jitterbit-api-editor.request-method.label' | translate }}\"\n          class=\"form-group d-block\"\n        >\n        </adapt-rx-select>\n\n        <adapt-rx-select\n          formControlName=\"authorizationType\"\n          [options]=\"authTypeOptions\"\n          [optionFormatter]=\"optionFormatterLabel\"\n          (onSelectionChange)=\"getAuthTypeFields($event.options[0])\"\n          rx-id=\"authorization-type\"\n          label=\"{{ 'com.bmc.arsys.rx.client.admin.jitterbit-api-editor.authorization-type.label' | translate }}\"\n          class=\"form-group d-block\"\n        >\n        </adapt-rx-select>\n\n        <ng-container *ngIf=\"!isCustomAuthType\">\n          <div\n            formArrayName=\"authTypeDetails\"\n            *ngFor=\"let authType of ipaasApiEditorForm.get('authTypeDetails')['controls']; let $index = index\"\n          >\n            <div [formGroupName]=\"$index\">\n              <adapt-rx-textfield\n                class=\"form-group d-block\"\n                *ngFor=\"let field of authTypeFields\"\n                [label]=\"field.labelKey | translate\"\n                [isPassword]=\"field.isPassword\"\n                [formControlName]=\"field.name\"\n                [attr.rx-id]=\"field.rxId\"\n                [required]=\"field.isRequired\"\n              >\n              </adapt-rx-textfield>\n            </div>\n          </div>\n        </ng-container>\n\n        <ng-container *ngIf=\"isCustomAuthType\">\n          <button\n            adapt-button\n            type=\"button\"\n            btn-type=\"tertiary\"\n            class=\"d-icon-plus_circle px-0 d-block\"\n            rx-id=\"add-button\"\n            (click)=\"addCustomAuthTypeHeader()\"\n          >\n            {{ 'com.bmc.arsys.rx.client.admin.ipaas-apis.add-http-header.label' | translate }}\n          </button>\n          <div\n            formArrayName=\"customAuthTypeHeaders\"\n            *ngFor=\"\n              let customAuthTypeHeaders of ipaasApiEditorForm.get('customAuthTypeHeaders')['controls'];\n              let $index = index\n            \"\n          >\n            <div [formGroupName]=\"$index\">\n              <div class=\"card form-group\">\n                <div class=\"card-block\">\n                  <div class=\"d-flex justify-content-between\">\n                    <adapt-rx-control-label\n                      label=\"{{ 'com.bmc.arsys.rx.client.admin.ipaas-apis.http-header.label' | translate }}\"\n                      showRequiredLabel=\"true\"\n                    ></adapt-rx-control-label>\n                    <span\n                      class=\"d-icon-cross_adapt form-group alert-link\"\n                      (click)=\"removeCustomAuthTypeHeader($index)\"\n                    ></span>\n                  </div>\n                  <adapt-rx-textfield\n                    formControlName=\"key\"\n                    placeholder=\"{{\n                      'com.bmc.arsys.rx.client.name-value-pairs-editor.enter-name.placeholder' | translate\n                    }}\"\n                    class=\"d-block form-group\"\n                  ></adapt-rx-textfield>\n                  <adapt-rx-textfield\n                    formControlName=\"value\"\n                    placeholder=\"{{\n                      'com.bmc.arsys.rx.client.name-value-pairs-editor.enter-value.placeholder' | translate\n                    }}\"\n                    class=\"d-block\"\n                  ></adapt-rx-textfield>\n                </div>\n              </div>\n            </div>\n          </div>\n\n          <button\n            adapt-button\n            type=\"button\"\n            btn-type=\"tertiary\"\n            class=\"d-icon-plus_circle px-0 d-block\"\n            rx-id=\"add-button\"\n            (click)=\"addCustomAuthTypeQueryParam()\"\n          >\n            {{ 'com.bmc.arsys.rx.client.admin.ipaas-apis.add-query-parameter.label' | translate }}\n          </button>\n          <div\n            formArrayName=\"customAuthTypeQueryParams\"\n            *ngFor=\"\n              let customAuthTypeQueryParams of ipaasApiEditorForm.get('customAuthTypeQueryParams')['controls'];\n              let $index = index\n            \"\n          >\n            <div [formGroupName]=\"$index\">\n              <div class=\"card form-group\">\n                <div class=\"card-block\">\n                  <div class=\"d-flex justify-content-between\">\n                    <adapt-rx-control-label\n                      label=\"{{ 'com.bmc.arsys.rx.client.admin.ipaas-apis.query-parameter.label' | translate }}\"\n                      showRequiredLabel=\"true\"\n                    ></adapt-rx-control-label>\n                    <span\n                      class=\"d-icon-cross_adapt form-group alert-link\"\n                      (click)=\"removeCustomAuthTypeQueryParam($index)\"\n                    ></span>\n                  </div>\n                  <adapt-rx-textfield\n                    formControlName=\"key\"\n                    placeholder=\"{{\n                      'com.bmc.arsys.rx.client.name-value-pairs-editor.enter-name.placeholder' | translate\n                    }}\"\n                    class=\"d-block form-group\"\n                  ></adapt-rx-textfield>\n                  <adapt-rx-textfield\n                    formControlName=\"value\"\n                    placeholder=\"{{\n                      'com.bmc.arsys.rx.client.name-value-pairs-editor.enter-value.placeholder' | translate\n                    }}\"\n                    class=\"d-block\"\n                  ></adapt-rx-textfield>\n                </div>\n              </div>\n            </div>\n          </div>\n        </ng-container>\n      </div>\n\n      <div class=\"col-md-4\">\n        <h6 class=\"my-1\">\n          {{ 'com.bmc.arsys.rx.client.admin.jitterbit-api-editor.api-variables.label' | translate }}\n        </h6>\n\n        <adapt-tabset [type]=\"'pills'\" [tab-active]=\"activeIndex\" (tab-active-changed)=\"tabChanged($event)\">\n          <adapt-tab-panel\n            adapt-tab-title=\"{{ 'com.bmc.arsys.rx.client.admin.jitterbit-api-editor.headers.label' | translate }}\"\n          >\n            <button\n              adapt-button\n              type=\"button\"\n              btn-type=\"tertiary\"\n              class=\"d-icon-plus_circle px-0 align-self-start\"\n              rx-id=\"add-button\"\n              (click)=\"addHeader()\"\n            >\n              {{ 'com.bmc.arsys.rx.client.admin.jitterbit-api-editor.add-header.label' | translate }}\n            </button>\n\n            <div\n              formArrayName=\"headers\"\n              *ngFor=\"let header of ipaasApiEditorForm.get('headers')['controls']; let $index = index\"\n            >\n              <div class=\"d-flex\" [formGroupName]=\"$index\">\n                <adapt-rx-textfield\n                  formControlName=\"name\"\n                  class=\"d-block form-group pr-2 flex-fill\"\n                ></adapt-rx-textfield>\n                <button\n                  class=\"d-icon-minus_circle text-danger form-group px-0\"\n                  adapt-button\n                  btn-type=\"tertiary\"\n                  type=\"button\"\n                  (click)=\"removeHeader($index)\"\n                ></button>\n              </div>\n            </div>\n          </adapt-tab-panel>\n\n          <adapt-tab-panel\n            adapt-tab-title=\"{{\n              'com.bmc.arsys.rx.client.admin.jitterbit-api-editor.query-parameters.label' | translate\n            }}\"\n          >\n            <button\n              adapt-button\n              type=\"button\"\n              btn-type=\"tertiary\"\n              class=\"d-icon-plus_circle px-0 align-self-start\"\n              rx-id=\"add-button\"\n              (click)=\"addQueryParameter()\"\n            >\n              {{ 'com.bmc.arsys.rx.client.admin.jitterbit-api-editor.add-query-parameter.label' | translate }}\n            </button>\n\n            <div\n              formArrayName=\"queryParameters\"\n              *ngFor=\"let parameter of ipaasApiEditorForm.get('queryParameters')['controls']; let $index = index\"\n            >\n              <div class=\"d-flex\" [formGroupName]=\"$index\">\n                <adapt-rx-textfield\n                  formControlName=\"name\"\n                  class=\"d-block form-group pr-2 flex-fill\"\n                ></adapt-rx-textfield>\n                <button\n                  class=\"d-icon-minus_circle text-danger form-group px-0\"\n                  adapt-button\n                  btn-type=\"tertiary\"\n                  type=\"button\"\n                  (click)=\"removeQueryParameter($index)\"\n                ></button>\n              </div>\n            </div>\n          </adapt-tab-panel>\n        </adapt-tabset>\n      </div>\n    </div>\n  </form>\n</div>\n\n<div class=\"modal-footer\">\n  <button\n    adapt-button\n    type=\"button\"\n    btn-type=\"primary\"\n    [disabled]=\"isSaveButtonDisabled()\"\n    (click)=\"save()\"\n    rx-id=\"save-button\"\n  >\n    {{ 'com.bmc.arsys.rx.client.common.save.label' | translate }}\n  </button>\n  <button adapt-button type=\"button\" btn-type=\"secondary\" rx-id=\"cancel-button\" (click)=\"cancel()\">\n    {{ 'com.bmc.arsys.rx.client.common.cancel.label' | translate }}\n  </button>\n</div>\n","import { Injectable } from '@angular/core';\nimport { Observable } from 'rxjs';\nimport { RX_RESOURCE_URLS } from '@helix/platform/shared/api';\nimport { HttpClient } from '@angular/common/http';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class RxIpaasBaseApisService {\n  constructor(private httpClient: HttpClient) {}\n\n  renameApiGroup(resourceType: string, oldGroupName: string, newGroupName: string): Observable<any> {\n    return this.httpClient.post(RX_RESOURCE_URLS.command, {\n      resourceType: resourceType,\n      oldGroup: oldGroupName,\n      newGroup: newGroupName\n    });\n  }\n}\n","import { Component, Injector, OnInit, ViewChild } from '@angular/core';\nimport { NgForm } from '@angular/forms';\nimport { RxModalClass } from '@helix/platform/ui-kit';\nimport { ActiveModalRef, DismissReasons } from '@bmc-ux/adapt-angular';\nimport { pull } from 'lodash';\n\n@Component({\n  selector: 'rx-group-editor',\n  templateUrl: './group-editor.component.html',\n  styleUrls: ['./group-editor.component.scss']\n})\nexport class GroupEditorComponent extends RxModalClass implements OnInit {\n  @ViewChild('groupNameForm', { read: NgForm, static: true })\n  groupNameForm: NgForm;\n\n  groupName: '';\n  groupNames: string[];\n\n  private oldGroupName: string;\n\n  constructor(private activeModalRef: ActiveModalRef, protected injector: Injector) {\n    super(activeModalRef, injector);\n  }\n\n  ngOnInit(): void {\n    super.ngOnInit();\n    this.groupName = this.activeModalRef.getData().groupName;\n    this.groupNames = pull(this.activeModalRef.getData().groupNames, this.groupName);\n    this.oldGroupName = this.groupName;\n  }\n\n  isDirty(): boolean {\n    return this.groupNameForm.dirty;\n  }\n\n  isSaveButtonDisabled(): boolean {\n    return this.groupNameForm.pristine || this.groupNameForm.invalid || this.oldGroupName === this.groupName;\n  }\n\n  saveGroupName(): void {\n    this.activeModalRef.close(this.groupName);\n  }\n\n  cancel(): void {\n    this.activeModalRef.dismiss(DismissReasons.CLOSE_BTN);\n  }\n}\n","<form #groupNameForm=\"ngForm\">\n  <adapt-rx-textfield\n    name=\"group-name\"\n    rx-id=\"group-name\"\n    label=\"{{ 'com.bmc.arsys.rx.client.admin.ipaas-apis.api-group-name.label' | translate }}\"\n    [(ngModel)]=\"groupName\"\n    [rxUnique]=\"{\n      errorMessage: 'com.bmc.arsys.rx.client.admin.ipaas-api-editor.group-name-exists.error.message' | translate,\n      items: groupNames\n    }\"\n    pattern=\"^[a-zA-Z0-9 _-]+$\"\n    maxlength=\"254\"\n    required=\"true\"\n    class=\"d-block form-group m-4\"\n  >\n  </adapt-rx-textfield>\n</form>\n\n<div class=\"modal-footer\">\n  <button\n    adapt-button\n    type=\"button\"\n    btn-type=\"primary\"\n    rx-id=\"save-button\"\n    [disabled]=\"isSaveButtonDisabled()\"\n    (click)=\"saveGroupName()\"\n  >\n    {{ 'com.bmc.arsys.rx.client.common.save.label' | translate }}\n  </button>\n  <button adapt-button type=\"button\" btn-type=\"secondary\" rx-id=\"cancel-button\" (click)=\"cancel()\">\n    {{ 'com.bmc.arsys.rx.client.common.cancel.label' | translate }}\n  </button>\n</div>\n","import { Component, EventEmitter, Input, OnInit, Output, ViewChild } from '@angular/core';\nimport {\n  ColumnSortDirection,\n  IRecordGridActionButton,\n  IRecordGridColumn,\n  IRecordGridConfig,\n  IRecordGridDataPageParams,\n  RecordGridComponent\n} from '@helix/platform/view/components';\nimport { noop, Observable, of } from 'rxjs';\nimport { IRecordDefinition, RX_RECORD_DEFINITION, RxRecordInstanceDataPageService } from '@helix/platform/record/api';\nimport { RX_IPAAS_APIS } from './ipaas-base-apis.constant';\nimport { TranslateService } from '@ngx-translate/core';\nimport { IDataPageResult, IPlainObject, RxNotificationService } from '@helix/platform/shared/api';\nimport { RxIpaasBaseApisService } from './ipaas-base-apis.service';\nimport { RX_MODAL, RxModalService } from '@helix/platform/ui-kit';\nimport { IRowDataItem, OpenViewActionModalSize, RxViewActionUtilsService } from '@helix/platform/view/api';\nimport { castArray, get, map as _map } from 'lodash';\nimport { GroupEditorComponent } from './group-editor/group-editor.component';\nimport { IIpaasApisConfig, IIpaasApiInfo } from './ipaas-base-apis.types';\n\n@Component({\n  selector: 'rx-ipaas-base-apis',\n  templateUrl: './ipaas-base-apis.component.html'\n})\nexport class IpaasBaseApisComponent implements OnInit {\n  @Input()\n  ipaasApisConfig: IIpaasApisConfig;\n\n  @Output()\n  createApi = new EventEmitter<IIpaasApiInfo>();\n\n  @Output()\n  editApi = new EventEmitter<IIpaasApiInfo>();\n\n  @Output()\n  deleteApis = new EventEmitter<string[]>();\n\n  @ViewChild('ipaasApisGrid')\n  ipaasApisGrid: RecordGridComponent;\n\n  gridConfig$: Observable<IRecordGridConfig>;\n\n  recordDefinition: IRecordDefinition = {\n    fieldDefinitions: [\n      {\n        id: RX_IPAAS_APIS.fieldIds.groupName,\n        resourceType: RX_RECORD_DEFINITION.resourceTypes.character\n      },\n      {\n        id: RX_IPAAS_APIS.fieldIds.apiName,\n        resourceType: RX_RECORD_DEFINITION.resourceTypes.character\n      },\n      {\n        id: RX_IPAAS_APIS.fieldIds.organization,\n        resourceType: RX_RECORD_DEFINITION.resourceTypes.character\n      },\n      {\n        id: RX_IPAAS_APIS.fieldIds.environment,\n        resourceType: RX_RECORD_DEFINITION.resourceTypes.character\n      },\n      {\n        id: RX_IPAAS_APIS.fieldIds.path,\n        resourceType: RX_RECORD_DEFINITION.resourceTypes.character\n      },\n      {\n        id: RX_IPAAS_APIS.fieldIds.method,\n        resourceType: RX_RECORD_DEFINITION.resourceTypes.selection,\n        optionNamesById: RX_IPAAS_APIS.methods\n      }\n    ]\n  };\n\n  constructor(\n    private translateService: TranslateService,\n    private rxIpaasBaseApisService: RxIpaasBaseApisService,\n    private rxNotificationService: RxNotificationService,\n    private rxModalService: RxModalService,\n    private rxViewActionUtilsService: RxViewActionUtilsService,\n    private rxRecordInstanceDataPageService: RxRecordInstanceDataPageService\n  ) {}\n\n  ngOnInit(): void {\n    this.gridConfig$ = of({\n      getData: this.getData.bind(this),\n      recordDefinitionName: this.ipaasApisConfig.recordDefinitionName,\n      columns: this.getColumns(),\n      actionButtons: this.getActionButtons(),\n      getRecordDefinition: () => of(this.recordDefinition),\n      styles: 'flex-fill'\n    });\n  }\n\n  private getData(queryParams: IRecordGridDataPageParams): Observable<IDataPageResult> {\n    const params = {\n      ...queryParams,\n      propertySelection: [\n        RX_RECORD_DEFINITION.coreFieldIds.id,\n        RX_IPAAS_APIS.fieldIds.groupName,\n        RX_IPAAS_APIS.fieldIds.apiName,\n        RX_IPAAS_APIS.fieldIds.organization,\n        RX_IPAAS_APIS.fieldIds.environment,\n        RX_IPAAS_APIS.fieldIds.path,\n        RX_IPAAS_APIS.fieldIds.method\n      ]\n    };\n\n    delete params.searchText;\n\n    return this.rxRecordInstanceDataPageService.post({ params });\n  }\n\n  private getColumns(): IRecordGridColumn[] {\n    return [\n      {\n        fieldId: String(RX_IPAAS_APIS.fieldIds.groupName),\n        index: 0,\n        title: this.translateService.instant('com.bmc.arsys.rx.client.admin.jitterbit-apis.group-name.label'),\n        clickable: true,\n        actions: [\n          {\n            name: (previousActionResult: any, lastActionRow: IRowDataItem) => this.renameGroup(lastActionRow)\n          }\n        ],\n        sortable: { direction: ColumnSortDirection.Asc, priority: 0 }\n      },\n      {\n        fieldId: String(RX_IPAAS_APIS.fieldIds.apiName),\n        index: 1,\n        title: this.translateService.instant('com.bmc.arsys.rx.client.admin.jitterbit-apis.api-name.label'),\n        clickable: true,\n        actions: [\n          {\n            name: (previousActionResult: any, lastActionRow: IRowDataItem) => this.openEditApiDialog(lastActionRow)\n          }\n        ],\n        sortable: { direction: ColumnSortDirection.Asc, priority: 1 }\n      },\n      {\n        fieldId: String(RX_IPAAS_APIS.fieldIds.organization),\n        index: 2,\n        title: this.translateService.instant('com.bmc.arsys.rx.client.approval.configuration.org')\n      },\n      {\n        fieldId: String(RX_IPAAS_APIS.fieldIds.environment),\n        index: 3,\n        title: this.translateService.instant('com.bmc.arsys.rx.client.admin.jitterbit-apis.environment.label')\n      },\n      {\n        fieldId: String(RX_IPAAS_APIS.fieldIds.path),\n        index: 4,\n        title: this.translateService.instant('com.bmc.arsys.rx.client.admin.jitterbit-apis.path.label')\n      },\n      {\n        fieldId: String(RX_IPAAS_APIS.fieldIds.method),\n        index: 5,\n        title: this.translateService.instant('com.bmc.arsys.rx.client.admin.jitterbit-apis.method.label')\n      }\n    ];\n  }\n\n  private getActionButtons(): IRecordGridActionButton[] {\n    return [\n      {\n        label: this.translateService.instant('com.bmc.arsys.rx.client.common.delete.label'),\n        style: 'tertiary',\n        iconCls: 'trash',\n        actions: [\n          {\n            name: () => {\n              this.rxModalService\n                .confirm({\n                  title: this.translateService.instant('com.bmc.arsys.rx.client.common.warning.label'),\n                  modalStyle: RX_MODAL.modalStyles.warning,\n                  message: this.translateService.instant(\n                    'com.bmc.arsys.rx.client.admin.ipaas-apis.delete-api.confirmation.message'\n                  )\n                })\n                .then((result: boolean) => {\n                  if (result) {\n                    const records = castArray(this.ipaasApisGrid.api.getSelectedRows());\n                    const recordIds = this.rxViewActionUtilsService.extractRecordIds(records);\n\n                    this.deleteApis.emit(recordIds);\n                  }\n                });\n            }\n          }\n        ]\n      },\n      {\n        label: this.translateService.instant('com.bmc.arsys.rx.client.common.edit.label'),\n        style: 'tertiary',\n        icon: 'pencil',\n        disabled: () => this.ipaasApisGrid.api.getSelectedRowCount() !== 1,\n        actions: [\n          {\n            name: () => this.openEditApiDialog(this.ipaasApisGrid.api.getFirstSelectedRow())\n          }\n        ]\n      }\n    ];\n  }\n\n  private renameGroup(row: IPlainObject): void {\n    this.rxModalService\n      .openModal({\n        title: this.translateService.instant('com.bmc.arsys.rx.client.admin.ipaas-apis.rename-api-group.label'),\n        content: GroupEditorComponent,\n        size: OpenViewActionModalSize.Xsmall as any,\n        data: {\n          groupName: row[RX_IPAAS_APIS.fieldIds.groupName],\n          groupNames: _map(this.ipaasApisGrid.adaptTableConfig.data, RX_IPAAS_APIS.fieldIds.groupName)\n        }\n      })\n      .then((groupName: string) => {\n        this.rxIpaasBaseApisService\n          .renameApiGroup(this.ipaasApisConfig.resourceType, row[RX_IPAAS_APIS.fieldIds.groupName], groupName)\n          .subscribe(() => {\n            this.rxNotificationService.addSuccessMessage(\n              this.translateService.instant(\n                'com.bmc.arsys.rx.client.admin.ipaas-apis.rename-group-save.success.message'\n              )\n            );\n\n            this.refreshIpaasGrid();\n          });\n      })\n      .catch(noop);\n  }\n\n  openAddApiDialog(): void {\n    const selectedGroup = this.ipaasApisGrid.api.getFirstSelectedRow();\n\n    this.createApi.emit({\n      groupName: get(selectedGroup, RX_IPAAS_APIS.fieldIds.groupName, ''),\n      recordDefinitionName: this.ipaasApisConfig.recordDefinitionName\n    });\n  }\n\n  openEditApiDialog(row: IPlainObject): void {\n    this.editApi.emit({\n      id: row[RX_RECORD_DEFINITION.coreFieldIds.id],\n      apiName: row[RX_IPAAS_APIS.fieldIds.apiName],\n      groupName: row[RX_IPAAS_APIS.fieldIds.groupName],\n      recordDefinitionName: this.ipaasApisConfig.recordDefinitionName\n    });\n  }\n\n  refreshIpaasGrid(): void {\n    this.ipaasApisGrid.api.refresh().subscribe();\n  }\n}\n","<rx-admin-settings header=\"{{ ipaasApisConfig.titleKey | translate }}\">\n  <div class=\"d-flex ml-2\">\n    <button\n      adapt-button\n      type=\"button\"\n      btn-type=\"tertiary\"\n      class=\"d-icon-plus_circle align-self-start\"\n      rx-id=\"new-button\"\n      (click)=\"openAddApiDialog()\"\n    >\n      {{ 'com.bmc.arsys.rx.client.common.add.label' | translate }}\n    </button>\n  </div>\n\n  <rx-record-grid rx-id=\"ipaas-apis-grid\" #ipaasApisGrid [config]=\"gridConfig$\"></rx-record-grid>\n</rx-admin-settings>\n","import { Component, ViewChild } from '@angular/core';\nimport { IIpaasApiInfo, IIpaasApisConfig } from '../ipaas-base-apis/ipaas-base-apis.types';\nimport { RxModalService } from '@helix/platform/ui-kit';\nimport { JitterbitApiEditorComponent } from './jitterbit-api-editor.component';\nimport { EMPTY, forkJoin, noop, Observable } from 'rxjs';\nimport { IpaasBaseApisComponent } from '../ipaas-base-apis/ipaas-base-apis.component';\nimport { RxNotificationService } from '@helix/platform/shared/api';\nimport { TranslateService } from '@ngx-translate/core';\nimport { RxJitterbitApisService } from './jitterbit-apis.service';\n\n@Component({\n  selector: 'rx-admin-jitterbit-apis',\n  templateUrl: './jitterbit-apis.component.html'\n})\nexport class JitterbitApisAdminComponent {\n  @ViewChild('ipaasBaseApisConfiguration')\n  ipaasBaseApisComponent: IpaasBaseApisComponent;\n\n  jitterbitApisConfig: IIpaasApisConfig = {\n    titleKey: 'com.bmc.arsys.rx.client.admin.jitterbit-apis.header.title',\n    recordDefinitionName: 'com.bmc.dsm.ipaas-jitterbit:iPaaS Jitterbit API Definition',\n    resourceType: 'com.bmc.dsm.ipaas.jitterbit.command.RenameJitterbitApiGroupCommand'\n  };\n\n  constructor(\n    private rxModalService: RxModalService,\n    private rxNotificationService: RxNotificationService,\n    private translateService: TranslateService,\n    private rxJitterbitApisService: RxJitterbitApisService\n  ) {}\n\n  openJitterbitCreateApiEditor(apiInfo: IIpaasApiInfo): Promise<any> {\n    return this.rxModalService\n      .openModal({\n        title: this.translateService.instant('com.bmc.arsys.rx.client.admin.ipaas-api-editor.add-api.label'),\n        content: JitterbitApiEditorComponent,\n        data: apiInfo\n      })\n      .then((result) => {\n        if (result) {\n          this.ipaasBaseApisComponent.refreshIpaasGrid();\n        }\n      })\n      .catch(noop);\n  }\n\n  openJitterbitEditApiEditor(apiInfo: IIpaasApiInfo): Promise<any> {\n    return this.rxModalService\n      .openModal({\n        title: this.translateService.instant('com.bmc.arsys.rx.client.admin.ipaas-api-editor.edit-api.label'),\n        content: JitterbitApiEditorComponent,\n        data: apiInfo\n      })\n      .then((result) => {\n        if (result) {\n          this.ipaasBaseApisComponent.refreshIpaasGrid();\n        }\n      })\n      .catch(noop);\n  }\n\n  deleteJitterbitApis(apiIds: string[]): void {\n    this.deleteApiDefinitions(apiIds).subscribe(() => {\n      this.rxNotificationService.addSuccessMessage(\n        this.translateService.instant('com.bmc.arsys.rx.client.admin.ipaas-apis.delete-api.success.message')\n      );\n\n      this.ipaasBaseApisComponent.refreshIpaasGrid();\n    });\n  }\n\n  private deleteApiDefinitions(apiIds: string[]): Observable<any> {\n    if (apiIds.length) {\n      const deleteApiObservables$ = apiIds.map((apiId) => this.rxJitterbitApisService.deleteApiDefinition(apiId));\n\n      return forkJoin(deleteApiObservables$);\n    }\n\n    return EMPTY;\n  }\n}\n","<rx-ipaas-base-apis\n  [ipaasApisConfig]=\"jitterbitApisConfig\"\n  (createApi)=\"openJitterbitCreateApiEditor($event)\"\n  (editApi)=\"openJitterbitEditApiEditor($event)\"\n  (deleteApis)=\"deleteJitterbitApis($event)\"\n  #ipaasBaseApisConfiguration\n></rx-ipaas-base-apis>\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { IpaasBaseApisComponent } from './ipaas-base-apis.component';\nimport { AdminSettingsModule } from '@helix/platform/shared/components';\nimport { RecordGridModule } from '@helix/platform/view/components';\nimport { TranslateModule } from '@ngx-translate/core';\nimport { AdaptButtonModule, AdaptRxTextfieldModule } from '@bmc-ux/adapt-angular';\nimport { GroupEditorComponent } from './group-editor/group-editor.component';\nimport { FormsModule } from '@angular/forms';\nimport { RxUniqueValidatorModule } from '@helix/platform/utils';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    AdminSettingsModule,\n    RecordGridModule,\n    TranslateModule,\n    AdaptButtonModule,\n    AdaptRxTextfieldModule,\n    FormsModule,\n    RxUniqueValidatorModule\n  ],\n  declarations: [IpaasBaseApisComponent, GroupEditorComponent],\n  exports: [IpaasBaseApisComponent]\n})\nexport class IpaasBaseApisModule {}\n","import { ComponentFactoryResolver, NgModule } from '@angular/core';\nimport { JitterbitApisAdminComponent } from './jitterbit-apis.component';\nimport { RX_APPLICATION } from '@helix/platform/shared/api';\nimport { RxViewComponentRegistryService } from '@helix/platform/view/api';\nimport { IpaasBaseApisModule } from '../ipaas-base-apis/ipaas-base-apis.module';\nimport { JitterbitApiEditorComponent } from './jitterbit-api-editor.component';\nimport { RxBusyIndicatorModule } from '@helix/platform/ui-kit';\nimport { ReactiveFormsModule } from '@angular/forms';\nimport {\n  AdaptButtonModule,\n  AdaptRxLabelModule,\n  AdaptRxSelectEditableModule,\n  AdaptRxSelectModule,\n  AdaptRxTextfieldModule,\n  AdaptTabsModule\n} from '@bmc-ux/adapt-angular';\nimport { TranslateModule } from '@ngx-translate/core';\nimport { CommonModule } from '@angular/common';\n\n@NgModule({\n  imports: [\n    IpaasBaseApisModule,\n    RxBusyIndicatorModule,\n    ReactiveFormsModule,\n    AdaptRxLabelModule,\n    AdaptRxSelectModule,\n    AdaptRxSelectEditableModule,\n    AdaptRxTextfieldModule,\n    AdaptTabsModule,\n    TranslateModule,\n    AdaptButtonModule,\n    CommonModule\n  ],\n  declarations: [JitterbitApisAdminComponent, JitterbitApiEditorComponent],\n  entryComponents: [JitterbitApisAdminComponent]\n})\nexport class JitterbitApisRegistrationModule {\n  constructor(\n    private componentFactoryResolver: ComponentFactoryResolver,\n    private rxViewComponentRegistryService: RxViewComponentRegistryService\n  ) {\n    rxViewComponentRegistryService.register({\n      type: 'rx-admin-jitterbit-apis',\n      componentFactory: this.componentFactoryResolver.resolveComponentFactory(JitterbitApisAdminComponent),\n      name: 'iPaaS Jitterbit APIs',\n      isPageComponent: true,\n      availableInBundles: [RX_APPLICATION.settingsBundleId]\n    });\n  }\n}\n","import { AfterContentInit, Component, Input } from '@angular/core';\nimport { FormGroup } from '@angular/forms';\nimport { HttpErrorResponse } from '@angular/common/http';\nimport { TranslateService } from '@ngx-translate/core';\nimport { Observable, Subscription, throwError } from 'rxjs';\nimport { catchError, switchMap, tap } from 'rxjs/operators';\nimport { find, forEach, get, isFunction, map, values } from 'lodash';\nimport { ConnectionTestStatus } from '@helix/platform/ui-kit';\nimport {\n  IAdminComponentSetting,\n  IAdminComponentSettings,\n  RxAdminSettingsService,\n  RxNotificationService\n} from '@helix/platform/shared/api';\nimport { RxCognitiveServiceService } from '../../cognitive-service/cognitive-service.service';\nimport { IIpaasBaseConfig } from './ipaas-base-configuration.types';\n\n@Component({\n  selector: 'rx-ipaas-base-configuration',\n  templateUrl: './ipaas-base-configuration.component.html'\n})\nexport class IpaasBaseConfigurationComponent implements AfterContentInit {\n  @Input()\n  ipaasConfig: IIpaasBaseConfig;\n\n  @Input()\n  childFormGroup: FormGroup;\n\n  busy: Subscription;\n  connectionTestStatus: ConnectionTestStatus = ConnectionTestStatus.Invalid;\n\n  private componentSettings: IAdminComponentSetting[];\n  private isNewIpaasConfiguration: boolean;\n\n  constructor(\n    private rxAdminSettingsService: RxAdminSettingsService,\n    private rxCognitiveServiceService: RxCognitiveServiceService,\n    private rxNotificationService: RxNotificationService,\n    private translateService: TranslateService\n  ) {}\n\n  ngAfterContentInit(): void {\n    this.busy = this.getComponentSettings()\n      .pipe(\n        tap((componentSettings: IAdminComponentSettings) => {\n          this.isNewIpaasConfiguration = !get(componentSettings, 'values', []).length;\n\n          if (this.isNewIpaasConfiguration) {\n            this.componentSettings = map(values(this.ipaasConfig.settingNames), (settingName: string) => ({\n              assigneeGroupPermission: null,\n              componentName: this.ipaasConfig.componentName,\n              settingId: null,\n              settingName,\n              settingValue: null,\n              ownerKeyValue1: null\n            }));\n          } else {\n            this.componentSettings = componentSettings.values;\n            this.updateConfigFormValues();\n          }\n        })\n      )\n      .subscribe();\n\n    this.childFormGroup.valueChanges\n      .pipe(\n        tap(() => {\n          this.connectionTestStatus =\n            this.childFormGroup.pristine || this.childFormGroup.invalid\n              ? ConnectionTestStatus.Invalid\n              : ConnectionTestStatus.Unknown;\n        })\n      )\n      .subscribe();\n  }\n\n  updateConfigFormValues(): void {\n    const savedValues = {};\n\n    forEach(\n      this.ipaasConfig.controlsConfig,\n      (fieldValue, fieldName) => (savedValues[fieldName] = this.getValueFromSetting(fieldName))\n    );\n\n    if (isFunction(this.ipaasConfig.getFormValues)) {\n      this.childFormGroup.patchValue(this.ipaasConfig.getFormValues(savedValues));\n    } else {\n      this.childFormGroup.patchValue(savedValues);\n    }\n  }\n\n  onTestConnection(): void {\n    this.rxCognitiveServiceService\n      .testConnection({\n        resourceType: this.ipaasConfig.resourceType,\n        ...this.ipaasConfig.getPayload(this.childFormGroup.getRawValue())\n      })\n      .pipe(\n        catchError((error: HttpErrorResponse) => {\n          this.connectionTestStatus = ConnectionTestStatus.Failed;\n\n          return throwError(error);\n        })\n      )\n      .subscribe(() => {\n        this.connectionTestStatus = ConnectionTestStatus.Passed;\n      });\n  }\n\n  save(): void {\n    if (this.childFormGroup.valid && this.connectionTestStatus === ConnectionTestStatus.Passed) {\n      let adminSetting$: Observable<any>;\n\n      const payload = this.ipaasConfig.getPayload(this.childFormGroup.getRawValue());\n\n      forEach(payload, (settingValue, settingName) => this.setSettingValue(settingName, settingValue));\n\n      if (this.isNewIpaasConfiguration) {\n        adminSetting$ = this.rxAdminSettingsService.createComponentSettings(\n          this.ipaasConfig.componentName,\n          this.componentSettings,\n          {\n            'default-bundle-scope': this.ipaasConfig.bundleScope\n          }\n        );\n      } else {\n        adminSetting$ = this.rxAdminSettingsService.updateComponentSettings(\n          `${this.ipaasConfig.componentName}/${this.componentSettings[0].ownerKeyValue1}`,\n          this.componentSettings,\n          {\n            'default-bundle-scope': this.ipaasConfig.bundleScope\n          }\n        );\n      }\n\n      this.busy = adminSetting$\n        .pipe(\n          tap(() => {\n            this.rxNotificationService.addSuccessMessage(\n              this.translateService.instant(this.ipaasConfig.saveMessageKey)\n            );\n\n            this.connectionTestStatus = ConnectionTestStatus.Invalid;\n            this.childFormGroup.markAsPristine();\n          }),\n          switchMap(() => this.getComponentSettings()),\n          tap((response) => {\n            this.isNewIpaasConfiguration = false;\n            this.componentSettings = response.values;\n            this.updateConfigFormValues();\n          })\n        )\n        .subscribe();\n    }\n  }\n\n  isSaveButtonDisabled(): boolean {\n    return (\n      this.childFormGroup.pristine ||\n      this.childFormGroup.invalid ||\n      this.connectionTestStatus !== ConnectionTestStatus.Passed\n    );\n  }\n\n  private getComponentSettings(): Observable<IAdminComponentSettings> {\n    return this.rxAdminSettingsService.getComponentSettings(this.ipaasConfig.componentName, {\n      'default-bundle-scope': this.ipaasConfig.bundleScope\n    });\n  }\n\n  private setSettingValue(settingName: string, value: string): void {\n    find(this.componentSettings, {\n      settingName\n    }).settingValue = value;\n  }\n\n  private getValueFromSetting(settingName: string): string {\n    return get(\n      find(this.componentSettings, {\n        settingName\n      }),\n      'settingValue',\n      null\n    );\n  }\n}\n","<rx-admin-settings [header]=\"ipaasConfig.titleKey | translate\" [busy]=\"busy\">\n  <ng-content> </ng-content>\n\n  <rx-connection-tester\n    class=\"d-block form-group\"\n    buttonType=\"secondary\"\n    [status]=\"connectionTestStatus\"\n    (testConnection)=\"onTestConnection()\"\n    rx-id=\"ipaas-configuration-test-button\"\n  ></rx-connection-tester>\n\n  <div class=\"align-items-baseline\">\n    <button\n      type=\"button\"\n      adapt-button\n      btn-type=\"primary\"\n      [disabled]=\"isSaveButtonDisabled()\"\n      (click)=\"save()\"\n      rx-id=\"save-button\"\n      class=\"mt-3\"\n    >\n      {{ 'com.bmc.arsys.rx.client.common.save.label' | translate }}\n    </button>\n  </div>\n</rx-admin-settings>\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { ReactiveFormsModule } from '@angular/forms';\nimport { TranslateModule } from '@ngx-translate/core';\nimport { AdaptButtonModule } from '@bmc-ux/adapt-angular';\nimport { AdminSettingsModule } from '@helix/platform/shared/components';\nimport { RxConnectionTesterModule } from '@helix/platform/ui-kit';\nimport { IpaasBaseConfigurationComponent } from './ipaas-base-configuration.component';\n\n@NgModule({\n  imports: [\n    AdminSettingsModule,\n    AdaptButtonModule,\n    CommonModule,\n    TranslateModule,\n    RxConnectionTesterModule,\n    ReactiveFormsModule\n  ],\n  declarations: [IpaasBaseConfigurationComponent],\n  exports: [IpaasBaseConfigurationComponent]\n})\nexport class IpaasBaseConfigurationModule {}\n","import { Component, OnInit, ViewChild } from '@angular/core';\nimport { FormBuilder, FormGroup } from '@angular/forms';\nimport { RX_APPLICATION } from '@helix/platform/shared/api';\nimport { BaseViewComponent } from '@helix/platform/view/runtime';\nimport { IIpaasBaseConfig, IIpaasBaseConfigPayload } from '../ipaas-base-configuration/ipaas-base-configuration.types';\nimport { IpaasBaseConfigurationComponent } from '../ipaas-base-configuration/ipaas-base-configuration.component';\n\n@Component({\n  selector: 'rx-admin-jitterbit-configuration',\n  templateUrl: './jitterbit-configuration.component.html',\n  styleUrls: ['./jitterbit-configuration.component.scss']\n})\nexport class JitterbitConfigurationAdminComponent extends BaseViewComponent implements OnInit {\n  @ViewChild(IpaasBaseConfigurationComponent)\n  ipaasBaseConfigurationComponent: IpaasBaseConfigurationComponent;\n\n  jitterBitConfigurationForm: FormGroup;\n\n  jitterbitConfig: IIpaasBaseConfig = {\n    componentName: 'iPaaS Jitterbit Configuration',\n    resourceType: 'com.bmc.dsm.ipaas.jitterbit.command.PingJitterbitCommand',\n    bundleScope: RX_APPLICATION.ipaasJitterbitBundleId,\n    titleKey: 'com.bmc.arsys.rx.client.admin.jitterbit-configuration.header.title',\n    saveMessageKey: 'com.bmc.arsys.rx.client.admin.jitterbit-configuration.saved.message',\n    controlsConfig: {\n      url: '',\n      username: '',\n      password: ''\n    },\n    settingNames: {\n      url: 'url',\n      userName: 'username',\n      password: 'password'\n    },\n    getPayload: (formValue: any): IIpaasBaseConfigPayload => ({\n      url: formValue.url,\n      username: formValue.username,\n      password: formValue.password\n    })\n  };\n\n  constructor(private formBuilder: FormBuilder) {\n    super();\n  }\n\n  ngOnInit() {\n    this.jitterBitConfigurationForm = this.formBuilder.group(this.jitterbitConfig.controlsConfig);\n\n    this.notifyPropertyChanged('api', {\n      isDirty: () => this.ipaasBaseConfigurationComponent.childFormGroup.dirty\n    });\n  }\n}\n","<rx-ipaas-base-configuration [ipaasConfig]=\"jitterbitConfig\" [childFormGroup]=\"jitterBitConfigurationForm\">\n  <ng-container [formGroup]=\"jitterBitConfigurationForm\">\n    <adapt-rx-textfield\n      rx-id=\"endpoint-url\"\n      label=\"{{ 'com.bmc.arsys.rx.client.admin.jitterbit-configuration.end-point-url.label' | translate }}\"\n      formControlName=\"url\"\n      required=\"true\"\n      class=\"d-block form-group\"\n    >\n    </adapt-rx-textfield>\n    <adapt-rx-textfield\n      rx-id=\"user-name\"\n      label=\"{{ 'com.bmc.arsys.rx.client.common.user-name.label' | translate }}\"\n      formControlName=\"username\"\n      required=\"true\"\n      class=\"d-block form-group\"\n    >\n    </adapt-rx-textfield>\n    <adapt-rx-textfield\n      rx-id=\"password\"\n      label=\"{{ 'com.bmc.arsys.rx.client.common.password.label' | translate }}\"\n      formControlName=\"password\"\n      required=\"true\"\n      [isPassword]=\"true\"\n      class=\"d-block form-group\"\n    >\n    </adapt-rx-textfield>\n  </ng-container>\n</rx-ipaas-base-configuration>\n","import { ComponentFactoryResolver, NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { ReactiveFormsModule } from '@angular/forms';\nimport { TranslateModule } from '@ngx-translate/core';\nimport { AdaptRxTextfieldModule } from '@bmc-ux/adapt-angular';\nimport { RX_APPLICATION } from '@helix/platform/shared/api';\nimport { RxViewComponentRegistryService } from '@helix/platform/view/api';\nimport { IpaasBaseConfigurationModule } from '../ipaas-base-configuration/ipaas-base-configuration.module';\nimport { JitterbitConfigurationAdminComponent } from './jitterbit-configuration.component';\n\n@NgModule({\n  imports: [CommonModule, AdaptRxTextfieldModule, IpaasBaseConfigurationModule, ReactiveFormsModule, TranslateModule],\n  declarations: [JitterbitConfigurationAdminComponent]\n})\nexport class JitterbitConfigurationRegistrationModule {\n  constructor(\n    private componentFactoryResolver: ComponentFactoryResolver,\n    private rxViewComponentRegistryService: RxViewComponentRegistryService\n  ) {\n    rxViewComponentRegistryService.register({\n      type: 'rx-admin-jitterbit-configuration',\n      componentFactory: this.componentFactoryResolver.resolveComponentFactory(JitterbitConfigurationAdminComponent),\n      name: 'iPaaS Jitterbit configuration',\n      isPageComponent: true,\n      availableInBundles: [RX_APPLICATION.settingsBundleId]\n    });\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\nimport { Observable } from 'rxjs';\nimport { IApiPath, IIpaasApiDefinition, IOrganizationData } from '../ipaas-base-apis/ipaas-base-apis.types';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class RxMulesoftApisService {\n  private readonly apiDefinitionUrl = '/api/com.bmc.dsm.ipaas-mulesoft/rx/application/ipaas/mulesoft';\n\n  constructor(private httpClient: HttpClient) {}\n\n  deleteApiDefinition(apiId: string): Observable<any> {\n    return this.httpClient.delete(`${this.apiDefinitionUrl}/apidefinition/${apiId}`);\n  }\n\n  createApiDefinition(apiDefinition: IIpaasApiDefinition): Observable<any> {\n    return this.httpClient.post(`${this.apiDefinitionUrl}/apidefinition`, apiDefinition);\n  }\n\n  getApiDefinition(apiId: string): Observable<IIpaasApiDefinition> {\n    return this.httpClient.get<IIpaasApiDefinition>(`${this.apiDefinitionUrl}/apidefinition/${apiId}`);\n  }\n\n  editApiDefinition(apiDefinition: IIpaasApiDefinition): Observable<any> {\n    return this.httpClient.put(`${this.apiDefinitionUrl}/apidefinition/${apiDefinition.id}`, apiDefinition);\n  }\n\n  getOrganizationsAndEnvironments(): Observable<IOrganizationData[]> {\n    return this.httpClient.get<IOrganizationData[]>(`${this.apiDefinitionUrl}/organization-info`);\n  }\n\n  getApiPathDefinitions(organization: string, environment: string): Observable<IApiPath> {\n    return this.httpClient.get<IApiPath>(\n      `${this.apiDefinitionUrl}/api-specs/${encodeURIComponent(organization)}/${encodeURIComponent(environment)}`\n    );\n  }\n}\n","import { Component, Injector, OnInit } from '@angular/core';\nimport { ApiEditorBase } from '../ipaas-base-apis/api-editor/api-editor-base.class';\nimport { ActiveModalRef } from '@bmc-ux/adapt-angular';\nimport { RxMulesoftApisService } from './mulesoft-apis.service';\nimport {\n  IApiEditorFormData,\n  IApiPath,\n  IEnvironmentData,\n  IIpaasApiDefinition,\n  IOrganizationData\n} from '../ipaas-base-apis/ipaas-base-apis.types';\nimport { Observable } from 'rxjs';\n\n@Component({\n  selector: 'rx-mulesoft-api-editor',\n  templateUrl: '../ipaas-base-apis/api-editor/api-editor.component.html',\n  styleUrls: ['../ipaas-base-apis/api-editor/api-editor.component.scss']\n})\nexport class MulesoftApiEditorComponent extends ApiEditorBase implements OnInit {\n  constructor(\n    private rxMulesoftApisService: RxMulesoftApisService,\n    protected activeModalRef: ActiveModalRef,\n    protected injector: Injector\n  ) {\n    super(activeModalRef, injector);\n  }\n\n  ngOnInit(): void {\n    super.ngOnInit();\n  }\n\n  protected getOrganizationsAndEnvironments(): Observable<IOrganizationData[]> {\n    return this.rxMulesoftApisService.getOrganizationsAndEnvironments();\n  }\n\n  protected getApiPathDefinitions(environment: IEnvironmentData): Observable<IApiPath> {\n    return this.rxMulesoftApisService.getApiPathDefinitions(this.selectedOrganization.id, environment.id);\n  }\n\n  protected getApiDefinition(apiId: string): Observable<IIpaasApiDefinition> {\n    return this.rxMulesoftApisService.getApiDefinition(apiId);\n  }\n\n  protected editApiDefinition(apiDefinition: IIpaasApiDefinition, formValue: IApiEditorFormData): Observable<any> {\n    apiDefinition.organizationId = formValue.organization[0].id;\n    apiDefinition.environmentId = formValue.environment[0].id;\n\n    return this.rxMulesoftApisService.editApiDefinition(apiDefinition);\n  }\n\n  protected createApiDefinition(apiDefinition: IIpaasApiDefinition, formValue: IApiEditorFormData): Observable<any> {\n    apiDefinition.organizationId = formValue.organization[0].id;\n    apiDefinition.environmentId = formValue.environment[0].id;\n\n    return this.rxMulesoftApisService.createApiDefinition(apiDefinition);\n  }\n\n  protected getEnvironmentList(): IEnvironmentData[] {\n    return this.organizations.find((value) => value.id === this.selectedOrganization.id)?.environments || [];\n  }\n}\n","import { Component, ViewChild } from '@angular/core';\nimport { IIpaasApiInfo, IIpaasApisConfig } from '../ipaas-base-apis/ipaas-base-apis.types';\nimport { EMPTY, forkJoin, noop, Observable } from 'rxjs';\nimport { RxModalService } from '@helix/platform/ui-kit';\nimport { MulesoftApiEditorComponent } from './mulesoft-api-editor.component';\nimport { IpaasBaseApisComponent } from '../ipaas-base-apis/ipaas-base-apis.component';\nimport { RxNotificationService } from '@helix/platform/shared/api';\nimport { TranslateService } from '@ngx-translate/core';\nimport { RxMulesoftApisService } from './mulesoft-apis.service';\n\n@Component({\n  selector: 'rx-admin-mulesoft-apis',\n  templateUrl: './mulesoft-apis.component.html'\n})\nexport class MulesoftApisAdminComponent {\n  @ViewChild('ipaasBaseApisConfiguration')\n  ipaasBaseApisComponent: IpaasBaseApisComponent;\n\n  mulesoftConfig: IIpaasApisConfig = {\n    titleKey: 'com.bmc.arsys.rx.client.admin.mulesoft-apis.header.title',\n    recordDefinitionName: 'com.bmc.dsm.ipaas-mulesoft:iPaaS MuleSoft API Definition',\n    resourceType: 'com.bmc.dsm.ipaas.mulesoft.command.RenameMuleSoftApiGroupCommand'\n  };\n\n  constructor(\n    private rxModalService: RxModalService,\n    private rxNotificationService: RxNotificationService,\n    private translateService: TranslateService,\n    private rxMulesoftApisService: RxMulesoftApisService\n  ) {}\n\n  openMulesoftCreateApiEditor(apiInfo: IIpaasApiInfo): Promise<any> {\n    return this.rxModalService\n      .openModal({\n        title: this.translateService.instant('com.bmc.arsys.rx.client.admin.ipaas-api-editor.add-api.label'),\n        content: MulesoftApiEditorComponent,\n        data: apiInfo\n      })\n      .then((result) => {\n        if (result) {\n          this.ipaasBaseApisComponent.refreshIpaasGrid();\n        }\n      })\n      .catch(noop);\n  }\n\n  openMulesoftEditApiEditor(apiInfo: IIpaasApiInfo): Promise<any> {\n    return this.rxModalService\n      .openModal({\n        title: this.translateService.instant('com.bmc.arsys.rx.client.admin.ipaas-api-editor.edit-api.label'),\n        content: MulesoftApiEditorComponent,\n        data: apiInfo\n      })\n      .then((result) => {\n        if (result) {\n          this.ipaasBaseApisComponent.refreshIpaasGrid();\n        }\n      })\n      .catch(noop);\n  }\n\n  deleteMulesoftApis(apiIds: string[]): void {\n    this.deleteApiDefinitions(apiIds).subscribe(() => {\n      this.rxNotificationService.addSuccessMessage(\n        this.translateService.instant('com.bmc.arsys.rx.client.admin.ipaas-apis.delete-api.success.message')\n      );\n\n      this.ipaasBaseApisComponent.refreshIpaasGrid();\n    });\n  }\n\n  private deleteApiDefinitions(apiIds: string[]): Observable<any> {\n    if (apiIds.length) {\n      const deleteApiObservables$ = apiIds.map((apiId) => this.rxMulesoftApisService.deleteApiDefinition(apiId));\n\n      return forkJoin(deleteApiObservables$);\n    }\n\n    return EMPTY;\n  }\n}\n","<rx-ipaas-base-apis\n  [ipaasApisConfig]=\"mulesoftConfig\"\n  (createApi)=\"openMulesoftCreateApiEditor($event)\"\n  (editApi)=\"openMulesoftEditApiEditor($event)\"\n  (deleteApis)=\"deleteMulesoftApis($event)\"\n  #ipaasBaseApisConfiguration\n></rx-ipaas-base-apis>\n","import { ComponentFactoryResolver, NgModule } from '@angular/core';\nimport { RX_APPLICATION } from '@helix/platform/shared/api';\nimport { RxViewComponentRegistryService } from '@helix/platform/view/api';\nimport { MulesoftApisAdminComponent } from './mulesoft-apis.component';\nimport { IpaasBaseApisModule } from '../ipaas-base-apis/ipaas-base-apis.module';\nimport { MulesoftApiEditorComponent } from './mulesoft-api-editor.component';\nimport { RxBusyIndicatorModule } from '@helix/platform/ui-kit';\nimport { ReactiveFormsModule } from '@angular/forms';\nimport {\n  AdaptButtonModule,\n  AdaptRxLabelModule,\n  AdaptRxSelectEditableModule,\n  AdaptRxSelectModule,\n  AdaptRxTextfieldModule,\n  AdaptTabsModule\n} from '@bmc-ux/adapt-angular';\nimport { TranslateModule } from '@ngx-translate/core';\nimport { CommonModule } from '@angular/common';\n\n@NgModule({\n  imports: [\n    IpaasBaseApisModule,\n    RxBusyIndicatorModule,\n    ReactiveFormsModule,\n    AdaptRxLabelModule,\n    AdaptRxSelectModule,\n    AdaptRxSelectEditableModule,\n    AdaptRxTextfieldModule,\n    AdaptTabsModule,\n    TranslateModule,\n    AdaptButtonModule,\n    CommonModule\n  ],\n  declarations: [MulesoftApisAdminComponent, MulesoftApiEditorComponent],\n  entryComponents: [MulesoftApisAdminComponent]\n})\nexport class MulesoftApisRegistrationModule {\n  constructor(\n    private componentFactoryResolver: ComponentFactoryResolver,\n    private rxViewComponentRegistryService: RxViewComponentRegistryService\n  ) {\n    rxViewComponentRegistryService.register({\n      type: 'rx-admin-mulesoft-apis',\n      componentFactory: this.componentFactoryResolver.resolveComponentFactory(MulesoftApisAdminComponent),\n      name: 'iPaaS MuleSoft APIs',\n      isPageComponent: true,\n      availableInBundles: [RX_APPLICATION.settingsBundleId]\n    });\n  }\n}\n","import { IIpaasBaseConfigPayload } from '../ipaas-base-configuration/ipaas-base-configuration.types';\n\nexport interface IAuthenticationOption {\n  id: string;\n  label: string;\n}\n\nexport interface IMulesoftSettingParams extends IIpaasBaseConfigPayload {\n  authType: string;\n  clientId: string;\n  clientSecret: string;\n}\n\nexport const AUTH_TYPE = {\n  basicAuth: '0',\n  oAuth2: '1'\n};\n\nexport const MULESOFT_AUTH_TYPE_OPTIONS = [\n  {\n    id: AUTH_TYPE.basicAuth,\n    label: 'Basic'\n  },\n  {\n    id: AUTH_TYPE.oAuth2,\n    label: 'OAuth 2.0'\n  }\n];\n","import { Component, OnInit, ViewChild } from '@angular/core';\nimport { AbstractControl, FormBuilder, FormGroup } from '@angular/forms';\nimport { find, first } from 'lodash';\nimport { BaseViewComponent } from '@helix/platform/view/runtime';\nimport { RX_APPLICATION } from '@helix/platform/shared/api';\nimport { IpaasBaseConfigurationComponent } from '../ipaas-base-configuration/ipaas-base-configuration.component';\nimport {\n  AUTH_TYPE,\n  IAuthenticationOption,\n  IMulesoftSettingParams,\n  MULESOFT_AUTH_TYPE_OPTIONS\n} from './mulesoft-configuration.types';\nimport { IIpaasBaseConfig } from '../ipaas-base-configuration/ipaas-base-configuration.types';\nimport { AdaptValidators } from '@bmc-ux/adapt-angular';\nimport { map } from 'rxjs/operators';\n\n@Component({\n  selector: 'rx-admin-mulesoft-configuration',\n  templateUrl: './mulesoft-configuration.component.html',\n  styleUrls: ['./mulesoft-configuration.component.scss']\n})\nexport class MulesoftConfigurationAdminComponent extends BaseViewComponent implements OnInit {\n  @ViewChild(IpaasBaseConfigurationComponent)\n  ipaasBaseConfigurationComponent: IpaasBaseConfigurationComponent;\n\n  mulesoftConfigurationForm: FormGroup;\n\n  mulesoftConfig: IIpaasBaseConfig = {\n    componentName: 'iPaaS MuleSoft Configuration',\n    resourceType: 'com.bmc.dsm.ipaas.mulesoft.command.PingMuleSoftCommand',\n    bundleScope: RX_APPLICATION.ipaasMulesoftBundleId,\n    titleKey: 'com.bmc.arsys.rx.client.admin.mulesoft-configuration.header.title',\n    saveMessageKey: 'com.bmc.arsys.rx.client.admin.mulesoft-configuration.saved.message',\n    controlsConfig: {\n      url: ['', AdaptValidators.required()],\n      authType: ['', AdaptValidators.required()],\n      username: '',\n      password: '',\n      clientId: '',\n      clientSecret: ''\n    },\n    getFormValues: (formValue: any) => ({\n      url: formValue.url,\n      authType: this.getAuthTypeOption(formValue.authType),\n      username: formValue.username,\n      password: formValue.password,\n      clientId: formValue.clientId,\n      clientSecret: formValue.clientSecret\n    }),\n    settingNames: {\n      url: 'url',\n      userName: 'username',\n      password: 'password',\n      authType: 'authType',\n      clientId: 'clientId',\n      clientSecret: 'clientSecret'\n    },\n    getPayload: (formValue: any): IMulesoftSettingParams => {\n      switch ((first(formValue.authType) as IAuthenticationOption)?.id) {\n        case AUTH_TYPE.oAuth2: {\n          return {\n            url: formValue.url,\n            authType: this.getAuthTypePayload(formValue.authType),\n            username: null,\n            password: null,\n            clientId: formValue.clientId,\n            clientSecret: formValue.clientSecret\n          };\n        }\n        default: {\n          return {\n            url: formValue.url,\n            authType: this.getAuthTypePayload(formValue.authType),\n            username: formValue.username,\n            password: formValue.password,\n            clientId: null,\n            clientSecret: null\n          };\n        }\n      }\n    }\n  };\n\n  authenticationOptions: IAuthenticationOption[] = MULESOFT_AUTH_TYPE_OPTIONS;\n\n  optionFormatter = (authenticationOption: IAuthenticationOption) => authenticationOption.label;\n\n  constructor(private formBuilder: FormBuilder) {\n    super();\n  }\n\n  ngOnInit() {\n    this.mulesoftConfigurationForm = this.formBuilder.group(this.mulesoftConfig.controlsConfig);\n    this.mulesoftConfigurationForm.patchValue({ authType: [first(MULESOFT_AUTH_TYPE_OPTIONS)] });\n\n    this.authType.valueChanges.pipe(map((authType) => this.getAuthTypePayload(authType))).subscribe((authType) => {\n      if (authType === AUTH_TYPE.basicAuth) {\n        this.mulesoftConfigurationForm.controls.username.setValidators(AdaptValidators.required());\n        this.mulesoftConfigurationForm.controls.username.enable();\n        this.mulesoftConfigurationForm.controls.password.setValidators(AdaptValidators.required());\n        this.mulesoftConfigurationForm.controls.password.enable();\n        this.mulesoftConfigurationForm.controls.clientId.clearValidators();\n        this.mulesoftConfigurationForm.controls.clientId.disable();\n        this.mulesoftConfigurationForm.controls.clientSecret.clearValidators();\n        this.mulesoftConfigurationForm.controls.clientSecret.disable();\n      } else if (authType === AUTH_TYPE.oAuth2) {\n        this.mulesoftConfigurationForm.controls.username.clearValidators();\n        this.mulesoftConfigurationForm.controls.username.disable();\n        this.mulesoftConfigurationForm.controls.password.clearValidators();\n        this.mulesoftConfigurationForm.controls.password.disable();\n        this.mulesoftConfigurationForm.controls.clientId.setValidators(AdaptValidators.required());\n        this.mulesoftConfigurationForm.controls.clientId.enable();\n        this.mulesoftConfigurationForm.controls.clientSecret.setValidators(AdaptValidators.required());\n        this.mulesoftConfigurationForm.controls.clientSecret.enable();\n      }\n    });\n\n    this.mulesoftConfigurationForm.patchValue({ authType: [first(MULESOFT_AUTH_TYPE_OPTIONS)] });\n\n    this.notifyPropertyChanged('api', {\n      isDirty: () => this.ipaasBaseConfigurationComponent.childFormGroup.dirty\n    });\n  }\n\n  get authType(): AbstractControl {\n    return this.mulesoftConfigurationForm.get('authType');\n  }\n\n  private getAuthTypeOption(id: string): IAuthenticationOption[] {\n    const authType = find(MULESOFT_AUTH_TYPE_OPTIONS, { id: id });\n\n    return authType ? [authType] : [];\n  }\n\n  private getAuthTypePayload(authType: IAuthenticationOption[]): string {\n    return first(authType)?.id;\n  }\n}\n","<rx-ipaas-base-configuration [ipaasConfig]=\"mulesoftConfig\" [childFormGroup]=\"mulesoftConfigurationForm\">\n  <ng-container [formGroup]=\"mulesoftConfigurationForm\">\n    <adapt-rx-textfield\n      rx-id=\"endpoint-url\"\n      label=\"{{ 'com.bmc.arsys.rx.client.admin.mulesoft-configuration.end-point-url.label' | translate }}\"\n      formControlName=\"url\"\n      class=\"d-block form-group\"\n    >\n    </adapt-rx-textfield>\n\n    <adapt-rx-select\n      rx-id=\"auth-type\"\n      formControlName=\"authType\"\n      label=\"{{ 'com.bmc.arsys.rx.client.admin.data-source-connection-properties.authentication.label' | translate }}\"\n      [options]=\"authenticationOptions\"\n      [optionFormatter]=\"optionFormatter\"\n      class=\"d-block form-group\"\n    >\n    </adapt-rx-select>\n\n    <ng-container [ngSwitch]=\"authType.value[0]?.id\">\n      <ng-container *ngSwitchDefault>\n        <adapt-rx-textfield\n          rx-id=\"user-name\"\n          label=\"{{ 'com.bmc.arsys.rx.client.common.user-name.label' | translate }}\"\n          formControlName=\"username\"\n          class=\"d-block form-group\"\n        >\n        </adapt-rx-textfield>\n        <adapt-rx-textfield\n          rx-id=\"password\"\n          label=\"{{ 'com.bmc.arsys.rx.client.common.password.label' | translate }}\"\n          formControlName=\"password\"\n          [isPassword]=\"true\"\n          class=\"d-block form-group\"\n        >\n        </adapt-rx-textfield>\n      </ng-container>\n\n      <ng-container *ngSwitchCase=\"authenticationOptions[1].id\">\n        <adapt-rx-textfield\n          rx-id=\"client-id\"\n          label=\"{{ 'com.bmc.arsys.rx.client.admin.bmc-service-cloud-account.client-id.label' | translate }}\"\n          formControlName=\"clientId\"\n          class=\"d-block form-group\"\n        >\n        </adapt-rx-textfield>\n        <adapt-rx-textfield\n          rx-id=\"client-secret\"\n          label=\"{{ 'com.bmc.arsys.rx.client.admin.bmc-service-cloud-account.client-secret.label' | translate }}\"\n          formControlName=\"clientSecret\"\n          [isPassword]=\"true\"\n          class=\"d-block form-group\"\n        >\n        </adapt-rx-textfield>\n      </ng-container>\n    </ng-container>\n  </ng-container>\n</rx-ipaas-base-configuration>\n","import { ComponentFactoryResolver, NgModule } from '@angular/core';\nimport { ReactiveFormsModule } from '@angular/forms';\nimport { CommonModule } from '@angular/common';\nimport { AdaptRxSelectModule, AdaptRxTextfieldModule } from '@bmc-ux/adapt-angular';\nimport { TranslateModule } from '@ngx-translate/core';\nimport { RxViewComponentRegistryService } from '@helix/platform/view/api';\nimport { RX_APPLICATION } from '@helix/platform/shared/api';\nimport { MulesoftConfigurationAdminComponent } from './mulesoft-configuration.component';\nimport { IpaasBaseConfigurationModule } from '../ipaas-base-configuration/ipaas-base-configuration.module';\n\n@NgModule({\n  imports: [\n    CommonModule,\n    ReactiveFormsModule,\n    AdaptRxTextfieldModule,\n    AdaptRxSelectModule,\n    TranslateModule,\n    IpaasBaseConfigurationModule\n  ],\n  declarations: [MulesoftConfigurationAdminComponent]\n})\nexport class MulesoftConfigurationRegistrationModule {\n  constructor(\n    private componentFactoryResolver: ComponentFactoryResolver,\n    private rxViewComponentRegistryService: RxViewComponentRegistryService\n  ) {\n    rxViewComponentRegistryService.register({\n      type: 'rx-admin-mulesoft-configuration',\n      componentFactory: this.componentFactoryResolver.resolveComponentFactory(MulesoftConfigurationAdminComponent),\n      name: 'iPaaS MuleSoft configuration',\n      isPageComponent: true,\n      availableInBundles: [RX_APPLICATION.settingsBundleId]\n    });\n  }\n}\n","export const RX_ISSUE_REPORTING_CONFIGURATION = {\n  oauthUrl: '/api/rx/application/oauth/token/IssueReporting',\n  settingName: 'errorReportingServiceTenantConfiguration',\n  supportUserMapping: {\n    recordDefinitionName: 'SupportUserMapping',\n    defaultDescription: 'com.bmc.arsys.rx.client.admin.issue-reporting-configuration.default-description.label',\n    fieldIds: {\n      loginName: 70221,\n      supportEmail: 70222\n    }\n  }\n};\n","import { Injectable } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\nimport { RX_ISSUE_REPORTING_CONFIGURATION } from './issue-reporting-configuration.constant';\nimport { Observable } from 'rxjs';\nimport { IOauthConfig, ISupportConfig } from './issue-reporting-configuration.types';\nimport { RX_RECORD_DEFINITION, RxRecordInstanceDataPageService } from '@helix/platform/record/api';\nimport { RxSystemConfigurationService, RxCurrentUserService } from '@helix/platform/shared/api';\nimport { map } from 'rxjs/operators';\nimport { get } from 'lodash';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class RxIssueReportingConfigurationService {\n  constructor(\n    private httpClient: HttpClient,\n    private rxRecordInstanceDataPageService: RxRecordInstanceDataPageService,\n    private rxCurrentUserService: RxCurrentUserService,\n    private rxSystemConfigurationService: RxSystemConfigurationService\n  ) {}\n\n  getOauthConfig(): Observable<IOauthConfig> {\n    return this.httpClient.get<IOauthConfig>(RX_ISSUE_REPORTING_CONFIGURATION.oauthUrl);\n  }\n\n  getSupportId(): Observable<string> {\n    return this.rxSystemConfigurationService\n      .getConfiguration(RX_ISSUE_REPORTING_CONFIGURATION.settingName)\n      .pipe(map((result) => JSON.parse(result.value as string).supportId || ''));\n  }\n\n  setSupportId(supportId: string): Observable<any> {\n    return this.rxSystemConfigurationService.setConfiguration(RX_ISSUE_REPORTING_CONFIGURATION.settingName, {\n      supportId\n    });\n  }\n\n  getSupportConfig(): Observable<ISupportConfig | null> {\n    return this.rxRecordInstanceDataPageService\n      .post({\n        params: {\n          recorddefinition: RX_ISSUE_REPORTING_CONFIGURATION.supportUserMapping.recordDefinitionName,\n          queryExpression: `'${\n            RX_ISSUE_REPORTING_CONFIGURATION.supportUserMapping.fieldIds.loginName\n          }' = \"${this.rxCurrentUserService.getName()}\"`,\n          propertySelection: [\n            RX_RECORD_DEFINITION.coreFieldIds.id,\n            RX_ISSUE_REPORTING_CONFIGURATION.supportUserMapping.fieldIds.loginName,\n            RX_ISSUE_REPORTING_CONFIGURATION.supportUserMapping.fieldIds.supportEmail\n          ]\n        }\n      })\n      .pipe(map((result) => get(result, 'data[0]', null)));\n  }\n}\n","import { Component, OnInit } from '@angular/core';\nimport { FormBuilder, FormGroup } from '@angular/forms';\nimport { RxCurrentUserService, RxNotificationService } from '@helix/platform/shared/api';\nimport { RxIssueReportingConfigurationService } from './issue-reporting-configuration.service';\nimport { forkJoin, Subscription } from 'rxjs';\nimport { RX_ISSUE_REPORTING_CONFIGURATION } from './issue-reporting-configuration.constant';\nimport {\n  RX_RECORD_DEFINITION,\n  RxRecordInstanceService,\n  RxRecordInstanceUpdateService\n} from '@helix/platform/record/api';\nimport { BaseViewComponent } from '@helix/platform/view/runtime';\nimport { TranslateService } from '@ngx-translate/core';\n\n@Component({\n  selector: 'rx-admin-issue-reporting-configuration',\n  templateUrl: './issue-reporting-configuration.component.html',\n  styleUrls: ['./issue-reporting-configuration.component.scss']\n})\nexport class IssueReportingConfigurationAdminComponent extends BaseViewComponent implements OnInit {\n  issueReportingConfigurationForm: FormGroup;\n  isAdministrator: boolean = this.rxCurrentUserService.isAdministrator();\n  isAccountLinked: boolean;\n  oauthUrl = '';\n  busy: Subscription;\n\n  private configId: string;\n\n  constructor(\n    private formBuilder: FormBuilder,\n    private rxCurrentUserService: RxCurrentUserService,\n    private rxIssueReportingConfigurationService: RxIssueReportingConfigurationService,\n    private rxNotificationService: RxNotificationService,\n    private rxRecordInstanceService: RxRecordInstanceService,\n    private rxRecordInstanceUpdateService: RxRecordInstanceUpdateService,\n    private translateService: TranslateService\n  ) {\n    super();\n  }\n\n  saveConfig(): void {\n    const formValue = this.issueReportingConfigurationForm.getRawValue();\n\n    this.rxIssueReportingConfigurationService.setSupportId(formValue.supportId).subscribe();\n\n    if (this.configId) {\n      this.rxRecordInstanceService\n        .get(RX_ISSUE_REPORTING_CONFIGURATION.supportUserMapping.recordDefinitionName, this.configId)\n        .subscribe((recordInstance) => {\n          recordInstance.setFieldValue(\n            RX_ISSUE_REPORTING_CONFIGURATION.supportUserMapping.fieldIds.supportEmail,\n            formValue.supportEmail\n          );\n\n          this.rxRecordInstanceUpdateService.execute(recordInstance).subscribe(() => {\n            this.rxNotificationService.addSuccessMessage(\n              this.translateService.instant(\n                'com.bmc.arsys.rx.client.admin.issue-reporting-configuration.issue-reporting-configuration-updated.message'\n              )\n            );\n            this.issueReportingConfigurationForm.markAsPristine();\n          });\n        });\n    } else {\n      this.rxRecordInstanceService\n        .getNew(RX_ISSUE_REPORTING_CONFIGURATION.supportUserMapping.recordDefinitionName)\n        .subscribe((recordInstance) => {\n          recordInstance.setFieldValue(\n            RX_RECORD_DEFINITION.coreFieldIds.description,\n            this.translateService.instant(RX_ISSUE_REPORTING_CONFIGURATION.supportUserMapping.defaultDescription)\n          );\n\n          recordInstance.setFieldValue(\n            RX_ISSUE_REPORTING_CONFIGURATION.supportUserMapping.fieldIds.supportEmail,\n            formValue.supportEmail\n          );\n\n          recordInstance.setFieldValue(\n            RX_ISSUE_REPORTING_CONFIGURATION.supportUserMapping.fieldIds.loginName,\n            this.rxCurrentUserService.getName()\n          );\n\n          this.rxRecordInstanceService.create(recordInstance).subscribe(() => {\n            this.rxNotificationService.addSuccessMessage(\n              this.translateService.instant(\n                'com.bmc.arsys.rx.client.admin.issue-reporting-configuration.issue-reporting-configuration-saved.message'\n              )\n            );\n            this.issueReportingConfigurationForm.markAsPristine();\n          });\n        });\n    }\n  }\n\n  private getOauthData(): void {\n    this.busy = this.rxIssueReportingConfigurationService.getOauthConfig().subscribe((data) => {\n      this.oauthUrl = data.authorizeURL;\n      this.isAccountLinked = data.configured;\n    });\n  }\n\n  openWindow(): void {\n    const title = 'BMC Cloud Service';\n    const openedWindow = window.open(this.oauthUrl, title, 'scrollbars=1,height=600,width=670');\n\n    this.assertWindowClosed(openedWindow);\n  }\n\n  private assertWindowClosed(openedWindow: Window): void {\n    const interval = setInterval(() => {\n      if (!openedWindow || !openedWindow.closed) {\n        return;\n      }\n\n      clearInterval(interval);\n      this.getOauthData();\n    }, 100);\n  }\n\n  ngOnInit(): void {\n    this.notifyPropertyChanged('api', {\n      isDirty: () => this.issueReportingConfigurationForm?.dirty\n    });\n\n    if (this.isAdministrator) {\n      this.issueReportingConfigurationForm = this.formBuilder.group({\n        supportId: '',\n        supportEmail: ''\n      });\n\n      this.busy = forkJoin({\n        supportId: this.rxIssueReportingConfigurationService.getSupportId(),\n        supportConfig: this.rxIssueReportingConfigurationService.getSupportConfig()\n      }).subscribe((result) => {\n        let supportEmail = '';\n\n        if (result.supportConfig) {\n          this.configId = result.supportConfig[RX_RECORD_DEFINITION.coreFieldIds.id];\n          supportEmail =\n            result.supportConfig[RX_ISSUE_REPORTING_CONFIGURATION.supportUserMapping.fieldIds.supportEmail];\n        }\n\n        this.issueReportingConfigurationForm.patchValue({\n          supportId: result.supportId,\n          supportEmail\n        });\n      });\n\n      this.getOauthData();\n    }\n  }\n}\n","<rx-admin-settings\n  header=\"{{ 'com.bmc.arsys.rx.client.admin.issue-reporting-configuration.header.title' | translate }}\"\n  [busy]=\"busy\"\n>\n  <adapt-accordion multiselect=\"true\" class=\"pb-4\">\n    <form [formGroup]=\"issueReportingConfigurationForm\" *ngIf=\"isAdministrator\">\n      <adapt-accordion-tab\n        title=\"{{\n          'com.bmc.arsys.rx.client.admin.issue-reporting-configuration.bmc-service-cloud-account-configuration.label'\n            | translate\n        }}\"\n        isOpen=\"true\"\n      >\n        <adapt-rx-textfield\n          rx-id=\"support-id\"\n          label=\"Support ID\"\n          formControlName=\"supportId\"\n          required=\"true\"\n          class=\"d-block form-group\"\n        >\n        </adapt-rx-textfield>\n        <adapt-rx-textfield\n          rx-id=\"support-email\"\n          label=\"Support email\"\n          formControlName=\"supportEmail\"\n          required=\"true\"\n          email=\"true\"\n          class=\"d-block form-group\"\n        >\n        </adapt-rx-textfield>\n      </adapt-accordion-tab>\n\n      <adapt-accordion-tab title=\"Link BMC Service Cloud account to BMC Helix platform\" isOpen=\"true\" class=\"d-block\">\n        <adapt-alert\n          *ngIf=\"oauthUrl === null\"\n          class=\"py-2\"\n          [config]=\"{\n            content:\n              'com.bmc.arsys.rx.client.admin.issue-reporting-configuration.issue-reporting-configuration-missing.message'\n              | translate,\n            type: 'inline',\n            variant: 'danger'\n          }\"\n        ></adapt-alert>\n        <ng-container *ngIf=\"oauthUrl\">\n          <adapt-alert\n            *ngIf=\"isAccountLinked\"\n            class=\"py-2\"\n            [config]=\"{\n              content:\n                'com.bmc.arsys.rx.client.admin.issue-reporting-configuration.account-is-linked.message' | translate,\n              type: 'inline',\n              variant: 'success'\n            }\"\n          ></adapt-alert>\n          <adapt-alert\n            *ngIf=\"!isAccountLinked\"\n            class=\"py-2\"\n            [config]=\"{\n              content:\n                'com.bmc.arsys.rx.client.admin.issue-reporting-configuration.account-is-not-linked.message' | translate,\n              type: 'inline',\n              variant: 'warning'\n            }\"\n          ></adapt-alert>\n          <button\n            adapt-button\n            type=\"button\"\n            rx-id=\"link-account-button\"\n            btn-type=\"secondary\"\n            [disabled]=\"isAccountLinked\"\n            (click)=\"openWindow()\"\n          >\n            {{ 'com.bmc.arsys.rx.client.admin.issue-reporting-configuration.link-account.label' | translate }}\n          </button>\n        </ng-container>\n      </adapt-accordion-tab>\n\n      <button\n        adapt-button\n        type=\"button\"\n        rx-id=\"save-button\"\n        btn-type=\"primary\"\n        class=\"mt-4\"\n        [disabled]=\"issueReportingConfigurationForm.pristine || issueReportingConfigurationForm.invalid\"\n        (click)=\"saveConfig()\"\n      >\n        {{ 'com.bmc.arsys.rx.client.common.save.label' | translate }}\n      </button>\n    </form>\n  </adapt-accordion>\n</rx-admin-settings>\n","import { ComponentFactoryResolver, NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { RX_APPLICATION } from '@helix/platform/shared/api';\nimport { RxViewComponentRegistryService } from '@helix/platform/view/api';\nimport { IssueReportingConfigurationAdminComponent } from './issue-reporting-configuration.component';\nimport { AdminSettingsModule } from '@helix/platform/shared/components';\nimport { ReactiveFormsModule } from '@angular/forms';\nimport { TranslateModule } from '@ngx-translate/core';\nimport {\n  AdaptAccordionModule,\n  AdaptAlertModule,\n  AdaptButtonModule,\n  AdaptIconModule,\n  AdaptRxTextfieldModule\n} from '@bmc-ux/adapt-angular';\n\n@NgModule({\n  imports: [\n    AdaptAccordionModule,\n    AdaptAlertModule,\n    AdaptButtonModule,\n    AdaptIconModule,\n    AdaptRxTextfieldModule,\n    AdminSettingsModule,\n    CommonModule,\n    ReactiveFormsModule,\n    TranslateModule\n  ],\n  declarations: [IssueReportingConfigurationAdminComponent],\n  entryComponents: [IssueReportingConfigurationAdminComponent]\n})\nexport class IssueReportingConfigurationModule {\n  constructor(\n    private componentFactoryResolver: ComponentFactoryResolver,\n    private rxViewComponentRegistryService: RxViewComponentRegistryService\n  ) {\n    rxViewComponentRegistryService.register({\n      type: 'rx-admin-issue-reporting-configuration',\n      componentFactory: this.componentFactoryResolver.resolveComponentFactory(\n        IssueReportingConfigurationAdminComponent\n      ),\n      name: 'Issue reporting configuration',\n      isPageComponent: true,\n      availableInBundles: [RX_APPLICATION.settingsBundleId]\n    });\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\nimport { ITenant } from './manage-tenant.types';\nimport { Observable } from 'rxjs';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class RxTenantService {\n  private tenantApiUrl = '/api/rx/application/tenant';\n\n  constructor(private httpClient: HttpClient) {}\n\n  createTenant(tenant: ITenant): Observable<any> {\n    return this.httpClient.post(this.tenantApiUrl, tenant);\n  }\n\n  deleteTenant(tenantName: string): Observable<any> {\n    return this.httpClient.delete(`${this.tenantApiUrl}/${tenantName}`);\n  }\n\n  editTenant(tenant: ITenant): Observable<any> {\n    return this.httpClient.put(`${this.tenantApiUrl}/${tenant.name}`, tenant);\n  }\n\n  getTenant(tenantName: string): Observable<ITenant> {\n    return this.httpClient.get<ITenant>(`${this.tenantApiUrl}/${tenantName}`);\n  }\n}\n","export interface ITenant {\n  name: string;\n  domainIdentifier: string;\n  virtualHostname: string;\n  tenantId?: string;\n}\n\nexport enum TenantFields {\n  Name = 'name',\n  DomainIdentifier = 'domainIdentifier',\n  VirtualHostname = 'virtualHostname'\n}\n","import { Component, Injector, OnInit } from '@angular/core';\nimport { FormBuilder, FormGroup } from '@angular/forms';\nimport { DismissReasons, DockedPanelContext } from '@bmc-ux/adapt-angular';\nimport { RxModalClass } from '@helix/platform/ui-kit';\nimport { RxTenantService } from '../manage-tenant.service';\nimport { RxNotificationService } from '@helix/platform/shared/api';\nimport { TranslateService } from '@ngx-translate/core';\n\n@Component({\n  selector: 'rx-tenant-editor',\n  templateUrl: './tenant-editor.component.html'\n})\nexport class TenantEditorComponent extends RxModalClass implements OnInit {\n  validDefinitionNameRegex: any;\n  tenantEditorFormGroup: FormGroup;\n  domainIdentifierRegexp = /^[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,4}$/;\n  isEditMode = false;\n\n  constructor(\n    private formBuilder: FormBuilder,\n    private dockedPanelContext: DockedPanelContext,\n    private rxManageTenantService: RxTenantService,\n    private rxNotificationService: RxNotificationService,\n    private translateService: TranslateService,\n    protected injector: Injector\n  ) {\n    super(dockedPanelContext, injector);\n  }\n\n  ngOnInit(): void {\n    super.ngOnInit();\n\n    const selectedTenantData = this.dockedPanelContext.getData().tenant;\n\n    this.tenantEditorFormGroup = this.formBuilder.group({\n      name: '',\n      domainIdentifier: '',\n      virtualHostname: ''\n    });\n\n    if (selectedTenantData) {\n      this.isEditMode = true;\n\n      this.tenantEditorFormGroup.patchValue({\n        name: selectedTenantData.name,\n        domainIdentifier: selectedTenantData.domainIdentifier,\n        virtualHostname: selectedTenantData.virtualHostname\n      });\n    }\n  }\n\n  isDirty(): boolean {\n    return this.tenantEditorFormGroup.dirty;\n  }\n\n  save(): void {\n    const tenantPayload = this.tenantEditorFormGroup.getRawValue();\n\n    if (this.isEditMode) {\n      tenantPayload.tenantId = this.dockedPanelContext.getData().tenant.tenantId;\n    }\n\n    const writeEvent = this.isEditMode\n      ? this.rxManageTenantService.editTenant(tenantPayload)\n      : this.rxManageTenantService.createTenant(tenantPayload);\n\n    writeEvent.subscribe(() => {\n      this.rxNotificationService.addSuccessMessage(\n        this.isEditMode\n          ? this.translateService.instant(\n              'com.bmc.arsys.rx.client.admin.manage-tenant.tenant-editor.tenant-updated.message'\n            )\n          : this.translateService.instant(\n              'com.bmc.arsys.rx.client.admin.manage-tenant.tenant-editor.tenant-created.message'\n            )\n      );\n\n      this.tenantEditorFormGroup.markAsPristine();\n      this.dockedPanelContext.close('');\n    });\n  }\n\n  cancel(): void {\n    this.dockedPanelContext.dismiss(DismissReasons.CLOSE_BTN);\n  }\n}\n","<div class=\"dp-body\">\n  <form [formGroup]=\"tenantEditorFormGroup\">\n    <adapt-rx-textfield\n      class=\"d-block form-group\"\n      rx-id=\"tenant-name-field\"\n      formControlName=\"name\"\n      label=\" {{ 'com.bmc.arsys.rx.client.admin.manage-tenant.tenant-editor.tenant-name.label' | translate }}\"\n      required\n      maxlength=\"20\"\n      [disabled]=\"isEditMode\"\n    ></adapt-rx-textfield>\n    <adapt-rx-textfield\n      class=\"d-block form-group\"\n      rx-id=\"domain-identifier-field\"\n      formControlName=\"domainIdentifier\"\n      label=\"{{ 'com.bmc.arsys.rx.client.admin.manage-tenant.tenant-editor.domain-identifier.label' | translate }}\"\n      placeholder=\"e.g. domain.com\"\n      required\n      maxlength=\"254\"\n      [pattern]=\"domainIdentifierRegexp\"\n    ></adapt-rx-textfield>\n    <adapt-rx-textfield\n      class=\"d-block form-group\"\n      rx-id=\"virtual-host-name-field\"\n      formControlName=\"virtualHostname\"\n      label=\"{{ 'com.bmc.arsys.rx.client.admin.manage-tenant.tenant-editor.virtual-host-name.label' | translate }}\"\n      placeholder=\"e.g. host.domain.com\"\n      required\n      maxlength=\"254\"\n      [pattern]=\"domainIdentifierRegexp\"\n    ></adapt-rx-textfield>\n  </form>\n</div>\n\n<div class=\"dp-footer\">\n  <button\n    adapt-button\n    type=\"button\"\n    btn-type=\"primary\"\n    class=\"mr-2\"\n    rx-id=\"save-button\"\n    [disabled]=\"tenantEditorFormGroup.invalid || tenantEditorFormGroup.pristine\"\n    (click)=\"save()\"\n  >\n    {{ 'com.bmc.arsys.rx.client.common.save.label' | translate }}\n  </button>\n  <button adapt-button type=\"button\" btn-type=\"secondary\" rx-id=\"close-button\" class=\"mr-2\" (click)=\"cancel()\">\n    {{ 'com.bmc.arsys.rx.client.common.cancel.label' | translate }}\n  </button>\n</div>\n","import { Component, OnInit, ViewChild } from '@angular/core';\nimport { IRecordDefinition, RX_RECORD_DEFINITION } from '@helix/platform/record/api';\nimport { DataPage, IDataPageResult, RxDataPageFactoryService, RxNotificationService } from '@helix/platform/shared/api';\nimport { RX_MODAL, RxModalService } from '@helix/platform/ui-kit';\nimport { IRowDataItem } from '@helix/platform/view/api';\nimport {\n  IRecordGridConfig,\n  IRecordGridDataPageParams,\n  RecordGridComponent,\n  RowSelectionMode\n} from '@helix/platform/view/components';\nimport { noop, omit } from 'lodash';\nimport { Observable, of } from 'rxjs';\nimport { RxTenantService } from './manage-tenant.service';\nimport { ITenant, TenantFields } from './manage-tenant.types';\nimport { TenantEditorComponent } from './tenant-editor/tenant-editor.component';\nimport { TranslateService } from '@ngx-translate/core';\n\n@Component({\n  selector: 'rx-admin-manage-tenant',\n  templateUrl: './manage-tenant.component.html'\n})\nexport class ManageTenantAdminComponent implements OnInit {\n  @ViewChild('manageTenantGrid', { static: true })\n  manageTenantGrid: RecordGridComponent;\n\n  manageTenantGridConfig: Observable<IRecordGridConfig>;\n\n  private dataPage: DataPage;\n\n  constructor(\n    private rxDataPageService: RxDataPageFactoryService,\n    private rxTenantService: RxTenantService,\n    private rxModalService: RxModalService,\n    private rxNotificationService: RxNotificationService,\n    private translateService: TranslateService\n  ) {\n    this.dataPage = this.rxDataPageService.withType('com.bmc.arsys.rx.application.tenant.datapage.TenantDataPageQuery');\n  }\n\n  ngOnInit(): void {\n    this.manageTenantGridConfig = of({\n      actionButtons: [\n        {\n          label: this.translateService.instant('com.bmc.arsys.rx.client.common.delete.label'),\n          style: 'tertiary',\n          icon: 'trash',\n          actions: [\n            {\n              name: () => this.deleteTenant()\n            }\n          ]\n        }\n      ],\n      recordIdField: 'name',\n      enableRowSelection: RowSelectionMode.Single,\n      enableFiltering: false,\n      getData: (queryParams: IRecordGridDataPageParams) => this.getData(queryParams),\n      getRecordDefinition: () => of(this.getRecordDefinition()),\n      columns: [\n        {\n          index: 0,\n          title: this.translateService.instant('com.bmc.arsys.rx.client.admin.manage-tenant.tenant.label'),\n          fieldId: TenantFields.Name,\n          clickable: true,\n          sortable: false,\n          actions: [\n            {\n              name: (previousActionResult: any, lastActionRow: IRowDataItem) => this.editTenant(lastActionRow)\n            }\n          ]\n        },\n        {\n          index: 1,\n          title: this.translateService.instant(\n            'com.bmc.arsys.rx.client.admin.manage-tenant.tenant-editor.domain-identifier.label'\n          ),\n          fieldId: TenantFields.DomainIdentifier,\n          sortable: false\n        },\n        {\n          index: 2,\n          title: this.translateService.instant(\n            'com.bmc.arsys.rx.client.admin.manage-tenant.tenant-editor.virtual-host-name.label'\n          ),\n          fieldId: TenantFields.VirtualHostname,\n          sortable: false\n        }\n      ],\n      styles: 'flex-fill'\n    });\n  }\n\n  private getData = (queryParams: IRecordGridDataPageParams): Observable<IDataPageResult> =>\n    this.dataPage.get({ params: omit(queryParams, ['searchText', 'recorddefinition']) });\n\n  private getRecordDefinition(): IRecordDefinition {\n    return {\n      fieldDefinitions: [\n        {\n          id: TenantFields.Name,\n          resourceType: RX_RECORD_DEFINITION.resourceTypes.character\n        },\n        {\n          id: TenantFields.DomainIdentifier,\n          resourceType: RX_RECORD_DEFINITION.resourceTypes.character\n        },\n        {\n          id: TenantFields.VirtualHostname,\n          resourceType: RX_RECORD_DEFINITION.resourceTypes.character\n        }\n      ]\n    };\n  }\n\n  private refreshManageTenantGrid(): void {\n    this.manageTenantGrid.api.refresh().subscribe();\n  }\n\n  addTenant(): void {\n    const tenantCount = this.manageTenantGrid.adaptTableConfig.data.length;\n\n    if (tenantCount > 0) {\n      this.rxNotificationService.addErrorMessage(\n        this.translateService.instant('com.bmc.arsys.rx.client.admin.manage-tenant.tenant-already-exists.message')\n      );\n    } else {\n      this.openDockedPanel();\n    }\n  }\n\n  private editTenant(selectedTenant: IRowDataItem): void {\n    const selectedTenantName = selectedTenant[TenantFields.Name];\n\n    this.rxTenantService.getTenant(selectedTenantName).subscribe((tenant) => {\n      this.openDockedPanel(tenant);\n    });\n  }\n\n  private openDockedPanel(tenant?: ITenant): void {\n    this.rxModalService\n      .openDockedPanel({\n        title: tenant\n          ? this.translateService.instant('com.bmc.arsys.rx.client.admin.manage-tenant.edit-tenant.label')\n          : this.translateService.instant('com.bmc.arsys.rx.client.admin.manage-tenant.new-tenant.label'),\n        content: TenantEditorComponent,\n        size: 'lg',\n        data: {\n          tenant\n        }\n      })\n      .then(() => {\n        this.refreshManageTenantGrid();\n      })\n      .catch(noop);\n  }\n\n  private deleteTenant(): void {\n    this.rxModalService\n      .confirm({\n        title: this.translateService.instant('com.bmc.arsys.rx.client.common.warning.label'),\n        modalStyle: RX_MODAL.modalStyles.warning,\n        message: this.translateService.instant(\n          'com.bmc.arsys.rx.client.admin.manage-tenant.delete-confirmation.message'\n        )\n      })\n      .then((result: boolean) => {\n        if (result) {\n          const selectedTenantDefinition = this.manageTenantGrid.api.getFirstSelectedRow();\n\n          this.rxTenantService.deleteTenant(selectedTenantDefinition.name).subscribe(() => {\n            this.rxNotificationService.addSuccessMessage(\n              this.translateService.instant('com.bmc.arsys.rx.client.admin.manage-tenant.tenant-deleted.message')\n            );\n            this.refreshManageTenantGrid();\n          });\n        }\n      });\n  }\n}\n","<rx-admin-settings\n  header=\"{{ 'com.bmc.arsys.rx.client.admin.manage-tenant.tenant-activation.header.title' | translate }}\"\n>\n  <button\n    type=\"button\"\n    adapt-button\n    btn-type=\"tertiary\"\n    class=\"d-icon-plus_circle align-self-start\"\n    rx-id=\"new-button\"\n    (click)=\"addTenant()\"\n  >\n    {{ 'com.bmc.arsys.rx.client.common.new.label' | translate }}\n  </button>\n\n  <rx-record-grid rx-id=\"manage-tenant-grid\" #manageTenantGrid [config]=\"manageTenantGridConfig\"></rx-record-grid>\n</rx-admin-settings>\n","import { ComponentFactoryResolver, NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { ManageTenantAdminComponent } from './manage-tenant.component';\nimport { RxViewComponentRegistryService } from '@helix/platform/view/api';\nimport { RX_APPLICATION } from '@helix/platform/shared/api';\nimport { AdminSettingsModule } from '@helix/platform/shared/components';\nimport { RecordGridModule } from '@helix/platform/view/components';\nimport { AdaptButtonModule, AdaptRxTextfieldModule } from '@bmc-ux/adapt-angular';\nimport { TenantEditorComponent } from './tenant-editor/tenant-editor.component';\nimport { ReactiveFormsModule } from '@angular/forms';\nimport { TranslateModule } from '@ngx-translate/core';\n\n@NgModule({\n  declarations: [ManageTenantAdminComponent, TenantEditorComponent],\n  imports: [\n    CommonModule,\n    AdminSettingsModule,\n    RecordGridModule,\n    AdaptButtonModule,\n    AdaptRxTextfieldModule,\n    ReactiveFormsModule,\n    TranslateModule\n  ],\n  entryComponents: [ManageTenantAdminComponent, TenantEditorComponent]\n})\nexport class ManageTenantRegistrationModule {\n  constructor(\n    private componentFactoryResolver: ComponentFactoryResolver,\n    private rxViewComponentRegistryService: RxViewComponentRegistryService\n  ) {\n    rxViewComponentRegistryService.register({\n      type: 'rx-admin-manage-tenant',\n      componentFactory: this.componentFactoryResolver.resolveComponentFactory(ManageTenantAdminComponent),\n      name: 'Manage tenant',\n      isPageComponent: true,\n      availableInBundles: [RX_APPLICATION.settingsBundleId]\n    });\n  }\n}\n","import { Injectable, Injector } from '@angular/core';\nimport { DataPage } from '@helix/platform/shared/api';\n\nconst dataPageQuery = 'com.bmc.arsys.rx.application.email.datapage.OutgoingEmailMessageStatusDataPageQuery';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class RxOutgoingMailboxStatusDataPageService extends DataPage {\n  constructor(private injector: Injector) {\n    super(injector, dataPageQuery);\n  }\n}\n","import moment from 'moment-es6';\n\nexport const RX_OUTGOING_MAILBOX_STATUS = {\n  availableTimeFrames: [\n    {\n      id: '1',\n      name: 'com.bmc.arsys.rx.client.admin.outgoing-mailbox-status.last-hour.label',\n      duration: moment.duration(1, 'hour')\n    },\n    {\n      id: '2',\n      name: 'com.bmc.arsys.rx.client.admin.outgoing-mailbox-status.last-three-hours.label',\n      duration: moment.duration(3, 'hour')\n    },\n    {\n      id: '3',\n      name: 'com.bmc.arsys.rx.client.admin.outgoing-mailbox-status.last-day.label',\n      duration: moment.duration(1, 'day')\n    },\n    {\n      id: '4',\n      name: 'com.bmc.arsys.rx.client.admin.outgoing-mailbox-status.last-week.label',\n      duration: moment.duration(1, 'week')\n    },\n    {\n      id: '5',\n      name: 'com.bmc.arsys.rx.client.admin.outgoing-mailbox-status.last-month.label',\n      duration: moment.duration(1, 'month')\n    }\n  ],\n  fields: {\n    mailboxName: 'MailBoxName',\n    pending: 'Pending',\n    sent: 'Sent',\n    error: 'Error'\n  }\n};\n","import { Component, OnInit, ViewChild } from '@angular/core';\nimport { AdaptIconConfig, RxSelectOption } from '@bmc-ux/adapt-angular';\nimport { ai_info_circle_o_adapt} from '@bmc-ux/dpl-iconfont';\nimport { IRecordDefinition, RX_RECORD_DEFINITION } from '@helix/platform/record/api';\nimport { IRecordGridColumn, IRecordGridConfig, RecordGridComponent } from '@helix/platform/view/components';\nimport { assign } from 'lodash';\nimport moment from 'moment-es6';\nimport { Observable, of } from 'rxjs';\nimport { RxOutgoingMailboxStatusDataPageService } from './outgoing-mailbox-status-data-page.service';\nimport { RX_OUTGOING_MAILBOX_STATUS } from './outgoing-mailbox-status.constant';\nimport { TranslateService } from '@ngx-translate/core';\n\n@Component({\n  selector: 'rx-admin-outgoing-mailbox-status',\n  templateUrl: './outgoing-mailbox-status.component.html',\n  styleUrls: ['./outgoing-mailbox-status.component.scss']\n})\nexport class OutgoingMailboxStatusAdminComponent implements OnInit {\n  @ViewChild('recordGrid')\n  recordGrid: RecordGridComponent;\n\n  recordGridConfig: Observable<IRecordGridConfig>;\n\n  availableTimeFrames: RxSelectOption[] = RX_OUTGOING_MAILBOX_STATUS.availableTimeFrames.map((timeFrame) => ({\n    ...timeFrame,\n    name: this.translateService.instant(timeFrame.name)\n  }));\n\n  selectedTimeFrame: RxSelectOption[] = [this.availableTimeFrames[0]];\n\n  constructor(\n    private rxOutgoingMailboxStatusDataPageService: RxOutgoingMailboxStatusDataPageService,\n    private translateService: TranslateService,\n    private iconConfig: AdaptIconConfig\n  ) {\n    iconConfig.registerIcons([ai_info_circle_o_adapt]);\n  }\n\n  ngOnInit() {\n    const gridColumns: IRecordGridColumn[] = [\n      {\n        index: 0,\n        fieldId: RX_OUTGOING_MAILBOX_STATUS.fields.mailboxName,\n        title: this.translateService.instant('com.bmc.arsys.rx.client.admin.outgoing-mailbox-status.mailbox-name.label')\n      },\n      {\n        index: 1,\n        fieldId: RX_OUTGOING_MAILBOX_STATUS.fields.pending,\n        title: this.translateService.instant('com.bmc.arsys.rx.client.admin.outgoing-mailbox-status.pending.label'),\n        filterable: false\n      },\n      {\n        index: 2,\n        fieldId: RX_OUTGOING_MAILBOX_STATUS.fields.error,\n        title: this.translateService.instant('com.bmc.arsys.rx.client.common.error.label'),\n        filterable: false\n      },\n      {\n        index: 3,\n        fieldId: RX_OUTGOING_MAILBOX_STATUS.fields.sent,\n        title: this.translateService.instant('com.bmc.arsys.rx.client.admin.outgoing-mailbox-status.sent.label'),\n        filterable: false\n      }\n    ];\n\n    const recordDefinition: IRecordDefinition = {\n      fieldDefinitions: [\n        {\n          id: RX_OUTGOING_MAILBOX_STATUS.fields.mailboxName,\n          resourceType: RX_RECORD_DEFINITION.resourceTypes.character\n        },\n        {\n          id: RX_OUTGOING_MAILBOX_STATUS.fields.pending,\n          resourceType: RX_RECORD_DEFINITION.resourceTypes.character\n        },\n        {\n          id: RX_OUTGOING_MAILBOX_STATUS.fields.error,\n          resourceType: RX_RECORD_DEFINITION.resourceTypes.character\n        },\n        {\n          id: RX_OUTGOING_MAILBOX_STATUS.fields.sent,\n          resourceType: RX_RECORD_DEFINITION.resourceTypes.character\n        }\n      ]\n    };\n\n    this.recordGridConfig = of({\n      columns: gridColumns,\n      enableFiltering: true,\n      enableRowSelection: null,\n      getRecordDefinition: () => of(recordDefinition),\n      getData: (queryParams) => {\n        assign(queryParams, {\n          messagesBefore: moment().subtract(this.selectedTimeFrame[0].duration).toISOString()\n        });\n\n        return this.rxOutgoingMailboxStatusDataPageService.get({ params: queryParams });\n      },\n      styles: 'flex-fill',\n      useExternalFiltering: false\n    });\n  }\n\n  onTimeFrameChange(timeFrame: RxSelectOption): void {\n    this.selectedTimeFrame = timeFrame;\n    this.recordGrid.api.refresh().subscribe();\n  }\n\n  optionFormatter(timeFrame: RxSelectOption): string {\n    return timeFrame.name;\n  }\n}\n","<rx-admin-settings header=\"Outgoing mailbox status\">\n  <div class=\"d-flex flex-wrap\">\n    <adapt-rx-select\n      label=\"{{ 'com.bmc.arsys.rx.client.admin.outgoing-mailbox-status.time-frame.label' | translate }}\"\n      class=\"form-group\"\n      rx-id=\"time-frame\"\n      [options]=\"availableTimeFrames\"\n      [ngModel]=\"selectedTimeFrame\"\n      [optionFormatter]=\"optionFormatter\"\n      (ngModelChange)=\"onTimeFrameChange($event)\"\n    >\n    </adapt-rx-select>\n\n    <button\n      adapt-button\n      btn-type=\"tertiary\"\n      class=\"form-group ml-auto align-self-end\"\n      placement=\"bottom\"\n      type=\"button\"\n      [adaptPopover]=\"'com.bmc.arsys.rx.client.admin.outgoing-mailbox-status.about-sent-email.tooltip' | translate\"\n    >\n      <span>\n        <adapt-icon name=\"info_circle_o_adapt\"></adapt-icon>\n        {{ 'com.bmc.arsys.rx.client.admin.outgoing-mailbox-status.about-sent-email.label' | translate }}\n      </span>\n    </button>\n  </div>\n\n  <rx-record-grid rx-id=\"outgoing-mailbox-status-grid\" #recordGrid [config]=\"recordGridConfig\"></rx-record-grid>\n</rx-admin-settings>\n","import { CommonModule } from '@angular/common';\nimport { ComponentFactoryResolver, NgModule } from '@angular/core';\nimport { FormsModule } from '@angular/forms';\nimport { AdaptButtonModule, AdaptIconModule, AdaptPopoverModule, AdaptRxSelectModule } from '@bmc-ux/adapt-angular';\nimport { RX_APPLICATION } from '@helix/platform/shared/api';\nimport { RxViewComponentRegistryService } from '@helix/platform/view/api';\nimport { RecordGridModule } from '@helix/platform/view/components';\nimport { AdminSettingsModule } from '@helix/platform/shared/components';\nimport { OutgoingMailboxStatusAdminComponent } from './outgoing-mailbox-status.component';\nimport { TranslateModule } from '@ngx-translate/core';\n\n@NgModule({\n  declarations: [OutgoingMailboxStatusAdminComponent],\n  imports: [\n    CommonModule,\n    AdminSettingsModule,\n    RecordGridModule,\n    AdaptRxSelectModule,\n    FormsModule,\n    AdaptIconModule,\n    AdaptPopoverModule,\n    AdaptButtonModule,\n    TranslateModule\n  ],\n  entryComponents: [OutgoingMailboxStatusAdminComponent]\n})\nexport class OutgoingMailboxStatusRegistrationModule {\n  constructor(\n    private componentFactoryResolver: ComponentFactoryResolver,\n    private rxViewComponentRegistryService: RxViewComponentRegistryService\n  ) {\n    rxViewComponentRegistryService.register({\n      type: 'rx-admin-outgoing-mailbox-status',\n      componentFactory: this.componentFactoryResolver.resolveComponentFactory(OutgoingMailboxStatusAdminComponent),\n      name: 'Outgoing mailbox status',\n      isPageComponent: true,\n      availableInBundles: [RX_APPLICATION.settingsBundleId]\n    });\n  }\n}\n","import { Component, OnInit, ViewChild } from '@angular/core';\nimport { NgModel } from '@angular/forms';\nimport { Subscription } from 'rxjs';\nimport { RxNotificationService, RxSystemConfigurationService } from '@helix/platform/shared/api';\nimport { BaseViewComponent } from '@helix/platform/view/runtime';\nimport { TranslateService } from '@ngx-translate/core';\n\n@Component({\n  selector: 'rx-admin-permissions-policy',\n  templateUrl: './permissions-policy-header.component.html'\n})\nexport class PermissionsPolicyHeaderAdminComponent extends BaseViewComponent implements OnInit {\n  @ViewChild('permissionPolicyHeaderModel', { read: NgModel, static: true })\n  permissionPolicyHeaderModel: NgModel;\n\n  private settingName = 'permissionsPolicy';\n\n  permissionsPolicyHeader = '';\n  syntaxUrl = 'https://github.com/w3c/webappsec-permissions-policy/blob/main/permissions-policy-explainer.md';\n  busy: Subscription;\n\n  constructor(\n    private rxNotificationService: RxNotificationService,\n    private translateService: TranslateService,\n    private rxSystemConfigurationService: RxSystemConfigurationService\n  ) {\n    super();\n  }\n\n  ngOnInit(): void {\n    this.notifyPropertyChanged('api', {\n      isDirty: () => this.isDirty()\n    });\n\n    this.busy = this.rxSystemConfigurationService.getConfiguration(this.settingName).subscribe((settingsData) => {\n      this.permissionsPolicyHeader = settingsData.value as string;\n    });\n  }\n\n  isDirty(): boolean {\n    return this.permissionPolicyHeaderModel?.dirty;\n  }\n\n  onSaveClick(): void {\n    this.rxSystemConfigurationService.setConfiguration(this.settingName, this.permissionsPolicyHeader).subscribe(() => {\n      this.rxNotificationService.addSuccessMessage(\n        this.translateService.instant('com.bmc.arsys.rx.client.admin.settings-saved.message')\n      );\n\n      this.permissionPolicyHeaderModel.control.markAsPristine();\n    });\n  }\n}\n","<rx-admin-settings\n  header=\"{{ 'com.bmc.arsys.rx.client.admin.permissions-policy-header.header.title' | translate }}\"\n  [busy]=\"busy\"\n>\n  <adapt-rx-textfield\n    [label]=\"'com.bmc.arsys.rx.client.admin.permissions-policy-header.label' | translate\"\n    [(ngModel)]=\"permissionsPolicyHeader\"\n    rx-id=\"permission-policy-header\"\n    name=\"permissionPolicyHeaderModel\"\n    class=\"form-group d-block\"\n    #permissionPolicyHeaderModel=\"ngModel\"\n    [autofocus]=\"true\"\n    [tooltip]=\"{\n      iconName: 'question_circle_o',\n      content: popover,\n      placement: 'right',\n      popoverMode: true,\n      maxWidth: 400\n    }\"\n  ></adapt-rx-textfield>\n\n  <button\n    class=\"align-self-start\"\n    rx-id=\"save-button\"\n    adapt-button\n    btn-type=\"primary\"\n    type=\"button\"\n    [disabled]=\"!permissionsPolicyHeader || !isDirty()\"\n    (click)=\"onSaveClick()\"\n  >\n    {{ 'com.bmc.arsys.rx.client.common.save.label' | translate }}\n  </button>\n\n  <ng-template #popover>\n    {{ 'com.bmc.arsys.rx.client.admin.permissions-policy-header.syntax-information.message' | translate }}\n    <a class=\"text-secondary\" target=\"_blank\" href=\"{{ syntaxUrl }}\">{{ syntaxUrl }}</a>\n  </ng-template>\n</rx-admin-settings>\n","import { ComponentFactoryResolver, NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { RX_APPLICATION } from '@helix/platform/shared/api';\nimport { RxViewComponentRegistryService } from '@helix/platform/view/api';\nimport { PermissionsPolicyHeaderAdminComponent } from './permissions-policy-header.component';\nimport { AdminSettingsModule } from '@helix/platform/shared/components';\nimport { TranslateModule } from '@ngx-translate/core';\nimport { FormsModule } from '@angular/forms';\nimport {\n  AdaptButtonModule,\n  AdaptPopoverModule,\n  AdaptEmptyStateModule,\n  AdaptIconModule,\n  AdaptRxTextfieldModule\n} from '@bmc-ux/adapt-angular';\n\n@NgModule({\n  declarations: [PermissionsPolicyHeaderAdminComponent],\n  imports: [\n    AdminSettingsModule,\n    FormsModule,\n    CommonModule,\n    TranslateModule,\n    AdaptButtonModule,\n    AdaptRxTextfieldModule,\n    AdaptEmptyStateModule,\n    AdaptIconModule,\n    AdaptPopoverModule\n  ],\n  entryComponents: [PermissionsPolicyHeaderAdminComponent]\n})\nexport class PermissionsPolicyHeaderRegistrationModule {\n  constructor(\n    private componentFactoryResolver: ComponentFactoryResolver,\n    private rxViewComponentRegistryService: RxViewComponentRegistryService\n  ) {\n    rxViewComponentRegistryService.register({\n      type: 'rx-admin-permissions-policy',\n      componentFactory: this.componentFactoryResolver.resolveComponentFactory(PermissionsPolicyHeaderAdminComponent),\n      name: 'Permissions Policy Header',\n      isPageComponent: true,\n      availableInBundles: [RX_APPLICATION.settingsBundleId]\n    });\n  }\n}\n","export const RX_REAL_TIME_TRANSLATION = {\n  supportedLocales: [\n    {\n      id: 'zh_cn',\n      name: 'com.bmc.arsys.rx.client.common.language.chinese.label'\n    },\n    {\n      id: 'nl',\n      name: 'com.bmc.arsys.rx.client.common.language.dutch.label'\n    },\n    {\n      id: 'en',\n      name: 'com.bmc.arsys.rx.client.common.language.english.label'\n    },\n    {\n      id: 'fr',\n      name: 'com.bmc.arsys.rx.client.common.language.french.label'\n    },\n    {\n      id: 'de',\n      name: 'com.bmc.arsys.rx.client.common.language.german.label'\n    },\n    {\n      id: 'it',\n      name: 'com.bmc.arsys.rx.client.common.language.italian.label'\n    },\n    {\n      id: 'ja',\n      name: 'com.bmc.arsys.rx.client.common.language.japanese.label'\n    },\n    {\n      id: 'ko',\n      name: 'com.bmc.arsys.rx.client.common.language.korean.label'\n    },\n    {\n      id: 'pt_br',\n      name: 'com.bmc.arsys.rx.client.common.language.portuguese.label'\n    },\n    {\n      id: 'ru',\n      name: 'com.bmc.arsys.rx.client.common.language.russian.label'\n    },\n    {\n      id: 'es',\n      name: 'com.bmc.arsys.rx.client.common.language.spanish.label'\n    },\n    {\n      id: 'sv',\n      name: 'com.bmc.arsys.rx.client.common.language.swedish.label'\n    }\n  ],\n  defaultSourceLocale: {\n    id: 'en',\n    name: 'com.bmc.arsys.rx.client.common.language.english.label'\n  },\n  defaultTargetLocale: {\n    id: 'de',\n    name: 'com.bmc.arsys.rx.client.common.language.german.label'\n  }\n};\n","import { Component, OnInit, ViewChild } from '@angular/core';\nimport { NgForm } from '@angular/forms';\nimport { RxSelectOption } from '@bmc-ux/adapt-angular';\nimport { RxCommandFactoryService } from '@helix/platform/shared/api';\nimport { head, castArray, isEmpty } from 'lodash';\nimport { RX_REAL_TIME_TRANSLATION } from './real-time-translation.constant';\nimport { TranslateService } from '@ngx-translate/core';\n\n@Component({\n  selector: 'rx-admin-real-time-translation',\n  templateUrl: './real-time-translation.component.html',\n  styleUrls: ['./real-time-translation.component.scss']\n})\nexport class RealTimeTranslationAdminComponent implements OnInit {\n  sourceLanguage: RxSelectOption[] = [];\n  targetLanguage: RxSelectOption[] = [];\n  sourceText: string;\n  translatedText: string;\n\n  supportedLocaleOptions: RxSelectOption[] = RX_REAL_TIME_TRANSLATION.supportedLocales.map((locale) => ({\n    ...locale,\n    name: this.translateService.instant(locale.name)\n  }));\n\n  @ViewChild('realTimeTranslationForm', { static: true, read: NgForm })\n  realTimeTranslationForm: NgForm;\n\n  constructor(private rxCommandFactoryService: RxCommandFactoryService, private translateService: TranslateService) {}\n\n  ngOnInit(): void {\n    this.reset();\n  }\n\n  optionFormatter(option: RxSelectOption): string {\n    return option.name;\n  }\n\n  reset(): void {\n    this.sourceText = this.translatedText = null;\n    this.sourceLanguage = [\n      {\n        ...RX_REAL_TIME_TRANSLATION.defaultSourceLocale,\n        name: this.translateService.instant(RX_REAL_TIME_TRANSLATION.defaultSourceLocale.name)\n      }\n    ];\n    this.targetLanguage = [\n      {\n        ...RX_REAL_TIME_TRANSLATION.defaultTargetLocale,\n        name: this.translateService.instant(RX_REAL_TIME_TRANSLATION.defaultTargetLocale.name)\n      }\n    ];\n\n    this.realTimeTranslationForm.form.markAsPristine();\n  }\n\n  translate(): void {\n    this.realTimeTranslationForm.form.markAsPristine();\n\n    this.rxCommandFactoryService\n      .forResourceType('com.bmc.arsys.rx.application.cognitive.command.TranslateTextCommand')\n      .execute({\n        texts: castArray(this.sourceText),\n        sourceLanguage: head(this.sourceLanguage).id,\n        targetLanguage: head(this.targetLanguage).id\n      })\n      .subscribe((response) => {\n        this.translatedText = head(response);\n      });\n  }\n\n  clearTexts(): void {\n    this.sourceText = null;\n    this.translatedText = null;\n  }\n\n  isTranslateButtonDisabled(): boolean {\n    return this.realTimeTranslationForm.pristine || this.realTimeTranslationForm.invalid;\n  }\n\n  isClearButtonDisabled(): boolean {\n    return isEmpty(this.sourceText) && isEmpty(this.translatedText);\n  }\n\n  copyTranslatedText(): void {\n    const element = document.querySelector('[rx-id=\"translation\"] textarea') as HTMLInputElement;\n\n    element.select();\n    document.execCommand('copy');\n  }\n\n  isCopyButtonDisabled(): boolean {\n    return isEmpty(this.translatedText);\n  }\n}\n","<rx-admin-settings\n  header=\"{{ 'com.bmc.arsys.rx.client.admin.real-time-translation.interactive-translation.header.title' | translate }}\"\n>\n  <form #realTimeTranslationForm=\"ngForm\">\n    <div class=\"row\">\n      <div class=\"col-md-6\">\n        <adapt-rx-select\n          name=\"sourceLanguage\"\n          label=\"{{ 'com.bmc.arsys.rx.client.admin.real-time-translation.source-language.label' | translate }}\"\n          rx-id=\"source-language\"\n          class=\"form-group d-block\"\n          [(ngModel)]=\"sourceLanguage\"\n          [options]=\"supportedLocaleOptions\"\n          [optionFormatter]=\"optionFormatter\"\n        ></adapt-rx-select>\n      </div>\n      <div class=\"col-md-6\">\n        <adapt-rx-select\n          name=\"targetLanguage\"\n          label=\"{{ 'com.bmc.arsys.rx.client.admin.real-time-translation.target-language.label' | translate }}\"\n          rx-id=\"target-language\"\n          class=\"form-group d-block\"\n          [(ngModel)]=\"targetLanguage\"\n          [options]=\"supportedLocaleOptions\"\n          [optionFormatter]=\"optionFormatter\"\n        ></adapt-rx-select>\n      </div>\n    </div>\n\n    <div class=\"row\">\n      <div class=\"col-md-6\">\n        <adapt-rx-textarea\n          name=\"sourceText\"\n          required=\"true\"\n          label=\"{{ 'com.bmc.arsys.rx.client.admin.real-time-translation.source-text.label' | translate }}\"\n          placeholder=\"{{ 'com.bmc.arsys.rx.client.admin.real-time-translation.source-text.placeholder' | translate }}\"\n          rx-id=\"source-text\"\n          rows=\"18\"\n          class=\"form-group d-block\"\n          [(ngModel)]=\"sourceText\"\n        ></adapt-rx-textarea>\n\n        <div class=\"mb-2\">\n          <button\n            adapt-button\n            btn-type=\"primary\"\n            type=\"button\"\n            class=\"d-icon-file_arrow_right mr-2 mb-2\"\n            rx-id=\"translate-button\"\n            (click)=\"translate()\"\n            [disabled]=\"isTranslateButtonDisabled()\"\n          >\n            {{ 'com.bmc.arsys.rx.client.admin.real-time-translation.translate.label' | translate }}\n          </button>\n\n          <button\n            type=\"button\"\n            adapt-button\n            btn-type=\"secondary\"\n            class=\"d-icon-minus_circle mb-2\"\n            rx-id=\"clear-button\"\n            (click)=\"clearTexts()\"\n            [disabled]=\"isClearButtonDisabled()\"\n          >\n            {{ 'com.bmc.arsys.rx.client.common.clear.label' | translate }}\n          </button>\n        </div>\n      </div>\n\n      <div class=\"col-md-6\">\n        <adapt-rx-textarea\n          name=\"translatedText\"\n          class=\"form-group d-block\"\n          label=\"{{ 'com.bmc.arsys.rx.client.admin.real-time-translation.translation.label' | translate }}\"\n          rx-id=\"translation\"\n          rows=\"18\"\n          [readonly]=\"true\"\n          [disabledStyleForReadonlyState]=\"true\"\n          [ngModel]=\"translatedText\"\n        ></adapt-rx-textarea>\n\n        <div class=\"mb-4\">\n          <button\n            adapt-button\n            btn-type=\"secondary\"\n            type=\"button\"\n            class=\"d-icon-files_copy_o\"\n            rx-id=\"copy-button\"\n            (click)=\"copyTranslatedText()\"\n            [disabled]=\"isCopyButtonDisabled()\"\n          >\n            {{ 'com.bmc.arsys.rx.client.common.copy.label' | translate }}\n          </button>\n        </div>\n      </div>\n    </div>\n  </form>\n</rx-admin-settings>\n","import { CommonModule } from '@angular/common';\nimport { ComponentFactoryResolver, NgModule } from '@angular/core';\nimport { FormsModule } from '@angular/forms';\nimport {\n  AdaptButtonModule,\n  AdaptIconModule,\n  AdaptRxSelectModule,\n  AdaptRxTextareaModule,\n  AdaptRxTextfieldModule,\n  AdaptTooltipModule\n} from '@bmc-ux/adapt-angular';\nimport { RX_APPLICATION } from '@helix/platform/shared/api';\nimport { RxViewComponentRegistryService } from '@helix/platform/view/api';\nimport { AdminSettingsModule } from '@helix/platform/shared/components';\nimport { RealTimeTranslationAdminComponent } from './real-time-translation.component';\nimport { TranslateModule } from '@ngx-translate/core';\n\n@NgModule({\n  declarations: [RealTimeTranslationAdminComponent],\n  imports: [\n    AdminSettingsModule,\n    AdaptRxTextfieldModule,\n    CommonModule,\n    FormsModule,\n    AdaptRxSelectModule,\n    AdaptRxTextareaModule,\n    AdaptButtonModule,\n    TranslateModule\n  ],\n  entryComponents: [RealTimeTranslationAdminComponent]\n})\nexport class RealTimeTranslationRegistrationModule {\n  constructor(\n    private componentFactoryResolver: ComponentFactoryResolver,\n    private rxViewComponentRegistryService: RxViewComponentRegistryService\n  ) {\n    rxViewComponentRegistryService.register({\n      type: 'rx-admin-real-time-translation',\n      componentFactory: this.componentFactoryResolver.resolveComponentFactory(RealTimeTranslationAdminComponent),\n      name: 'Real time translation',\n      isPageComponent: true,\n      availableInBundles: [RX_APPLICATION.settingsBundleId]\n    });\n  }\n}\n","export const RX_ROLE_PERMISSIONS = {\n  minRoleId: -2147483647,\n  maxRoleId: -1\n};\n","import { HttpClient } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\nimport { IFunctionalRoleDescriptor, IRole } from '@helix/platform/shared/api';\nimport { forkJoin, Observable } from 'rxjs';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class RxRolePermissionsService {\n  private path = '/api/rx/application/role';\n\n  constructor(private httpClient: HttpClient) {}\n\n  private getUrl(roleDescriptor: IFunctionalRoleDescriptor): string {\n    return `${this.path}/${encodeURIComponent(roleDescriptor.applicationName)}/${encodeURIComponent(\n      roleDescriptor.name\n    )}`;\n  }\n\n  get(roleDescriptor: IFunctionalRoleDescriptor): Observable<IRole> {\n    return <Observable<IRole>>this.httpClient.get(this.getUrl(roleDescriptor));\n  }\n\n  private deleteRole(roleDescriptor: IFunctionalRoleDescriptor): Observable<any> {\n    return this.httpClient.delete(this.getUrl(roleDescriptor));\n  }\n\n  delete(roles: IFunctionalRoleDescriptor[]): Observable<any> {\n    const deleteObservables = roles.map((role) => this.deleteRole(role));\n\n    return forkJoin(deleteObservables);\n  }\n\n  create(role: IRole): Observable<any> {\n    return this.httpClient.post(this.path, role);\n  }\n\n  update(role: IRole, roleName: string): Observable<any> {\n    return this.httpClient.put(this.getUrl({ applicationName: role.applicationName, name: roleName }), role);\n  }\n}\n","import { Component, Injector, OnDestroy, OnInit, ViewChild } from '@angular/core';\nimport { AbstractControl, NgForm, ValidationErrors } from '@angular/forms';\nimport { DismissReasons, DockedPanelContext, RxSelectOption } from '@bmc-ux/adapt-angular';\nimport { RX_RECORD_DEFINITION } from '@helix/platform/record/api';\nimport {\n  IBundleDescriptor,\n  IDataPageResult,\n  IRole,\n  RxGlobalCacheService,\n  RxGroupDataPageService,\n  RxNotificationService\n} from '@helix/platform/shared/api';\nimport { RxModalClass } from '@helix/platform/ui-kit';\nimport { TranslateService } from '@ngx-translate/core';\nimport { find, map as _map } from 'lodash';\nimport { Observable, OperatorFunction, ReplaySubject, Subscription, throwError } from 'rxjs';\nimport { catchError, distinctUntilChanged, map, takeUntil } from 'rxjs/operators';\nimport { RX_ROLE_PERMISSIONS } from '../role-permissions.constant';\nimport { RxRolePermissionsService } from '../role-permissions.service';\n\n@Component({\n  selector: 'rx-role-editor',\n  templateUrl: './role-editor.component.html'\n})\nexport class RoleEditorComponent extends RxModalClass implements OnInit, OnDestroy {\n  role: IRole;\n\n  @ViewChild('roleEditorForm', { read: NgForm, static: true })\n  roleEditorForm: NgForm;\n  applicationOptions: RxSelectOption[];\n  busy: Subscription;\n  groupList: string[];\n  isEditMode = false;\n  isSaveInProgress = false;\n  isSaveButtonDisabled = true;\n  selectedApplication: RxSelectOption;\n  maxRoleId = RX_ROLE_PERMISSIONS.maxRoleId;\n  minRoleId = RX_ROLE_PERMISSIONS.minRoleId;\n  oldRoleName: string;\n  validDefinitionNameRegex = RX_RECORD_DEFINITION.validDefinitionNameRegex;\n  private destroyed$: ReplaySubject<boolean> = new ReplaySubject(1);\n  validatorFn = this.roleNameValidator.bind(this);\n\n  constructor(\n    private rxGlobalCacheService: RxGlobalCacheService,\n    private rxGroupDataPageService: RxGroupDataPageService,\n    private rxRolePermissionsService: RxRolePermissionsService,\n    private rxNotificationService: RxNotificationService,\n    private dockedPanelContext: DockedPanelContext,\n    private translateService: TranslateService,\n    protected injector: Injector\n  ) {\n    super(dockedPanelContext, injector);\n  }\n\n  testSearch: OperatorFunction<string, string[]> = (text$: Observable<string>) =>\n    text$.pipe(\n      distinctUntilChanged(),\n      map((term) => this.groupList.filter((v) => v.toLowerCase().indexOf(term.toLowerCase()) > -1).slice(0, 10))\n    );\n\n  productionSearch: OperatorFunction<string, string[]> = (text$: Observable<string>) =>\n    text$.pipe(\n      distinctUntilChanged(),\n      map((term) => this.groupList.filter((v) => v.toLowerCase().indexOf(term.toLowerCase()) > -1).slice(0, 10))\n    );\n\n  ngOnInit(): void {\n    super.ngOnInit();\n\n    this.getApplicationList();\n    this.getGroupList();\n    this.role = this.dockedPanelContext.getData().role;\n    this.isEditMode = Boolean(this.role.roleName);\n    this.isSaveButtonDisabled = !this.roleEditorForm.valid;\n\n    this.roleEditorForm.valueChanges.pipe(distinctUntilChanged(), takeUntil(this.destroyed$)).subscribe((value) => {\n      this.isSaveButtonDisabled = !this.roleEditorForm.valid || this.roleEditorForm.pristine;\n    });\n\n    if (this.isEditMode) {\n      let selectedApplication = find(this.applicationOptions, { value: this.role.applicationName });\n\n      if (!selectedApplication) {\n        selectedApplication = {\n          displayValue: this.role.applicationName,\n          value: this.role.applicationName\n        };\n\n        this.applicationOptions.push(selectedApplication);\n      }\n\n      this.selectedApplication = [selectedApplication];\n      this.oldRoleName = this.role.roleName;\n    }\n  }\n\n  isDirty(): boolean {\n    return this.roleEditorForm.dirty;\n  }\n\n  optionFormatter(option: RxSelectOption): string {\n    return option.displayValue;\n  }\n\n  save(): void {\n    this.isSaveInProgress = true;\n    this.isSaveButtonDisabled = true;\n\n    if (!this.isEditMode) {\n      this.role.applicationName = this.selectedApplication[0].value;\n    }\n\n    const saveRole$ = this.isEditMode\n      ? this.rxRolePermissionsService.update(this.role, this.oldRoleName)\n      : this.rxRolePermissionsService.create(this.role);\n\n    saveRole$\n      .pipe(\n        catchError((error) => {\n          this.isSaveInProgress = false;\n          this.isSaveButtonDisabled = false;\n\n          return throwError(error);\n        })\n      )\n      .subscribe((response) => {\n        this.rxNotificationService.addSuccessMessage(\n          this.translateService.instant('com.bmc.arsys.rx.client.admin.role-permissions.role-saved.message')\n        );\n        this.isSaveInProgress = false;\n        this.isSaveButtonDisabled = false;\n        this.dockedPanelContext.close(saveRole$);\n      });\n  }\n\n  getGroupList() {\n    const startIndex = 0;\n    const pageSize = -1;\n    const queryParams = {\n      propertySelection: ['groupName', 'groupId'].join(','),\n      sortBy: 'groupName'\n    };\n\n    this.rxGroupDataPageService\n      .get({\n        params: { startIndex, pageSize, ...queryParams }\n      })\n      .pipe(\n        map((groupDataPage: IDataPageResult) => {\n          this.groupList = _map(groupDataPage.data, 'groupName');\n        })\n      )\n      .subscribe();\n  }\n\n  getApplicationList() {\n    this.rxGlobalCacheService.getBundleDescriptors().subscribe((bundleDescriptors: IBundleDescriptor[]) => {\n      this.applicationOptions = bundleDescriptors\n        .sort((bundleDescriptor: IBundleDescriptor, bundleDescriptorToCompare: IBundleDescriptor) =>\n          bundleDescriptor.friendlyName.localeCompare(bundleDescriptorToCompare.friendlyName)\n        )\n        .map((bundleDescriptor: IBundleDescriptor) => ({\n          displayValue: bundleDescriptor.friendlyName,\n          value: bundleDescriptor.id\n        }));\n    });\n  }\n\n  closeModal(): void {\n    this.dockedPanelContext.dismiss(DismissReasons.CLOSE_BTN);\n  }\n\n  roleNameValidator(control: AbstractControl): ValidationErrors | null {\n    return control.value && !RX_RECORD_DEFINITION.validDefinitionNameRegex.test(control.value)\n      ? {\n          invalidRoleName: {\n            message: this.translateService.instant(\n              'com.bmc.arsys.rx.client.admin.role-permissions.role-name-validation.message'\n            )\n          }\n        }\n      : null;\n  }\n\n  ngOnDestroy(): void {\n    this.destroyed$.next(true);\n    this.destroyed$.complete();\n  }\n}\n","<div class=\"dp-body\">\n  <h4 class=\"m-0 mb-3\">{{ 'com.bmc.arsys.rx.client.admin.role-permissions.general-information.label' | translate }}</h4>\n  <form #roleEditorForm=\"ngForm\">\n    <adapt-rx-select\n      class=\"form-group d-block\"\n      label=\"{{ 'com.bmc.arsys.rx.client.common.application-or-library.label' | translate }}\"\n      rx-id=\"application-name\"\n      [(ngModel)]=\"selectedApplication\"\n      [options]=\"applicationOptions\"\n      [optionFormatter]=\"optionFormatter\"\n      name=\"application\"\n      required=\"true\"\n      [readonly]=\"isEditMode\"\n    >\n    </adapt-rx-select>\n\n    <adapt-rx-textfield\n      rx-id=\"role-name\"\n      class=\"form-group d-block\"\n      label=\"{{ 'com.bmc.arsys.rx.client.admin.role-permissions.role-name.label' | translate }}\"\n      name=\"roleName\"\n      required=\"true\"\n      [(ngModel)]=\"role.roleName\"\n      [rxCustomValidators]=\"validatorFn\"\n    >\n    </adapt-rx-textfield>\n\n    <adapt-rx-counter\n      rx-id=\"role-id\"\n      class=\"form-group d-block\"\n      required=\"true\"\n      label=\"{{ 'com.bmc.arsys.rx.client.admin.role-permissions.role-id.label' | translate }}\"\n      name=\"roleId\"\n      adaptIntegerNumber\n      [max]=\"maxRoleId\"\n      [min]=\"minRoleId\"\n      [adaptMax]=\"maxRoleId\"\n      [adaptMin]=\"minRoleId\"\n      [(ngModel)]=\"role.roleID\"\n    ></adapt-rx-counter>\n\n    <div class=\"d-row\">\n      <h4 class=\"form-group\">{{ 'com.bmc.arsys.rx.client.admin.role-permissions.group-mapping.label' | translate }}</h4>\n    </div>\n\n    <adapt-rx-typeahead\n      rx-id=\"test\"\n      class=\"form-group d-block\"\n      [(ngModel)]=\"role.test\"\n      name=\"test\"\n      [typeahead]=\"testSearch\"\n      label=\"Test\"\n      placeholder=\"Enter test group name\"\n    ></adapt-rx-typeahead>\n\n    <adapt-rx-typeahead\n      rx-id=\"production\"\n      class=\"form-group d-block\"\n      [(ngModel)]=\"role.production\"\n      name=\"production\"\n      [typeahead]=\"productionSearch\"\n      label=\"Production\"\n      placeholder=\"Enter production group name\"\n    ></adapt-rx-typeahead>\n\n    <adapt-rx-textfield\n      rx-id=\"datatag\"\n      class=\"form-group d-block\"\n      label=\"{{ 'com.bmc.arsys.rx.client.admin.role-permissions.datatag.label' | translate }}\"\n      name=\"datatag\"\n      placeholder=\"Enter datatag\"\n      [(ngModel)]=\"role.datatag\"\n    ></adapt-rx-textfield>\n  </form>\n</div>\n<div class=\"dp-footer\">\n  <button\n    adapt-button\n    btn-type=\"primary\"\n    type=\"button\"\n    rx-id=\"save-button\"\n    class=\"mr-2\"\n    (click)=\"save()\"\n    [disabled]=\"isSaveButtonDisabled\"\n    [adaptInlineLoader]=\"isSaveInProgress\"\n  >\n    {{ 'com.bmc.arsys.rx.client.common.save.label' | translate }}\n  </button>\n  <button adapt-button btn-type=\"secondary\" type=\"button\" rx-id=\"cancel-button\" (click)=\"closeModal()\">Cancel</button>\n</div>\n","export enum RoleFields {\n  RoleId = 'roleID',\n  RoleName = 'roleName',\n  ApplicationName = 'applicationName',\n  Datatag = 'datatag'\n}\n","import { Component, OnInit, ViewChild } from '@angular/core';\nimport { IRecordDefinition, RecordInstance, RX_RECORD_DEFINITION } from '@helix/platform/record/api';\nimport { IDataPageResult, IRole, RxNotificationService, RxRoleDataPageService } from '@helix/platform/shared/api';\nimport { RX_MODAL, RxModalService } from '@helix/platform/ui-kit';\nimport { IRowDataItem } from '@helix/platform/view/api';\nimport {\n  IRecordGridActionButton,\n  IRecordGridColumn,\n  IRecordGridConfig,\n  IRecordGridDataPageParams,\n  RecordGridComponent,\n  RowSelectionMode\n} from '@helix/platform/view/components';\nimport { castArray, noop } from 'lodash';\nimport { Observable, of } from 'rxjs';\nimport { RoleEditorComponent } from './role-editor/role-editor.component';\nimport { RoleFields } from './role-permission.types';\nimport { RxRolePermissionsService } from './role-permissions.service';\nimport { TranslateService } from '@ngx-translate/core';\n\n@Component({\n  selector: 'rx-admin-role-permissions',\n  templateUrl: './role-permissions.component.html'\n})\nexport class RolePermissionsAdminComponent implements OnInit {\n  recordGridConfig$: Observable<IRecordGridConfig>;\n\n  @ViewChild('rolesPermissionsRecordGrid', { static: false })\n  rolesPermissionsRecordGrid: RecordGridComponent;\n  currentRecordInstance: Observable<RecordInstance>;\n  isDirty = false;\n\n  constructor(\n    private rxRolePermissionsService: RxRolePermissionsService,\n    private rxNotificationService: RxNotificationService,\n    private rxModalService: RxModalService,\n    private rxRoleDataPage: RxRoleDataPageService,\n    private translateService: TranslateService\n  ) {}\n\n  ngOnInit(): void {\n    const gridColumns: IRecordGridColumn[] = [\n      {\n        index: 0,\n        fieldId: RoleFields.RoleId,\n        title: this.translateService.instant('com.bmc.arsys.rx.client.admin.role-permissions.role-id.label'),\n        filterable: false\n      },\n      {\n        index: 1,\n        fieldId: RoleFields.RoleName,\n        title: this.translateService.instant('com.bmc.arsys.rx.client.admin.role-permissions.role-name.label'),\n        filterable: true,\n        clickable: true,\n        actions: [\n          {\n            name: (previousActionResult: any, lastActionRow: IRowDataItem) => this.editRole(lastActionRow)\n          }\n        ]\n      },\n      {\n        index: 2,\n        fieldId: RoleFields.ApplicationName,\n        title: this.translateService.instant('com.bmc.arsys.rx.client.admin.application-issues.application-name.title'),\n        filterable: true\n      },\n      {\n        index: 3,\n        fieldId: RoleFields.Datatag,\n        title: this.translateService.instant('com.bmc.arsys.rx.client.admin.role-permissions.datatag.label'),\n        filterable: false\n      }\n    ];\n\n    const recordDefinition: IRecordDefinition = {\n      fieldDefinitions: [\n        {\n          id: RoleFields.RoleId,\n          resourceType: RX_RECORD_DEFINITION.resourceTypes.character\n        },\n        {\n          id: RoleFields.RoleName,\n          resourceType: RX_RECORD_DEFINITION.resourceTypes.character\n        },\n        {\n          id: RoleFields.ApplicationName,\n          resourceType: RX_RECORD_DEFINITION.resourceTypes.character\n        },\n        {\n          id: RoleFields.Datatag,\n          resourceType: RX_RECORD_DEFINITION.resourceTypes.character\n        }\n      ]\n    };\n\n    const actionButtons: IRecordGridActionButton[] = [\n      {\n        label: this.translateService.instant('com.bmc.arsys.rx.client.common.delete.label'),\n        style: 'tertiary',\n        icon: 'trash',\n        actions: [\n          {\n            name: () => {\n              this.rxModalService\n                .confirm({\n                  title: this.translateService.instant('com.bmc.arsys.rx.client.common.warning.label'),\n                  modalStyle: RX_MODAL.modalStyles.warning,\n                  message: this.translateService.instant(\n                    'com.bmc.arsys.rx.client.admin.role-permissions.delete-confirmation.message'\n                  )\n                })\n                .then((result: boolean) => {\n                  if (result) {\n                    const selectedRecords = castArray(this.rolesPermissionsRecordGrid.api.getSelectedRows());\n\n                    const rolesToDelete = selectedRecords.map((record) => {\n                      return {\n                        applicationName: record[RoleFields.ApplicationName],\n                        name: record[RoleFields.RoleName]\n                      };\n                    });\n\n                    this.rxRolePermissionsService.delete(rolesToDelete).subscribe(() => {\n                      this.rxNotificationService.addSuccessMessage(\n                        this.translateService.instant(\n                          'com.bmc.arsys.rx.client.admin.role-permissions.roles-deleted.message'\n                        )\n                      );\n                      this.rolesPermissionsRecordGrid.api.refresh().subscribe();\n                    });\n                  }\n                });\n            }\n          }\n        ]\n      }\n    ];\n\n    this.recordGridConfig$ = of({\n      columns: gridColumns,\n      enableFiltering: true,\n      recordIdField: RoleFields.RoleId,\n      getRecordDefinition: () => of(recordDefinition),\n      enableRowSelection: RowSelectionMode.Multiple,\n      actionButtons: actionButtons,\n      getData: this.getData,\n      styles: 'flex-fill'\n    });\n  }\n\n  private getData = (queryParams: IRecordGridDataPageParams): Observable<IDataPageResult> => {\n    delete queryParams.searchText;\n\n    return this.rxRoleDataPage.get({\n      params: { ...queryParams }\n    });\n  };\n\n  openDockedPanel(title: string, role: IRole) {\n    this.rxModalService\n      .openDockedPanel({\n        title: title,\n        content: RoleEditorComponent,\n        size: 'lg',\n        data: {\n          role\n        }\n      })\n      .then((result) => {\n        if (result) {\n          this.rolesPermissionsRecordGrid.api.refresh().subscribe();\n        }\n      })\n      .catch(noop);\n  }\n\n  createRole() {\n    this.openDockedPanel(\n      this.translateService.instant('com.bmc.arsys.rx.client.admin.role-permissions.create-role.label'),\n      {\n        roleID: null,\n        roleName: '',\n        datatag: '',\n        test: '',\n        production: '',\n        applicationName: ''\n      }\n    );\n  }\n\n  private editRole(roleRow: IRowDataItem): void {\n    this.rxRolePermissionsService\n      .get({\n        applicationName: roleRow[RoleFields.ApplicationName],\n        name: roleRow[RoleFields.RoleName]\n      })\n      .subscribe((role: IRole) => {\n        this.openDockedPanel(\n          this.translateService.instant('com.bmc.arsys.rx.client.admin.role-permissions.edit-role.label'),\n          role\n        );\n      });\n  }\n}\n","<rx-admin-settings header=\"{{ 'com.bmc.arsys.rx.client.admin.role-permissions.header.title' | translate }}\">\n  <button\n    adapt-button\n    type=\"button\"\n    btn-type=\"tertiary\"\n    class=\"d-icon-plus_circle align-self-start btn btn-link\"\n    rx-id=\"new-button\"\n    (click)=\"createRole()\"\n  >\n    {{ 'com.bmc.arsys.rx.client.common.new.label' | translate }}\n  </button>\n\n  <rx-record-grid rx-id=\"roles-permissions-grid\" #rolesPermissionsRecordGrid [config]=\"recordGridConfig$\">\n  </rx-record-grid>\n</rx-admin-settings>\n","import { CommonModule } from '@angular/common';\nimport { ComponentFactoryResolver, NgModule } from '@angular/core';\nimport { FormsModule } from '@angular/forms';\nimport {\n  AdaptBusyModule,\n  AdaptButtonModule,\n  AdaptRxCounterModule,\n  AdaptRxFormControlModule,\n  AdaptRxSelectModule,\n  AdaptRxTextfieldModule,\n  AdaptRxTypeaheadModule,\n  AdaptRxValidatorsModule\n} from '@bmc-ux/adapt-angular';\nimport { RX_APPLICATION } from '@helix/platform/shared/api';\nimport { AdminSettingsModule } from '@helix/platform/shared/components';\nimport { RxDirectivesModule } from '@helix/platform/ui-kit';\nimport { RxViewComponentRegistryService } from '@helix/platform/view/api';\nimport { RecordGridModule } from '@helix/platform/view/components';\nimport { TranslateModule } from '@ngx-translate/core';\nimport { RoleEditorComponent } from './role-editor/role-editor.component';\nimport { RolePermissionsAdminComponent } from './role-permissions.component';\n\n@NgModule({\n  declarations: [RolePermissionsAdminComponent, RoleEditorComponent],\n  imports: [\n    AdaptBusyModule,\n    AdaptButtonModule,\n    AdaptRxCounterModule,\n    AdaptRxFormControlModule,\n    AdaptRxSelectModule,\n    AdaptRxTextfieldModule,\n    AdaptRxTypeaheadModule,\n    AdaptRxValidatorsModule,\n    AdminSettingsModule,\n    CommonModule,\n    FormsModule,\n    RecordGridModule,\n    RxDirectivesModule,\n    TranslateModule\n  ],\n  entryComponents: [RolePermissionsAdminComponent]\n})\nexport class RolePermissionsRegistrationModule {\n  constructor(\n    private componentFactoryResolver: ComponentFactoryResolver,\n    private rxViewComponentRegistryService: RxViewComponentRegistryService\n  ) {\n    rxViewComponentRegistryService.register({\n      type: 'rx-admin-role-permissions',\n      componentFactory: this.componentFactoryResolver.resolveComponentFactory(RolePermissionsAdminComponent),\n      name: 'Role permissions',\n      isPageComponent: true,\n      availableInBundles: [RX_APPLICATION.settingsBundleId]\n    });\n  }\n}\n","import { IRssoOAuthSection } from './rsso-oauth.types';\n\nconst fieldIds = {\n  clientId: 1780,\n  clientSecret: 1781,\n  apiAuthorizationEndpoint: 1782,\n  oAuthProvider: 1783,\n  resourceServer: 1784,\n  bundleId: 61001\n};\n\nconst sections: IRssoOAuthSection[] = [\n  {\n    title: 'com.bmc.arsys.rx.client.admin.rsso-auth.bmc-helix-digital-workplace.title',\n    isOpen: true,\n    isSaveInProgress: false,\n    recordInstanceId: '',\n    rxId: 'digital-workplace',\n    fields: [\n      {\n        id: fieldIds.apiAuthorizationEndpoint,\n        type: 'text',\n        name: 'API authorization endpoint',\n        value: '',\n        label: 'com.bmc.arsys.rx.client.admin.rsso-auth.api-authorization-endpoint-url.label',\n        rxId: 'api-auth-endpoint'\n      },\n      {\n        id: fieldIds.resourceServer,\n        type: 'text',\n        name: 'Resource server',\n        value: '',\n        label: 'com.bmc.arsys.rx.client.admin.rsso-auth.resource-server.label',\n        rxId: 'resource-server'\n      },\n      {\n        id: fieldIds.clientId,\n        type: 'text',\n        name: 'Client ID',\n        value: '',\n        label: 'com.bmc.arsys.rx.client.admin.rsso-auth.client-id.label',\n        rxId: 'client-id'\n      },\n      {\n        id: fieldIds.clientSecret,\n        type: 'password',\n        name: 'Client secret',\n        value: '',\n        label: 'com.bmc.arsys.rx.client.admin.rsso-auth.client-secret.label',\n        rxId: 'client-secret'\n      }\n    ],\n    formName: 'digitalWorkplaceForm',\n    oAuthProvider: 'RSSO OAuth'\n  },\n  {\n    title: 'com.bmc.arsys.rx.client.admin.rsso-auth.bmc-helix-cloud-cost.title',\n    isOpen: true,\n    isSaveInProgress: false,\n    recordInstanceId: '',\n    rxId: 'cloud-cost',\n    fields: [\n      {\n        id: fieldIds.apiAuthorizationEndpoint,\n        type: 'text',\n        name: 'API authorization endpoint',\n        value: '',\n        label: 'com.bmc.arsys.rx.client.admin.rsso-auth.api-authorization-endpoint-url.label',\n        rxId: 'api-auth-endpoint'\n      },\n      {\n        id: fieldIds.resourceServer,\n        type: 'text',\n        name: 'Resource server',\n        value: '',\n        label: 'com.bmc.arsys.rx.client.admin.rsso-auth.resource-server.label',\n        rxId: 'resource-server'\n      },\n      {\n        id: fieldIds.clientId,\n        type: 'text',\n        name: 'Client ID',\n        value: '',\n        label: 'com.bmc.arsys.rx.client.admin.rsso-auth.client-id.label',\n        rxId: 'client-id'\n      },\n      {\n        id: fieldIds.clientSecret,\n        type: 'password',\n        name: 'Client secret',\n        value: '',\n        label: 'com.bmc.arsys.rx.client.admin.rsso-auth.client-secret.label',\n        rxId: 'client-secret'\n      }\n    ],\n    formName: 'cloudCostForm',\n    oAuthProvider: 'Cloud Cost RSSO'\n  }\n];\n\nexport const RX_RSSO_OAUTH = {\n  recordDefinitionName: 'OAuth Configuration',\n  oAuthConfigurationDescription: 'oauth-configuration',\n  fieldIds: {\n    bundleId: fieldIds.bundleId,\n    oAuthProvider: fieldIds.oAuthProvider\n  },\n  sections\n};\n","import { Injectable } from '@angular/core';\nimport { Observable } from 'rxjs';\nimport { map } from 'rxjs/operators';\nimport {\n  RecordInstance,\n  RxRecordInstanceService,\n  RxRecordInstanceDataPageService,\n  RX_RECORD_DEFINITION,\n  RxRecordInstanceUpdateService\n} from '@helix/platform/record/api';\nimport { RX_RSSO_OAUTH } from './rsso-oauth.constant';\nimport { IDataPageResult } from '@helix/platform/shared/api';\nimport { KeyValueObject } from '@bmc-ux/adapt-angular';\nimport { RssoOAuthConfiguration, IRssoOAuthConfigurationField } from './rsso-oauth.types';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class RxRssoOAuthConfigurationService {\n  constructor(\n    private rxRecordInstanceService: RxRecordInstanceService,\n    private rxRecordInstanceUpdateService: RxRecordInstanceUpdateService,\n    private rxRecordInstanceDataPageService: RxRecordInstanceDataPageService\n  ) {}\n\n  getConfigs(): Observable<RssoOAuthConfiguration[]> {\n    return this.rxRecordInstanceDataPageService\n      .post({\n        params: {\n          recorddefinition: RX_RSSO_OAUTH.recordDefinitionName,\n          queryExpression: `('${RX_RECORD_DEFINITION.coreFieldIds.description}'=\"${RX_RSSO_OAUTH.oAuthConfigurationDescription}\")`,\n          propertySelection: [RX_RECORD_DEFINITION.coreFieldIds.id, RX_RSSO_OAUTH.fieldIds.oAuthProvider]\n        }\n      })\n      .pipe(\n        map((response: IDataPageResult) => {\n          return response.data.map((rssoConfiguration: KeyValueObject) => {\n            return Object.keys(rssoConfiguration).map(function (key) {\n              return { id: key, value: rssoConfiguration[key] } as IRssoOAuthConfigurationField;\n            });\n          });\n        })\n      );\n  }\n\n  saveConfigRecordInstance(recordInstance: RecordInstance): Observable<any> {\n    if (recordInstance.id) {\n      return this.rxRecordInstanceUpdateService.execute(recordInstance);\n    } else {\n      return this.rxRecordInstanceService.create(recordInstance);\n    }\n  }\n\n  getConfigRecordInstance(recordInstanceId: string): Observable<RecordInstance> {\n    if (recordInstanceId) {\n      return this.rxRecordInstanceService.get(RX_RSSO_OAUTH.recordDefinitionName, recordInstanceId);\n    } else {\n      return this.rxRecordInstanceService.getNew(RX_RSSO_OAUTH.recordDefinitionName);\n    }\n  }\n}\n","import { Component, OnInit, ViewChild } from '@angular/core';\nimport { NgForm } from '@angular/forms';\nimport { RX_RSSO_OAUTH } from './rsso-oauth.constant';\nimport { find, map } from 'lodash';\nimport { catchError, switchMap, tap } from 'rxjs/operators';\nimport { forkJoin, Subscription, throwError } from 'rxjs';\nimport { RX_APPLICATION, RxCurrentUserService, RxNotificationService } from '@helix/platform/shared/api';\nimport { RecordInstance, RX_RECORD_DEFINITION } from '@helix/platform/record/api';\nimport { RxRssoOAuthConfigurationService } from './rsso-oauth-configuration.service';\nimport { BaseViewComponent } from '@helix/platform/view/runtime';\nimport { IRssoOAuthSection } from './rsso-oauth.types';\nimport { TranslateService } from '@ngx-translate/core';\n\n@Component({\n  selector: 'rx-admin-rsso-oauth',\n  templateUrl: './rsso-oauth.component.html',\n  styleUrls: ['./rsso-oauth.component.scss']\n})\nexport class RssoOauthAdminComponent extends BaseViewComponent implements OnInit {\n  @ViewChild('serviceForm', { read: NgForm, static: false })\n  serviceForm: NgForm;\n\n  sections: IRssoOAuthSection[] = RX_RSSO_OAUTH.sections;\n  busy: Subscription;\n\n  constructor(\n    private rxRssoOAuthService: RxRssoOAuthConfigurationService,\n    private rxCurrentUserService: RxCurrentUserService,\n    private rxNotificationService: RxNotificationService,\n    private translateService: TranslateService\n  ) {\n    super();\n  }\n\n  ngOnInit() {\n    this.notifyPropertyChanged('api', {\n      isDirty: () => this.serviceForm.dirty\n    });\n\n    this.busy = this.rxRssoOAuthService\n      .getConfigs()\n      .pipe(\n        switchMap((rssoConfigurations) => {\n          const recondInstanceConfigs$ = map(rssoConfigurations, (configuration) => {\n            const oAuthProviderInConfiguration = find(configuration, {\n              id: String(RX_RSSO_OAUTH.fieldIds.oAuthProvider)\n            }).value;\n\n            const section = find(this.sections, { oAuthProvider: oAuthProviderInConfiguration });\n\n            section.recordInstanceId = find(configuration, {\n              id: String(RX_RECORD_DEFINITION.coreFieldIds.id)\n            }).value;\n\n            return this.rxRssoOAuthService.getConfigRecordInstance(section.recordInstanceId).pipe(\n              tap((recordInstance: RecordInstance) => {\n                map(section.fields, (field) => {\n                  field.value = recordInstance.fieldInstances[field.id].value;\n                });\n              })\n            );\n          });\n\n          return forkJoin(recondInstanceConfigs$);\n        })\n      )\n      .subscribe();\n  }\n\n  save(section: IRssoOAuthSection, form: NgForm): void {\n    section.isSaveInProgress = true;\n\n    this.rxRssoOAuthService\n      .getConfigRecordInstance(section.recordInstanceId)\n      .pipe(\n        switchMap((recordInstance) => {\n          map(section.fields, (field) => {\n            recordInstance.fieldInstances[field.id].value = field.value;\n          });\n\n          recordInstance.setFieldValue(RX_RSSO_OAUTH.fieldIds.oAuthProvider, section.oAuthProvider);\n          recordInstance.setFieldValue(RX_RSSO_OAUTH.fieldIds.bundleId, RX_APPLICATION.chatbotBundleId);\n\n          recordInstance.setFieldValue(\n            RX_RECORD_DEFINITION.coreFieldIds.description,\n            RX_RSSO_OAUTH.oAuthConfigurationDescription\n          );\n\n          return this.rxRssoOAuthService.saveConfigRecordInstance(recordInstance);\n        }),\n        catchError((err) => {\n          section.isSaveInProgress = false;\n\n          return throwError(err);\n        })\n      )\n      .subscribe((response) => {\n        if (response) {\n          section.recordInstanceId = response.id;\n        }\n\n        this.rxNotificationService.addSuccessMessage(\n          this.translateService.instant('com.bmc.arsys.rx.client.admin.rsso-auth.rsso-oauth-settings-saved.message')\n        );\n        form.form.markAsPristine();\n        section.isSaveInProgress = false;\n      });\n  }\n\n  isSaveButtonDisabled(form: NgForm): boolean {\n    return form.pristine || form.invalid;\n  }\n\n  isSaveButtonVisible(): boolean {\n    return this.rxCurrentUserService.isAdministrator();\n  }\n\n  isSaveInProgress(section): boolean {\n    return section.isSaveInProgress;\n  }\n}\n","<rx-admin-settings header=\"{{ 'com.bmc.arsys.rx.client.admin.rsso-auth.header.title' | translate }}\" [busy]=\"busy\">\n  <adapt-accordion multiselect=\"true\" class=\"pb-4\">\n    <form *ngFor=\"let section of sections\" name=\"section.formName\" #serviceForm=\"ngForm\">\n      <adapt-accordion-tab\n        [title]=\"section.title | translate\"\n        [isOpen]=\"section.isOpen\"\n        class=\"mb-3\"\n        [attr.rx-id]=\"section.rxId\"\n      >\n        <adapt-rx-textfield\n          *ngFor=\"let field of section.fields\"\n          [name]=\"field.name\"\n          [(ngModel)]=\"field.value\"\n          [required]=\"true\"\n          [attr.rx-id]=\"field.rxId\"\n          [label]=\"field.label | translate\"\n          [pattern]=\"field.pattern\"\n          class=\"d-block form-group\"\n          [isPassword]=\"field.type === 'password'\"\n        >\n        </adapt-rx-textfield>\n        <button\n          adapt-button\n          type=\"button\"\n          rx-id=\"save-button\"\n          btn-type=\"primary\"\n          class=\"mt-4\"\n          [disabled]=\"isSaveButtonDisabled(serviceForm)\"\n          [adaptInlineLoader]=\"isSaveInProgress(section)\"\n          *ngIf=\"isSaveButtonVisible()\"\n          (click)=\"save(section, serviceForm)\"\n        >\n          {{ 'com.bmc.arsys.rx.client.common.save.label' | translate }}\n        </button>\n      </adapt-accordion-tab>\n    </form>\n  </adapt-accordion>\n</rx-admin-settings>\n","import { ComponentFactoryResolver, NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { AdminSettingsModule } from '@helix/platform/shared/components';\nimport { RX_APPLICATION } from '@helix/platform/shared/api';\nimport { RxViewComponentRegistryService } from '@helix/platform/view/api';\nimport { RssoOauthAdminComponent } from './rsso-oauth.component';\nimport { FormsModule } from '@angular/forms';\nimport {\n  AdaptAccordionModule,\n  AdaptBusyModule,\n  AdaptButtonModule,\n  AdaptRxTextfieldModule\n} from '@bmc-ux/adapt-angular';\nimport { TranslateModule } from '@ngx-translate/core';\n\n@NgModule({\n  declarations: [RssoOauthAdminComponent],\n  imports: [\n    CommonModule,\n    AdminSettingsModule,\n    AdaptAccordionModule,\n    AdaptRxTextfieldModule,\n    AdaptButtonModule,\n    AdaptBusyModule,\n    FormsModule,\n    TranslateModule\n  ],\n  entryComponents: [RssoOauthAdminComponent]\n})\nexport class RssoOauthRegistrationModule {\n  constructor(\n    private componentFactoryResolver: ComponentFactoryResolver,\n    private rxViewComponentRegistryService: RxViewComponentRegistryService\n  ) {\n    rxViewComponentRegistryService.register({\n      type: 'rx-admin-rsso-oauth',\n      componentFactory: this.componentFactoryResolver.resolveComponentFactory(RssoOauthAdminComponent),\n      name: 'RSSO OAuth',\n      isPageComponent: true,\n      availableInBundles: [RX_APPLICATION.settingsBundleId]\n    });\n  }\n}\n","export const RX_RULE_POOL_MANAGEMENT = {\n  ruleTypes: {\n    ruleWithIssues: 'rule-with-issues',\n    ruleWithoutIssues: 'rule-without-issues',\n    remedyEscalationWithIssues: 'remedy-escalation-with-issues',\n    remedyEscalationWithoutIssues: 'remedy-escalation-without-issues'\n  },\n\n  poolTypes: {\n    poolWithIssues: 'pool-with-issues',\n    poolWithoutIssues: 'pool-without-issues'\n  },\n\n  conflictsRecordFieldIds: {\n    ruleName: 'rule',\n    numberOfDelays: 'noOfTimesDelayed'\n  }\n};\n","import { Injectable } from '@angular/core';\nimport { Observable } from 'rxjs';\nimport { map } from 'rxjs/operators';\nimport { DataPage, IDataPageResult, RxDataPageFactoryService } from '@helix/platform/shared/api';\nimport { IRulePoolStatistics } from './rule-pool-management.interfaces';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class RxRulePoolDataService {\n  private resource: DataPage;\n\n  constructor(private rxDataPageService: RxDataPageFactoryService) {\n    this.resource = this.rxDataPageService.withType(\n      'com.bmc.arsys.rx.application.rule.datapage.RulePoolStatisticsDataPageQuery'\n    );\n  }\n\n  getRulePoolStatistics(): Observable<IRulePoolStatistics[]> {\n    return this.resource.get().pipe(map((dataPageResult: IDataPageResult<IRulePoolStatistics>) => dataPageResult.data));\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { TranslateService } from '@ngx-translate/core';\nimport { BehaviorSubject, Observable, forkJoin, Subscription } from 'rxjs';\nimport { map, shareReplay, switchMap } from 'rxjs/operators';\nimport { AdaptTreeNode, RxSelectOption } from '@bmc-ux/adapt-angular';\nimport {\n  IBundleDescriptor,\n  RxDefinitionNameService,\n  RxGlobalCacheService,\n  RxOverlayService\n} from '@helix/platform/shared/api';\nimport { RxRuleDefinitionService, IRuleDefinition } from '@helix/platform/rule/api';\nimport { RX_RULE_POOL_MANAGEMENT } from './rule-pool-management.constant';\nimport { RxRulePoolDataService } from './rule-pool-data.service';\nimport { IRuleConflictOccurrences, IRulePoolStatistics, IRuleStatistics } from './rule-pool-management.interfaces';\nimport { find } from 'lodash';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class RxRulePoolManagementService {\n  private availablePoolsTreeSubject$ = new BehaviorSubject([]);\n  availablePoolsTree$: Observable<AdaptTreeNode[]> = this.availablePoolsTreeSubject$\n    .asObservable()\n    .pipe(shareReplay(1));\n\n  constructor(\n    private rxGlobalCacheService: RxGlobalCacheService,\n    private rxDefinitionNameService: RxDefinitionNameService,\n    private rxOverlayService: RxOverlayService,\n    private rxRuleDefinitionService: RxRuleDefinitionService,\n    private rxRulePoolDataService: RxRulePoolDataService,\n    private translateService: TranslateService\n  ) {}\n\n  fetchAvailablePoolsTree(): Subscription {\n    return forkJoin([\n      this.rxRulePoolDataService.getRulePoolStatistics(),\n      this.rxGlobalCacheService.getBundleDescriptors()\n    ])\n      .pipe(\n        map(([rulePoolStatistics, bundleDescriptors]) => {\n          this.availablePoolsTreeSubject$.next(this.buildTreeNodes(rulePoolStatistics, bundleDescriptors));\n        })\n      )\n      .subscribe();\n  }\n\n  getAvailablePoolOptions(): Observable<RxSelectOption[]> {\n    return this.availablePoolsTree$.pipe(map(this.buildSelectOptions));\n  }\n\n  getRuleConflictsData(adaptTreeNode: AdaptTreeNode): IRuleConflictOccurrences[] {\n    if (!adaptTreeNode) {\n      return [];\n    }\n\n    return adaptTreeNode.data.conflictingRules.delayedByRules.concat(\n      adaptTreeNode.data.conflictingRules.delaysOtherRules.map((ruleConflictOccurrences: IRuleConflictOccurrences) => ({\n        ...ruleConflictOccurrences,\n        noOfTimesDelayed: 0\n      }))\n    );\n  }\n\n  isRuleDesignerAvailable(ruleStatistics: IRuleStatistics): boolean {\n    return !ruleStatistics.remedyEscalation && Boolean(this.rxDefinitionNameService.getBundleId(ruleStatistics.name));\n  }\n\n  reassignRuleToPool(ruleDefinitionName: string, poolNumber: number): Observable<any> {\n    return this.rxRuleDefinitionService.get(ruleDefinitionName).pipe(\n      switchMap((ruleDefinition: IRuleDefinition) => {\n        ruleDefinition.triggerEvent.poolNumber = poolNumber;\n\n        return this.rxRuleDefinitionService.update(ruleDefinition);\n      })\n    );\n  }\n\n  private buildSelectOptions(poolTreeNodes: AdaptTreeNode[]): RxSelectOption[] {\n    return poolTreeNodes.map((pool) => ({\n      id: pool.data.executionPoolNumber,\n      name: pool.label\n    }));\n  }\n\n  private buildTreeNodes(\n    rulePoolStatistics: IRulePoolStatistics[],\n    bundleDescriptors: IBundleDescriptor[]\n  ): AdaptTreeNode[] {\n    return rulePoolStatistics.map((pool: IRulePoolStatistics) => {\n      const children = pool.rules.map((rule: IRuleStatistics) => {\n        rule.isRuleWithIssues = Boolean(\n          rule.conflictingRules.delayedByRules.length ||\n            rule.conflictingRules.delaysOtherRules.length ||\n            rule.designTimePoolNumber > rulePoolStatistics.length\n        );\n\n        let ruleType;\n\n        if (rule.remedyEscalation) {\n          ruleType = rule.isRuleWithIssues\n            ? RX_RULE_POOL_MANAGEMENT.ruleTypes.remedyEscalationWithIssues\n            : RX_RULE_POOL_MANAGEMENT.ruleTypes.remedyEscalationWithoutIssues;\n        } else {\n          ruleType = rule.isRuleWithIssues\n            ? RX_RULE_POOL_MANAGEMENT.ruleTypes.ruleWithIssues\n            : RX_RULE_POOL_MANAGEMENT.ruleTypes.ruleWithoutIssues;\n        }\n\n        rule.isEditable = this.isRuleEditable(rule, bundleDescriptors);\n\n        return {\n          data: rule,\n          key: `${pool.executionPoolNumber}_${rule.guid}`,\n          label: this.rxDefinitionNameService.getDisplayName(rule.name),\n          type: ruleType\n        };\n      });\n\n      const localizedStringKey = pool.isDefaultPool\n        ? 'com.bmc.arsys.rx.client.admin.rule-pool-management.available-pools.default-pool-tree-node.label'\n        : 'com.bmc.arsys.rx.client.admin.rule-pool-management.available-pools.pool-tree-node.label';\n\n      const label = this.translateService.instant(localizedStringKey, {\n        poolNumber: pool.executionPoolNumber,\n        ruleCount: pool.rules.length\n      });\n\n      return {\n        children,\n        data: pool,\n        label: label,\n        selectable: false,\n        type: pool.hasRulesWithIssues\n          ? RX_RULE_POOL_MANAGEMENT.poolTypes.poolWithIssues\n          : RX_RULE_POOL_MANAGEMENT.poolTypes.poolWithoutIssues\n      };\n    });\n  }\n\n  private isRuleEditable(ruleStatistics: IRuleStatistics, bundleDescriptors: IBundleDescriptor[]): boolean {\n    const bundleId = this.rxDefinitionNameService.getBundleId(ruleStatistics.name),\n      bundleDescriptor = find(bundleDescriptors, ['id', bundleId]);\n\n    return !ruleStatistics.remedyEscalation && Boolean(bundleId)\n      ? this.rxOverlayService.areNewDefinitionsAllowedSync(bundleDescriptor)\n      : false;\n  }\n}\n","import { Component, Injector, OnDestroy, OnInit } from '@angular/core';\nimport { FormControl } from '@angular/forms';\nimport { TranslateService } from '@ngx-translate/core';\nimport { ReplaySubject, Observable } from 'rxjs';\nimport { finalize, takeUntil, take } from 'rxjs/operators';\nimport { ActiveModalRef, DismissReasons, RxSelectOption } from '@bmc-ux/adapt-angular';\nimport { RxNotificationService } from '@helix/platform/shared/api';\nimport { RxModalClass } from '@helix/platform/ui-kit';\nimport { RxRuleDefinitionService } from '@helix/platform/rule/api';\nimport { RxRulePoolManagementService } from '../rule-pool-management.service';\n\n@Component({\n  selector: 'rx-rule-reassignment',\n  templateUrl: './rule-reassignment.component.html'\n})\nexport class RuleReassignmentComponent extends RxModalClass implements OnInit, OnDestroy {\n  isSaveButtonDisabled = true;\n  poolFormControl = new FormControl([]);\n  poolSelectOptions$: Observable<RxSelectOption[]>;\n\n  private destroyed$ = new ReplaySubject<boolean>(1);\n  private selectedPoolId: number;\n\n  constructor(\n    private activeModalRef: ActiveModalRef,\n    private rxNotificationService: RxNotificationService,\n    private rxRuleDefinitionService: RxRuleDefinitionService,\n    private rxRulePoolManagementService: RxRulePoolManagementService,\n    private translateService: TranslateService,\n    protected injector: Injector\n  ) {\n    super(activeModalRef, injector);\n\n    this.poolFormControl.valueChanges.pipe(takeUntil(this.destroyed$)).subscribe((selectedPools: RxSelectOption[]) => {\n      this.selectedPoolId = selectedPools[0].id;\n      this.isSaveButtonDisabled = false;\n    });\n  }\n\n  ngOnInit(): void {\n    super.ngOnInit();\n\n    this.poolSelectOptions$ = this.rxRulePoolManagementService.getAvailablePoolOptions();\n  }\n\n  optionFormatter(selectOption: RxSelectOption): string {\n    return selectOption.name;\n  }\n\n  save(): void {\n    this.allowDismiss = false;\n    this.isSaveButtonDisabled = true;\n\n    this.rxRulePoolManagementService\n      .reassignRuleToPool(this.activeModalRef.getData().ruleName, this.selectedPoolId)\n      .pipe(\n        take(1),\n        finalize(() => {\n          this.allowDismiss = true;\n          this.isSaveButtonDisabled = false;\n        })\n      )\n      .subscribe(() => {\n        this.rxNotificationService.addSuccessMessage(\n          this.translateService.instant('com.bmc.arsys.rx.client.admin.rule-pool-management.reassignment-saved.message')\n        );\n\n        this.activeModalRef.close(true);\n      });\n  }\n\n  cancel(): void {\n    this.activeModalRef.dismiss(DismissReasons.CLOSE_BTN);\n  }\n\n  ngOnDestroy(): void {\n    this.destroyed$.next(true);\n    this.destroyed$.complete();\n  }\n}\n","<div class=\"modal-header\">\n  <h5 class=\"modal-title\">\n    {{ 'com.bmc.arsys.rx.client.admin.rule-pool-management.reassignment-dialog.title' | translate }}\n  </h5>\n  <button\n    class=\"close dp-close\"\n    type=\"button\"\n    rx-id=\"x-button\"\n    [disabled]=\"!allowDismiss\"\n    (click)=\"cancel()\"\n  ></button>\n</div>\n\n<div class=\"modal-body\">\n  <adapt-rx-select\n    [formControl]=\"poolFormControl\"\n    [options]=\"poolSelectOptions$ | async\"\n    [optionFormatter]=\"optionFormatter\"\n    [label]=\"'com.bmc.arsys.rx.client.admin.rule-pool-management.assign-to.label' | translate\"\n  ></adapt-rx-select>\n</div>\n\n<div class=\"modal-footer\">\n  <button\n    adapt-button\n    btn-type=\"primary\"\n    type=\"button\"\n    rx-id=\"save-button\"\n    (click)=\"save()\"\n    [adaptInlineLoader]=\"!allowDismiss\"\n    [disabled]=\"isSaveButtonDisabled || !allowDismiss\"\n  >\n    {{ 'com.bmc.arsys.rx.client.common.save.label' | translate }}\n  </button>\n  <button\n    adapt-button\n    btn-type=\"secondary\"\n    type=\"button\"\n    rx-id=\"cancel-button\"\n    (click)=\"cancel()\"\n    [disabled]=\"!allowDismiss\"\n  >\n    {{ 'com.bmc.arsys.rx.client.common.cancel.label' | translate }}\n  </button>\n</div>\n","import { Component, OnDestroy, OnInit } from '@angular/core';\nimport { FormControl } from '@angular/forms';\nimport { TranslateService } from '@ngx-translate/core';\nimport { BehaviorSubject, combineLatest, ReplaySubject, Subscription } from 'rxjs';\nimport { map, takeUntil } from 'rxjs/operators';\nimport { noop } from 'lodash';\nimport { AdaptTreeNode, TreeWrap } from '@bmc-ux/adapt-angular';\nimport { RX_APPLICATION } from '@helix/platform/shared/api';\nimport { RxModalService } from '@helix/platform/ui-kit';\nimport { RX_RULE_POOL_MANAGEMENT } from './rule-pool-management.constant';\nimport { IRuleConflictsTableConfig } from './rule-pool-management.interfaces';\nimport { RxRulePoolManagementService } from './rule-pool-management.service';\nimport { RuleReassignmentComponent } from './rule-reassignment/rule-reassignment.component';\n\n@Component({\n  selector: 'rx-admin-rule-pool-management',\n  templateUrl: './rule-pool-management.component.html',\n  styleUrls: ['./rule-pool-management.component.scss']\n})\nexport class RulePoolManagementAdminComponent implements OnInit, OnDestroy {\n  availablePoolsTree: AdaptTreeNode[] = [];\n  busy: Subscription;\n  ruleConflictsTableConfig: IRuleConflictsTableConfig;\n  ruleDesignerLink = `/helix/index.html#/${RX_APPLICATION.innovationStudioBundleId}/rule/edit/`;\n  showOnlyRulesWithIssuesFormControl = new FormControl(false);\n  strings: { [key: string]: string } = {};\n  treeWrap: TreeWrap = TreeWrap.WrapAll;\n\n  private destroyed$ = new ReplaySubject<boolean>(1);\n  private selectedRuleValue: AdaptTreeNode = null;\n\n  get selectedRule(): AdaptTreeNode {\n    return this.selectedRuleValue;\n  }\n\n  set selectedRule(selectedRule: AdaptTreeNode) {\n    this.selectedRuleSubject$.next(selectedRule);\n  }\n\n  private selectedRuleSubject$ = new BehaviorSubject(this.selectedRuleValue);\n  private selectedRule$ = this.selectedRuleSubject$.asObservable().pipe(takeUntil(this.destroyed$));\n\n  private showOnlyRulesWithIssuesSubject$ = new BehaviorSubject(false);\n  private showOnlyRulesWithIssues$ = this.showOnlyRulesWithIssuesSubject$\n    .asObservable()\n    .pipe(takeUntil(this.destroyed$));\n\n  constructor(\n    private rxModalService: RxModalService,\n    private rxRulePoolManagementService: RxRulePoolManagementService,\n    private translateService: TranslateService\n  ) {\n    this.setStrings();\n\n    this.showOnlyRulesWithIssuesFormControl.valueChanges\n      .pipe(takeUntil(this.destroyed$))\n      .subscribe((value: boolean) => this.showOnlyRulesWithIssuesSubject$.next(value));\n\n    this.ruleConflictsTableConfig = {\n      columns: [\n        {\n          header: this.strings.ruleNameColumnTitle,\n          field: `${RX_RULE_POOL_MANAGEMENT.conflictsRecordFieldIds.ruleName}`\n        },\n        {\n          header: this.strings.numberOfDelaysColumnTitle,\n          field: `${RX_RULE_POOL_MANAGEMENT.conflictsRecordFieldIds.numberOfDelays}`\n        }\n      ],\n      data: [],\n      texts: { emptyStateLabelText: this.strings.ruleConflictsEmptyStateLabel }\n    };\n\n    this.selectedRule$.subscribe((adaptTreeNode: AdaptTreeNode) => {\n      this.selectedRuleValue = adaptTreeNode;\n      this.ruleConflictsTableConfig.data = this.rxRulePoolManagementService.getRuleConflictsData(adaptTreeNode);\n    });\n\n    combineLatest([this.rxRulePoolManagementService.availablePoolsTree$, this.showOnlyRulesWithIssues$])\n      .pipe(\n        map(([availablePoolsTree, showOnlyRulesWithIssues]) => {\n          return showOnlyRulesWithIssues\n            ? availablePoolsTree.map((poolTreeNode) => ({\n                ...poolTreeNode,\n                children: poolTreeNode.data.hasRulesWithIssues\n                  ? poolTreeNode.children.filter(({ data }) => data.isRuleWithIssues)\n                  : []\n              }))\n            : availablePoolsTree;\n        }),\n        takeUntil(this.destroyed$)\n      )\n      .subscribe((availablePoolsTree: AdaptTreeNode[]) => {\n        this.availablePoolsTree.forEach((poolTreeNode: AdaptTreeNode, index: number) => {\n          const updatedPool = availablePoolsTree[index];\n\n          updatedPool.expanded = updatedPool.children.length && poolTreeNode.expanded;\n        });\n\n        this.availablePoolsTree = availablePoolsTree;\n\n        if (this.selectedRuleValue) {\n          const isSelectedRulePresentInTree = this.availablePoolsTree.some((poolTreeNode: AdaptTreeNode) => {\n            const rule = poolTreeNode.children.find(\n              (ruleTreeNode: AdaptTreeNode) => ruleTreeNode.data.guid === this.selectedRuleValue.data.guid\n            );\n\n            if (rule) {\n              this.selectedRule = rule;\n\n              return true;\n            }\n          });\n\n          if (!isSelectedRulePresentInTree) {\n            this.selectedRuleSubject$.next(null);\n          }\n        }\n      });\n  }\n\n  ngOnInit(): void {\n    this.busy = this.rxRulePoolManagementService.fetchAvailablePoolsTree();\n  }\n\n  ngOnDestroy(): void {\n    this.destroyed$.next(true);\n    this.destroyed$.complete();\n  }\n\n  isAssignedPoolOutOfRange(): boolean {\n    return this.selectedRuleValue.data.designTimePoolNumber > this.availablePoolsTree.length;\n  }\n\n  isRuleDesignerAvailable(): boolean {\n    return this.rxRulePoolManagementService.isRuleDesignerAvailable(this.selectedRuleValue.data);\n  }\n\n  openReassignPoolDialog(): any {\n    this.rxModalService\n      .openModal({\n        content: RuleReassignmentComponent,\n        data: {\n          ruleName: this.selectedRuleValue.data.name\n        },\n        size: 'sm'\n      })\n      .then(() => this.rxRulePoolManagementService.fetchAvailablePoolsTree(), noop);\n  }\n\n  private setStrings(): void {\n    this.strings = {\n      adminSettingsHeader: this.translateService.instant(\n        'com.bmc.arsys.rx.client.admin.rule-pool-management.header.title'\n      ),\n\n      assignedPoolLabel: this.translateService.instant(\n        'com.bmc.arsys.rx.client.admin.rule-pool-management.rule-summary.assigned-pool.label'\n      ),\n\n      availablePoolsLabel: this.translateService.instant(\n        'com.bmc.arsys.rx.client.admin.rule-pool-management.available-pools.label'\n      ),\n\n      availablePoolsTooltip: this.translateService.instant(\n        'com.bmc.arsys.rx.client.admin.rule-pool-management.available-pools.tooltip',\n        {\n          clockAlertIcon: '<i class=\"d-icon-clock_alert\"></i>',\n          clockArrowIcon: '<i class=\"d-icon-clock_arrow\"></i>',\n          dangerTriangleIcon: '<i class=\"text-danger d-icon-exclamation_triangle\"></i>',\n          triangleIcon: '<i class=\"d-icon-exclamation_triangle\"></i>',\n          successCheckIcon: '<i class=\"text-success d-icon-check_circle\"></i>',\n          checkIcon: '<i class=\"d-icon-check_circle\"></i>'\n        }\n      ),\n\n      averageExecutionTimeLabel: this.translateService.instant(\n        'com.bmc.arsys.rx.client.admin.rule-pool-management.rule-summary.average-execution-time.label'\n      ),\n\n      averageLatencyLabel: this.translateService.instant(\n        'com.bmc.arsys.rx.client.admin.rule-pool-management.rule-summary.average-latency.label'\n      ),\n\n      lastEndDateLabel: this.translateService.instant(\n        'com.bmc.arsys.rx.client.admin.rule-pool-management.rule-summary.last-end-date.label'\n      ),\n\n      lastStartDateLabel: this.translateService.instant(\n        'com.bmc.arsys.rx.client.admin.rule-pool-management.rule-summary.last-start-date.label'\n      ),\n\n      numberOfDelaysColumnTitle: this.translateService.instant(\n        'com.bmc.arsys.rx.client.admin.rule-pool-management.conflicts.grid.column.delays-caused.title'\n      ),\n\n      numberOfRunsLabel: this.translateService.instant(\n        'com.bmc.arsys.rx.client.admin.rule-pool-management.rule-summary.execution-count.label'\n      ),\n\n      selectedRuleEmptyStateLabel: this.translateService.instant(\n        'com.bmc.arsys.rx.client.admin.rule-pool-management.selected-rule.empty-state.label'\n      ),\n\n      showOnlyRulesWithIssuesLabel: this.translateService.instant(\n        'com.bmc.arsys.rx.client.admin.rule-pool-management.available-pools.show-only-rules-with-issues.label'\n      ),\n\n      reassignButtonLabel: this.translateService.instant(\n        'com.bmc.arsys.rx.client.admin.rule-pool-management.rule-summary.button.reassign.label'\n      ),\n\n      ruleConflictsEmptyStateLabel: this.translateService.instant(\n        'com.bmc.arsys.rx.client.admin.rule-pool-management.conflicts.grid.empty-state.label'\n      ),\n\n      ruleConflictsTitle: this.translateService.instant(\n        'com.bmc.arsys.rx.client.admin.rule-pool-management.conflicts.title'\n      ),\n\n      ruleNameColumnTitle: this.translateService.instant(\n        'com.bmc.arsys.rx.client.admin.rule-pool-management.conflicts.grid.column.rule-name.title'\n      ),\n\n      ruleNameLabel: this.translateService.instant(\n        'com.bmc.arsys.rx.client.admin.rule-pool-management.rule-summary.rule-name.label'\n      ),\n\n      rulePoolsEmptyStateLabel: this.translateService.instant(\n        'com.bmc.arsys.rx.client.empty-state.no-data-to-display.label'\n      ),\n\n      ruleSummaryTitle: this.translateService.instant(\n        'com.bmc.arsys.rx.client.admin.rule-pool-management.rule-summary.title'\n      ),\n\n      ruleSummaryTooltip: this.translateService.instant(\n        'com.bmc.arsys.rx.client.admin.rule-pool-management.rule-summary.tooltip'\n      ),\n\n      timerDefinitionLabel: this.translateService.instant(\n        'com.bmc.arsys.rx.client.admin.rule-pool-management.rule-summary.timer-definition.label'\n      )\n    };\n  }\n}\n","<rx-admin-settings header=\"{{ strings.adminSettingsHeader }}\" [busy]=\"busy\">\n  <div *ngIf=\"availablePoolsTree.length; else emptyRulePoolsTemplate\" class=\"d-flex h-100 overflow-auto\">\n    <div class=\"d-flex flex-shrink-0 flex-column border-right page-content-left pr-4\">\n      <h5 class=\"m-0\">\n        {{ strings.availablePoolsLabel }}\n        <adapt-icon\n          name=\"info_circle_o_adapt\"\n          [adaptPopover]=\"availablePoolsTooltipTemplate\"\n          maxWidth=\"400\"\n        ></adapt-icon>\n      </h5>\n\n      <ng-template #availablePoolsTooltipTemplate>\n        <div [innerHtml]=\"strings.availablePoolsTooltip\"></div>\n      </ng-template>\n\n      <adapt-rx-checkbox\n        [label]=\"strings.showOnlyRulesWithIssuesLabel\"\n        [formControl]=\"showOnlyRulesWithIssuesFormControl\"\n      ></adapt-rx-checkbox>\n\n      <div class=\"overflow-auto\">\n        <adapt-tree [value]=\"availablePoolsTree\" [(selection)]=\"selectedRule\" [wrap]=\"treeWrap\" selectionMode=\"single\">\n          <ng-template let-node adaptTreeNodeTemplate=\"pool-without-issues\">\n            <span><i class=\"text-success d-icon-check_circle at-action-icon\"></i>{{ node.label }}</span>\n          </ng-template>\n          <ng-template let-node adaptTreeNodeTemplate=\"pool-with-issues\">\n            <span><i class=\"text-danger d-icon-exclamation_triangle at-action-icon\"></i>{{ node.label }}</span>\n          </ng-template>\n\n          <ng-template let-node adaptTreeNodeTemplate=\"rule-without-issues\">\n            <span class=\"d-flex\" [adaptTooltip]=\"node.data.name\" [popupDelay]=\"1000\"\n              ><i class=\"d-icon-check_circle at-action-icon\" [ngClass]=\"{ 'text-success': node.data.isEditable }\"></i\n              >{{ node.label }}</span\n            >\n          </ng-template>\n          <ng-template let-node adaptTreeNodeTemplate=\"rule-with-issues\">\n            <span class=\"d-flex\" [adaptTooltip]=\"node.data.name\" [popupDelay]=\"1000\"\n              ><i\n                class=\"d-icon-exclamation_triangle at-action-icon\"\n                [ngClass]=\"{ 'text-danger': node.data.isEditable }\"\n              ></i\n              >{{ node.label }}\n            </span>\n          </ng-template>\n          <ng-template let-node adaptTreeNodeTemplate=\"remedy-escalation-with-issues\">\n            <span class=\"d-flex\" [adaptTooltip]=\"node.data.name\" [popupDelay]=\"1000\"\n              ><i class=\"d-icon-clock_alert at-action-icon\"></i>{{ node.label }}</span\n            >\n          </ng-template>\n          <ng-template let-node adaptTreeNodeTemplate=\"remedy-escalation-without-issues\">\n            <span class=\"d-flex\" [adaptTooltip]=\"node.data.name\" [popupDelay]=\"1000\"\n              ><i class=\"d-icon-clock_arrow at-action-icon\"></i>{{ node.label }}</span\n            >\n          </ng-template>\n        </adapt-tree>\n      </div>\n    </div>\n\n    <div class=\"flex-fill pl-4\">\n      <div *ngIf=\"selectedRule?.data as rule; else noRuleSelectedTemplate\">\n        <h5 class=\"mt-0\">\n          {{ strings.ruleSummaryTitle }}\n          <adapt-icon\n            name=\"info_circle_o_adapt\"\n            [adaptPopover]=\"ruleSummaryTooltipTemplate\"\n            maxWidth=\"280\"\n            placement=\"bottom\"\n          ></adapt-icon>\n        </h5>\n\n        <ng-template #ruleSummaryTooltipTemplate>\n          <div [innerHTML]=\"strings.ruleSummaryTooltip\"></div>\n        </ng-template>\n\n        <div class=\"mb-3\">\n          <adapt-rx-control-label [label]=\"strings.ruleNameLabel\"></adapt-rx-control-label>\n\n          <span *ngIf=\"!isRuleDesignerAvailable(); else ruleFullNameWithDesignerLink\" class=\"rule-name-value\">{{\n            rule.name\n          }}</span>\n\n          <ng-template #ruleFullNameWithDesignerLink>\n            <a\n              adapt-button\n              btn-type=\"tertiary\"\n              class=\"d-icon-left-pop_up p-0 border-0 rule-name-value\"\n              rx-id=\"open-rule-designer-button\"\n              target=\"_blank\"\n              href=\"{{ ruleDesignerLink + rule.name }}\"\n            >\n              {{ rule.name }}\n            </a>\n          </ng-template>\n        </div>\n\n        <div class=\"mb-3\">\n          <adapt-rx-control-label [label]=\"strings.timerDefinitionLabel\"></adapt-rx-control-label>\n          <span>{{ rule.timeCriteria | rxRuleTriggerTimeCriteriaDisplayValue }}</span>\n        </div>\n\n        <div class=\"d-flex mb-3\">\n          <div class=\"flex-fill col-4 p-0\">\n            <adapt-rx-control-label [label]=\"strings.numberOfRunsLabel\"></adapt-rx-control-label>\n            <span>{{ rule.numberOfRuns }}</span>\n          </div>\n          <div class=\"flex-fill col-4 p-0\">\n            <adapt-rx-control-label [label]=\"strings.averageLatencyLabel\"></adapt-rx-control-label>\n            <span>{{ rule.avgWaitTime }}</span>\n          </div>\n          <div class=\"flex-fill col-4 p-0\">\n            <adapt-rx-control-label [label]=\"strings.averageExecutionTimeLabel\"></adapt-rx-control-label>\n            <span>{{ rule.avgExecutionTime }}</span>\n          </div>\n        </div>\n\n        <div class=\"d-flex mb-3\">\n          <div class=\"flex-fill col-4 p-0\">\n            <div class=\"pb-1\">\n              <span class=\"form-control-label pr-3\">{{ strings.assignedPoolLabel }}</span>\n\n              <adapt-button\n                btn-type=\"tertiary\"\n                class=\"p-0 border-0\"\n                rx-id=\"reassign-button\"\n                *ngIf=\"rule.isEditable\"\n                (click)=\"openReassignPoolDialog()\"\n                [style.vertical-align]=\"'baseline'\"\n              >\n                <span class=\"d-icon-pencil\"></span>\n                {{ strings.reassignButtonLabel }}\n              </adapt-button>\n            </div>\n            <span>\n              <i\n                *ngIf=\"isAssignedPoolOutOfRange()\"\n                class=\"d-icon-exclamation_triangle at-action-icon\"\n                [ngClass]=\"{ 'text-danger': rule.isEditable }\"\n              ></i>\n              {{ rule.designTimePoolNumber }}\n            </span>\n          </div>\n          <div class=\"flex-fill col-4 p-0\">\n            <adapt-rx-control-label [label]=\"strings.lastStartDateLabel\"></adapt-rx-control-label>\n            <span>{{ rule.lastStartTime | date: 'medium' }}</span>\n          </div>\n          <div class=\"flex-fill col-4 p-0\">\n            <adapt-rx-control-label [label]=\"strings.lastEndDateLabel\"></adapt-rx-control-label>\n            <span>{{ rule.lastEndTime | date: 'medium' }}</span>\n          </div>\n        </div>\n\n        <h5>\n          {{ strings.ruleConflictsTitle }}\n          <i\n            *ngIf=\"ruleConflictsTableConfig.data.length\"\n            class=\"text-danger d-icon-exclamation_triangle\"\n            [ngClass]=\"{ 'text-danger': rule.isEditable }\"\n          ></i>\n        </h5>\n        <adapt-table\n          [columns]=\"ruleConflictsTableConfig.columns\"\n          [bordered]=\"true\"\n          [sortable]=\"true\"\n          [texts]=\"ruleConflictsTableConfig.texts\"\n          [value]=\"ruleConflictsTableConfig.data\"\n        >\n        </adapt-table>\n      </div>\n\n      <ng-template #noRuleSelectedTemplate>\n        <div class=\"d-flex align-items-center justify-content-center h-100\">\n          <adapt-empty-state [type]=\"'rules'\" [label]=\"strings.selectedRuleEmptyStateLabel\"></adapt-empty-state>\n        </div>\n      </ng-template>\n    </div>\n  </div>\n\n  <ng-template #emptyRulePoolsTemplate>\n    <div class=\"d-flex align-items-center h-100\">\n      <adapt-empty-state\n        class=\"flex-fill\"\n        [type]=\"'rules'\"\n        [label]=\"strings.rulePoolsEmptyStateLabel\"\n      ></adapt-empty-state>\n    </div>\n  </ng-template>\n</rx-admin-settings>\n","import { ComponentFactoryResolver, NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { ReactiveFormsModule } from '@angular/forms';\nimport { TranslateModule } from '@ngx-translate/core';\nimport {\n  AdaptBusyModule,\n  AdaptButtonModule,\n  AdaptEmptyStateModule,\n  AdaptIconModule,\n  AdaptPopoverModule,\n  AdaptRxCheckboxModule,\n  AdaptRxFormControlModule,\n  AdaptRxLabelModule,\n  AdaptRxSelectModule,\n  AdaptTooltipModule,\n  AdaptTreeModule\n} from '@bmc-ux/adapt-angular';\nimport { AdaptTableModule } from '@bmc-ux/adapt-table';\nimport { RX_APPLICATION } from '@helix/platform/shared/api';\nimport { AdminSettingsModule } from '@helix/platform/shared/components';\nimport { RxRulePipesModule } from '@helix/platform/rule/api';\nimport { RxViewComponentRegistryService } from '@helix/platform/view/api';\nimport { RulePoolManagementAdminComponent } from './rule-pool-management.component';\nimport { RuleReassignmentComponent } from './rule-reassignment/rule-reassignment.component';\n\n@NgModule({\n  declarations: [RuleReassignmentComponent, RulePoolManagementAdminComponent],\n  imports: [\n    AdaptBusyModule,\n    AdaptButtonModule,\n    AdaptEmptyStateModule,\n    AdaptIconModule,\n    AdaptPopoverModule,\n    AdaptRxCheckboxModule,\n    AdaptRxFormControlModule,\n    AdaptRxLabelModule,\n    AdaptRxSelectModule,\n    AdaptTableModule,\n    AdaptTooltipModule,\n    AdaptTreeModule,\n    AdminSettingsModule,\n    CommonModule,\n    ReactiveFormsModule,\n    RxRulePipesModule,\n    TranslateModule\n  ],\n  entryComponents: [RulePoolManagementAdminComponent]\n})\nexport class RulePoolManagementRegistrationModule {\n  constructor(\n    private componentFactoryResolver: ComponentFactoryResolver,\n    private rxViewComponentRegistryService: RxViewComponentRegistryService\n  ) {\n    rxViewComponentRegistryService.register({\n      type: 'rx-admin-rule-pool-management',\n      componentFactory: this.componentFactoryResolver.resolveComponentFactory(RulePoolManagementAdminComponent),\n      name: 'Rule pool management',\n      isPageComponent: true,\n      availableInBundles: [RX_APPLICATION.settingsBundleId]\n    });\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { ISystemConfiguration, RxSystemConfigurationService, RX_ENVIRONMENT } from '@helix/platform/shared/api';\nimport { find } from 'lodash';\nimport { Observable } from 'rxjs';\nimport { map } from 'rxjs/operators';\nimport { IServerInformation } from './server-information.interface';\n@Injectable({\n  providedIn: 'root'\n})\nexport class RxServerInformationService {\n  constructor(private rxSystemConfigurationService: RxSystemConfigurationService) {}\n\n  getServerInformation(): Observable<IServerInformation> {\n    const identifiers = [\n      'VERSION',\n      'SERVER_DIR',\n      'OS',\n      'HARDWARE',\n      'SERVER_NAME',\n      'SERVER_TIME',\n      'CONFIGURATION_NAME',\n      'DB_TYPE',\n      'DB_NAME',\n      'DB_VERSION',\n      'DB_USER'\n    ];\n\n    return this.rxSystemConfigurationService.queryConfiguration(identifiers).pipe(\n      map((serverInformation: ISystemConfiguration[]) => {\n        return {\n          serverVersion: find(serverInformation, { id: 'VERSION' }).value,\n          serverDirectory: find(serverInformation, { id: 'SERVER_DIR' }).value,\n          operatingSystem: find(serverInformation, { id: 'OS' }).value,\n          hardware: find(serverInformation, { id: 'HARDWARE' }).value,\n          serverName: find(serverInformation, { id: 'SERVER_NAME' }).value,\n          serverTime: new Date(\n            (find(serverInformation, { id: 'SERVER_TIME' }).value as number) * 1000\n          ).toLocaleString(),\n          configurationName: find(serverInformation, { id: 'CONFIGURATION_NAME' }).value,\n          databaseType: find(serverInformation, { id: 'DB_TYPE' }).value,\n          databaseName: find(serverInformation, { id: 'DB_NAME' }).value,\n          databaseVersion: find(serverInformation, { id: 'DB_VERSION' }).value,\n          databaseUser: find(serverInformation, { id: 'DB_USER' }).value\n        } as IServerInformation;\n      })\n    );\n  }\n}\n","import { Component, OnInit } from '@angular/core';\nimport { Subscription } from 'rxjs';\nimport { IServerInformation } from './server-information.interface';\nimport { RxServerInformationService } from './server-information.service';\n\n@Component({\n  selector: 'rx-admin-server-information',\n  templateUrl: './server-information.component.html'\n})\nexport class ServerInformationAdminComponent implements OnInit {\n  busy: Subscription;\n  serverInformation: IServerInformation;\n\n  constructor(private rxServerInformationService: RxServerInformationService) {}\n\n  ngOnInit() {\n    this.busy = this.rxServerInformationService.getServerInformation().subscribe((serverInformation) => {\n      this.serverInformation = serverInformation;\n    });\n  }\n}\n","<rx-admin-settings\n  header=\"{{ 'com.bmc.arsys.rx.client.admin.server-information.header.title' | translate }}\"\n  [busy]=\"busy\"\n>\n  <div class=\"row\">\n    <div class=\"col-md-4\">\n      <adapt-rx-textfield\n        rx-id=\"server-version\"\n        label=\"{{ 'com.bmc.arsys.rx.client.admin.server-information.server-version.label' | translate }}\"\n        readonly=\"true\"\n        disabledStyleForReadonlyState=\"true\"\n        [ngModel]=\"serverInformation?.serverVersion\"\n        class=\"d-block form-group\"\n      >\n      </adapt-rx-textfield>\n    </div>\n    <div class=\"col-md-4\">\n      <adapt-rx-textfield\n        rx-id=\"server-directory\"\n        label=\"{{ 'com.bmc.arsys.rx.client.admin.server-information.server-directory.label' | translate }}\"\n        readonly=\"true\"\n        disabledStyleForReadonlyState=\"true\"\n        [ngModel]=\"serverInformation?.serverDirectory\"\n        class=\"d-block form-group\"\n      >\n      </adapt-rx-textfield>\n    </div>\n  </div>\n  <div class=\"row\">\n    <div class=\"col-md-4\">\n      <adapt-rx-textfield\n        rx-id=\"operating-system\"\n        label=\"{{ 'com.bmc.arsys.rx.client.admin.server-information.operating-system.label' | translate }}\"\n        readonly=\"true\"\n        disabledStyleForReadonlyState=\"true\"\n        [ngModel]=\"serverInformation?.operatingSystem\"\n        class=\"d-block form-group\"\n      >\n      </adapt-rx-textfield>\n    </div>\n    <div class=\"col-md-4\">\n      <adapt-rx-textfield\n        rx-id=\"hardware\"\n        label=\"{{ 'com.bmc.arsys.rx.client.admin.server-information.hardware.label' | translate }}\"\n        readonly=\"true\"\n        disabledStyleForReadonlyState=\"true\"\n        [ngModel]=\"serverInformation?.hardware\"\n        class=\"d-block form-group\"\n      >\n      </adapt-rx-textfield>\n    </div>\n  </div>\n  <div class=\"row\">\n    <div class=\"col-md-4\">\n      <adapt-rx-textfield\n        rx-id=\"server-name\"\n        label=\"{{ 'com.bmc.arsys.rx.client.admin.server-information.server-name-alias.label' | translate }}\"\n        readonly=\"true\"\n        disabledStyleForReadonlyState=\"true\"\n        [ngModel]=\"serverInformation?.serverName\"\n        class=\"d-block form-group\"\n      ></adapt-rx-textfield>\n    </div>\n    <div class=\"col-md-4\">\n      <adapt-rx-textfield\n        rx-id=\"server-time\"\n        label=\"{{ 'com.bmc.arsys.rx.client.admin.server-information.server-time.label' | translate }}\"\n        readonly=\"true\"\n        disabledStyleForReadonlyState=\"true\"\n        [ngModel]=\"serverInformation?.serverTime\"\n        class=\"d-block form-group\"\n      ></adapt-rx-textfield>\n    </div>\n  </div>\n  <div class=\"row\">\n    <div class=\"col-md-4\">\n      <adapt-rx-textfield\n        rx-id=\"configuration-name\"\n        label=\" {{ 'com.bmc.arsys.rx.client.admin.server-information.configuration-name-time.label' | translate }}\"\n        readonly=\"true\"\n        disabledStyleForReadonlyState=\"true\"\n        [ngModel]=\"serverInformation?.configurationName\"\n        class=\"d-block form-group\"\n      ></adapt-rx-textfield>\n    </div>\n    <div class=\"col-md-4\">\n      <adapt-rx-textfield\n        rx-id=\"database-type\"\n        label=\"{{ 'com.bmc.arsys.rx.client.admin.server-information.database-type.label' | translate }}\"\n        readonly=\"true\"\n        disabledStyleForReadonlyState=\"true\"\n        [ngModel]=\"serverInformation?.databaseType\"\n        class=\"d-block form-group\"\n      ></adapt-rx-textfield>\n    </div>\n  </div>\n  <div class=\"row\">\n    <div class=\"col-md-4\">\n      <adapt-rx-textfield\n        rx-id=\"database-name\"\n        label=\"{{ 'com.bmc.arsys.rx.client.admin.server-information.database-tablespace-name.label' | translate }}\"\n        readonly=\"true\"\n        disabledStyleForReadonlyState=\"true\"\n        [ngModel]=\"serverInformation?.databaseName\"\n        class=\"d-block form-group\"\n      ></adapt-rx-textfield>\n    </div>\n    <div class=\"col-md-4\">\n      <adapt-rx-textfield\n        rx-id=\"database-version\"\n        label=\"{{ 'com.bmc.arsys.rx.client.admin.server-information.database-version.label' | translate }}\"\n        readonly=\"true\"\n        disabledStyleForReadonlyState=\"true\"\n        [ngModel]=\"serverInformation?.databaseVersion\"\n        class=\"d-block form-group\"\n      ></adapt-rx-textfield>\n    </div>\n  </div>\n</rx-admin-settings>\n","import { CommonModule } from '@angular/common';\nimport { ComponentFactoryResolver, NgModule } from '@angular/core';\nimport { FormsModule } from '@angular/forms';\nimport { AdaptRxTextfieldModule } from '@bmc-ux/adapt-angular';\nimport { RX_APPLICATION } from '@helix/platform/shared/api';\nimport { RxViewComponentRegistryService } from '@helix/platform/view/api';\nimport { AdminSettingsModule } from '@helix/platform/shared/components';\nimport { ServerInformationAdminComponent } from './server-information.component';\nimport { TranslateModule } from '@ngx-translate/core';\n\n@NgModule({\n  declarations: [ServerInformationAdminComponent],\n  imports: [AdminSettingsModule, AdaptRxTextfieldModule, CommonModule, FormsModule, TranslateModule],\n  entryComponents: [ServerInformationAdminComponent]\n})\nexport class ServerInformationRegistrationModule {\n  constructor(\n    private componentFactoryResolver: ComponentFactoryResolver,\n    private rxViewComponentRegistryService: RxViewComponentRegistryService\n  ) {\n    rxViewComponentRegistryService.register({\n      type: 'rx-admin-server-information',\n      componentFactory: this.componentFactoryResolver.resolveComponentFactory(ServerInformationAdminComponent),\n      name: 'Server information',\n      isPageComponent: true,\n      availableInBundles: [RX_APPLICATION.settingsBundleId]\n    });\n  }\n}\n","import { RX_ADMINISTRATION } from '@helix/platform/shared/api';\n\nexport const RX_SERVER_LOGS = {\n  configUrl: `${RX_ADMINISTRATION.systemConfigurationUrl}/logging/server`,\n  downloadUrl: `${RX_ADMINISTRATION.systemConfigurationUrl}/logging/server/download`,\n  defaultFormConfig: {\n    autoTurnOffDuration: 30,\n    ruleLogOn: false,\n    timedRuleLogOn: false,\n    processLogOn: false,\n    sqlLogOn: false,\n    apiLogOn: false\n  }\n};\n","import { Injectable } from '@angular/core';\nimport { HttpClient, HttpResponse } from '@angular/common/http';\nimport { RX_SERVER_LOGS } from './server-logs.constant';\nimport { Observable } from 'rxjs';\nimport { words } from 'lodash';\nimport { ILogFileNames, IServerLogsConfig } from './server-logs.types';\nimport { saveAs } from 'file-saver';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class RxServerLogsService {\n  constructor(private httpClient: HttpClient) {}\n\n  getConfig(): Observable<IServerLogsConfig> {\n    return this.httpClient.get<IServerLogsConfig>(RX_SERVER_LOGS.configUrl);\n  }\n\n  save(logsConfig: IServerLogsConfig): Observable<any> {\n    return this.httpClient.post(RX_SERVER_LOGS.configUrl, logsConfig);\n  }\n\n  downloadServerLogs(logFileNames: ILogFileNames): Observable<any> {\n    return this.httpClient.post(RX_SERVER_LOGS.downloadUrl, logFileNames, {\n      observe: 'response',\n      responseType: 'arraybuffer'\n    });\n  }\n}\n","import { Component, HostBinding, OnInit } from '@angular/core';\nimport { FormBuilder, FormGroup } from '@angular/forms';\nimport { RxServerLogsService } from './server-logs.service';\nimport { IServerLogsConfig } from './server-logs.types';\nimport { RxNotificationService, RxServerErrorHandlerService } from '@helix/platform/shared/api';\nimport { RX_SERVER_LOGS } from './server-logs.constant';\nimport { Subscription } from 'rxjs';\nimport { BaseViewComponent } from '@helix/platform/view/runtime';\nimport { RxFileService } from '@helix/platform/utils';\n\n@Component({\n  selector: 'rx-admin-server-logs',\n  templateUrl: './server-logs.component.html',\n  styleUrls: ['./server-logs.component.scss']\n})\nexport class ServerLogsAdminComponent extends BaseViewComponent implements OnInit {\n  @HostBinding('class')\n  hostClass = 'd-block col-md-9 p-0';\n\n  constructor(\n    private formBuilder: FormBuilder,\n    private rxNotificationService: RxNotificationService,\n    private rxServerErrorHandlerService: RxServerErrorHandlerService,\n    private rxServerLogsService: RxServerLogsService\n  ) {\n    super();\n  }\n\n  busy: Subscription;\n  serverLogsForm: FormGroup;\n  shouldDisplayAdditionalLogTypes: boolean;\n  isDownloadInProgress: boolean;\n\n  private getServerLogsConfig() {\n    this.busy = this.rxServerLogsService.getConfig().subscribe((serverLogsConfig: IServerLogsConfig) => {\n      this.serverLogsForm.patchValue(serverLogsConfig);\n    });\n  }\n\n  toggleAdditionalLogTypes() {\n    this.shouldDisplayAdditionalLogTypes = !this.shouldDisplayAdditionalLogTypes;\n  }\n\n  save() {\n    const formValue = this.serverLogsForm.getRawValue();\n\n    this.rxServerLogsService.save(formValue).subscribe(() => {\n      this.rxNotificationService.addSuccessMessage('Server Logs configuration saved successfully.');\n      this.serverLogsForm.markAsPristine();\n    });\n  }\n\n  downloadLogs() {\n    this.isDownloadInProgress = true;\n\n    this.rxServerLogsService\n      .downloadServerLogs({\n        fileNames: ['server', 'License']\n      })\n      .subscribe(\n        (data) => {\n          RxFileService.saveFile(data);\n          this.isDownloadInProgress = false;\n        },\n        (error) => {\n          error.data = JSON.parse(String.fromCharCode.apply(null, new Uint8Array(error.error)));\n          this.rxServerErrorHandlerService.handle(error);\n          this.isDownloadInProgress = false;\n        }\n      );\n  }\n\n  get autoTurnOffDuration() {\n    return this.serverLogsForm.get('autoTurnOffDuration').value;\n  }\n\n  ngOnInit() {\n    this.notifyPropertyChanged('api', {\n      isDirty: () => this.serverLogsForm.dirty\n    });\n\n    this.serverLogsForm = this.formBuilder.group(RX_SERVER_LOGS.defaultFormConfig);\n\n    this.getServerLogsConfig();\n  }\n}\n","<rx-admin-settings header=\"{{ 'com.bmc.arsys.rx.client.admin.server-logs.header.title' | translate }}\" [busy]=\"busy\">\n  <form [formGroup]=\"serverLogsForm\">\n    <div>\n      <h6 class=\"dt\">{{ 'com.bmc.arsys.rx.client.admin.server-logs.capture-logs.title' | translate }}</h6>\n      <div class=\"d-flex p-0 logs-duration\" rx-id=\"logs-duration\">\n        <adapt-rx-counter\n          formControlName=\"autoTurnOffDuration\"\n          min=\"1\"\n          adaptIntegerNumber\n        >\n        </adapt-rx-counter>\n        <span class=\"p-2\">{{ 'com.bmc.arsys.rx.client.admin.server-logs.minutes.label' | translate }}</span>\n      </div>\n      <div *ngIf=\"autoTurnOffDuration < 1\" class=\"adapt-mt-error\">\n        {{ 'com.bmc.arsys.rx.client.admin.server-logs.minimum-of-one-minute.label' | translate }}\n      </div>\n    </div>\n\n    <div>\n      <h6 class=\"dt\">{{ 'com.bmc.arsys.rx.client.admin.server-logs.log-types-to-be-captured.title' | translate }}</h6>\n      <adapt-rx-checkbox\n        formControlName=\"ruleLogOn\"\n        label=\"{{ 'com.bmc.arsys.rx.client.admin.server-logs.rule.label' | translate }}\"\n      ></adapt-rx-checkbox>\n      <adapt-rx-checkbox\n        formControlName=\"timedRuleLogOn\"\n        label=\"{{ 'com.bmc.arsys.rx.client.admin.server-logs.escalation.label' | translate }}\"\n      ></adapt-rx-checkbox>\n      <adapt-rx-checkbox\n        formControlName=\"processLogOn\"\n        label=\"{{ 'com.bmc.arsys.rx.client.admin.server-logs.process.label' | translate }}\"\n      ></adapt-rx-checkbox>\n    </div>\n\n    <div rx-id=\"show-additional-log\" (click)=\"toggleAdditionalLogTypes()\" class=\"btn-link alert-link pt-2\">\n      {{\n        (shouldDisplayAdditionalLogTypes\n          ? 'com.bmc.arsys.rx.client.admin.server-logs.show-less.label'\n          : 'com.bmc.arsys.rx.client.admin.server-logs.show-more.label'\n        ) | translate\n      }}\n    </div>\n\n    <div *ngIf=\"shouldDisplayAdditionalLogTypes\">\n      <h6 class=\"dt\">\n        {{ 'com.bmc.arsys.rx.client.admin.server-logs.additional-log-types-to-be-captured.title' | translate }}\n      </h6>\n      <adapt-rx-checkbox\n        formControlName=\"sqlLogOn\"\n        label=\"{{ 'com.bmc.arsys.rx.client.admin.server-logs.sql.label' | translate }}\"\n      ></adapt-rx-checkbox>\n      <adapt-rx-checkbox\n        formControlName=\"apiLogOn\"\n        label=\"{{ 'com.bmc.arsys.rx.client.admin.server-logs.api.label' | translate }}\"\n      ></adapt-rx-checkbox>\n    </div>\n\n    <div class=\"mt-4 d-flex\">\n      <button\n        type=\"submit\"\n        adapt-button\n        btn-type=\"primary\"\n        [disabled]=\"serverLogsForm.pristine || autoTurnOffDuration < 1\"\n        (click)=\"save()\"\n        rx-id=\"save-button\"\n        class=\"mr-3\"\n      >\n        {{ 'com.bmc.arsys.rx.client.common.save.label' | translate }}\n      </button>\n\n      <button\n        type=\"button\"\n        adapt-button\n        btn-type=\"secondary\"\n        [adaptInlineLoader]=\"isDownloadInProgress\"\n        activeText=\"Downloading...\"\n        (click)=\"downloadLogs()\"\n        rx-id=\"download-button\"\n      >\n        {{ 'com.bmc.arsys.rx.client.admin.server-logs.download-logs.label' | translate }}\n      </button>\n    </div>\n  </form>\n</rx-admin-settings>\n","import { ComponentFactoryResolver, NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\nimport {\n  AdaptBusyModule,\n  AdaptButtonModule,\n  AdaptRxCheckboxModule,\n  AdaptRxCounterModule,\n  AdaptRxValidatorsModule\n} from '@bmc-ux/adapt-angular';\nimport { RX_APPLICATION } from '@helix/platform/shared/api';\nimport { RxViewComponentRegistryService } from '@helix/platform/view/api';\nimport { ServerLogsAdminComponent } from './server-logs.component';\nimport { AdminSettingsModule } from '@helix/platform/shared/components';\nimport { TranslateModule } from '@ngx-translate/core';\n\n@NgModule({\n  declarations: [ServerLogsAdminComponent],\n  imports: [\n    AdaptBusyModule,\n    AdaptButtonModule,\n    AdaptRxCheckboxModule,\n    AdaptRxCounterModule,\n    AdaptRxValidatorsModule,\n    AdminSettingsModule,\n    CommonModule,\n    FormsModule,\n    ReactiveFormsModule,\n    TranslateModule\n  ],\n  entryComponents: [ServerLogsAdminComponent]\n})\nexport class ServerLogsRegistrationModule {\n  constructor(\n    private componentFactoryResolver: ComponentFactoryResolver,\n    private rxViewComponentRegistryService: RxViewComponentRegistryService\n  ) {\n    rxViewComponentRegistryService.register({\n      type: 'rx-admin-server-logs',\n      componentFactory: this.componentFactoryResolver.resolveComponentFactory(ServerLogsAdminComponent),\n      name: 'Server logs',\n      isPageComponent: true,\n      availableInBundles: [RX_APPLICATION.settingsBundleId]\n    });\n  }\n}\n","export const RX_SERVICES_PROVIDER_REGION = {\n  connections: {\n    cognitiveAdminCredential: 'cognitiveAdminCredential'\n  },\n  providers: {\n    watson: 'WATSON'\n  },\n  regionOptions: [\n    { name: 'com.bmc.arsys.rx.client.admin.cognitive-service.region.germany.label', id: 'EU_DE' },\n    { name: 'com.bmc.arsys.rx.client.admin.cognitive-service.region.sydney.label', id: 'AU_SYD' },\n    { name: 'com.bmc.arsys.rx.client.admin.cognitive-service.region.us-east.label', id: 'US_EAST' },\n    { name: 'com.bmc.arsys.rx.client.admin.cognitive-service.region.us-south.label', id: 'US_SOUTH' },\n    { name: 'com.bmc.arsys.rx.client.admin.cognitive-service.region.uk.label', id: 'EU_GB' }\n  ]\n};\n","import { Component, OnInit } from '@angular/core';\nimport { FormControl, FormGroup } from '@angular/forms';\nimport { KeyValueObject, RxSelectOption } from '@bmc-ux/adapt-angular';\nimport { find, get } from 'lodash';\nimport { RX_SERVICES_PROVIDER_REGION } from './services-provider-region.constant';\nimport { TranslateService } from '@ngx-translate/core';\nimport { RxNotificationService, RxSystemConfigurationService } from '@helix/platform/shared/api';\n\n@Component({\n  selector: 'rx-admin-services-provider-region',\n  templateUrl: './services-provider-region.component.html',\n  styleUrls: ['./services-provider-region.component.scss']\n})\nexport class ServicesProviderRegionAdminComponent implements OnInit {\n  servicesProviderRegionForm: FormGroup;\n  private isSaveInProgress = false;\n  private defaultSelection = this.translateService.instant('com.bmc.arsys.rx.client.common.select.label');\n\n  regionOptions: RxSelectOption[] = RX_SERVICES_PROVIDER_REGION.regionOptions.map((region: KeyValueObject) => ({\n    ...region,\n    name: this.translateService.instant(region.name)\n  }));\n\n  constructor(\n    private translateService: TranslateService,\n    private rxSystemConfigurationService: RxSystemConfigurationService,\n    private rxNotificationService: RxNotificationService\n  ) {}\n\n  ngOnInit(): void {\n    this.servicesProviderRegionForm = new FormGroup({\n      region: new FormControl('')\n    });\n\n    this.rxSystemConfigurationService\n      .getConfiguration(RX_SERVICES_PROVIDER_REGION.connections.cognitiveAdminCredential)\n      .subscribe((result) => {\n        const cognitiveAdminCredential = JSON.parse(result.value as string);\n\n        this.servicesProviderRegionForm.get('region').setValue([\n          find(this.regionOptions, {\n            id: cognitiveAdminCredential[RX_SERVICES_PROVIDER_REGION.providers.watson].cognitiveAdminRegionName\n          }) as RxSelectOption\n        ]);\n      });\n  }\n\n  optionFormatter = (regionNameOption: RxSelectOption): string => {\n    return get(regionNameOption, 'name', this.defaultSelection);\n  };\n\n  save(): void {\n    this.isSaveInProgress = true;\n\n    const payload = {\n      [RX_SERVICES_PROVIDER_REGION.providers.watson]: {\n        cognitiveAdminRegionName: this.servicesProviderRegionForm.get('region').value[0].id\n      }\n    };\n\n    this.rxSystemConfigurationService\n      .setConfiguration(RX_SERVICES_PROVIDER_REGION.connections.cognitiveAdminCredential, payload)\n      .subscribe(\n        (response) => {\n          this.isSaveInProgress = false;\n          this.servicesProviderRegionForm.markAsPristine();\n\n          this.rxNotificationService.addSuccessMessage(\n            this.translateService.instant('com.bmc.arsys.rx.client.admin.services-provider-region.saved.message')\n          );\n        },\n        (error) => {\n          this.isSaveInProgress = false;\n        }\n      );\n  }\n\n  canSave(): boolean {\n    return !this.isSaveInProgress && this.servicesProviderRegionForm.valid && this.servicesProviderRegionForm.dirty;\n  }\n}\n","<rx-admin-settings header=\"{{ 'com.bmc.arsys.rx.client.admin.services-provider-region.header.title' | translate }}\">\n  <form [formGroup]=\"servicesProviderRegionForm\">\n    <adapt-rx-select\n      [options]=\"regionOptions\"\n      label=\"{{ 'com.bmc.arsys.rx.client.admin.services-provider-region.region.label' | translate }}\"\n      name=\"region\"\n      [optionFormatter]=\"optionFormatter\"\n      formControlName=\"region\"\n      rx-id=\"region\"\n      class=\"form-group d-block\"\n      required\n    ></adapt-rx-select>\n\n    <button adapt-button btn-type=\"primary\" type=\"button\" rx-id=\"save-button\" (click)=\"save()\" [disabled]=\"!canSave()\">\n      {{ 'com.bmc.arsys.rx.client.common.save.label' | translate }}\n    </button>\n  </form>\n</rx-admin-settings>\n","import { ComponentFactoryResolver, NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { ServicesProviderRegionAdminComponent } from './services-provider-region.component';\nimport { RxViewComponentRegistryService } from '@helix/platform/view/api';\nimport { RX_APPLICATION } from '@helix/platform/shared/api';\nimport { ReactiveFormsModule } from '@angular/forms';\nimport { AdaptButtonModule, AdaptRxSelectModule } from '@bmc-ux/adapt-angular';\nimport { TranslateModule } from '@ngx-translate/core';\nimport { AdminSettingsModule } from '@helix/platform/shared/components';\n\n@NgModule({\n  declarations: [ServicesProviderRegionAdminComponent],\n  imports: [\n    CommonModule,\n    ReactiveFormsModule,\n    AdaptRxSelectModule,\n    TranslateModule,\n    AdminSettingsModule,\n    AdaptButtonModule\n  ],\n  entryComponents: [ServicesProviderRegionAdminComponent]\n})\nexport class ServicesProviderRegionRegistrationModule {\n  constructor(\n    private componentFactoryResolver: ComponentFactoryResolver,\n    private rxViewComponentRegistryService: RxViewComponentRegistryService\n  ) {\n    rxViewComponentRegistryService.register({\n      type: 'rx-admin-services-provider-region',\n      componentFactory: this.componentFactoryResolver.resolveComponentFactory(ServicesProviderRegionAdminComponent),\n      name: 'Services provider region',\n      isPageComponent: true,\n      availableInBundles: [RX_APPLICATION.settingsBundleId]\n    });\n  }\n}\n","export const RX_SUMMARIZATION_SERVICE = {\n  connections: {\n    summarizationServiceEndpointConfiguration: 'summarizationServiceEndpointConfiguration'\n  },\n  summarizationRepository: 'NATIVE'\n};\n","import { Component, OnInit } from '@angular/core';\nimport { FormControl, FormGroup } from '@angular/forms';\nimport { BaseViewComponent } from '@helix/platform/view/runtime';\nimport { TranslateService } from '@ngx-translate/core';\nimport { catchError, takeUntil } from 'rxjs/operators';\nimport { HttpErrorResponse } from '@angular/common/http';\nimport { ConnectionTestStatus } from '@helix/platform/ui-kit';\nimport { throwError } from 'rxjs';\nimport {\n  RxCommandFactoryService,\n  RxCurrentUserService,\n  RxNotificationService,\n  RxSystemConfigurationService\n} from '@helix/platform/shared/api';\nimport { RX_SUMMARIZATION_SERVICE } from './summarization-service.constant';\n\n@Component({\n  selector: 'rx-admin-summarization-service',\n  templateUrl: './summarization-service.component.html',\n  styleUrls: ['./summarization-service.component.scss']\n})\nexport class SummarizationServiceAdminComponent extends BaseViewComponent implements OnInit {\n  summarizationServiceForm: FormGroup;\n  connectionTestStatus: ConnectionTestStatus = ConnectionTestStatus.Invalid;\n  private isSaveInProgress = false;\n  isAdministrator: boolean = this.rxCurrentUserService.isAdministrator();\n\n  constructor(\n    private translateService: TranslateService,\n    private rxCommandFactoryService: RxCommandFactoryService,\n    private rxSystemConfigurationService: RxSystemConfigurationService,\n    private rxNotificationService: RxNotificationService,\n    private rxCurrentUserService: RxCurrentUserService\n  ) {\n    super();\n  }\n\n  ngOnInit(): void {\n    this.notifyPropertyChanged('api', {\n      isDirty: () => this.summarizationServiceForm.dirty\n    });\n\n    this.summarizationServiceForm = new FormGroup({\n      endpoint: new FormControl(''),\n      username: new FormControl(''),\n      password: new FormControl('')\n    });\n\n    this.rxSystemConfigurationService\n      .getConfiguration(RX_SUMMARIZATION_SERVICE.connections.summarizationServiceEndpointConfiguration)\n      .subscribe((result) => {\n        const summarizationConfiguration = JSON.parse(result.value as string)[\n          RX_SUMMARIZATION_SERVICE.summarizationRepository\n        ];\n\n        this.summarizationServiceForm.get('endpoint').setValue(summarizationConfiguration.endpoint);\n        this.summarizationServiceForm.get('username').setValue(summarizationConfiguration.username);\n        this.summarizationServiceForm.get('password').setValue(summarizationConfiguration.username);\n      });\n\n    this.summarizationServiceForm.valueChanges\n      .pipe(takeUntil(this.destroyed$))\n      .subscribe((value) => this.resetConnectionTest());\n  }\n\n  private resetConnectionTest(): void {\n    this.connectionTestStatus =\n      this.summarizationServiceForm.valid && this.summarizationServiceForm.dirty\n        ? ConnectionTestStatus.Unknown\n        : ConnectionTestStatus.Invalid;\n  }\n\n  onTestConnection(): void {\n    this.rxCommandFactoryService\n      .forResourceType('com.bmc.arsys.rx.application.cognitive.command.PingSummarizationServiceCommand')\n      .execute(this.summarizationServiceForm.value)\n      .pipe(\n        catchError((error: HttpErrorResponse) => {\n          this.connectionTestStatus = ConnectionTestStatus.Failed;\n\n          return throwError(error);\n        })\n      )\n      .subscribe(() => {\n        this.connectionTestStatus = ConnectionTestStatus.Passed;\n      });\n  }\n\n  save(): void {\n    this.isSaveInProgress = true;\n\n    this.rxSystemConfigurationService\n      .setConfiguration(RX_SUMMARIZATION_SERVICE.connections.summarizationServiceEndpointConfiguration, {\n        [RX_SUMMARIZATION_SERVICE.summarizationRepository]: this.summarizationServiceForm.value\n      })\n      .subscribe(\n        (response) => {\n          this.isSaveInProgress = false;\n          this.summarizationServiceForm.markAsPristine();\n          this.resetConnectionTest();\n\n          this.rxNotificationService.addSuccessMessage(\n            this.translateService.instant('com.bmc.arsys.rx.client.admin.summarization-service.saved.message')\n          );\n        },\n        (error) => {\n          this.isSaveInProgress = false;\n        }\n      );\n  }\n\n  isSaveButtonDisabled(): boolean {\n    return (\n      this.summarizationServiceForm.pristine ||\n      this.summarizationServiceForm.invalid ||\n      this.connectionTestStatus !== ConnectionTestStatus.Passed ||\n      this.isSaveInProgress\n    );\n  }\n}\n","<rx-admin-settings header=\"{{ 'com.bmc.arsys.rx.client.admin.summarization-service.header.title' | translate }}\">\n  <form [formGroup]=\"summarizationServiceForm\">\n    <adapt-rx-textfield\n      name=\"endpoint\"\n      label=\"{{ 'com.bmc.arsys.rx.client.admin.summarization-service.api-endpoint-url.title' | translate }}\"\n      rx-id=\"api-endpoint-url\"\n      class=\"form-group d-block\"\n      formControlName=\"endpoint\"\n      required\n    >\n    </adapt-rx-textfield>\n    <adapt-rx-textfield\n      name=\"username\"\n      label=\"{{ 'com.bmc.arsys.rx.client.common.user-name.label' | translate }}\"\n      rx-id=\"user-name\"\n      class=\"form-group d-block\"\n      formControlName=\"username\"\n      required\n    >\n    </adapt-rx-textfield>\n    <adapt-rx-textfield\n      name=\"password\"\n      label=\"{{ 'com.bmc.arsys.rx.client.common.password.label' | translate }}\"\n      rx-id=\"password\"\n      [isPassword]=\"true\"\n      class=\"form-group d-block\"\n      formControlName=\"password\"\n      required\n    >\n    </adapt-rx-textfield>\n    <div class=\"d-flex\" *ngIf=\"isAdministrator\">\n      <rx-connection-tester\n        [status]=\"connectionTestStatus\"\n        buttonType=\"secondary\"\n        rx-id=\"test-connection-button\"\n        (testConnection)=\"onTestConnection()\"\n      >\n      </rx-connection-tester>\n      <button\n        adapt-button\n        type=\"button\"\n        rx-id=\"save-button\"\n        btn-type=\"primary\"\n        class=\"ml-4\"\n        [disabled]=\"isSaveButtonDisabled()\"\n        (click)=\"save()\"\n      >\n        {{ 'com.bmc.arsys.rx.client.common.save.label' | translate }}\n      </button>\n    </div>\n  </form>\n</rx-admin-settings>\n","import { ComponentFactoryResolver, NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { RxViewComponentRegistryService } from '@helix/platform/view/api';\nimport { RX_APPLICATION } from '@helix/platform/shared/api';\nimport { SummarizationServiceAdminComponent } from './summarization-service.component';\nimport { AdminSettingsModule } from '@helix/platform/shared/components';\nimport { TranslateModule } from '@ngx-translate/core';\nimport { AdaptButtonModule, AdaptRxTextfieldModule } from '@bmc-ux/adapt-angular';\nimport { ReactiveFormsModule } from '@angular/forms';\nimport { RxConnectionTesterModule } from '@helix/platform/ui-kit';\n\n@NgModule({\n  declarations: [SummarizationServiceAdminComponent],\n  imports: [\n    CommonModule,\n    AdminSettingsModule,\n    TranslateModule,\n    AdaptRxTextfieldModule,\n    ReactiveFormsModule,\n    RxConnectionTesterModule,\n    AdaptButtonModule\n  ],\n  entryComponents: [SummarizationServiceAdminComponent]\n})\nexport class SummarizationServiceRegistrationModule {\n  constructor(\n    private componentFactoryResolver: ComponentFactoryResolver,\n    private rxViewComponentRegistryService: RxViewComponentRegistryService\n  ) {\n    rxViewComponentRegistryService.register({\n      type: 'rx-admin-summarization-service',\n      componentFactory: this.componentFactoryResolver.resolveComponentFactory(SummarizationServiceAdminComponent),\n      name: 'Summarization service',\n      isPageComponent: true,\n      availableInBundles: [RX_APPLICATION.settingsBundleId]\n    });\n  }\n}\n","import { Injectable } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\nimport { RxCommandFactoryService } from '@helix/platform/shared/api';\nimport { Observable } from 'rxjs';\nimport { ISummarizationRecord } from './summarization-testing.types';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class RxSummarizationTestingService {\n  private textSummarizationCommand = 'com.bmc.arsys.rx.application.cognitive.command.SummarizeTextCommand';\n  private recordSummarizationCommand = 'com.bmc.arsys.rx.application.cognitive.command.SummarizeFromRecInstCommand';\n\n  constructor(private httpClient: HttpClient, private rxCommandFactoryService: RxCommandFactoryService) {}\n\n  getTextSummarization(payload: ISummarizationRecord): Observable<string[]> {\n    return this.rxCommandFactoryService.forResourceType(this.textSummarizationCommand).execute(payload);\n  }\n\n  getRecordInstanceSummarization(payload): Observable<void> {\n    return this.rxCommandFactoryService.forResourceType(this.recordSummarizationCommand).execute(payload);\n  }\n}\n","import { Component, OnInit, TemplateRef, ViewChild } from '@angular/core';\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\nimport { cloneDeep, isEmpty, omit } from 'lodash';\nimport { forkJoin, Observable, of, throwError } from 'rxjs';\nimport { catchError, map } from 'rxjs/operators';\nimport { RxSummarizationTestingService } from './summarization-testing.service';\nimport { IDataPageResult, RxNotificationService, RxSystemConfigurationService } from '@helix/platform/shared/api';\nimport { ISummarizationRecord } from './summarization-testing.types';\nimport { IDefinitionPickerComponentOptions, RxDefinitionPickerType } from '@helix/platform/shared/components';\nimport {\n  IRecordDefinition,\n  RX_RECORD_DEFINITION,\n  RxRecordDefinitionCacheService,\n  RxRecordInstanceDataPageService\n} from '@helix/platform/record/api';\nimport { AdaptDockedPanelService, Alert, KeyValueObject } from '@bmc-ux/adapt-angular';\nimport {\n  IRecordGridColumn,\n  IRecordGridConfig,\n  IRecordGridDataPageParams,\n  RecordGridComponent,\n  RowSelectionMode\n} from '@helix/platform/view/components';\nimport { RxJsonParserService } from '@helix/platform/utils';\nimport { TranslateService } from '@ngx-translate/core';\n\n@Component({\n  selector: 'rx-admin-summarization-testing',\n  templateUrl: './summarization-testing.component.html',\n  styleUrls: ['./summarization-testing.component.scss']\n})\nexport class SummarizationTestingAdminComponent implements OnInit /*, AfterViewInit*/ {\n  interactiveSummarizationTestingForm: FormGroup;\n  recordSummarizationTestingForm: FormGroup;\n  isSummarizationServiceDisabled: boolean;\n  textInputFieldOptions: KeyValueObject[] = [];\n  summaryOutputFieldOptions: KeyValueObject[] = [];\n  gridConfig: Observable<IRecordGridConfig>;\n  shouldShowGrid = false;\n  dataSourceOptions: string[] = ['Email', 'Chat', 'Other'];\n  // dockedPanelId: string;\n  summarizedRecords: IDataPageResult;\n  index = 0;\n  defaultSummarizationPercentage = 50;\n  isSummarizationInProgress = false;\n  isRecordSummarizationInProgress = false;\n\n  disableContent: Alert = {\n    variant: 'danger',\n    title: this.translateService.instant(\n      'com.bmc.arsys.rx.client.admin.summarization-testing.summarization-service-disabled.message'\n    ),\n    content: '',\n    dismissible: false\n  };\n\n  recordDefinition: IRecordDefinition = {\n    fieldDefinitions: []\n  };\n\n  recordDefinitionPickerOptions: IDefinitionPickerComponentOptions = {\n    label: this.translateService.instant('com.bmc.arsys.rx.client.admin.summarization-testing.record-definition.label'),\n    definitionType: RxDefinitionPickerType.RegularRecord,\n    required: true\n  };\n\n  @ViewChild('recordGrid')\n  recordGridComponent: RecordGridComponent;\n\n  @ViewChild('viewSummarizationDetailsTemplate', { static: true })\n  viewSummarizationDetailsTemplate: TemplateRef<any>;\n\n  constructor(\n    private formBuilder: FormBuilder,\n    private rxSummarizationTestingService: RxSummarizationTestingService,\n    private rxNotificationService: RxNotificationService,\n    private rxRecordDefinitionCacheService: RxRecordDefinitionCacheService,\n    private rxRecordInstanceDataPageService: RxRecordInstanceDataPageService,\n    private adaptDockedPanelService: AdaptDockedPanelService,\n    private rxSystemConfigurationService: RxSystemConfigurationService,\n    private rxJsonParserService: RxJsonParserService,\n    private translateService: TranslateService\n  ) {}\n\n  /*ngAfterViewInit(): void {\n    this.dockedPanelId = this.adaptDockedPanelService.register({\n      title: this.translateService.instant(\n        'com.bmc.arsys.rx.client.admin.summarization-testing.summarization-details.label'\n      ),\n      content: this.viewSummarizationDetailsTemplate,\n      size: 'lg'\n    });\n  }*/\n\n  ngOnInit(): void {\n    this.interactiveSummarizationTestingForm = this.createInteractiveSummarizationTestingForm();\n    this.recordSummarizationTestingForm = this.createRecordSummarizationTestingForm();\n    this.shouldShowGrid = true;\n\n    this.rxSystemConfigurationService\n      .getConfiguration('summarizationServiceTenantConfiguration')\n      .subscribe((response) => {\n        const summarizationConfiguration = this.rxJsonParserService.tryParseJson(response.value as string);\n\n        this.defaultSummarizationPercentage =\n          summarizationConfiguration['summarizationPercentage'] || this.defaultSummarizationPercentage;\n\n        if (summarizationConfiguration) {\n          this.isSummarizationServiceDisabled = !summarizationConfiguration['enableSummarization'];\n\n          this.interactiveSummarizationTestingForm\n            .get('summarizationPercentage')\n            .setValue(summarizationConfiguration['summarizationPercentage']);\n\n          this.recordSummarizationTestingForm\n            .get('summarizationPercentage')\n            .setValue(summarizationConfiguration['summarizationPercentage']);\n        }\n      });\n\n    this.updateGridConfig(true);\n\n    this.recordSummarizationTestingForm\n      .get('recordDefinition')\n      .valueChanges.subscribe((value) => this.onRecordDefinitionChange(value));\n\n    this.recordSummarizationTestingForm\n      .get('textInputField')\n      .valueChanges.subscribe((value) => this.onTextInputFieldChange(value));\n  }\n\n  private createInteractiveSummarizationTestingForm(): FormGroup {\n    return this.formBuilder.group({\n      text: ['', Validators.required],\n      source: [[this.dataSourceOptions[0]], Validators.nullValidator],\n      summarizationPercentage: [50, Validators.required],\n      extractedSummaryText: ''\n    });\n  }\n\n  private createRecordSummarizationTestingForm(): FormGroup {\n    return this.formBuilder.group({\n      recordDefinition: ['', Validators.required],\n      textInputField: [[], Validators.required],\n      summaryOutputField: [[], Validators.required],\n      source: [[this.dataSourceOptions[0]]],\n      summarizationPercentage: [50]\n    });\n  }\n\n  private onRecordDefinitionChange(newRecordDefinitionName: string): void {\n    const oldRecordDefinitionName = this.recordSummarizationTestingForm.value.recordDefinition;\n\n    if (newRecordDefinitionName !== oldRecordDefinitionName) {\n      this.resetRecordSummarizationTestingForm();\n\n      if (newRecordDefinitionName) {\n        this.rxRecordDefinitionCacheService\n          .getRecordDefinition(newRecordDefinitionName)\n          .subscribe((recordDefinition) => {\n            this.initializeFormControls(recordDefinition);\n          });\n      }\n    }\n  }\n\n  private initializeFormControls(recordDefinition: IRecordDefinition): void {\n    this.textInputFieldOptions = recordDefinition.fieldDefinitions\n      ? recordDefinition.fieldDefinitions\n          .filter(function (fieldDefinition) {\n            return (\n              (fieldDefinition.fieldOption !== RX_RECORD_DEFINITION.fieldOptions.system &&\n                fieldDefinition.resourceType === RX_RECORD_DEFINITION.resourceTypes.character) ||\n              fieldDefinition.resourceType === RX_RECORD_DEFINITION.resourceTypes.attachment\n            );\n          })\n          .map((fieldDefinition) => {\n            return {\n              id: fieldDefinition.id,\n              name: fieldDefinition.name,\n              resourceType: fieldDefinition.resourceType\n            };\n          })\n      : [];\n\n    this.summaryOutputFieldOptions = this.textInputFieldOptions.filter((fieldDefinition) => {\n      return fieldDefinition.resourceType === RX_RECORD_DEFINITION.resourceTypes.character;\n    });\n  }\n\n  optionFormatter(option: KeyValueObject): string {\n    return option.name;\n  }\n\n  private onTextInputFieldChange(value: KeyValueObject): void {\n    if (value.length) {\n      this.recordSummarizationTestingForm.get('summaryOutputField').setValue([]);\n\n      this.summaryOutputFieldOptions = this.textInputFieldOptions.filter((fieldDefinition) => {\n        return (\n          fieldDefinition.resourceType === RX_RECORD_DEFINITION.resourceTypes.character &&\n          fieldDefinition.id !== value[0].id\n        );\n      });\n\n      this.updateGridConfig(false);\n    }\n  }\n\n  resetRecordSummarizationTestingForm(): void {\n    this.recordSummarizationTestingForm.get('textInputField').reset([]);\n    this.recordSummarizationTestingForm.get('summaryOutputField').reset([]);\n    this.recordSummarizationTestingForm.get('source').reset([this.dataSourceOptions[0]]);\n    this.recordSummarizationTestingForm.get('summarizationPercentage').reset(this.defaultSummarizationPercentage);\n    this.updateGridConfig(true);\n  }\n\n  summarizeUsingText(): void {\n    this.isSummarizationInProgress = true;\n    this.interactiveSummarizationTestingForm.markAsPristine();\n\n    this.rxSummarizationTestingService\n      .getTextSummarization(this.transformFormControlData())\n      .pipe(\n        catchError((error) => {\n          this.isSummarizationInProgress = false;\n\n          return throwError(error);\n        })\n      )\n      .subscribe((response) => {\n        this.interactiveSummarizationTestingForm.get('extractedSummaryText').setValue(response[0]);\n\n        this.rxNotificationService.addSuccessMessage('Summarization completed successfully.');\n        this.isSummarizationInProgress = false;\n      });\n  }\n\n  private transformFormControlData(): ISummarizationRecord {\n    const summarizationRecord: ISummarizationRecord = {\n      texts: [],\n      source: '',\n      summarizationPercentage: 0\n    };\n\n    summarizationRecord.texts.push(this.interactiveSummarizationTestingForm.get('text').value);\n    summarizationRecord.source = this.interactiveSummarizationTestingForm.get('source').value[0];\n\n    summarizationRecord.summarizationPercentage =\n      this.interactiveSummarizationTestingForm.get('summarizationPercentage').value;\n\n    return summarizationRecord;\n  }\n\n  resetInteractiveSummarizationTestingForm(): void {\n    this.interactiveSummarizationTestingForm.get('text').reset();\n    this.interactiveSummarizationTestingForm.get('source').reset([this.dataSourceOptions[0]]);\n    this.interactiveSummarizationTestingForm.get('summarizationPercentage').reset(this.defaultSummarizationPercentage);\n    this.interactiveSummarizationTestingForm.get('extractedSummaryText').reset('');\n  }\n\n  isResetButtonDisabled(): boolean {\n    return this.interactiveSummarizationTestingForm.pristine || this.interactiveSummarizationTestingForm.invalid;\n  }\n\n  private getColumns(): IRecordGridColumn[] {\n    return [\n      {\n        index: 0,\n        fieldId: String(RX_RECORD_DEFINITION.coreFieldIds.id),\n        title: 'Text input',\n        filterable: false\n      }\n    ];\n  }\n\n  summarizeUsingRecordInstance(): void {\n    this.isRecordSummarizationInProgress = true;\n    const recordSummarizationTestingRecord = cloneDeep(this.recordSummarizationTestingForm.value);\n\n    const payload = {\n      recordDefinitionName: recordSummarizationTestingRecord.recordDefinition,\n      inputFieldId: this.recordSummarizationTestingForm.get('textInputField').value[0].id,\n      outputFieldId: this.recordSummarizationTestingForm.get('summaryOutputField').value[0].id,\n      source: this.recordSummarizationTestingForm.get('source').value[0],\n      summarizationPercentage: this.recordSummarizationTestingForm.get('summarizationPercentage').value\n    };\n\n    const observables$ = this.recordGridComponent.api.getSelectedRows().map((row) => {\n      payload['recordID'] = row[RX_RECORD_DEFINITION.coreFieldIds.id];\n\n      return this.rxSummarizationTestingService.getRecordInstanceSummarization(payload);\n    });\n\n    forkJoin(observables$)\n      .pipe(\n        catchError((error) => {\n          this.isRecordSummarizationInProgress = false;\n\n          return throwError(error);\n        })\n      )\n      .subscribe(() => {\n        this.rxRecordInstanceDataPageService\n          .post({\n            params: {\n              recorddefinition: this.recordSummarizationTestingForm.get('recordDefinition').value,\n              queryExpression: this.prepareQueryExpression()\n            }\n          })\n          .subscribe((results) => {\n            this.isRecordSummarizationInProgress = false;\n            this.summarizedRecords = results;\n            this.index = 0;\n            // this.adaptDockedPanelService.open(this.dockedPanelId);\n            this.adaptDockedPanelService.open({\n              title: this.translateService.instant(\n                'com.bmc.arsys.rx.client.admin.summarization-testing.summarization-details.label'\n              ),\n              content: this.viewSummarizationDetailsTemplate,\n              size: 'lg'\n            });\n          });\n      });\n  }\n\n  private prepareQueryExpression(): string {\n    let expression = '';\n\n    this.recordGridComponent.api.getSelectedRows().map((row) => {\n      if (!isEmpty(expression)) {\n        expression += ' OR ';\n      }\n\n      expression += `('${RX_RECORD_DEFINITION.coreFieldIds.id}' = \"${row[RX_RECORD_DEFINITION.coreFieldIds.id]}\")`;\n    });\n\n    return expression;\n  }\n\n  isSummarizeButtonDisabled(): boolean {\n    return (\n      this.isRecordSummarizationInProgress ||\n      this.recordSummarizationTestingForm.invalid ||\n      (this.recordGridComponent.api.getSelectedRows() && !this.recordGridComponent.api.getSelectedRows().length) ||\n      this.recordGridComponent.api.getSelectedRows().length > 5\n    );\n  }\n\n  previous(): void {\n    this.index--;\n  }\n\n  next(): void {\n    this.index++;\n  }\n\n  private updateGridConfig(isEmptyGridRequired: boolean): void {\n    this.shouldShowGrid = false;\n    this.gridConfig = isEmptyGridRequired ? this.createEmptyGridConfiguration() : this.prepareGridConfiguration();\n\n    setTimeout(() => {\n      this.shouldShowGrid = true;\n    });\n  }\n\n  private getRecordDefinition(): IRecordDefinition {\n    this.recordDefinition.fieldDefinitions = [\n      {\n        id: RX_RECORD_DEFINITION.coreFieldIds.id,\n        resourceType: RX_RECORD_DEFINITION.resourceTypes.character\n      }\n    ];\n\n    return this.recordDefinition;\n  }\n\n  private getData(queryParams: IRecordGridDataPageParams): Observable<IDataPageResult> {\n    if (this.recordSummarizationTestingForm.get('recordDefinition').value) {\n      return this.rxRecordInstanceDataPageService\n        .post({\n          params: {\n            ...omit(queryParams, ['searchText']),\n            recorddefinition: this.recordSummarizationTestingForm.get('recordDefinition').value\n          }\n        })\n        .pipe(\n          map((result) => {\n            result.data = result['data'].filter(\n              (recordInstance) =>\n                recordInstance[this.recordSummarizationTestingForm.get('textInputField').value[0].id] != null\n            );\n\n            return result;\n          })\n        );\n    } else {\n      return this.rxRecordInstanceDataPageService.getEmptyDataPage();\n    }\n  }\n\n  private createEmptyGridConfiguration(): Observable<IRecordGridConfig> {\n    return (this.gridConfig = of({\n      actionButtons: [],\n      getData: (queryParams: IRecordGridDataPageParams) => this.rxRecordInstanceDataPageService.getEmptyDataPage(),\n      getRecordDefinition: () => of(this.getRecordDefinition()),\n      columns: this.getColumns(),\n      enableFiltering: true,\n      enableRowSelection: RowSelectionMode.Multiple\n    }));\n  }\n\n  private prepareGridConfiguration(): Observable<IRecordGridConfig> {\n    const columns = this.getColumns();\n    const recordDefinition = this.getRecordDefinition();\n\n    if (this.recordSummarizationTestingForm.get('textInputField').value.length) {\n      const textInput = this.recordSummarizationTestingForm.get('textInputField').value[0];\n\n      recordDefinition.fieldDefinitions[0] = {\n        id: textInput.id,\n        resourceType: textInput.resourceType,\n        name: textInput.name\n      };\n\n      columns[0] = {\n        index: 0,\n        fieldId: String(textInput.id),\n        title: `Text input:  ${textInput.name}`\n      };\n    }\n\n    return of({\n      actionButtons: [],\n      getData: (queryParams: IRecordGridDataPageParams) => this.getData(queryParams),\n      getRecordDefinition: () => of(recordDefinition),\n      columns: columns,\n      enableFiltering: true,\n      enableRowSelection: RowSelectionMode.Multiple\n    });\n  }\n}\n","<rx-admin-settings header=\"{{ 'com.bmc.arsys.rx.client.admin.summarization-testing.header.title' | translate }}\">\n  <div class=\"row\" *ngIf=\"isSummarizationServiceDisabled; else summarizationTesting\">\n    <div class=\"col-md-12 form-group\">\n      <div class=\"disabled-warning\">\n        <adapt-alert [config]=\"disableContent\"></adapt-alert>\n      </div>\n    </div>\n  </div>\n\n  <ng-template #summarizationTesting>\n    <div class=\"row\">\n      <div class=\"col-md-12 form-group\">\n        <adapt-accordion [multiselect]=\"true\">\n          <adapt-accordion-tab\n            [title]=\"'com.bmc.arsys.rx.client.admin.summarization-testing.interactive-summarization.title' | translate\"\n            [isOpen]=\"true\"\n            rx-id=\"interactive-summarization\"\n          >\n            <form [formGroup]=\"interactiveSummarizationTestingForm\">\n              <div class=\"row\">\n                <div class=\"col-md-6\">\n                  <adapt-rx-select\n                    formControlName=\"source\"\n                    [options]=\"dataSourceOptions\"\n                    name=\"source\"\n                    rx-id=\"data-source\"\n                    label=\"{{ 'com.bmc.arsys.rx.client.admin.summarization-testing.data-source.label' | translate }}\"\n                    class=\"form-group d-block\"\n                  >\n                  </adapt-rx-select>\n                </div>\n              </div>\n              <div class=\"row\">\n                <div class=\"col-md-6\">\n                  <adapt-rx-textarea\n                    formControlName=\"text\"\n                    rx-id=\"text-input\"\n                    class=\"form-group d-block\"\n                    label=\"{{ 'com.bmc.arsys.rx.client.admin.summarization-testing.text-input.label' | translate }}\"\n                    rows=\"10\"\n                  >\n                  </adapt-rx-textarea>\n\n                  <div class=\"d-flex flex-wrap\">\n                    <div class=\"flex-grow-1 mr-2 summarization-percentage\">\n                      <adapt-rx-counter\n                        [formControl]=\"interactiveSummarizationTestingForm.controls.summarizationPercentage\"\n                        label=\"{{\n                          'com.bmc.arsys.rx.client.admin.summarization-testing.summarization-percentage.label'\n                            | translate\n                        }}\"\n                        rx-id=\"summarization-percentage\"\n                        required\n                        adaptRange\n                        [min]=\"1\"\n                        [max]=\"50\"\n                        [tooltip]=\"{\n                          iconName: 'question_circle_o',\n                          content:\n                            'com.bmc.arsys.rx.client.admin.summarization-testing.summarization-percentage.tooltip'\n                            | translate,\n                          placement: 'top',\n                          popoverMode: true\n                        }\"\n                      ></adapt-rx-counter>\n                    </div>\n                    <div>\n                      <button\n                        adapt-button\n                        btn-type=\"primary\"\n                        type=\"button\"\n                        rx-id=\"summarize-button\"\n                        class=\"mr-2 button-margin-top\"\n                        (click)=\"summarizeUsingText()\"\n                        [adaptInlineLoader]=\"isSummarizationInProgress\"\n                        [disabled]=\"\n                          interactiveSummarizationTestingForm.pristine || interactiveSummarizationTestingForm.invalid\n                        \"\n                      >\n                        {{ 'com.bmc.arsys.rx.client.admin.summarization-testing.summarize.button.label' | translate }}\n                      </button>\n                    </div>\n                    <div>\n                      <button\n                        adapt-button\n                        btn-type=\"secondary\"\n                        type=\"button\"\n                        rx-id=\"reset-button\"\n                        class=\"d-icon-reply button-margin-top\"\n                        (click)=\"resetInteractiveSummarizationTestingForm()\"\n                      >\n                        {{ 'com.bmc.arsys.rx.client.common.reset.label' | translate }}\n                      </button>\n                    </div>\n                  </div>\n                </div>\n\n                <div class=\"col-md-6\">\n                  <adapt-rx-textarea\n                    formControlName=\"extractedSummaryText\"\n                    rx-id=\"summary-output\"\n                    label=\"{{ 'com.bmc.arsys.rx.client.admin.summarization-testing.summary-output.label' | translate }}\"\n                    disabled=\"true\"\n                    class=\"form-group d-block\"\n                    rows=\"10\"\n                  ></adapt-rx-textarea>\n\n                  <button\n                    adapt-button\n                    btn-type=\"secondary\"\n                    type=\"button\"\n                    rx-id=\"copy-button\"\n                    class=\"mr-2 button-margin-top d-icon-files_copy_o\"\n                    [cdkCopyToClipboard]=\"interactiveSummarizationTestingForm.get('extractedSummaryText').value\"\n                    [disabled]=\"!interactiveSummarizationTestingForm.get('extractedSummaryText').value\"\n                  >\n                    {{ 'com.bmc.arsys.rx.client.common.copy.label' | translate }}\n                  </button>\n                </div>\n              </div>\n            </form>\n          </adapt-accordion-tab>\n\n          <adapt-accordion-tab\n            [title]=\"'com.bmc.arsys.rx.client.admin.summarization-testing.record-summarization.title' | translate\"\n            [isOpen]=\"true\"\n            rx-id=\"record-summarization\"\n          >\n            <form [formGroup]=\"recordSummarizationTestingForm\">\n              <div class=\"row\">\n                <div class=\"col-md-5\">\n                  <adapt-rx-control-label\n                    label=\"{{\n                      'com.bmc.arsys.rx.client.admin.summarization-testing.summarization-options.label' | translate\n                    }}\"\n                    class=\"mb-2 d-block\"\n                  ></adapt-rx-control-label>\n                  <rx-definition-picker\n                    [options]=\"recordDefinitionPickerOptions\"\n                    formControlName=\"recordDefinition\"\n                    rx-id=\"record-definition\"\n                    required=\"true\"\n                    class=\"form-group d-block\"\n                  >\n                  </rx-definition-picker>\n\n                  <adapt-rx-select\n                    [options]=\"textInputFieldOptions\"\n                    label=\"{{\n                      'com.bmc.arsys.rx.client.admin.summarization-testing.text-input-field.label' | translate\n                    }}\"\n                    name=\"textInputField\"\n                    [optionFormatter]=\"optionFormatter\"\n                    formControlName=\"textInputField\"\n                    rx-id=\"text-input-field\"\n                    class=\"form-group d-block\"\n                    [tooltip]=\"{\n                      iconName: 'question_circle_o',\n                      content:\n                        'com.bmc.arsys.rx.client.admin.summarization-testing.text-input-field.tooltip' | translate,\n                      placement: 'left',\n                      popoverMode: true\n                    }\"\n                  ></adapt-rx-select>\n\n                  <adapt-rx-select\n                    [options]=\"summaryOutputFieldOptions\"\n                    label=\"{{\n                      'com.bmc.arsys.rx.client.admin.summarization-testing.summary-output-field.label' | translate\n                    }}\"\n                    name=\"summaryOutputField\"\n                    [optionFormatter]=\"optionFormatter\"\n                    formControlName=\"summaryOutputField\"\n                    rx-id=\"summary-output-field\"\n                    class=\"form-group d-block\"\n                  ></adapt-rx-select>\n\n                  <adapt-rx-select\n                    formControlName=\"source\"\n                    [options]=\"dataSourceOptions\"\n                    name=\"source\"\n                    rx-id=\"data-source\"\n                    label=\"{{ 'com.bmc.arsys.rx.client.admin.summarization-testing.data-source.label' | translate }}\"\n                    class=\"form-group d-block\"\n                  >\n                  </adapt-rx-select>\n\n                  <div class=\"d-flex flex-wrap\">\n                    <div class=\"flex-grow-1 mr-2 summarization-percentage\">\n                      <adapt-rx-counter\n                        [formControl]=\"recordSummarizationTestingForm.controls.summarizationPercentage\"\n                        label=\"{{\n                          'com.bmc.arsys.rx.client.admin.summarization-testing.summarization-percentage.label'\n                            | translate\n                        }}\"\n                        rx-id=\"summarization-percentage\"\n                        required\n                        adaptRange\n                        [min]=\"1\"\n                        [max]=\"50\"\n                        [tooltip]=\"{\n                          iconName: 'question_circle_o',\n                          content:\n                            'com.bmc.arsys.rx.client.admin.summarization-testing.summarization-percentage.tooltip'\n                            | translate,\n                          placement: 'top',\n                          popoverMode: true\n                        }\"\n                      ></adapt-rx-counter>\n                    </div>\n                    <div>\n                      <button\n                        adapt-button\n                        btn-type=\"primary\"\n                        type=\"button\"\n                        class=\"mr-2 button-margin-top\"\n                        rx-id=\"summarize-button\"\n                        (click)=\"summarizeUsingRecordInstance()\"\n                        [disabled]=\"isSummarizeButtonDisabled()\"\n                        [adaptInlineLoader]=\"isRecordSummarizationInProgress\"\n                      >\n                        {{ 'com.bmc.arsys.rx.client.admin.summarization-testing.summarize.button.label' | translate }}\n                      </button>\n                    </div>\n                    <div>\n                      <button\n                        adapt-button\n                        btn-type=\"secondary\"\n                        type=\"button\"\n                        rx-id=\"reset-button\"\n                        class=\"d-icon-reply button-margin-top\"\n                        (click)=\"resetRecordSummarizationTestingForm()\"\n                      >\n                        {{ 'com.bmc.arsys.rx.client.common.reset.label' | translate }}\n                      </button>\n                    </div>\n                  </div>\n                </div>\n                <div class=\"col-md-7 d-flex flex-column\">\n                  <adapt-alert\n                    [config]=\"{\n                      title: '',\n                      content:\n                        'com.bmc.arsys.rx.client.admin.summarization-testing.select-records-alert.message' | translate,\n                      type: 'inline',\n                      variant: 'info'\n                    }\"\n                    adaptPopover=\"{{\n                      'com.bmc.arsys.rx.client.admin.summarization-testing.select-records-alert.tooltip' | translate\n                    }}\"\n                  >\n                  </adapt-alert>\n                  <rx-record-grid\n                    rx-id=\"record-grid\"\n                    #recordGrid\n                    [config]=\"gridConfig\"\n                    *ngIf=\"shouldShowGrid\"\n                    class=\"record-summarization-grid form-group\"\n                  ></rx-record-grid>\n                </div>\n              </div>\n            </form>\n          </adapt-accordion-tab>\n        </adapt-accordion>\n      </div>\n    </div>\n  </ng-template>\n</rx-admin-settings>\n\n<ng-template #viewSummarizationDetailsTemplate let-close=\"close\">\n  <div class=\"dp-content\">\n    <div class=\"row pt-4 px-4 pb-1 mr-0\">\n      <div class=\"col-12 form-inline\">\n        <button\n          type=\"button\"\n          adapt-button\n          btn-type=\"secondary\"\n          rx-id=\"previous-button\"\n          class=\"mr-2 d-icon-left-angle_left\"\n          (click)=\"previous()\"\n          [disabled]=\"!index\"\n          size=\"small\"\n        >\n          {{ 'com.bmc.arsys.rx.client.common.previous-step.label' | translate }}\n        </button>\n        <button\n          type=\"button\"\n          adapt-button\n          btn-type=\"secondary\"\n          rx-id=\"next-button\"\n          class=\"mr-2 d-icon-right-angle_right\"\n          (click)=\"next()\"\n          [disabled]=\"index === recordGridComponent.api.getSelectedRows().length - 1\"\n          size=\"small\"\n        >\n          {{ 'com.bmc.arsys.rx.client.common.next-step.label' | translate }}\n        </button>\n\n        <div class=\"mr-2 pl-3\">\n          Summarization {{ index + 1 }} of {{ recordGridComponent.api.getSelectedRows().length }}\n        </div>\n      </div>\n    </div>\n    <div class=\"dp-body\">\n      <div class=\"row\">\n        <div class=\"col-md-12\">\n          <adapt-rx-control-label\n            label=\"{{ 'Text input: ' + recordSummarizationTestingForm.get('textInputField').value[0].name }}\"\n            class=\"form-group\"\n          ></adapt-rx-control-label>\n\n          <div class=\"border-secondary form-group\" rx-id=\"text-input\">\n            {{ summarizedRecords.data[index][recordSummarizationTestingForm.get('textInputField').value[0].id] }}\n          </div>\n        </div>\n      </div>\n\n      <div class=\"row\">\n        <div class=\"col-md-12\">\n          <adapt-rx-control-label\n            class=\"form-group\"\n            label=\"{{ 'Summary output: ' + recordSummarizationTestingForm.get('summaryOutputField').value[0].name }}\"\n          ></adapt-rx-control-label>\n\n          <div class=\"border-secondary form-group\" rx-id=\"summary-output\">\n            {{ summarizedRecords.data[index][recordSummarizationTestingForm.get('summaryOutputField').value[0].id] }}\n          </div>\n        </div>\n      </div>\n    </div>\n    <div class=\"dp-footer\">\n      <button type=\"button\" adapt-button (click)=\"close()\" btn-type=\"secondary\" rx-id=\"close-button\">\n        {{ 'com.bmc.arsys.rx.client.common.close.label' | translate }}\n      </button>\n    </div>\n  </div>\n</ng-template>\n","import { ComponentFactoryResolver, NgModule } from '@angular/core';\nimport { RxViewComponentRegistryService } from '@helix/platform/view/api';\nimport { RX_APPLICATION } from '@helix/platform/shared/api';\nimport { SummarizationTestingAdminComponent } from './summarization-testing.component';\nimport { ReactiveFormsModule } from '@angular/forms';\n\nimport {\n  AdaptAccordionModule,\n  AdaptAlertModule,\n  AdaptButtonModule,\n  AdaptPopoverModule,\n  AdaptRxCounterModule,\n  AdaptRxLabelModule,\n  AdaptRxSelectModule,\n  AdaptRxTextareaModule,\n  AdaptRxTextfieldModule,\n  AdaptRxValidatorsModule,\n  AdaptBusyModule\n} from '@bmc-ux/adapt-angular';\n\nimport { CommonModule } from '@angular/common';\nimport { AdminSettingsModule, RxDefinitionPickerModule } from '@helix/platform/shared/components';\nimport { RecordGridModule } from '@helix/platform/view/components';\nimport { ClipboardModule } from '@angular/cdk/clipboard';\nimport { TranslateModule } from '@ngx-translate/core';\n\n@NgModule({\n  declarations: [SummarizationTestingAdminComponent],\n  imports: [\n    AdminSettingsModule,\n    AdaptAccordionModule,\n    AdaptButtonModule,\n    AdaptRxTextareaModule,\n    AdaptRxSelectModule,\n    AdaptRxCounterModule,\n    AdaptRxTextfieldModule,\n    AdaptRxLabelModule,\n    AdaptAlertModule,\n    CommonModule,\n    ReactiveFormsModule,\n    RxDefinitionPickerModule,\n    RecordGridModule,\n    ClipboardModule,\n    AdaptPopoverModule,\n    AdaptRxValidatorsModule,\n    TranslateModule,\n    AdaptBusyModule\n  ],\n  entryComponents: [SummarizationTestingAdminComponent]\n})\nexport class SummarizationTestingRegistrationModule {\n  constructor(\n    private componentFactoryResolver: ComponentFactoryResolver,\n    private rxViewComponentRegistryService: RxViewComponentRegistryService\n  ) {\n    rxViewComponentRegistryService.register({\n      type: 'rx-admin-summarization-testing',\n      componentFactory: this.componentFactoryResolver.resolveComponentFactory(SummarizationTestingAdminComponent),\n      name: 'Summarization testing',\n      isPageComponent: true,\n      availableInBundles: [RX_APPLICATION.settingsBundleId]\n    });\n  }\n}\n","export const RX_TONE_ANALYSIS_TESTING = {\n  languageOptions: [\n    { id: 'en', name: 'en' },\n    { id: 'fr', name: 'fr' }\n  ],\n  userEngagementResourceType: 'com.bmc.arsys.rx.application.cognitive.command.AnalyzeCustomerEngagementToneCommand',\n  documentEngagementResourceType: 'com.bmc.arsys.rx.application.cognitive.command.AnalyzeTextToneCommand',\n  systemSettingKeys: {\n    toneScoreThreshold: 'Tone-Score-Threshold'\n  }\n};\n","import { Component, OnInit, ViewChild } from '@angular/core';\nimport { NgForm } from '@angular/forms';\nimport { RxSelectOption } from '@bmc-ux/adapt-angular';\nimport { RxCommandFactoryService } from '@helix/platform/shared/api';\nimport { get, isNil, toNumber } from 'lodash';\nimport { RX_TONE_ANALYSIS_TESTING } from '../tone-analysis-testing.constant';\nimport { IDocumentTone } from '../tone-analysis-testing.interfaces';\nimport { RxSystemConfigurationService } from '@helix/platform/shared/api';\nimport { finalize } from 'rxjs/operators';\n\n@Component({\n  selector: 'rx-document-tone-analysis',\n  templateUrl: './document-tone-analysis.component.html',\n  styleUrls: ['./document-tone-analysis.component.scss']\n})\nexport class DocumentToneAnalysisComponent implements OnInit {\n  languageOptions: RxSelectOption[] = RX_TONE_ANALYSIS_TESTING.languageOptions;\n  language: RxSelectOption = [];\n  documentText: string[];\n  toneScoreThreshold: number;\n  defaultToneScoreThreshold = 0.5;\n  containsHtml: boolean;\n  includeSentenceLevelAnalysis: boolean;\n  extractedToneData: IDocumentTone;\n\n  @ViewChild('documentToneAnalysisForm', { static: true, read: NgForm })\n  documentToneAnalysisForm: NgForm;\n\n  constructor(\n    private rxCommandFactoryService: RxCommandFactoryService,\n    private rxSystemConfigurationService: RxSystemConfigurationService\n  ) {}\n\n  ngOnInit(): void {\n    this.rxSystemConfigurationService\n      .getConfiguration(RX_TONE_ANALYSIS_TESTING.systemSettingKeys.toneScoreThreshold)\n      .pipe(finalize(() => this.reset()))\n      .subscribe((data) => {\n        this.defaultToneScoreThreshold = data.value ? toNumber(data.value) : 0.5;\n      });\n  }\n\n  clearDocumentText() {\n    this.documentText = null;\n  }\n\n  optionFormatter(option: RxSelectOption): string {\n    return option.name;\n  }\n\n  setDefaultThreshold(): void {\n    this.toneScoreThreshold = this.defaultToneScoreThreshold;\n  }\n\n  analyzeTone(): void {\n    this.rxCommandFactoryService\n      .forResourceType(RX_TONE_ANALYSIS_TESTING.documentEngagementResourceType)\n      .execute({\n        resourceType: RX_TONE_ANALYSIS_TESTING.documentEngagementResourceType,\n        language: get(this.language[0], 'id'),\n        text: this.documentText,\n        containsHTML: this.containsHtml,\n        sentenceLevelAnalysis: this.includeSentenceLevelAnalysis,\n        toneScoreThreshold: this.toneScoreThreshold\n      })\n      .subscribe((response) => {\n        this.extractedToneData = response;\n      });\n  }\n\n  reset(): void {\n    this.language = [RX_TONE_ANALYSIS_TESTING.languageOptions[0]];\n    this.documentText = null;\n    this.toneScoreThreshold = this.defaultToneScoreThreshold;\n    this.containsHtml = false;\n    this.includeSentenceLevelAnalysis = false;\n    this.extractedToneData = null;\n    this.documentToneAnalysisForm.form.markAsPristine();\n  }\n\n  isAnalyzeToneButtonDisabled(): boolean {\n    return this.documentToneAnalysisForm.pristine || this.documentToneAnalysisForm.invalid;\n  }\n\n  isResetButtonDisabled(): boolean {\n    return this.documentToneAnalysisForm.pristine && isNil(this.documentText);\n  }\n}\n","<form #documentToneAnalysisForm=\"ngForm\">\n  <div class=\"row mb-4\">\n    <div class=\"col-md-3\">\n      <adapt-rx-select\n        rx-id=\"language\"\n        name=\"language\"\n        [(ngModel)]=\"language\"\n        label=\"{{ 'com.bmc.arsys.rx.client.admin.tone-analysis-testing.language.label' | translate }}\"\n        [options]=\"languageOptions\"\n        [optionFormatter]=\"optionFormatter\"\n      ></adapt-rx-select>\n    </div>\n\n    <div class=\"col-md-3 contains-html\">\n      <adapt-rx-checkbox\n        rx-id=\"document-text-contains-html\"\n        name=\"containsHtml\"\n        [(ngModel)]=\"containsHtml\"\n        label=\"{{\n          'com.bmc.arsys.rx.client.admin.tone-analysis-testing.document-text-contains-html.label' | translate\n        }}\"\n      ></adapt-rx-checkbox>\n    </div>\n\n    <div class=\"col-md-6\">\n      <adapt-rx-control-label\n        label=\"{{ 'com.bmc.arsys.rx.client.admin.tone-analysis-testing.document-tone.label' | translate }}\"\n      ></adapt-rx-control-label>\n      <div class=\"mt-1\">\n        <adapt-badge variant=\"info\" *ngIf=\"!extractedToneData\">\n          {{ 'com.bmc.arsys.rx.client.common.none.label' | translate }}\n        </adapt-badge>\n        <adapt-badge variant=\"info\" class=\"mr-1\" *ngFor=\"let score of extractedToneData?.documentTone?.scores\">\n          <b>{{ score.toneName }}</b> ({{ score.score }})\n        </adapt-badge>\n      </div>\n    </div>\n  </div>\n\n  <div class=\"row\">\n    <div class=\"col-md-6 form-group\">\n      <button\n        rx-id=\"clear-button\"\n        type=\"button\"\n        adapt-button\n        btn-type=\"tertiary\"\n        class=\"p-0 float-right\"\n        (click)=\"clearDocumentText()\"\n      >\n        {{ 'com.bmc.arsys.rx.client.common.clear.label' | translate }}\n      </button>\n\n      <adapt-rx-textarea\n        rx-id=\"document-text\"\n        name=\"documentText\"\n        [(ngModel)]=\"documentText\"\n        label=\"{{ 'com.bmc.arsys.rx.client.admin.tone-analysis-testing.document-text.label' | translate }}\"\n        placeholder=\"Type or paste document text here\"\n        [rows]=\"12\"\n        required\n      ></adapt-rx-textarea>\n\n      <div class=\"form-group pt-3\">\n        <button\n          type=\"button\"\n          adapt-button\n          btn-type=\"tertiary\"\n          rx-id=\"set-to-default-button\"\n          class=\"p-0 float-right\"\n          (click)=\"setDefaultThreshold()\"\n        >\n          {{ 'com.bmc.arsys.rx.client.admin.set-to-default.label' | translate }}\n        </button>\n\n        <adapt-rx-counter\n          rx-id=\"tone-score-threshold\"\n          name=\"toneScoreThresholdField\"\n          [(ngModel)]=\"toneScoreThreshold\"\n          label=\"{{ 'com.bmc.arsys.rx.client.admin.tone-analysis-testing.tone-score-threshold.label' | translate }}\"\n          [max]=\"1.0\"\n          [min]=\"0.5\"\n          [step]=\"0.1\"\n          [size]=\"'small'\"\n          adaptRequired\n          [tooltip]=\"{\n            iconName: 'question_circle_o',\n            content: 'com.bmc.arsys.rx.client.admin.tone-analysis-testing.tone-score-threshold.tooltip' | translate,\n            placement: 'right',\n            popoverMode: true\n          }\"\n        >\n        </adapt-rx-counter>\n      </div>\n\n      <div class=\"form-group\">\n        <adapt-rx-switch\n          rx-id=\"include-sentence-level-analysis\"\n          name=\"includeSentenceLevelAnalysis\"\n          [(ngModel)]=\"includeSentenceLevelAnalysis\"\n          label=\"{{\n            'com.bmc.arsys.rx.client.admin.tone-analysis-testing.include-sentence-level-analysis.label' | translate\n          }}\"\n        ></adapt-rx-switch>\n      </div>\n\n      <div class=\"row\">\n        <div class=\"col-12 form-group\">\n          <button\n            class=\"mr-2 d-icon-left-check_adapt\"\n            adapt-button\n            btn-type=\"primary\"\n            type=\"button\"\n            rx-id=\"analyze-tone-button\"\n            (click)=\"analyzeTone()\"\n            [disabled]=\"isAnalyzeToneButtonDisabled()\"\n          >\n            {{ 'com.bmc.arsys.rx.client.admin.tone-analysis-testing.analyze-tone.label' | translate }}\n          </button>\n\n          <button\n            class=\"mr-2 d-icon-left-undo\"\n            adapt-button\n            btn-type=\"secondary\"\n            type=\"button\"\n            rx-id=\"reset-button\"\n            (click)=\"reset()\"\n            [disabled]=\"isResetButtonDisabled()\"\n          >\n            {{ 'com.bmc.arsys.rx.client.common.reset.label' | translate }}\n          </button>\n        </div>\n      </div>\n    </div>\n\n    <div class=\"col-md-6 form-group\">\n      <div rx-id=\"sentences-tone\" name=\"sentenceTone\">\n        <adapt-rx-control-label label=\"Sentences tone\"></adapt-rx-control-label>\n        <div class=\"sentences-tones form-control\">\n          <div class=\"sentences-tone\" *ngFor=\"let sentenceTone of extractedToneData?.sentencesTone\">\n            <div class=\"sentence\">{{ sentenceTone.text }}</div>\n            <div>\n              <adapt-badge class=\"mr-1\" variant=\"info\" *ngFor=\"let score of sentenceTone?.scores\">\n                <b>{{ score.toneName }}</b> ({{ score.score }})</adapt-badge\n              >\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</form>\n","import { Component, OnInit, ViewChild } from '@angular/core';\nimport { NgForm } from '@angular/forms';\nimport { RxSelectOption } from '@bmc-ux/adapt-angular';\nimport { RxCommandFactoryService } from '@helix/platform/shared/api';\nimport { compact, isNil, map, toNumber } from 'lodash';\nimport { RX_TONE_ANALYSIS_TESTING } from '../tone-analysis-testing.constant';\nimport { IUtterancesTone } from '../tone-analysis-testing.interfaces';\nimport { RxSystemConfigurationService } from '@helix/platform/shared/api';\nimport { finalize } from 'rxjs/operators';\n\n@Component({\n  selector: 'rx-user-engagement-tone-analysis',\n  templateUrl: './user-engagement-tone-analysis.component.html',\n  styleUrls: ['./user-engagement-tone-analysis.component.scss']\n})\nexport class UserEngagementToneAnalysisComponent implements OnInit {\n  languageOptions: RxSelectOption[] = RX_TONE_ANALYSIS_TESTING.languageOptions;\n  language: RxSelectOption;\n  utterances: string;\n  toneScoreThreshold: number;\n  defaultToneScoreThreshold = 0.5;\n  utteranceTonesData: IUtterancesTone;\n\n  @ViewChild('userEngagementToneAnalysisForm', { static: true, read: NgForm })\n  userEngagementToneAnalysisForm: NgForm;\n\n  constructor(\n    private rxCommandFactoryService: RxCommandFactoryService,\n    private rxSystemConfigurationService: RxSystemConfigurationService\n  ) {}\n\n  ngOnInit(): void {\n    this.rxSystemConfigurationService\n      .getConfiguration(RX_TONE_ANALYSIS_TESTING.systemSettingKeys.toneScoreThreshold)\n      .pipe(finalize(() => this.reset()))\n      .subscribe((data) => {\n        this.defaultToneScoreThreshold = data.value ? toNumber(data.value) : 0.5;\n      });\n  }\n\n  clearUtterances(): void {\n    this.utterances = null;\n  }\n\n  setDefaultThreshold(): void {\n    this.toneScoreThreshold = this.defaultToneScoreThreshold;\n  }\n\n  optionFormatter(option: RxSelectOption): string {\n    return option.name;\n  }\n\n  analyzeTone(): void {\n    const utterances = map(compact(this.utterances.split('\\n')), (utterance) => {\n      return {\n        text: utterance\n      };\n    });\n\n    this.rxCommandFactoryService\n      .forResourceType(RX_TONE_ANALYSIS_TESTING.userEngagementResourceType)\n      .execute({\n        resourceType: RX_TONE_ANALYSIS_TESTING.userEngagementResourceType,\n        language: this.language.id,\n        utterances: utterances,\n        toneScoreThreshold: this.toneScoreThreshold\n      })\n      .subscribe((response) => {\n        this.utteranceTonesData = response;\n      });\n  }\n\n  reset(): void {\n    this.toneScoreThreshold = this.defaultToneScoreThreshold;\n    this.language = [RX_TONE_ANALYSIS_TESTING.languageOptions[0]];\n    this.utterances = null;\n    this.utteranceTonesData = null;\n    this.userEngagementToneAnalysisForm.form.markAsPristine();\n  }\n\n  isAnalyzeToneButtonDisabled(): boolean {\n    return this.userEngagementToneAnalysisForm.pristine || this.userEngagementToneAnalysisForm.invalid;\n  }\n\n  isResetButtonDisabled(): boolean {\n    return this.userEngagementToneAnalysisForm.pristine && isNil(this.utterances);\n  }\n}\n","<form #userEngagementToneAnalysisForm=\"ngForm\">\n  <div class=\"row form-group\">\n    <div class=\"col-md-3\">\n      <adapt-rx-select\n        rx-id=\"language\"\n        name=\"language\"\n        [(ngModel)]=\"language\"\n        [options]=\"languageOptions\"\n        label=\"{{ 'com.bmc.arsys.rx.client.admin.tone-analysis-testing.language.label' | translate }}\"\n        [optionFormatter]=\"optionFormatter\"\n      ></adapt-rx-select>\n    </div>\n  </div>\n\n  <div class=\"row\">\n    <div class=\"col-md-6\">\n      <button\n        rx-id=\"clear-button\"\n        type=\"button\"\n        adapt-button\n        btn-type=\"tertiary\"\n        class=\"p-0 float-right\"\n        (click)=\"clearUtterances()\"\n      >\n        {{ 'com.bmc.arsys.rx.client.common.clear.label' | translate }}\n      </button>\n\n      <adapt-rx-textarea\n        rx-id=\"utterances\"\n        name=\"utterances\"\n        [(ngModel)]=\"utterances\"\n        label=\"{{ 'com.bmc.arsys.rx.client.admin.tone-analysis-testing.utterances.label' | translate }}\"\n        placeholder=\"{{ 'com.bmc.arsys.rx.client.admin.tone-analysis-testing.utterances.placeholder' | translate }}\"\n        [rows]=\"16\"\n        required\n        [tooltip]=\"{\n          iconName: 'question_circle_o',\n          content: 'com.bmc.arsys.rx.client.admin.tone-analysis-testing.utterances.tooltip' | translate,\n          placement: 'right',\n          popoverMode: true\n        }\"\n      ></adapt-rx-textarea>\n\n      <div class=\"form-group pt-3\">\n        <button type=\"button\" adapt-button btn-type=\"tertiary\" class=\"p-0 float-right\" (click)=\"setDefaultThreshold()\">\n          {{ 'com.bmc.arsys.rx.client.admin.set-to-default.label' | translate }}\n        </button>\n\n        <adapt-rx-counter\n          rx-id=\"tone-score-threshold\"\n          name=\"toneScoreThreshold\"\n          [(ngModel)]=\"toneScoreThreshold\"\n          label=\"{{ 'com.bmc.arsys.rx.client.admin.tone-analysis-testing.tone-score-threshold.label' | translate }}\"\n          [max]=\"1.0\"\n          [min]=\"0.5\"\n          [step]=\"0.1\"\n          [size]=\"'small'\"\n          [tooltip]=\"{\n            iconName: 'question_circle_o',\n            content: 'com.bmc.arsys.rx.client.admin.tone-analysis-testing.tone-score-threshold.tooltip' | translate,\n            placement: 'right',\n            popoverMode: true\n          }\"\n        >\n        </adapt-rx-counter>\n      </div>\n\n      <div class=\"my-4\">\n        <button\n          class=\"mr-2 d-icon-left-check_adapt\"\n          adapt-button\n          btn-type=\"primary\"\n          type=\"button\"\n          rx-id=\"analyze-tone-button\"\n          (click)=\"analyzeTone()\"\n          [disabled]=\"isAnalyzeToneButtonDisabled()\"\n        >\n          {{ 'com.bmc.arsys.rx.client.admin.tone-analysis-testing.analyze-tone.label' | translate }}\n        </button>\n\n        <button\n          [disabled]=\"true\"\n          class=\"mr-2 d-icon-left-undo\"\n          adapt-button\n          btn-type=\"secondary\"\n          type=\"button\"\n          rx-id=\"reset-button\"\n          (click)=\"reset()\"\n          [disabled]=\"isResetButtonDisabled()\"\n        >\n          {{ 'com.bmc.arsys.rx.client.common.reset.label' | translate }}\n        </button>\n      </div>\n    </div>\n\n    <div class=\"col-md-6 mb-4\">\n      <div rx-id=\"utterance-tone\" name=\"utteranceTones\">\n        <adapt-rx-control-label\n          label=\"{{ 'com.bmc.arsys.rx.client.admin.tone-analysis-testing.utterances-tone.label' | translate }}\"\n        ></adapt-rx-control-label>\n        <div class=\"sentences-tones form-control\">\n          <div class=\"sentences-tone\" *ngFor=\"let sentenceTone of utteranceTonesData?.utterancesTone\">\n            <div class=\"sentence\">{{ sentenceTone.text }}</div>\n            <div>\n              <adapt-badge variant=\"info\" class=\"mr-1\" *ngFor=\"let score of sentenceTone?.scores\">\n                <b>{{ score.toneName }}</b> ({{ score.score }})</adapt-badge\n              >\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</form>\n","import { Component } from '@angular/core';\n@Component({\n  selector: 'rx-tone-analysis-testing',\n  templateUrl: './tone-analysis-testing.component.html'\n})\nexport class ToneAnalysisTestingAdminComponent {}\n","<rx-admin-settings header=\"Tone analysis testing\">\n  <adapt-tabset [fullHeight]=\"true\">\n    <adapt-tab-panel\n      adapt-tab-title=\"{{\n        'com.bmc.arsys.rx.client.admin.tone-analysis-testing.document-tone-analysis.title' | translate\n      }}\"\n    >\n      <rx-document-tone-analysis></rx-document-tone-analysis>\n    </adapt-tab-panel>\n    <adapt-tab-panel\n      adapt-tab-title=\"{{\n        'com.bmc.arsys.rx.client.admin.tone-analysis-testing.user-engagement-tone-analysis.title' | translate\n      }}\"\n    >\n      <rx-user-engagement-tone-analysis></rx-user-engagement-tone-analysis>\n    </adapt-tab-panel>\n  </adapt-tabset>\n</rx-admin-settings>\n","import { CommonModule } from '@angular/common';\nimport { ComponentFactoryResolver, NgModule } from '@angular/core';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\nimport {\n  AdaptBadgeModule,\n  AdaptButtonModule,\n  AdaptRxCheckboxModule,\n  AdaptRxCounterModule,\n  AdaptRxLabelModule,\n  AdaptRxSelectModule,\n  AdaptRxSwitchModule,\n  AdaptRxTextareaModule,\n  AdaptTabsModule\n} from '@bmc-ux/adapt-angular';\nimport { RX_APPLICATION } from '@helix/platform/shared/api';\nimport { RxViewComponentRegistryService } from '@helix/platform/view/api';\nimport { AdminSettingsModule } from '@helix/platform/shared/components';\nimport { DocumentToneAnalysisComponent } from './document-tone-analysis/document-tone-analysis.component';\nimport { ToneAnalysisTestingAdminComponent } from './tone-analysis-testing.component';\nimport { UserEngagementToneAnalysisComponent } from './user-engagement-tone-analysis/user-engagement-tone-analysis.component';\nimport { TranslateModule } from '@ngx-translate/core';\n@NgModule({\n  declarations: [ToneAnalysisTestingAdminComponent, DocumentToneAnalysisComponent, UserEngagementToneAnalysisComponent],\n  imports: [\n    AdminSettingsModule,\n    AdaptTabsModule,\n    AdaptRxSelectModule,\n    AdaptRxCheckboxModule,\n    AdaptRxTextareaModule,\n    AdaptRxTextareaModule,\n    AdaptRxLabelModule,\n    AdaptRxCounterModule,\n    AdaptButtonModule,\n    AdaptRxSwitchModule,\n    AdaptBadgeModule,\n    CommonModule,\n    FormsModule,\n    ReactiveFormsModule,\n    TranslateModule\n  ],\n  entryComponents: [ToneAnalysisTestingAdminComponent]\n})\nexport class ToneAnalysisTestingRegistrationModule {\n  constructor(\n    private componentFactoryResolver: ComponentFactoryResolver,\n    private rxViewComponentRegistryService: RxViewComponentRegistryService\n  ) {\n    rxViewComponentRegistryService.register({\n      type: 'rx-admin-tone-analysis-testing',\n      componentFactory: this.componentFactoryResolver.resolveComponentFactory(ToneAnalysisTestingAdminComponent),\n      name: 'Tone analysis testing',\n      isPageComponent: true,\n      availableInBundles: [RX_APPLICATION.settingsBundleId]\n    });\n  }\n}\n","export const RX_VIRTUAL_CHAT_CONFIGURATION = {\n  virtualChatConfigName: 'Virtual Chat Configuration',\n  virtualChatAdditionalSettingsName: 'Virtual Chat Additional Settings',\n  pingLiveChatServiceCommand: 'com.bmc.arsys.rx.application.cognitive.command.PingLiveChatServiceCommand',\n  virtualChatConfigurationSaved: 'Live Chat configuration saved successfully.',\n  virtualChatVerifyAdministratorKey:\n    'Unable to retrieve chat topics. Please verify that the Live Chat administrator key is correct.',\n\n  virtualChat: {\n    settingNames: {\n      url: 'URL',\n      userName: 'Username',\n      password: 'Password',\n      arServerUrl: 'ARServer-URL'\n    }\n  },\n  virtualChatAdditionalSetting: {\n    settingNames: {\n      adminKey: 'AdminKey',\n      company: 'Company'\n    }\n  }\n};\n","import { HttpErrorResponse } from '@angular/common/http';\nimport { Component, OnInit } from '@angular/core';\nimport { FormBuilder, FormGroup } from '@angular/forms';\nimport {\n  IAdminComponentSetting,\n  IAdminComponentSettings,\n  RxAdminSettingsService,\n  RxLiveAgentSettingsService,\n  RxNotificationService,\n  RX_APPLICATION\n} from '@helix/platform/shared/api';\nimport { ConnectionTestStatus, RxModalService, RX_MODAL } from '@helix/platform/ui-kit';\nimport { BaseViewComponent } from '@helix/platform/view/runtime';\nimport { TranslateService } from '@ngx-translate/core';\nimport { find, get, isEmpty, map, values } from 'lodash';\nimport { forkJoin, Observable, Subscription, throwError } from 'rxjs';\nimport { catchError, switchMap, tap } from 'rxjs/operators';\nimport { RxCognitiveServiceService } from '../cognitive-service/cognitive-service.service';\nimport { RX_VIRTUAL_CHAT_CONFIGURATION } from './virtual-chat-configuration.constant';\n\n@Component({\n  selector: 'rx-admin-virtual-chat-configuration',\n  templateUrl: './virtual-chat-configuration.component.html',\n  styleUrls: ['./virtual-chat-configuration.component.scss']\n})\nexport class VirtualChatConfigurationAdminComponent extends BaseViewComponent implements OnInit {\n  busy: Subscription;\n  virtualChatConfigurationForm: FormGroup;\n  virtualChatAdditionalSettingsForm: FormGroup;\n  connectionTestStatus: ConnectionTestStatus = ConnectionTestStatus.Invalid;\n  private isNewVirtualChatSetting = false;\n  private isNewVirtualChatAdditionalSetting = false;\n  private virtualChatComponentSettingsValues: IAdminComponentSetting[] = [];\n  private additionalSettingsComponentSettingsValues: IAdminComponentSetting[] = [];\n\n  constructor(\n    private formBuilder: FormBuilder,\n    private rxAdminSettingsService: RxAdminSettingsService,\n    private rxNotificationService: RxNotificationService,\n    private rxModalService: RxModalService,\n    private rxCognitiveServiceService: RxCognitiveServiceService,\n    private rxLiveAgentSettingsService: RxLiveAgentSettingsService,\n    private translateService: TranslateService\n  ) {\n    super();\n  }\n\n  ngOnInit(): void {\n    this.notifyPropertyChanged('api', {\n      isDirty: () => this.virtualChatConfigurationForm.dirty || this.virtualChatAdditionalSettingsForm.dirty\n    });\n\n    this.virtualChatConfigurationForm = this.formBuilder.group({\n      virtualChatUrl: '',\n      username: '',\n      password: '',\n      systemServerUrl: ''\n    });\n\n    this.virtualChatAdditionalSettingsForm = this.formBuilder.group({\n      administratorKey: '',\n      company: ''\n    });\n\n    this.busy = forkJoin({\n      virtualChatComponentSettings: this.getVirtualChatComponentSettings(),\n      additionalSettingsComponentSettings: this.getAdditionalSettingsComponentSettings()\n    }).subscribe((response) => {\n      this.isNewVirtualChatSetting = !get(response.virtualChatComponentSettings, 'values', []).length;\n      this.isNewVirtualChatAdditionalSetting = !get(response.additionalSettingsComponentSettings, 'values', []).length;\n\n      if (this.isNewVirtualChatSetting) {\n        this.virtualChatComponentSettingsValues = map(\n          values(RX_VIRTUAL_CHAT_CONFIGURATION.virtualChat.settingNames),\n          (settingName: string) => ({\n            assigneeGroupPermission: null,\n            componentName: RX_VIRTUAL_CHAT_CONFIGURATION.virtualChatConfigName,\n            settingId: null,\n            settingName: settingName,\n            settingValue: null,\n            ownerKeyValue1: null\n          })\n        );\n      } else {\n        this.virtualChatComponentSettingsValues = response.virtualChatComponentSettings.values;\n      }\n\n      if (this.isNewVirtualChatAdditionalSetting) {\n        this.additionalSettingsComponentSettingsValues = map(\n          values(RX_VIRTUAL_CHAT_CONFIGURATION.virtualChatAdditionalSetting.settingNames),\n          (settingName: string) => ({\n            assigneeGroupPermission: null,\n            componentName: RX_VIRTUAL_CHAT_CONFIGURATION.virtualChatAdditionalSettingsName,\n            ownerKeyValue1: null,\n            settingId: null,\n            settingName: settingName,\n            settingValue: null\n          })\n        );\n      } else {\n        this.additionalSettingsComponentSettingsValues = response.additionalSettingsComponentSettings.values;\n      }\n\n      this.virtualChatConfigurationForm.patchValue({\n        virtualChatUrl: this.getValueFromVirtualSetting(RX_VIRTUAL_CHAT_CONFIGURATION.virtualChat.settingNames.url),\n        username: this.getValueFromVirtualSetting(RX_VIRTUAL_CHAT_CONFIGURATION.virtualChat.settingNames.userName),\n        password: this.getValueFromVirtualSetting(RX_VIRTUAL_CHAT_CONFIGURATION.virtualChat.settingNames.password),\n        systemServerUrl: this.getValueFromVirtualSetting(\n          RX_VIRTUAL_CHAT_CONFIGURATION.virtualChat.settingNames.arServerUrl\n        )\n      });\n\n      this.virtualChatAdditionalSettingsForm.patchValue({\n        administratorKey: this.getValueFromAdditionalSetting(\n          RX_VIRTUAL_CHAT_CONFIGURATION.virtualChatAdditionalSetting.settingNames.adminKey\n        ),\n        company: this.getValueFromAdditionalSetting(\n          RX_VIRTUAL_CHAT_CONFIGURATION.virtualChatAdditionalSetting.settingNames.company\n        )\n      });\n    });\n\n    this.virtualChatConfigurationForm.valueChanges.subscribe(() => {\n      this.connectionTestStatus =\n        this.virtualChatConfigurationForm.pristine || this.virtualChatConfigurationForm.invalid\n          ? ConnectionTestStatus.Invalid\n          : ConnectionTestStatus.Unknown;\n    });\n  }\n\n  private getVirtualChatComponentSettings(): Observable<IAdminComponentSettings> {\n    return this.rxAdminSettingsService.getComponentSettings(RX_VIRTUAL_CHAT_CONFIGURATION.virtualChatConfigName, {\n      'default-bundle-scope': RX_APPLICATION.settingsBundleId\n    });\n  }\n\n  private getAdditionalSettingsComponentSettings(): Observable<IAdminComponentSettings> {\n    return this.rxAdminSettingsService.getComponentSettings(\n      RX_VIRTUAL_CHAT_CONFIGURATION.virtualChatAdditionalSettingsName,\n      {\n        'default-bundle-scope': RX_APPLICATION.settingsBundleId\n      }\n    );\n  }\n\n  private getValueFromAdditionalSetting(settingName: string): string {\n    return get(\n      find(this.additionalSettingsComponentSettingsValues, {\n        settingName\n      }),\n      'settingValue',\n      null\n    );\n  }\n\n  private getValueFromVirtualSetting(settingName: string): string {\n    return get(\n      find(this.virtualChatComponentSettingsValues, {\n        settingName\n      }),\n      'settingValue',\n      null\n    );\n  }\n\n  onTestConnection(): void {\n    const formValue = this.virtualChatConfigurationForm.getRawValue();\n\n    this.rxCognitiveServiceService\n      .testConnection({\n        resourceType: RX_VIRTUAL_CHAT_CONFIGURATION.pingLiveChatServiceCommand,\n        remedyMidTierUrl: formValue.virtualChatUrl,\n        arAdministratorUser: formValue.username,\n        arAdministratorPassword: formValue.password,\n        arSystemServerUrl: formValue.systemServerUrl\n      })\n      .pipe(\n        catchError((error: HttpErrorResponse) => {\n          this.connectionTestStatus = ConnectionTestStatus.Failed;\n\n          return throwError(error);\n        })\n      )\n      .subscribe(() => {\n        this.connectionTestStatus = ConnectionTestStatus.Passed;\n      });\n  }\n\n  isSaveButtonDisabled(): boolean {\n    return (\n      this.virtualChatConfigurationForm.pristine ||\n      this.virtualChatConfigurationForm.invalid ||\n      this.connectionTestStatus !== ConnectionTestStatus.Passed\n    );\n  }\n\n  private setVirtualSettingValue(settingName: string, value: string): void {\n    find(this.virtualChatComponentSettingsValues, {\n      settingName\n    }).settingValue = value;\n  }\n\n  saveVirtualChatConfig(): void {\n    let adminSetting$: Observable<any>;\n    const formValue = this.virtualChatConfigurationForm.getRawValue();\n\n    this.setVirtualSettingValue(RX_VIRTUAL_CHAT_CONFIGURATION.virtualChat.settingNames.url, formValue.virtualChatUrl);\n    this.setVirtualSettingValue(RX_VIRTUAL_CHAT_CONFIGURATION.virtualChat.settingNames.userName, formValue.username);\n    this.setVirtualSettingValue(RX_VIRTUAL_CHAT_CONFIGURATION.virtualChat.settingNames.password, formValue.password);\n    this.setVirtualSettingValue(\n      RX_VIRTUAL_CHAT_CONFIGURATION.virtualChat.settingNames.arServerUrl,\n      formValue.systemServerUrl\n    );\n\n    if (this.isNewVirtualChatSetting) {\n      adminSetting$ = this.rxAdminSettingsService\n        .createComponentSettings(\n          RX_VIRTUAL_CHAT_CONFIGURATION.virtualChatConfigName,\n          this.virtualChatComponentSettingsValues\n        )\n        .pipe(\n          switchMap(() => this.getVirtualChatComponentSettings()),\n          tap((response) => {\n            this.isNewVirtualChatSetting = false;\n            this.virtualChatComponentSettingsValues = response.values;\n          })\n        );\n    } else {\n      adminSetting$ = this.rxAdminSettingsService.updateComponentSettings(\n        `${RX_VIRTUAL_CHAT_CONFIGURATION.virtualChatConfigName}/${this.virtualChatComponentSettingsValues[0].ownerKeyValue1}`,\n        this.virtualChatComponentSettingsValues\n      );\n    }\n\n    this.busy = adminSetting$.subscribe(() => {\n      this.rxNotificationService.addSuccessMessage(RX_VIRTUAL_CHAT_CONFIGURATION.virtualChatConfigurationSaved);\n      this.connectionTestStatus = ConnectionTestStatus.Invalid;\n      this.virtualChatConfigurationForm.markAsPristine();\n      this.rxLiveAgentSettingsService.getAvailableTopics();\n    });\n  }\n\n  private setAdditionalSettingValue(settingName: string, value: string): void {\n    find(this.additionalSettingsComponentSettingsValues, {\n      settingName\n    }).settingValue = value;\n  }\n\n  saveAdditionalSettings(): void {\n    let adminSetting$: Observable<any>;\n    const formValue = this.virtualChatAdditionalSettingsForm.getRawValue();\n\n    this.setAdditionalSettingValue(\n      RX_VIRTUAL_CHAT_CONFIGURATION.virtualChatAdditionalSetting.settingNames.adminKey,\n      formValue.administratorKey\n    );\n    this.setAdditionalSettingValue(\n      RX_VIRTUAL_CHAT_CONFIGURATION.virtualChatAdditionalSetting.settingNames.company,\n      formValue.company\n    );\n\n    if (this.isNewVirtualChatAdditionalSetting) {\n      adminSetting$ = this.rxAdminSettingsService\n        .createComponentSettings(\n          RX_VIRTUAL_CHAT_CONFIGURATION.virtualChatAdditionalSettingsName,\n          this.additionalSettingsComponentSettingsValues\n        )\n        .pipe(\n          switchMap(() => this.getAdditionalSettingsComponentSettings()),\n          tap((response) => {\n            this.isNewVirtualChatAdditionalSetting = false;\n            this.additionalSettingsComponentSettingsValues = response.values;\n          })\n        );\n    } else {\n      adminSetting$ = this.rxAdminSettingsService.updateComponentSettings(\n        `${RX_VIRTUAL_CHAT_CONFIGURATION.virtualChatAdditionalSettingsName}/${this.additionalSettingsComponentSettingsValues[0].ownerKeyValue1}`,\n        this.additionalSettingsComponentSettingsValues\n      );\n    }\n\n    this.busy = adminSetting$.subscribe(() => {\n      this.virtualChatAdditionalSettingsForm.markAsPristine();\n      this.rxNotificationService.addSuccessMessage(RX_VIRTUAL_CHAT_CONFIGURATION.virtualChatConfigurationSaved);\n\n      this.rxLiveAgentSettingsService.getAvailableTopics().subscribe((topics) => {\n        if (isEmpty(topics)) {\n          this.rxNotificationService.addWarningMessage(RX_VIRTUAL_CHAT_CONFIGURATION.virtualChatVerifyAdministratorKey);\n        }\n      });\n    });\n  }\n}\n","<rx-admin-settings\n  header=\"{{ 'com.bmc.arsys.rx.client.admin.virtual-chat-configuration.header.title' | translate }}\"\n  [busy]=\"busy\"\n>\n  <adapt-accordion multiselect=\"true\" class=\"pb-4\">\n    <form [formGroup]=\"virtualChatConfigurationForm\">\n      <adapt-accordion-tab title=\"Authentication\" isOpen=\"true\" rx-id=\"authentication\">\n        <adapt-rx-textfield\n          rx-id=\"virtual-chat-url\"\n          label=\"{{\n            'com.bmc.arsys.rx.client.admin.tone-analysis-testing.bmc-remedy-virtual-chat-api-endpoint-url.label'\n              | translate\n          }}\"\n          formControlName=\"virtualChatUrl\"\n          maxlength=\"254\"\n          required=\"true\"\n          class=\"d-block form-group\"\n        >\n        </adapt-rx-textfield>\n        <adapt-rx-textfield\n          rx-id=\"administrator-user\"\n          label=\"{{ 'com.bmc.arsys.rx.client.admin.tone-analysis-testing.ar-administrator-user.label' | translate }}\"\n          formControlName=\"username\"\n          maxlength=\"254\"\n          required=\"true\"\n          class=\"d-block form-group\"\n        >\n        </adapt-rx-textfield>\n        <adapt-rx-textfield\n          rx-id=\"administrator-password\"\n          label=\"{{\n            'com.bmc.arsys.rx.client.admin.tone-analysis-testing.ar-administrator-password.label' | translate\n          }}\"\n          formControlName=\"password\"\n          maxlength=\"254\"\n          required=\"true\"\n          [isPassword]=\"true\"\n          class=\"d-block form-group\"\n        >\n        </adapt-rx-textfield>\n        <adapt-rx-textfield\n          rx-id=\"system-server-url\"\n          label=\"{{\n            'com.bmc.arsys.rx.client.admin.tone-analysis-testing.ar-system-server-api-endpoint-url.label' | translate\n          }}\"\n          formControlName=\"systemServerUrl\"\n          maxlength=\"254\"\n          required=\"true\"\n          class=\"d-block form-group\"\n        >\n        </adapt-rx-textfield>\n\n        <div class=\"d-flex justify-content-start\">\n          <rx-connection-tester\n            buttonType=\"secondary\"\n            [status]=\"connectionTestStatus\"\n            (testConnection)=\"onTestConnection()\"\n            rx-id=\"virtual-chat-configuration-test-button\"\n          ></rx-connection-tester>\n          <button\n            adapt-button\n            class=\"ml-4 mr-2\"\n            btn-type=\"primary\"\n            type=\"button\"\n            rx-id=\"save-button\"\n            [disabled]=\"isSaveButtonDisabled()\"\n            (click)=\"saveVirtualChatConfig()\"\n          >\n            {{ 'com.bmc.arsys.rx.client.common.save.label' | translate }}\n          </button>\n        </div>\n      </adapt-accordion-tab>\n    </form>\n\n    <form [formGroup]=\"virtualChatAdditionalSettingsForm\">\n      <adapt-accordion-tab title=\"Additional settings\" rx-id=\"additional-settings\" class=\"d-block\">\n        <adapt-rx-textfield\n          rx-id=\"administrator-key\"\n          label=\"{{ 'com.bmc.arsys.rx.client.admin.tone-analysis-testing.administrator-key.label' | translate }}\"\n          formControlName=\"administratorKey\"\n          class=\"d-block form-group\"\n          [tooltip]=\"{\n            iconName: 'question_circle_o',\n            content: 'com.bmc.arsys.rx.client.admin.virtual-chat-configuration.administrator-key.tooltip' | translate,\n            placement: 'right',\n            popoverMode: true\n          }\"\n        >\n        </adapt-rx-textfield>\n        <adapt-rx-textfield rx-id=\"company\" label=\"Company\" formControlName=\"company\" class=\"d-block form-group\">\n        </adapt-rx-textfield>\n\n        <div class=\"d-flex justify-content-start\">\n          <button\n            adapt-button\n            class=\"mr-2\"\n            btn-type=\"primary\"\n            type=\"button\"\n            rx-id=\"additional-settings-save-button\"\n            [disabled]=\"virtualChatAdditionalSettingsForm.pristine || virtualChatAdditionalSettingsForm.invalid\"\n            (click)=\"saveAdditionalSettings()\"\n          >\n            {{ 'com.bmc.arsys.rx.client.common.save.label' | translate }}\n          </button>\n        </div>\n      </adapt-accordion-tab>\n    </form>\n  </adapt-accordion>\n</rx-admin-settings>\n","import { ComponentFactoryResolver, NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { RxViewComponentRegistryService } from '@helix/platform/view/api';\nimport { RX_APPLICATION } from '@helix/platform/shared/api';\nimport { VirtualChatConfigurationAdminComponent } from './virtual-chat-configuration.component';\nimport { AdminSettingsModule } from '@helix/platform/shared/components';\nimport { AdaptAccordionModule, AdaptButtonModule, AdaptRxTextfieldModule } from '@bmc-ux/adapt-angular';\nimport { ReactiveFormsModule } from '@angular/forms';\nimport { RxConnectionTesterModule } from '@helix/platform/ui-kit';\nimport { TranslateModule } from '@ngx-translate/core';\n\n@NgModule({\n  declarations: [VirtualChatConfigurationAdminComponent],\n  imports: [\n    AdaptAccordionModule,\n    AdaptButtonModule,\n    AdaptRxTextfieldModule,\n    AdminSettingsModule,\n    CommonModule,\n    ReactiveFormsModule,\n    RxConnectionTesterModule,\n    TranslateModule\n  ],\n  entryComponents: [VirtualChatConfigurationAdminComponent]\n})\nexport class VirtualChatConfigurationRegistrationModule {\n  constructor(\n    private componentFactoryResolver: ComponentFactoryResolver,\n    private rxViewComponentRegistryService: RxViewComponentRegistryService\n  ) {\n    rxViewComponentRegistryService.register({\n      type: 'rx-admin-virtual-chat-configuration',\n      componentFactory: this.componentFactoryResolver.resolveComponentFactory(VirtualChatConfigurationAdminComponent),\n      name: 'Virtual Chat configuration',\n      isPageComponent: true,\n      availableInBundles: [RX_APPLICATION.settingsBundleId]\n    });\n  }\n}\n","import {\n  IWebApiConnection,\n  IWebApiConnectionField,\n  IWebApiConnectionWizardStep\n} from './web-api-connections.interfaces';\n\nconst fieldIds = {\n  hostname: 70030,\n  port: 70031,\n  protocol: 70032,\n  authType: 70033,\n  authentication: 70034\n};\n\nconst authTypes = {\n  basicAuth: 0,\n  oAuth2: 1,\n  rsso: 2,\n  custom: 3,\n  remedy: 11,\n  oAuthTokenExchange: 12\n};\n\nconst protocolTypes = {\n  http: 0,\n  https: 1\n};\n\nconst protocolTypeOptions = [\n  {\n    id: protocolTypes.http,\n    label: 'HTTP'\n  },\n  {\n    id: protocolTypes.https,\n    label: 'HTTPS'\n  }\n];\n\nconst grantTypeOptions = [\n  {\n    id: 0,\n    label: 'client_credentials'\n  }\n];\n\nconst authTypeOptions = [\n  {\n    id: authTypes.basicAuth,\n    label: 'Basic'\n  },\n  {\n    id: authTypes.oAuth2,\n    label: 'OAuth 2.0'\n  },\n  {\n    id: authTypes.rsso,\n    label: 'RSSO'\n  },\n  {\n    id: authTypes.custom,\n    label: 'Custom'\n  },\n  {\n    id: authTypes.remedy,\n    label: 'Remedy'\n  },\n  {\n    id: authTypes.oAuthTokenExchange,\n    label: 'OAuth token exchange'\n  }\n];\n\nconst webApiConnection: IWebApiConnection = {\n  authTypeCode: '',\n  secure: '',\n  name: '',\n  hostname: '',\n  port: '',\n  authTypeDetails: {\n    username: '',\n    credentials: '',\n    httpHeaders: [],\n    queryParams: [],\n    tokenFetchMechanism: 0,\n    additionalFormParams: []\n  }\n};\n\nconst wizardSteps: IWebApiConnectionWizardStep[] = [\n  {\n    title: 'General',\n    fields: [\n      {\n        type: 'text',\n        name: 'name',\n        label: 'com.bmc.arsys.rx.client.common.name.label',\n        rxId: 'name',\n        required: true\n      },\n      {\n        type: 'text',\n        name: 'hostname',\n        label: 'com.bmc.arsys.rx.client.admin.data-source-connection-properties.host-name.label',\n        rxId: 'host-name',\n        required: true\n      },\n      {\n        type: 'number',\n        name: 'port',\n        label: 'com.bmc.arsys.rx.client.admin.data-source-connection-properties.port.label',\n        rxId: 'port',\n        minValue: 1,\n        maxValue: 65535,\n        required: true,\n        allowScientific: false,\n        allowIntegerOnly: true\n      },\n      {\n        type: 'select',\n        name: 'secure',\n        label: 'com.bmc.arsys.rx.client.admin.web-api-connections.protocol.label',\n        rxId: 'protocol',\n        selectOptions: protocolTypeOptions,\n        required: true\n      },\n      {\n        type: 'select',\n        name: 'authTypeCode',\n        label: 'com.bmc.arsys.rx.client.admin.data-source-connection-properties.authentication.label',\n        rxId: 'authentication',\n        selectOptions: authTypeOptions,\n        required: true\n      }\n    ],\n    id: 'General',\n    formName: 'generalConfigurationForm',\n    isValid: true,\n    isDirty: false\n  },\n  {\n    title: 'Authentication',\n    fields: [\n      {\n        type: 'text',\n        name: 'username',\n        label: 'com.bmc.arsys.rx.client.admin.web-api-connections.login.label',\n        rxId: 'login',\n        required: true\n      },\n      {\n        type: 'password',\n        name: 'credentials',\n        label: 'com.bmc.arsys.rx.client.common.password.label',\n        rxId: 'password',\n        required: true\n      },\n      {\n        type: 'nameValuePairs',\n        name: 'httpHeaders',\n        label: 'HTTP headers',\n        rxId: 'http-headers',\n        required: true\n      }\n    ],\n    id: 'Authentication',\n    formName: 'authenticationConfigurationForm',\n    isValid: true,\n    isDirty: false\n  }\n];\n\nconst authTypeFields: Array<{ id: number; fields: IWebApiConnectionField[] }> = [\n  {\n    id: authTypes.basicAuth,\n    fields: [\n      {\n        type: 'text',\n        name: 'username',\n        label: 'com.bmc.arsys.rx.client.admin.web-api-connections.login.label',\n        rxId: 'login',\n        required: true\n      },\n      {\n        type: 'password',\n        name: 'credentials',\n        label: 'com.bmc.arsys.rx.client.common.password.label',\n        rxId: 'password',\n        required: true\n      },\n      {\n        type: 'nameValuePairs',\n        name: 'httpHeaders',\n        label: 'com.bmc.arsys.rx.client.admin.web-api-connections.add-http-headers.label',\n        rxId: 'http-headers',\n        required: true\n      }\n    ]\n  },\n  {\n    id: authTypes.oAuth2,\n    fields: [\n      {\n        type: 'select',\n        name: 'grantType',\n        label: 'com.bmc.arsys.rx.client.admin.web-api-connections.grant-type.label',\n        rxId: 'grant-type',\n        selectOptions: grantTypeOptions,\n        disabled: false,\n        required: true\n      },\n      {\n        type: 'text',\n        name: 'tokenPath',\n        label: 'com.bmc.arsys.rx.client.admin.web-api-connections.access-token-url.label',\n        rxId: 'access-token-url',\n        required: true\n      },\n      {\n        type: 'text',\n        name: 'username',\n        label: 'com.bmc.arsys.rx.client.admin.rsso-auth.client-id.label',\n        rxId: 'client-id',\n        required: true\n      },\n      {\n        type: 'password',\n        name: 'credentials',\n        label: 'com.bmc.arsys.rx.client.admin.rsso-auth.client-secret.label',\n        rxId: 'client-secret',\n        required: true\n      },\n      {\n        type: 'radio',\n        name: 'tokenFetchMechanism',\n        label: 'com.bmc.arsys.rx.client.admin.web-api-connections.client-credentials-transfer-mechanism.label',\n        rxId: 'token-fetch-mechanism',\n        selectOptions: [\n          {\n            label: 'com.bmc.arsys.rx.client.admin.web-api-connections.authorization-request-header.label',\n            value: 0\n          },\n          {\n            label: 'com.bmc.arsys.rx.client.admin.web-api-connections.form-parameters.label',\n            value: 1\n          }\n        ]\n      },\n      {\n        type: 'text',\n        name: 'redirectUri',\n        label: 'com.bmc.arsys.rx.client.admin.web-api-connections.redirect-uri.label',\n        rxId: 'redirect-uri',\n        required: false\n      },\n      {\n        type: 'text',\n        name: 'scope',\n        label: 'com.bmc.arsys.rx.client.admin.web-api-connections.scope.label',\n        rxId: 'scope',\n        required: false\n      },\n      {\n        type: 'serverEndpointRadio',\n        name: 'authServerEndpoint',\n        label: 'com.bmc.arsys.rx.client.admin.web-api-connections.authorization-server-endpoint.label',\n        rxId: 'auth-server-endpoint',\n        selectOptions: [\n          {\n            label: 'com.bmc.arsys.rx.client.admin.web-api-connections.endpoint-type.default-hostname.label',\n            value: 'Default'\n          },\n          {\n            label: 'com.bmc.arsys.rx.client.admin.web-api-connections.endpoint-type.custom.label',\n            value: 'Custom'\n          }\n        ],\n        placeholder: 'com.bmc.arsys.rx.client.admin.web-api-connections.authorization-server-endpoint.placeholder',\n        referenceFieldName: 'hostname',\n        tooltip: 'com.bmc.arsys.rx.client.admin.web-api-connections.authorization-server-endpoint.tooltip',\n        required: true\n      },\n      {\n        type: 'nameValuePairs',\n        name: 'httpHeaders',\n        label: 'com.bmc.arsys.rx.client.admin.web-api-connections.add-http-headers.label',\n        rxId: 'http-headers',\n        required: true\n      },\n      {\n        type: 'nameValuePairs',\n        name: 'additionalFormParams',\n        label: 'com.bmc.arsys.rx.client.admin.web-api-connections.add-form-parameters.label',\n        rxId: 'additional-form-params'\n      }\n    ]\n  },\n  {\n    id: authTypes.rsso,\n    fields: [\n      {\n        type: 'text',\n        name: 'loginName',\n        label: 'com.bmc.arsys.rx.client.admin.web-api-connections.login.label',\n        rxId: 'login',\n        required: true\n      },\n      {\n        type: 'text',\n        name: 'tokenPath',\n        label: 'com.bmc.arsys.rx.client.admin.web-api-connections.access-token-url.label',\n        rxId: 'access-token-url',\n        required: true\n      },\n      {\n        type: 'text',\n        name: 'username',\n        label: 'com.bmc.arsys.rx.client.admin.rsso-auth.client-id.label',\n        rxId: 'client-id',\n        required: true\n      },\n      {\n        type: 'password',\n        name: 'credentials',\n        label: 'com.bmc.arsys.rx.client.admin.rsso-auth.client-secret.label',\n        rxId: 'client-secret',\n        required: true\n      },\n      {\n        type: 'serverEndpointRadio',\n        name: 'authServerEndpoint',\n        label: 'com.bmc.arsys.rx.client.admin.web-api-connections.rsso-server-endpoint.label',\n        rxId: 'auth-server-endpoint',\n        referenceFieldName: 'hostname',\n        selectOptions: [\n          {\n            label: 'com.bmc.arsys.rx.client.admin.web-api-connections.endpoint-type.default-hostname.label',\n            value: 'Default'\n          },\n          {\n            label: 'com.bmc.arsys.rx.client.admin.web-api-connections.endpoint-type.custom.label',\n            value: 'Custom'\n          }\n        ],\n        placeholder: 'com.bmc.arsys.rx.client.admin.web-api-connections.rsso-server-endpoint.placeholder',\n        required: true\n      },\n      {\n        type: 'nameValuePairs',\n        name: 'httpHeaders',\n        label: 'com.bmc.arsys.rx.client.admin.web-api-connections.add-http-headers.label',\n        rxId: 'http-headers',\n        required: true\n      }\n    ]\n  },\n  {\n    id: authTypes.custom,\n    fields: [\n      {\n        type: 'nameValuePairs',\n        name: 'httpHeaders',\n        label: 'com.bmc.arsys.rx.client.admin.web-api-connections.add-http-headers.label',\n        rxId: 'http-headers',\n        required: true\n      },\n      {\n        type: 'nameValuePairs',\n        name: 'queryParams',\n        label: 'com.bmc.arsys.rx.client.admin.web-api-connections.add-query-parameters.label',\n        rxId: 'query-parameters',\n        required: true\n      }\n    ]\n  },\n  {\n    id: authTypes.remedy,\n    fields: [\n      {\n        type: 'text',\n        name: 'username',\n        label: 'com.bmc.arsys.rx.client.admin.web-api-connections.login.label',\n        rxId: 'login',\n        required: true\n      },\n      {\n        type: 'password',\n        name: 'credentials',\n        label: 'com.bmc.arsys.rx.client.common.password.label',\n        rxId: 'password',\n        required: true\n      },\n      {\n        type: 'nameValuePairs',\n        name: 'httpHeaders',\n        label: 'com.bmc.arsys.rx.client.admin.web-api-connections.add-http-headers.label',\n        rxId: 'http-headers',\n        required: true\n      }\n    ]\n  },\n  {\n    id: authTypes.oAuthTokenExchange,\n    fields: [\n      {\n        type: 'text',\n        name: 'loginName',\n        label: 'com.bmc.arsys.rx.client.admin.web-api-connections.login.label',\n        rxId: 'login'\n      },\n      {\n        type: 'text',\n        name: 'tokenPath',\n        label: 'com.bmc.arsys.rx.client.admin.web-api-connections.access-token-url.label',\n        rxId: 'access-token-url',\n        required: true\n      },\n      {\n        type: 'text',\n        name: 'username',\n        label: 'com.bmc.arsys.rx.client.admin.rsso-auth.client-id.label',\n        rxId: 'client-id',\n        required: true\n      },\n      {\n        type: 'password',\n        name: 'credentials',\n        label: 'com.bmc.arsys.rx.client.admin.rsso-auth.client-secret.label',\n        rxId: 'client-secret',\n        required: true\n      },\n      {\n        type: 'text',\n        name: 'resources',\n        label: 'com.bmc.arsys.rx.client.admin.web-api-connections.resources.label',\n        rxId: 'resources',\n        required: true,\n        isUrl: true\n      },\n      {\n        type: 'serverEndpointRadio',\n        name: 'authServerEndpoint',\n        label: 'com.bmc.arsys.rx.client.admin.web-api-connections.oauth-token-exchange-server-endpoint.label',\n        rxId: 'auth-server-endpoint',\n        referenceFieldName: 'hostname',\n        selectOptions: [\n          {\n            label: 'com.bmc.arsys.rx.client.admin.web-api-connections.endpoint-type.default-hostname.label',\n            value: 'Default'\n          },\n          {\n            label: 'com.bmc.arsys.rx.client.admin.web-api-connections.endpoint-type.custom.label',\n            value: 'Custom'\n          }\n        ],\n        placeholder:\n          'com.bmc.arsys.rx.client.admin.web-api-connections.oauth-token-exchange-server-endpoint.placeholder',\n        required: true\n      },\n      {\n        type: 'nameValuePairs',\n        name: 'httpHeaders',\n        label: 'com.bmc.arsys.rx.client.admin.web-api-connections.add-http-headers.label',\n        rxId: 'http-headers',\n        required: true\n      }\n    ]\n  }\n];\n\nconst authServerEndpoints = {\n  default: 'Default',\n  custom: 'Custom'\n};\n\nexport const RX_WEB_API_CONNECTIONS = {\n  recordDefinitionName: 'WebAPI Connection',\n  passwordMask: '********',\n  fieldIds: fieldIds,\n  wizardContext: {\n    wizardSteps,\n    webApiConnection,\n    isEditMode: false\n  },\n  protocolTypeOptions,\n  authTypes,\n  authTypeOptions,\n  authTypeFields,\n  grantTypeOptions,\n  authServerEndpoints\n};\n","import { Component, OnInit, Input, Output, EventEmitter, ViewChild, OnDestroy } from '@angular/core';\nimport {\n  IWebApiConnectionWizardStep,\n  IWebApiConnection,\n  IWebApiConnectionField,\n  IAuthTypeDetails\n} from '../web-api-connections.interfaces';\nimport { RxSelectOption } from '@bmc-ux/adapt-angular';\nimport { get, some } from 'lodash';\nimport { NgForm } from '@angular/forms';\nimport { RX_WEB_API_CONNECTIONS } from '../web-api-connections.constant';\nimport { ReplaySubject } from 'rxjs';\nimport { distinctUntilChanged, takeUntil } from 'rxjs/operators';\nimport { AbstractControl, ValidationErrors } from '@angular/forms';\nimport { RxUrlUtilsService } from '@helix/platform/utils';\nimport { TranslateService } from '@ngx-translate/core';\n\n@Component({\n  selector: 'rx-web-api-connection-wizard-step-fields',\n  templateUrl: './web-api-connection-wizard-step-fields.component.html',\n  styleUrls: ['./web-api-connection-wizard-step-fields.component.scss']\n})\nexport class WebApiConnectionWizardStepFieldsComponent implements OnInit, OnDestroy {\n  @Input()\n  step: IWebApiConnectionWizardStep;\n\n  @Input()\n  webApiConnection: IWebApiConnection;\n\n  @ViewChild('configurationForm', { read: NgForm, static: true })\n  configurationForm: NgForm;\n\n  @Output()\n  selectionChange: EventEmitter<object> = new EventEmitter<object>();\n\n  @Output()\n  formStatusChange: EventEmitter<object> = new EventEmitter<object>();\n\n  authEndpoint: string;\n\n  @Input()\n  stepDetails: IWebApiConnection | IAuthTypeDetails;\n\n  private destroyed$: ReplaySubject<boolean> = new ReplaySubject(1);\n  private defaultSelection = this.translateService.instant('com.bmc.arsys.rx.client.common.select.label');\n\n  constructor(private rxUrlUtilsService: RxUrlUtilsService, private translateService: TranslateService) {}\n\n  optionFormatter = (option: RxSelectOption): string => {\n    return get(option, 'label', this.defaultSelection);\n  };\n\n  onRadioButtonChange(event, field: IWebApiConnectionField) {\n    if (event.startsWith(RX_WEB_API_CONNECTIONS.authServerEndpoints.default)) {\n      this.stepDetails[field.name] = null;\n    }\n  }\n\n  getSelectionValue(selectedValue, field: IWebApiConnectionField) {\n    return this.translateService.instant(selectedValue.label, {\n      hostName: this.webApiConnection[field.referenceFieldName]\n    });\n  }\n\n  validate(field: IWebApiConnectionField): (control: AbstractControl) => ValidationErrors | null {\n    return (control: AbstractControl) => {\n      let result = null;\n\n      if (field.isUrl && control.value) {\n        const urls = control.value.split(/[,;]/);\n\n        if (some(urls, (url) => !this.rxUrlUtilsService.isValidUrl(url, true))) {\n          result = { invalidUrl: { message: 'Invalid URL.' } };\n        }\n      }\n\n      return result;\n    };\n  }\n\n  ngOnInit() {\n    this.authEndpoint = this.stepDetails['authServerEndpoint']\n      ? RX_WEB_API_CONNECTIONS.authServerEndpoints.custom\n      : RX_WEB_API_CONNECTIONS.authServerEndpoints.default;\n\n    this.configurationForm.statusChanges.pipe(distinctUntilChanged(), takeUntil(this.destroyed$)).subscribe((value) => {\n      this.step.isValid = value === 'VALID';\n      this.formStatusChange.emit();\n    });\n\n    this.configurationForm.valueChanges.pipe(distinctUntilChanged(), takeUntil(this.destroyed$)).subscribe((value) => {\n      this.step.isDirty = !this.configurationForm.pristine;\n      this.formStatusChange.emit();\n    });\n  }\n\n  ngOnDestroy(): void {\n    this.destroyed$.next(true);\n    this.destroyed$.complete();\n  }\n}\n","<form [name]=\"step.formName\" #configurationForm=\"ngForm\">\n  <ng-container *ngFor=\"let field of step.fields\">\n    <adapt-rx-select\n      [name]=\"field.name\"\n      [label]=\"field.label | translate\"\n      class=\"d-block form-group\"\n      rx-id=\"field.rxId\"\n      [options]=\"field.selectOptions\"\n      [optionFormatter]=\"optionFormatter\"\n      [(ngModel)]=\"stepDetails[field.name]\"\n      [required]=\"field.required\"\n      *ngIf=\"field.type === 'select'\"\n      [disabled]=\"field.disabled\"\n      (ngModelChange)=\"selectionChange.emit({ selection: $event, fieldName: field.name })\"\n    >\n    </adapt-rx-select>\n\n    <adapt-rx-textfield\n      [name]=\"field.name\"\n      [(ngModel)]=\"stepDetails[field.name]\"\n      [required]=\"field.required\"\n      [attr.rx-id]=\"field.rxId\"\n      [label]=\"field.label | translate\"\n      class=\"d-block form-group\"\n      *ngIf=\"field.type === 'text' || field.type === 'password'\"\n      [isPassword]=\"field.type === 'password'\"\n      [placeholder]=\"field.placeholder\"\n      [rxCustomValidators]=\"validate(field)\"\n    >\n    </adapt-rx-textfield>\n\n    <adapt-rx-counter\n      [name]=\"field.name\"\n      [(ngModel)]=\"stepDetails[field.name]\"\n      [required]=\"field.required\"\n      [attr.rx-id]=\"field.rxId\"\n      [label]=\"field.label | translate\"\n      class=\"d-block form-group\"\n      [adaptMin]=\"field.minValue\"\n      [adaptMax]=\"field.maxValue\"\n      *ngIf=\"field.type === 'number' && field.allowIntegerOnly\"\n      [placeholder]=\"field.placeholder\"\n      adaptIntegerNumber\n    >\n    </adapt-rx-counter>\n\n    <adapt-rx-counter\n      [name]=\"field.name\"\n      [(ngModel)]=\"stepDetails[field.name]\"\n      [required]=\"field.required\"\n      [attr.rx-id]=\"field.rxId\"\n      [label]=\"field.label | translate\"\n      class=\"d-block form-group\"\n      [adaptMin]=\"field.minValue\"\n      [adaptMax]=\"field.maxValue\"\n      *ngIf=\"field.type === 'number' && field.allowScientific\"\n      [placeholder]=\"field.placeholder\"\n      adaptScientificNumber\n    >\n    </adapt-rx-counter>\n\n    <rx-name-value-pairs-editor\n      addButtonLabel=\"{{ field.label | translate }}\"\n      *ngIf=\"field.type === 'nameValuePairs'\"\n      [(ngModel)]=\"stepDetails[field.name]\"\n      [name]=\"field.name\"\n    >\n    </rx-name-value-pairs-editor>\n\n    <adapt-rx-radiobutton-group\n      *ngIf=\"field.type === 'radio'\"\n      [(ngModel)]=\"stepDetails[field.name]\"\n      [name]=\"field.name\"\n      [label]=\"field.label | translate\"\n    >\n      <adapt-rx-radiobutton\n        *ngFor=\"let selectionValue of field.selectOptions\"\n        [value]=\"selectionValue.value\"\n        [label]=\"getSelectionValue(selectionValue, field)\"\n      >\n      </adapt-rx-radiobutton>\n    </adapt-rx-radiobutton-group>\n\n    <adapt-rx-radiobutton-group\n      *ngIf=\"field.type === 'serverEndpointRadio'\"\n      [(ngModel)]=\"authEndpoint\"\n      [name]=\"field.name\"\n      [label]=\"field.label | translate\"\n      [tooltip]=\"{\n        iconName: 'question_circle_o',\n        content: field.tooltip | translate,\n        placement: 'auto',\n        popoverMode: true\n      }\"\n      (ngModelChange)=\"onRadioButtonChange($event, field)\"\n    >\n      <adapt-rx-radiobutton\n        *ngFor=\"let selectionValue of field.selectOptions\"\n        [value]=\"selectionValue.value\"\n        [label]=\"getSelectionValue(selectionValue, field)\"\n      >\n      </adapt-rx-radiobutton>\n    </adapt-rx-radiobutton-group>\n\n    <adapt-rx-textfield\n      name=\"url\"\n      *ngIf=\"field.type === 'serverEndpointRadio'\"\n      [disabled]=\"authEndpoint != 'Custom'\"\n      [(ngModel)]=\"stepDetails[field.name]\"\n      [placeholder]=\"field.placeholder | translate\"\n      [required]=\"field.required\"\n      [attr.rx-id]=\"field.rxId\"\n      class=\"d-block form-group\"\n    >\n    </adapt-rx-textfield>\n  </ng-container>\n</form>\n","import { Component } from '@angular/core';\nimport { some } from 'lodash';\nimport { map, take } from 'rxjs/operators';\n\nimport { RxWizardModalComponent } from '@helix/platform/shared/components';\n\n@Component({\n  selector: 'rx-authentication-wizard-step',\n  templateUrl: './authentication-wizard-step.component.html'\n})\nexport class AuthenticationWizardStepComponent {\n  context$ = this.rxWizardModalComponent.context$;\n\n  isSaveButtonDisabled$ = this.rxWizardModalComponent.context$.pipe(\n    map((context) => {\n      const isDirty = some(context.wizardSteps, { isDirty: true });\n\n      return some(context.wizardSteps, { isValid: false }) || !isDirty;\n    })\n  );\n\n  constructor(private rxWizardModalComponent: RxWizardModalComponent) {}\n\n  onFormStatusChange(): void {\n    this.isSaveButtonDisabled$.pipe(take(1)).subscribe((isSaveButtonDisabled) => {\n      if (isSaveButtonDisabled) {\n        this.rxWizardModalComponent.api.disableFinishButton();\n      } else {\n        this.rxWizardModalComponent.api.enableFinishButton();\n      }\n    });\n  }\n}\n","<ng-container *ngIf=\"context$ | async as context\">\n  <rx-web-api-connection-wizard-step-fields\n    [step]=\"context.wizardSteps[1]\"\n    [stepDetails]=\"context.webApiConnection.authTypeDetails\"\n    (formStatusChange)=\"onFormStatusChange()\"\n    [webApiConnection]=\"context.webApiConnection\"\n  >\n  </rx-web-api-connection-wizard-step-fields>\n</ng-container>\n","import { Component, OnInit } from '@angular/core';\nimport { RxSelectOption } from '@bmc-ux/adapt-angular';\nimport { find, isEqual, cloneDeep } from 'lodash';\nimport { take } from 'rxjs/operators';\n\nimport { RxWizardModalComponent } from '@helix/platform/shared/components';\nimport { RX_WEB_API_CONNECTIONS } from '../web-api-connections.constant';\nimport { IAuthTypeDetails } from '../web-api-connections.interfaces';\n\n@Component({\n  selector: 'rx-general-wizard-step',\n  templateUrl: './general-wizard-step.component.html'\n})\nexport class GeneralWizardStepComponent implements OnInit {\n  context$ = this.rxWizardModalComponent.context$;\n  savedAuthTypeCode: RxSelectOption;\n  savedAuthTypeDetails: IAuthTypeDetails;\n\n  constructor(private rxWizardModalComponent: RxWizardModalComponent) {}\n\n  ngOnInit(): void {\n    this.context$.pipe(take(1)).subscribe((context) => {\n      if (context.isEditMode) {\n        this.rxWizardModalComponent.api.enableNextButton();\n        this.savedAuthTypeCode = context.webApiConnection.authTypeCode;\n        this.savedAuthTypeDetails = context.webApiConnection.authTypeDetails;\n      }\n    });\n  }\n\n  onSelectionChange(selection: RxSelectOption): void {\n    this.context$.pipe(take(1)).subscribe((context) => {\n      if (selection['fieldName'] === 'authTypeCode') {\n        const authTypeId = selection['selection'][0].id;\n        const newWizardSteps = cloneDeep(context.wizardSteps);\n\n        newWizardSteps[1].fields = find(RX_WEB_API_CONNECTIONS.authTypeFields, { id: authTypeId }).fields;\n\n        this.rxWizardModalComponent.api.updateContext({\n          wizardSteps: newWizardSteps\n        });\n\n        if (this.savedAuthTypeCode && isEqual(selection['selection'][0], this.savedAuthTypeCode[0])) {\n          this.rxWizardModalComponent.api.updateContext({\n            webApiConnection: this.savedAuthTypeDetails\n          });\n        } else {\n          const newWebApiConnection = cloneDeep(context.webApiConnection);\n\n          newWebApiConnection.authTypeDetails = {\n            username: '',\n            credentials: '',\n            httpHeaders: [],\n            queryParams: [],\n            tokenFetchMechanism: 0,\n            additionalFormParams: [],\n            grantType: [RX_WEB_API_CONNECTIONS.grantTypeOptions[0]]\n          };\n\n          this.rxWizardModalComponent.api.updateContext({\n            webApiConnection: newWebApiConnection\n          });\n        }\n      }\n    });\n  }\n\n  onFormStatusChange(): void {\n    this.rxWizardModalComponent.context$.pipe(take(1)).subscribe((context) => {\n      if (context.wizardSteps[0].isValid) {\n        this.rxWizardModalComponent.api.enableNextButton();\n\n        if (context.wizardSteps[0].isDirty && context.isEditMode) {\n          this.rxWizardModalComponent.api.enableFinishButton();\n        }\n      } else {\n        this.rxWizardModalComponent.api.disableNextButton();\n      }\n\n      if (context.wizardSteps[0].isDirty) {\n        this.rxWizardModalComponent.api.markDirty();\n      }\n    });\n  }\n}\n","<ng-container *ngIf=\"context$ | async as context\">\n  <rx-web-api-connection-wizard-step-fields\n    [step]=\"context.wizardSteps[0]\"\n    [stepDetails]=\"context.webApiConnection\"\n    (selectionChange)=\"onSelectionChange($event)\"\n    (formStatusChange)=\"onFormStatusChange()\"\n    [webApiConnection]=\"context.webApiConnection\"\n  >\n  </rx-web-api-connection-wizard-step-fields>\n</ng-container>\n","import { Injectable, Injector } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\nimport { EMPTY, forkJoin, Observable } from 'rxjs';\nimport { IAuthTypeDetails, IWebApiConnection } from './web-api-connections.interfaces';\nimport { castArray, cloneDeep } from 'lodash';\nimport { IRxRecordGridApi, RxViewActionUtilsService } from '@helix/platform/view/api';\nimport { RX_WEB_API_CONNECTIONS } from './web-api-connections.constant';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class RxWebAPIConnectionsService {\n  private path = '/api/rx/application/webapi/connection';\n\n  constructor(\n    private httpClient: HttpClient,\n    private injector: Injector,\n    private rxViewActionUtilsService: RxViewActionUtilsService\n  ) {}\n\n  private getAuthTypeDetails(webApiConnection: IWebApiConnection): IAuthTypeDetails {\n    const authTypeDetails: IAuthTypeDetails = cloneDeep(webApiConnection.authTypeDetails);\n\n    if (authTypeDetails.credentials === RX_WEB_API_CONNECTIONS.passwordMask) {\n      authTypeDetails.credentials = null;\n    }\n\n    delete authTypeDetails.grantType;\n\n    return authTypeDetails;\n  }\n\n  save(webApiConnection: IWebApiConnection, id: string): Observable<any> {\n    return this.httpClient.put(this.getUrl(id), this.getWebApiConnectionToSave(webApiConnection));\n  }\n\n  create(webApiConnection: IWebApiConnection): Observable<any> {\n    return this.httpClient.post(this.path, this.getWebApiConnectionToSave(webApiConnection));\n  }\n\n  private getWebApiConnectionToSave(webApiConnection: IWebApiConnection): IWebApiConnection {\n    return {\n      authTypeCode: webApiConnection.authTypeCode[0].id,\n      authTypeDetails: this.getAuthTypeDetails(webApiConnection),\n      hostname: webApiConnection.hostname,\n      name: webApiConnection.name,\n      port: webApiConnection.port,\n      secure: webApiConnection.secure[0].id\n    };\n  }\n\n  private getUrl(id: string): string {\n    return `${this.path}/${encodeURIComponent(id)}`;\n  }\n\n  private delete(id: string): Observable<any> {\n    return this.httpClient.delete(this.getUrl(id));\n  }\n\n  deleteRecords(recordsApi: IRxRecordGridApi): Observable<any> {\n    const records = castArray(recordsApi.getSelectedRows());\n    const recordIds = this.rxViewActionUtilsService.extractRecordIds(records);\n\n    if (recordIds.length) {\n      const deleteObservables = recordIds.map((recordId) => this.delete(recordId));\n\n      return forkJoin(deleteObservables);\n    }\n\n    return EMPTY;\n  }\n}\n","import { Component, ComponentFactoryResolver, TemplateRef, ViewChild } from '@angular/core';\nimport { RxSelectOption } from '@bmc-ux/adapt-angular';\nimport { DataCellTemplateParams } from '@bmc-ux/adapt-table/public-api';\nimport { IRecordDefinition, RX_RECORD_DEFINITION, RxRecordInstanceService } from '@helix/platform/record/api';\nimport { RxCurrentUserService, RxNotificationService } from '@helix/platform/shared/api';\nimport { RxWizardService } from '@helix/platform/shared/components';\nimport { RX_MODAL, RxModalService } from '@helix/platform/ui-kit';\nimport { IRowDataItem } from '@helix/platform/view/api';\nimport {\n  IRecordGridActionButton,\n  IRecordGridColumn,\n  IRecordGridConfig,\n  RecordGridComponent\n} from '@helix/platform/view/components';\nimport { cloneDeep, find, isObject } from 'lodash';\nimport { Observable, of, throwError } from 'rxjs';\nimport { catchError } from 'rxjs/operators';\nimport { AuthenticationWizardStepComponent } from './authentication-wizard-step/authentication-wizard-step.component';\nimport { GeneralWizardStepComponent } from './general-wizard-step/general-wizard-step.component';\nimport { RX_WEB_API_CONNECTIONS } from './web-api-connections.constant';\nimport { IWebApiConnectionWizardContext } from './web-api-connections.interfaces';\nimport { RxWebAPIConnectionsService } from './web-api-connections.service';\nimport { TranslateService } from '@ngx-translate/core';\n\n@Component({\n  selector: 'rx-admin-web-api-connections',\n  templateUrl: './web-api-connections.component.html'\n})\nexport class WebApiConnectionsAdminComponent {\n  gridConfig$: Observable<IRecordGridConfig>;\n\n  private currentRecordInstanceId: string;\n  private isNewConfiguration: boolean;\n  private webApiConnectionWizardContext: IWebApiConnectionWizardContext;\n\n  @ViewChild('webApiConnectionsRecordGrid', { static: false })\n  webApiConnectionsRecordGrid: RecordGridComponent;\n\n  @ViewChild('portCellTemplate', { static: true })\n  portCellTemplate: TemplateRef<DataCellTemplateParams>;\n\n  recordDefinition: IRecordDefinition = {\n    fieldDefinitions: [\n      {\n        id: RX_RECORD_DEFINITION.coreFieldIds.description,\n        resourceType: RX_RECORD_DEFINITION.resourceTypes.character\n      },\n      {\n        id: RX_WEB_API_CONNECTIONS.fieldIds.hostname,\n        resourceType: RX_RECORD_DEFINITION.resourceTypes.character\n      },\n      {\n        id: RX_WEB_API_CONNECTIONS.fieldIds.port,\n        resourceType: RX_RECORD_DEFINITION.resourceTypes.integer\n      },\n      {\n        id: RX_WEB_API_CONNECTIONS.fieldIds.authentication,\n        resourceType: RX_RECORD_DEFINITION.resourceTypes.character\n      },\n      {\n        id: RX_RECORD_DEFINITION.coreFieldIds.id,\n        resourceType: RX_RECORD_DEFINITION.resourceTypes.character\n      }\n    ]\n  };\n\n  constructor(\n    private rxModalService: RxModalService,\n    private rxCurrentUserService: RxCurrentUserService,\n    private rxWebAPIConnectionsService: RxWebAPIConnectionsService,\n    private rxNotificationService: RxNotificationService,\n    private rxRecordInstanceService: RxRecordInstanceService,\n    private componentFactoryResolver: ComponentFactoryResolver,\n    private rxWizardService: RxWizardService,\n    private translateService: TranslateService\n  ) {\n    this.gridConfig$ = new Observable((observer) => {\n      observer.next({\n        recordDefinitionName: RX_WEB_API_CONNECTIONS.recordDefinitionName,\n        columns: this.getWebApiConnectionColumns(),\n        actionButtons: this.getActionButtons(),\n        getRecordDefinition: () => of(this.recordDefinition),\n        styles: 'flex-fill'\n      });\n\n      observer.complete();\n    });\n  }\n\n  save(): void {\n    const saveConnection$ = this.isNewConfiguration\n      ? this.rxWebAPIConnectionsService.create(this.webApiConnectionWizardContext.webApiConnection)\n      : this.rxWebAPIConnectionsService.save(\n          this.webApiConnectionWizardContext.webApiConnection,\n          this.currentRecordInstanceId\n        );\n\n    saveConnection$\n      .pipe(\n        catchError((error) => {\n          this.rxNotificationService.addErrorMessage(\n            this.translateService.instant('com.bmc.arsys.rx.client.admin.web-api-connections.failed-to-save.message')\n          );\n\n          return throwError(error);\n        })\n      )\n      .subscribe((response) => {\n        this.rxNotificationService.addSuccessMessage(\n          this.translateService.instant('com.bmc.arsys.rx.client.admin.web-api-connections.connection-saved.message')\n        );\n        this.webApiConnectionsRecordGrid.api.refresh().subscribe();\n      });\n  }\n\n  private getActionButtons(): IRecordGridActionButton[] {\n    return [\n      {\n        label: this.translateService.instant('com.bmc.arsys.rx.client.common.delete.label'),\n        style: 'tertiary',\n        iconCls: 'trash',\n        actions: [\n          {\n            name: () => {\n              {\n                this.rxModalService\n                  .confirm({\n                    title: this.translateService.instant('com.bmc.arsys.rx.client.common.warning.label'),\n                    modalStyle: RX_MODAL.modalStyles.warning,\n                    message: this.translateService.instant(\n                      'com.bmc.arsys.rx.client.admin.web-api-connections.delete-confirmation.message'\n                    )\n                  })\n                  .then((result: boolean) => {\n                    if (result)\n                      this.rxWebAPIConnectionsService\n                        .deleteRecords(this.webApiConnectionsRecordGrid.api)\n                        .subscribe((response) => {\n                          this.rxNotificationService.addSuccessMessage(\n                            this.translateService.instant(\n                              'com.bmc.arsys.rx.client.admin.web-api-connections.deleted.message'\n                            )\n                          );\n                          this.webApiConnectionsRecordGrid.api.refresh().subscribe();\n                        });\n                  });\n              }\n            }\n          }\n        ]\n      }\n    ];\n  }\n\n  private getWebApiConnectionColumns(): IRecordGridColumn[] {\n    return [\n      {\n        fieldId: `${RX_RECORD_DEFINITION.coreFieldIds.description}`,\n        index: 0,\n        title: this.translateService.instant('com.bmc.arsys.rx.client.common.name.label'),\n        clickable: true,\n        actions: [\n          {\n            name: (previousActionResult: any, lastActionRow: IRowDataItem) => this.editWebApiConnection(lastActionRow)\n          }\n        ]\n      },\n      {\n        fieldId: `${RX_WEB_API_CONNECTIONS.fieldIds.hostname}`,\n        index: 1,\n        title: this.translateService.instant(\n          'com.bmc.arsys.rx.client.admin.data-source-connection-properties.host-name.label'\n        )\n      },\n      {\n        fieldId: `${RX_WEB_API_CONNECTIONS.fieldIds.port}`,\n        index: 2,\n        title: this.translateService.instant(\n          'com.bmc.arsys.rx.client.admin.data-source-connection-properties.port.label'\n        ),\n        cellTemplate: this.portCellTemplate\n      },\n      {\n        fieldId: `${RX_WEB_API_CONNECTIONS.fieldIds.authentication}`,\n        index: 3,\n        title: this.translateService.instant(\n          'com.bmc.arsys.rx.client.admin.data-source-connection-properties.authentication.label'\n        ),\n        visible: false\n      },\n      {\n        fieldId: `${RX_RECORD_DEFINITION.coreFieldIds.id}`,\n        index: 4,\n        title: this.translateService.instant('com.bmc.arsys.rx.client.common.id.label'),\n        visible: false\n      }\n    ];\n  }\n\n  private resetFields(): void {\n    this.webApiConnectionWizardContext = cloneDeep(RX_WEB_API_CONNECTIONS.wizardContext);\n    this.webApiConnectionWizardContext.webApiConnection.authTypeCode = [RX_WEB_API_CONNECTIONS.authTypeOptions[0]];\n    this.webApiConnectionWizardContext.webApiConnection.secure = [RX_WEB_API_CONNECTIONS.protocolTypeOptions[0]];\n    this.webApiConnectionWizardContext.webApiConnection.authTypeDetails.grantType = [\n      RX_WEB_API_CONNECTIONS.grantTypeOptions[0]\n    ];\n  }\n\n  private openWizard(wizardTitle: string, isEdit: boolean): void {\n    const wizardOptions = {\n      title: wizardTitle,\n      allowFinish: true,\n      finishButtonLabel: this.translateService.instant('com.bmc.arsys.rx.client.common.save.label'),\n      steps: [\n        {\n          id: 'general',\n          name: this.translateService.instant('com.bmc.arsys.rx.client.common.general-items.label'),\n          componentFactory: this.componentFactoryResolver.resolveComponentFactory(GeneralWizardStepComponent)\n        },\n        {\n          id: 'authentication',\n          name: this.translateService.instant(\n            'com.bmc.arsys.rx.client.admin.data-source-connection-properties.authentication.label'\n          ),\n          componentFactory: this.componentFactoryResolver.resolveComponentFactory(AuthenticationWizardStepComponent)\n        }\n      ]\n    };\n\n    this.rxWizardService\n      .open<IWebApiConnectionWizardContext>({\n        context: this.webApiConnectionWizardContext,\n        options: wizardOptions\n      })\n      .then((result) => {\n        if (isObject(result)) {\n          this.save();\n        }\n      });\n  }\n\n  createWebApiConnection(): void {\n    this.resetFields();\n    this.isNewConfiguration = true;\n    this.openWizard(\n      this.translateService.instant('com.bmc.arsys.rx.client.admin.web-api-connections.new-web-api-connection.label'),\n      false\n    );\n  }\n\n  private editWebApiConnection(selectedRecord: IRowDataItem): void {\n    this.resetFields();\n    this.isNewConfiguration = false;\n    this.currentRecordInstanceId = selectedRecord[RX_RECORD_DEFINITION.coreFieldIds.id];\n\n    const currentRecordInstance = this.rxRecordInstanceService.get(\n      RX_WEB_API_CONNECTIONS.recordDefinitionName,\n      selectedRecord[RX_RECORD_DEFINITION.coreFieldIds.id]\n    );\n\n    currentRecordInstance.subscribe((recordInstance) => {\n      const authTypeId = recordInstance.fieldInstances[RX_WEB_API_CONNECTIONS.fieldIds.authType].value;\n      const authTypeOption: RxSelectOption = find(RX_WEB_API_CONNECTIONS.authTypeOptions, { id: authTypeId });\n\n      const credentials = JSON.parse(\n        recordInstance.fieldInstances[RX_WEB_API_CONNECTIONS.fieldIds.authentication].value\n      );\n\n      const protocolId = recordInstance.fieldInstances[RX_WEB_API_CONNECTIONS.fieldIds.protocol].value;\n      const protocolOption: RxSelectOption = find(RX_WEB_API_CONNECTIONS.protocolTypeOptions, { id: protocolId });\n\n      this.webApiConnectionWizardContext.webApiConnection.name =\n        recordInstance.fieldInstances[RX_RECORD_DEFINITION.coreFieldIds.description].value;\n      this.webApiConnectionWizardContext.webApiConnection.hostname =\n        recordInstance.fieldInstances[RX_WEB_API_CONNECTIONS.fieldIds.hostname].value;\n      this.webApiConnectionWizardContext.webApiConnection.port =\n        recordInstance.fieldInstances[RX_WEB_API_CONNECTIONS.fieldIds.port].value;\n      this.webApiConnectionWizardContext.webApiConnection.secure = [protocolOption];\n      this.webApiConnectionWizardContext.webApiConnection.authTypeCode = [authTypeOption];\n      this.webApiConnectionWizardContext.wizardSteps[1].fields = find(RX_WEB_API_CONNECTIONS.authTypeFields, {\n        id: authTypeId\n      }).fields;\n\n      this.webApiConnectionWizardContext.webApiConnection.authTypeDetails.httpHeaders = credentials['httpHeaders'];\n\n      if (authTypeId === RX_WEB_API_CONNECTIONS.authTypes.oAuth2) {\n        this.webApiConnectionWizardContext.webApiConnection.authTypeDetails.authServerEndpoint =\n          credentials['authServerEndpoint'];\n        this.webApiConnectionWizardContext.webApiConnection.authTypeDetails.redirectUri = credentials['redirectUri'];\n        this.webApiConnectionWizardContext.webApiConnection.authTypeDetails.scope = credentials['scope'];\n        this.webApiConnectionWizardContext.webApiConnection.authTypeDetails.tokenPath = credentials['tokenPath'];\n\n        this.webApiConnectionWizardContext.webApiConnection.authTypeDetails.tokenFetchMechanism =\n          credentials['tokenFetchMechanism'];\n\n        this.webApiConnectionWizardContext.webApiConnection.authTypeDetails.additionalFormParams =\n          credentials['additionalFormParams'];\n      }\n\n      if (\n        authTypeId === RX_WEB_API_CONNECTIONS.authTypes.rsso ||\n        authTypeId === RX_WEB_API_CONNECTIONS.authTypes.oAuthTokenExchange\n      ) {\n        this.webApiConnectionWizardContext.webApiConnection.authTypeDetails.loginName = credentials['loginName'];\n        this.webApiConnectionWizardContext.webApiConnection.authTypeDetails.tokenPath = credentials['tokenPath'];\n        this.webApiConnectionWizardContext.webApiConnection.authTypeDetails.authServerEndpoint =\n          credentials['authServerEndpoint'];\n      }\n\n      if (authTypeId === RX_WEB_API_CONNECTIONS.authTypes.oAuthTokenExchange) {\n        this.webApiConnectionWizardContext.webApiConnection.authTypeDetails.resources = credentials['resources'];\n      }\n\n      if (authTypeId === RX_WEB_API_CONNECTIONS.authTypes.custom) {\n        this.webApiConnectionWizardContext.webApiConnection.authTypeDetails.queryParams = credentials['queryParams'];\n      } else {\n        this.webApiConnectionWizardContext.webApiConnection.authTypeDetails.credentials =\n          RX_WEB_API_CONNECTIONS.passwordMask;\n        this.webApiConnectionWizardContext.webApiConnection.authTypeDetails.username = credentials['username'];\n      }\n\n      this.webApiConnectionWizardContext.isEditMode = true;\n      this.openWizard(\n        this.translateService.instant(\n          'com.bmc.arsys.rx.client.admin.web-api-connections.edit-web-api-connection.label'\n        ),\n        true\n      );\n    });\n  }\n}\n","<rx-admin-settings header=\"{{ 'com.bmc.arsys.rx.client.admin.web-api-connections.header.title' | translate }}\">\n  <button\n    adapt-button\n    type=\"button\"\n    btn-type=\"tertiary\"\n    class=\"d-icon-plus_circle align-self-start\"\n    rx-id=\"new-button\"\n    (click)=\"createWebApiConnection()\"\n  >\n    {{ 'com.bmc.arsys.rx.client.common.new.label' | translate }}\n  </button>\n  <rx-record-grid rx-id=\"web-api-grid\" #webApiConnectionsRecordGrid [config]=\"gridConfig$\"> </rx-record-grid>\n\n  <ng-template #portCellTemplate let-dataItem=\"dataItem\" let-column=\"column\">\n    {{ dataItem[column.field] }}\n  </ng-template>\n</rx-admin-settings>\n","import { ComponentFactoryResolver, NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { RxViewComponentRegistryService } from '@helix/platform/view/api';\nimport { WebApiConnectionsAdminComponent } from './web-api-connections.component';\nimport { RecordGridModule } from '@helix/platform/view/components';\nimport { RX_APPLICATION } from '@helix/platform/shared/api';\nimport {\n  AdaptAlertModule,\n  AdaptButtonModule,\n  AdaptRxCounterModule,\n  AdaptRxFormControlModule,\n  AdaptRxRadiobuttonModule,\n  AdaptRxSelectModule,\n  AdaptRxTextfieldModule,\n  AdaptTabsModule\n} from '@bmc-ux/adapt-angular';\nimport { FormsModule } from '@angular/forms';\nimport { AdminSettingsModule } from '@helix/platform/shared/components';\nimport { RxDirectivesModule, RxNameValuePairsEditorModule } from '@helix/platform/ui-kit';\nimport { WebApiConnectionWizardStepFieldsComponent } from './web-api-connection-wizard-step-fields/web-api-connection-wizard-step-fields.component';\nimport { GeneralWizardStepComponent } from './general-wizard-step/general-wizard-step.component';\nimport { AuthenticationWizardStepComponent } from './authentication-wizard-step/authentication-wizard-step.component';\nimport { TranslateModule } from '@ngx-translate/core';\n\n@NgModule({\n  declarations: [\n    WebApiConnectionsAdminComponent,\n    WebApiConnectionWizardStepFieldsComponent,\n    GeneralWizardStepComponent,\n    AuthenticationWizardStepComponent\n  ],\n  imports: [\n    CommonModule,\n    FormsModule,\n    AdminSettingsModule,\n    RecordGridModule,\n    AdaptAlertModule,\n    AdaptButtonModule,\n    AdaptRxTextfieldModule,\n    AdaptButtonModule,\n    AdaptRxSelectModule,\n    AdaptTabsModule,\n    AdaptRxRadiobuttonModule,\n    AdaptRxFormControlModule,\n    RxNameValuePairsEditorModule,\n    AdaptRxCounterModule,\n    RxDirectivesModule,\n    TranslateModule\n  ],\n  entryComponents: [WebApiConnectionsAdminComponent]\n})\nexport class WebApiConnectionsRegistrationModule {\n  constructor(\n    private componentFactoryResolver: ComponentFactoryResolver,\n    private rxViewComponentRegistryService: RxViewComponentRegistryService\n  ) {\n    rxViewComponentRegistryService.register({\n      type: 'rx-admin-web-api-connections',\n      componentFactory: this.componentFactoryResolver.resolveComponentFactory(WebApiConnectionsAdminComponent),\n      name: 'Web API connections',\n      isPageComponent: true,\n      availableInBundles: [RX_APPLICATION.settingsBundleId]\n    });\n  }\n}\n","export const RX_WEBHOOK_CALLBACK_CONFIGURATION = {\n  recordDefinition: {\n    name: 'Webhook Callback Processor Configuration',\n    fieldIds: {\n      name: 56600,\n      processor: 56601,\n      bundleId: 56602,\n      configMetadata: 56603\n    }\n  }\n};\n","import { HttpClient } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\nimport { Observable } from 'rxjs';\nimport { IMetadataFieldResponse } from './webhook-callback-configuration.interface';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class RxWebhookCallbackConfigurationService {\n  private metadataFieldData: Observable<IMetadataFieldResponse> = this.httpClient.get<IMetadataFieldResponse>(\n    '/api/rx/application/webhook/processorsmetadata'\n  );\n\n  constructor(private httpClient: HttpClient) {}\n\n  getMetadataFields(): Observable<IMetadataFieldResponse> {\n    return this.metadataFieldData;\n  }\n}\n","import { Component, Injector, OnInit } from '@angular/core';\nimport { FormBuilder, FormControl, FormGroup } from '@angular/forms';\nimport { DismissReasons, DockedPanelContext, RxSelectOption } from '@bmc-ux/adapt-angular';\nimport {\n  IRecordDefinition,\n  RecordInstance,\n  RX_RECORD_DEFINITION,\n  RxRecordDefinitionCacheService,\n  RxRecordInstanceService\n} from '@helix/platform/record/api';\nimport { RxModalClass } from '@helix/platform/ui-kit';\nimport { RxJsonParserService } from '@helix/platform/utils';\nimport { TranslateService } from '@ngx-translate/core';\nimport { chain, find, forEach, has } from 'lodash';\nimport {\n  IBundleDescriptor,\n  RxGlobalCacheService,\n  RxNotificationService,\n  RxOverlayService\n} from '@helix/platform/shared/api';\nimport { RX_WEBHOOK_CALLBACK_CONFIGURATION } from '../webhook-callback-configuration.constant';\nimport { IMetadataField } from '../webhook-callback-configuration.interface';\nimport { RxWebhookCallbackConfigurationService } from '../webhook-callback-configuration.service';\n\n@Component({\n  selector: 'rx-webhook-callback-configuration',\n  templateUrl: './webhook-callback-configuration-editor.component.html',\n  styleUrls: ['./webhook-callback-configuration-editor.component.scss']\n})\nexport class WebhookCallbackConfigurationEditorComponent extends RxModalClass implements OnInit {\n  private defaultControls: any = {\n    configurationName: '',\n    bundleId: [],\n    processor: []\n  };\n\n  private recordInstance: RecordInstance;\n\n  metadataFields: IMetadataField[];\n  bundleIdOptions: RxSelectOption[];\n  processorOptions: RxSelectOption[];\n  isEditMode: boolean;\n  callbackUrl: string;\n\n  webhookCallbackConfigurationForm: FormGroup;\n\n  constructor(\n    private dockedPanelContext: DockedPanelContext,\n    private rxGlobalCacheService: RxGlobalCacheService,\n    private rxRecordDefinitionCacheService: RxRecordDefinitionCacheService,\n    private rxRecordInstanceService: RxRecordInstanceService,\n    private rxWebhookCallbackConfigurationService: RxWebhookCallbackConfigurationService,\n    private rxOverlayService: RxOverlayService,\n    private rxJsonParserService: RxJsonParserService,\n    private rxNotificationService: RxNotificationService,\n    private formBuilder: FormBuilder,\n    private translateService: TranslateService,\n    protected injector: Injector\n  ) {\n    super(dockedPanelContext, injector);\n  }\n\n  ngOnInit() {\n    super.ngOnInit();\n\n    this.webhookCallbackConfigurationForm = this.formBuilder.group(this.defaultControls);\n    this.isEditMode = this.dockedPanelContext.getData().isEditMode;\n\n    this.rxGlobalCacheService.getBundleDescriptors().subscribe((bundleDescriptors: IBundleDescriptor[]) => {\n      this.bundleIdOptions = bundleDescriptors\n        .filter((bundleDescriptor) => bundleDescriptor.isApplication)\n        .sort((a: IBundleDescriptor, b: IBundleDescriptor) => a.friendlyName.localeCompare(b.friendlyName))\n        .map((bundleDescriptor: IBundleDescriptor) => ({\n          displayValue: bundleDescriptor.friendlyName,\n          value: bundleDescriptor.id\n        }));\n    });\n\n    this.rxRecordDefinitionCacheService\n      .getRecordDefinition(RX_WEBHOOK_CALLBACK_CONFIGURATION.recordDefinition.name)\n      .subscribe((recordDefinition: IRecordDefinition) => {\n        this.processorOptions = chain(recordDefinition.fieldDefinitions)\n          .find({\n            id: RX_WEBHOOK_CALLBACK_CONFIGURATION.recordDefinition.fieldIds.processor\n          })\n          .get('optionNamesById')\n          .map((optionName, optionId) => ({\n            displayValue: optionName,\n            value: optionId\n          }))\n          .value();\n      });\n\n    if (!this.isEditMode) {\n      this.rxRecordInstanceService\n        .getNew(RX_WEBHOOK_CALLBACK_CONFIGURATION.recordDefinition.name)\n        .subscribe((recordInstance: RecordInstance) => (this.recordInstance = recordInstance));\n    } else {\n      this.rxRecordInstanceService\n        .get(RX_WEBHOOK_CALLBACK_CONFIGURATION.recordDefinition.name, this.dockedPanelContext.getData().recordId)\n        .subscribe((recordInstance: RecordInstance) => {\n          this.recordInstance = recordInstance;\n          this.setFormControlValues();\n\n          this.callbackUrl = [\n            location.origin,\n            'api/rx/application/webhook_callback',\n            this.recordInstance.fieldInstances[RX_RECORD_DEFINITION.coreFieldIds.id].value,\n            this.rxOverlayService.getCurrentOverlayContext().tenantId\n          ].join('/');\n\n          this.metadataFields = this.rxJsonParserService.tryParseJson(\n            this.recordInstance.fieldInstances[\n              RX_WEBHOOK_CALLBACK_CONFIGURATION.recordDefinition.fieldIds.configMetadata\n            ].value\n          );\n\n          this.generateMetadataFieldFormControls();\n        });\n    }\n  }\n\n  isDirty(): boolean {\n    return this.webhookCallbackConfigurationForm.dirty;\n  }\n\n  private setFormControlValues(): void {\n    this.webhookCallbackConfigurationForm\n      .get('configurationName')\n      .setValue(\n        this.recordInstance.fieldInstances[RX_WEBHOOK_CALLBACK_CONFIGURATION.recordDefinition.fieldIds.name].value\n      );\n\n    const bundleOption: RxSelectOption = find(this.bundleIdOptions, {\n      value:\n        this.recordInstance.fieldInstances[RX_WEBHOOK_CALLBACK_CONFIGURATION.recordDefinition.fieldIds.bundleId].value\n    });\n\n    this.webhookCallbackConfigurationForm.get('bundleId').setValue([\n      {\n        value: bundleOption.value,\n        displayValue: bundleOption.displayValue\n      }\n    ]);\n\n    const processorOption: RxSelectOption = find(this.processorOptions, {\n      value: String(\n        this.recordInstance.fieldInstances[RX_WEBHOOK_CALLBACK_CONFIGURATION.recordDefinition.fieldIds.processor].value\n      )\n    });\n\n    this.webhookCallbackConfigurationForm.get('processor').setValue([\n      {\n        value: processorOption.value,\n        displayValue: processorOption.displayValue\n      }\n    ]);\n  }\n\n  private removeMetadataFieldFormControls(): void {\n    Object.keys(this.webhookCallbackConfigurationForm.controls).forEach((key) => {\n      if (!has(this.defaultControls, key)) {\n        this.webhookCallbackConfigurationForm.removeControl(key);\n      }\n    });\n  }\n\n  private generateMetadataFieldFormControls(): void {\n    this.metadataFields.forEach((field: IMetadataField) => {\n      this.webhookCallbackConfigurationForm.addControl(field.name, new FormControl(field.value || ''));\n    });\n  }\n\n  loadMetadataFields(): void {\n    this.rxWebhookCallbackConfigurationService.getMetadataFields().subscribe((metadataFieldsByProcessorId) => {\n      this.metadataFields =\n        metadataFieldsByProcessorId[this.webhookCallbackConfigurationForm.get('processor').value[0].value];\n\n      this.removeMetadataFieldFormControls();\n      this.generateMetadataFieldFormControls();\n    });\n  }\n\n  saveConfiguration(): void {\n    this.recordInstance.setFieldValue(\n      RX_WEBHOOK_CALLBACK_CONFIGURATION.recordDefinition.fieldIds.name,\n      this.webhookCallbackConfigurationForm.get('configurationName').value\n    );\n\n    this.recordInstance.setFieldValue(\n      RX_WEBHOOK_CALLBACK_CONFIGURATION.recordDefinition.fieldIds.bundleId,\n      this.webhookCallbackConfigurationForm.get('bundleId').value[0].value\n    );\n\n    this.recordInstance.setFieldValue(\n      RX_WEBHOOK_CALLBACK_CONFIGURATION.recordDefinition.fieldIds.processor,\n      this.webhookCallbackConfigurationForm.get('processor').value[0].value\n    );\n\n    forEach(this.metadataFields, (field: IMetadataField) => {\n      field.value = this.webhookCallbackConfigurationForm.get(field.name).value;\n    });\n\n    this.recordInstance.setFieldValue(\n      RX_WEBHOOK_CALLBACK_CONFIGURATION.recordDefinition.fieldIds.configMetadata,\n      JSON.stringify(this.metadataFields)\n    );\n\n    if (this.isEditMode) {\n      this.rxRecordInstanceService.save(this.recordInstance).subscribe(() => this.successCallback());\n    } else {\n      this.rxRecordInstanceService.create(this.recordInstance).subscribe(() => this.successCallback());\n    }\n  }\n\n  private successCallback(): void {\n    this.rxNotificationService.addSuccessMessage(\n      this.translateService.instant(\n        'com.bmc.arsys.rx.client.admin.webhook-callback-configuration.configurations-saved.message'\n      )\n    );\n    this.dockedPanelContext.close(null);\n  }\n\n  optionFormatter(option: RxSelectOption): string {\n    return option.displayValue;\n  }\n\n  cancel(): void {\n    this.dockedPanelContext.dismiss(DismissReasons.CLOSE_BTN);\n  }\n}\n","<div class=\"dp-body\">\n  <form [formGroup]=\"webhookCallbackConfigurationForm\">\n    <adapt-rx-textfield\n      class=\"form-group d-block\"\n      rx-id=\"configuration-name\"\n      label=\"{{ 'com.bmc.arsys.rx.client.admin.webhook-callback-configuration.configuration-name.label' | translate }}\"\n      formControlName=\"configurationName\"\n      required=\"true\"\n    >\n    </adapt-rx-textfield>\n\n    <adapt-rx-select\n      class=\"form-group d-block\"\n      label=\"{{ 'com.bmc.arsys.rx.client.admin.webhook-callback-configuration.bundle-name.label' | translate }}\"\n      rx-id=\"bundle-name\"\n      formControlName=\"bundleId\"\n      [options]=\"bundleIdOptions\"\n      [optionFormatter]=\"optionFormatter\"\n      required=\"true\"\n    >\n    </adapt-rx-select>\n\n    <adapt-rx-select\n      class=\"form-group d-block\"\n      label=\"{{ 'com.bmc.arsys.rx.client.admin.webhook-callback-configuration.processor.label' | translate }}\"\n      rx-id=\"processor\"\n      formControlName=\"processor\"\n      [options]=\"processorOptions\"\n      [optionFormatter]=\"optionFormatter\"\n      required=\"true\"\n      (onSelectionChange)=\"loadMetadataFields()\"\n    >\n    </adapt-rx-select>\n\n    <adapt-rx-textfield\n      class=\"form-group d-block\"\n      *ngFor=\"let field of metadataFields\"\n      label=\"{{ field.name }}\"\n      [isPassword]=\"field.secure\"\n      formControlName=\"{{ field.name }}\"\n      required=\"true\"\n    >\n    </adapt-rx-textfield>\n\n    <div class=\"form-group\">\n      <label class=\"form-control-label\">{{\n        'com.bmc.arsys.rx.client.admin.webhook-callback-configuration.callback-url.label' | translate\n      }}</label>\n\n      <div class=\"callback-url bg-secondary p-1\" *ngIf=\"isEditMode\">\n        {{ callbackUrl }}\n      </div>\n\n      <adapt-alert\n        *ngIf=\"!isEditMode\"\n        [config]=\"{\n          content: 'com.bmc.arsys.rx.client.admin.webhook-callback-configuration.url-alert.message' | translate,\n          type: 'inline',\n          variant: 'info'\n        }\"\n      ></adapt-alert>\n    </div>\n  </form>\n</div>\n\n<div class=\"dp-footer\">\n  <button\n    type=\"button\"\n    adapt-button\n    btn-type=\"primary\"\n    rx-id=\"save-button\"\n    class=\"mr-2\"\n    [disabled]=\"webhookCallbackConfigurationForm.pristine || webhookCallbackConfigurationForm.invalid\"\n    (click)=\"saveConfiguration()\"\n  >\n    {{ 'com.bmc.arsys.rx.client.common.save.label' | translate }}\n  </button>\n\n  <button type=\"button\" adapt-button (click)=\"cancel()\" btn-type=\"secondary\" rx-id=\"cancel-button\">\n    {{ 'com.bmc.arsys.rx.client.common.cancel.label' | translate }}\n  </button>\n</div>\n","import { Component, OnInit, ViewChild } from '@angular/core';\nimport { FormBuilder } from '@angular/forms';\nimport { RX_RECORD_DEFINITION, RxRecordInstanceService } from '@helix/platform/record/api';\nimport { RxNotificationService } from '@helix/platform/shared/api';\nimport { RX_MODAL, RxModalService } from '@helix/platform/ui-kit';\nimport { IRowDataItem } from '@helix/platform/view/api';\nimport {\n  IRecordGridColumn,\n  IRecordGridConfig,\n  RecordGridComponent,\n  RowSelectionMode\n} from '@helix/platform/view/components';\nimport { map, noop } from 'lodash';\nimport { forkJoin, Observable, of } from 'rxjs';\nimport { WebhookCallbackConfigurationEditorComponent } from './webhook-callback-configuration-editor/webhook-callback-configuration-editor.component';\nimport { RX_WEBHOOK_CALLBACK_CONFIGURATION } from './webhook-callback-configuration.constant';\nimport { TranslateService } from '@ngx-translate/core';\n\n@Component({\n  selector: 'rx-admin-webhook-callback-configuration',\n  templateUrl: './webhook-callback-configuration.component.html'\n})\nexport class WebhookCallbackConfigurationAdminComponent implements OnInit {\n  gridConfig: Observable<IRecordGridConfig>;\n\n  @ViewChild('grid', { static: true })\n  grid: RecordGridComponent;\n\n  constructor(\n    private formBuilder: FormBuilder,\n    private rxModalService: RxModalService,\n    private rxNotificationService: RxNotificationService,\n    private rxRecordInstanceService: RxRecordInstanceService,\n    private translateService: TranslateService\n  ) {}\n\n  ngOnInit(): void {\n    this.gridConfig = of({\n      actionButtons: [\n        {\n          label: this.translateService.instant('com.bmc.arsys.rx.client.common.delete.label'),\n          style: 'tertiary',\n          icon: 'trash',\n          actions: [\n            {\n              name: () => this.deleteConfigurations()\n            }\n          ]\n        }\n      ],\n      recordDefinitionName: RX_WEBHOOK_CALLBACK_CONFIGURATION.recordDefinition.name,\n      enableRowSelection: RowSelectionMode.Multiple,\n      columns: this.getColumns(),\n      styles: 'flex-fill'\n    });\n  }\n\n  private editConfiguration(selectedRecord: IRowDataItem): void {\n    this.openDockedPanel(true, selectedRecord[RX_RECORD_DEFINITION.coreFieldIds.id]);\n  }\n\n  createConfiguration(): void {\n    this.openDockedPanel(false);\n  }\n\n  private deleteConfigurations(): void {\n    this.rxModalService\n      .confirm({\n        title: this.translateService.instant('com.bmc.arsys.rx.client.common.warning.label'),\n        modalStyle: RX_MODAL.modalStyles.warning,\n        message: this.translateService.instant(\n          'com.bmc.arsys.rx.client.admin.webhook-callback-configuration.delete-confirmation.message'\n        )\n      })\n      .then((result: boolean) => {\n        if (result) {\n          const deleteRequests$: Observable<any>[] = [];\n\n          map(this.grid.api.getSelectedRows(), (record) => {\n            deleteRequests$.push(\n              this.rxRecordInstanceService.delete(\n                RX_WEBHOOK_CALLBACK_CONFIGURATION.recordDefinition.name,\n                record[RX_RECORD_DEFINITION.coreFieldIds.id]\n              )\n            );\n          });\n\n          forkJoin(deleteRequests$).subscribe(() => {\n            this.rxNotificationService.addSuccessMessage(\n              this.translateService.instant(\n                'com.bmc.arsys.rx.client.admin.webhook-callback-configuration.configurations-deleted.message'\n              )\n            );\n            this.grid.api.refresh().subscribe();\n          });\n        }\n      });\n  }\n\n  private getColumns(): IRecordGridColumn[] {\n    return [\n      {\n        index: 0,\n        title: this.translateService.instant('com.bmc.arsys.rx.client.common.name.label'),\n        fieldId: String(RX_WEBHOOK_CALLBACK_CONFIGURATION.recordDefinition.fieldIds.name),\n        clickable: true,\n        actions: [\n          {\n            name: (previousAction: any, selectedRow: IRowDataItem) => {\n              this.editConfiguration(selectedRow);\n            }\n          }\n        ]\n      },\n      {\n        index: 1,\n        title: this.translateService.instant(\n          'com.bmc.arsys.rx.client.admin.webhook-callback-configuration.application.label'\n        ),\n        fieldId: String(RX_WEBHOOK_CALLBACK_CONFIGURATION.recordDefinition.fieldIds.processor)\n      },\n      {\n        index: 2,\n        title: this.translateService.instant(\n          'com.bmc.arsys.rx.client.admin.webhook-callback-configuration.created-date.label'\n        ),\n        fieldId: String(RX_RECORD_DEFINITION.coreFieldIds.createdDate)\n      }\n    ];\n  }\n\n  private openDockedPanel(isEditMode: boolean, recordId?: boolean): Promise<any> {\n    return this.rxModalService\n      .openDockedPanel({\n        title: this.translateService.instant(\n          'com.bmc.arsys.rx.client.admin.webhook-callback-configuration.header.title'\n        ),\n        content: WebhookCallbackConfigurationEditorComponent,\n        data: {\n          isEditMode,\n          recordId\n        }\n      })\n      .then(() => {\n        this.grid.api.refresh().subscribe();\n      })\n      .catch(noop);\n  }\n}\n","<rx-admin-settings\n  header=\"{{ 'com.bmc.arsys.rx.client.admin.webhook-callback-configuration.header.title' | translate }}\"\n>\n  <button\n    type=\"button\"\n    adapt-button\n    btn-type=\"tertiary\"\n    class=\"d-icon-plus_circle align-self-start\"\n    rx-id=\"new-configuration-button\"\n    (click)=\"this.createConfiguration()\"\n  >\n    {{ 'com.bmc.arsys.rx.client.common.new.label' | translate }}\n  </button>\n\n  <rx-record-grid #grid [config]=\"gridConfig\"></rx-record-grid>\n</rx-admin-settings>\n","import { CommonModule } from '@angular/common';\nimport { ComponentFactoryResolver, NgModule } from '@angular/core';\nimport { RX_APPLICATION } from '@helix/platform/shared/api';\nimport { RxViewComponentRegistryService } from '@helix/platform/view/api';\nimport { WebhookCallbackConfigurationEditorComponent } from './webhook-callback-configuration-editor/webhook-callback-configuration-editor.component';\nimport { WebhookCallbackConfigurationAdminComponent } from './webhook-callback-configuration.component';\nimport { AdminSettingsModule } from '@helix/platform/shared/components';\nimport { RecordGridModule } from '@helix/platform/view/components';\nimport {\n  AdaptAlertModule,\n  AdaptButtonModule,\n  AdaptRxSelectModule,\n  AdaptRxTextfieldModule\n} from '@bmc-ux/adapt-angular';\nimport { ReactiveFormsModule } from '@angular/forms';\nimport { TranslateModule } from '@ngx-translate/core';\n\n@NgModule({\n  declarations: [WebhookCallbackConfigurationAdminComponent, WebhookCallbackConfigurationEditorComponent],\n  imports: [\n    CommonModule,\n    AdminSettingsModule,\n    RecordGridModule,\n    AdaptButtonModule,\n    ReactiveFormsModule,\n    AdaptRxTextfieldModule,\n    AdaptRxSelectModule,\n    AdaptAlertModule,\n    TranslateModule\n  ],\n  entryComponents: [WebhookCallbackConfigurationAdminComponent]\n})\nexport class WebhookCallbackConfigurationRegistrationModule {\n  constructor(\n    private componentFactoryResolver: ComponentFactoryResolver,\n    private rxViewComponentRegistryService: RxViewComponentRegistryService\n  ) {\n    rxViewComponentRegistryService.register({\n      type: 'rx-admin-webhook-callback-configuration',\n      componentFactory: this.componentFactoryResolver.resolveComponentFactory(\n        WebhookCallbackConfigurationAdminComponent\n      ),\n      name: 'Webhook callback configuration',\n      isPageComponent: true,\n      availableInBundles: [RX_APPLICATION.settingsBundleId]\n    });\n  }\n}\n","import { HttpClient } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\nimport { IDataPageResult } from '@helix/platform/shared/api';\nimport { forkJoin, Observable } from 'rxjs';\nimport { map } from 'rxjs/operators';\nimport { ISearchFilter } from './search-filter.interface';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class RxSearchFiltersService {\n  constructor(private httpClient: HttpClient) {}\n\n  private readonly apiPath: string = '/api/com.bmc.dsm.chatbot/comaround';\n\n  getSearchFilters(): Observable<IDataPageResult<ISearchFilter>> {\n    return this.httpClient\n      .get<ISearchFilter[]>(`${this.apiPath}/search-filters`)\n      .pipe(map((items) => ({ data: items, totalSize: items.length })));\n  }\n\n  deleteSearchFilters(ids: string[]): Observable<any> {\n    return forkJoin(ids.map((id) => this.httpClient.delete<void>(`${this.apiPath}/search-filters/${id}`)));\n  }\n\n  createSearchFilter(filter: ISearchFilter): Observable<any> {\n    return this.httpClient.post<ISearchFilter>(`${this.apiPath}/search-filters`, filter);\n  }\n\n  updateSearchFilter(filter: ISearchFilter): Observable<ISearchFilter> {\n    return this.httpClient.put<ISearchFilter>(`${this.apiPath}/search-filters`, filter);\n  }\n\n  getTags(): Observable<string[]> {\n    return this.httpClient.get<string[]>(`${this.apiPath}/api/tags`);\n  }\n}\n","import { ChangeDetectionStrategy, Component, Injector, OnInit } from '@angular/core';\nimport { DismissReasons, DockedPanelContext } from '@bmc-ux/adapt-angular';\nimport { RxSearchFiltersService } from '../search-filters.service';\nimport { RxModalClass, RxModalService, RX_MODAL } from '@helix/platform/ui-kit';\nimport { FormControl, FormGroup } from '@angular/forms';\nimport { AdaptValidators } from '@bmc-ux/adapt-angular';\nimport { Observable } from 'rxjs';\nimport { debounceTime, distinctUntilChanged, map, shareReplay, tap, withLatestFrom } from 'rxjs/operators';\nimport { RxNotificationService } from '@helix/platform/shared/api';\nimport { TranslateService } from '@ngx-translate/core';\nimport { ISearchFilter } from '../search-filter.interface';\n\n@Component({\n  selector: 'rx-search-filters-editor',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n  templateUrl: './search-filters-editor.component.html'\n})\nexport class SearchFiltersEditorComponent extends RxModalClass implements OnInit {\n  constructor(\n    private rxSearchFiltersService: RxSearchFiltersService,\n    public dockedPanelContext: DockedPanelContext,\n    protected injector: Injector,\n    private rxNotificationService: RxNotificationService,\n    private translateService: TranslateService,\n    private rxModalService: RxModalService\n  ) {\n    super(dockedPanelContext, injector);\n  }\n\n  public readonly tagsOperators: string[] = ['OR', 'AND'];\n  private isEditMode = Boolean(this.dockedPanelContext.getData());\n  private tags$ = this.rxSearchFiltersService.getTags().pipe(shareReplay(1));\n\n  ngOnInit() {\n    if (this.isEditMode) {\n      this.searchFilterEditorFormGroup.setValue({\n        name: this.dockedPanelContext.getData().name,\n        tagsOperator: [this.dockedPanelContext.getData().tagsOperator],\n        tags: this.dockedPanelContext.getData().tags\n      });\n    }\n  }\n\n  searchFilterEditorFormGroup = new FormGroup({\n    name: new FormControl('', AdaptValidators.required()),\n    tagsOperator: new FormControl([], AdaptValidators.required()),\n    tags: new FormControl([], AdaptValidators.required())\n  });\n\n  tagSuggestions = (text$: Observable<string>) =>\n    text$.pipe(\n      debounceTime(200),\n      distinctUntilChanged(),\n      withLatestFrom(this.tags$),\n      map(([term, tags]) => tags.filter((tag) => tag.startsWith(term)))\n    );\n\n  save(): void {\n    const { id } = this.dockedPanelContext.getData() || {};\n    const [tagsOperator] = this.searchFilterEditorFormGroup.value.tagsOperator;\n\n    const filter: ISearchFilter = {\n      id,\n      ...this.searchFilterEditorFormGroup.getRawValue(),\n      tagsOperator\n    };\n\n    const operation = this.isEditMode\n      ? this.rxSearchFiltersService.updateSearchFilter(filter)\n      : this.rxSearchFiltersService.createSearchFilter(filter);\n\n    operation.subscribe(() => {\n      this.close();\n      this.rxNotificationService.addSuccessMessage(\n        this.translateService.instant('com.bmc.arsys.rx.client.common.saved-successfully.message')\n      );\n    });\n  }\n\n  close(): void {\n    this.dockedPanelContext.close(DismissReasons.CLOSE_BTN);\n  }\n\n  cancel(): void {\n    if (this.searchFilterEditorFormGroup.dirty) {\n      this.rxModalService\n        .confirm({\n          title: this.translateService.instant('com.bmc.arsys.rx.client.common.warning.label'),\n          modalStyle: RX_MODAL.modalStyles.warning,\n          message: this.translateService.instant('com.bmc.arsys.rx.client.common.unsaved-data.message')\n        })\n        .then((result: boolean) => {\n          if (result) {\n            this.close();\n          }\n        });\n    } else {\n      this.close();\n    }\n  }\n}\n","<div class=\"dp-body\">\n  <form [formGroup]=\"searchFilterEditorFormGroup\">\n    <div class=\"form-group\">\n      <adapt-rx-textfield\n        [formControlName]=\"'name'\"\n        [label]=\"'com.bmc.arsys.rx.client.admin.search-filters-editor.form-control.name.label' | translate\"\n      ></adapt-rx-textfield>\n    </div>\n\n    <div class=\"form-group\">\n      <adapt-rx-select\n        [formControlName]=\"'tagsOperator'\"\n        [options]=\"tagsOperators\"\n        [label]=\"'com.bmc.arsys.rx.client.admin.search-filters-editor.form-control.relationship.label' | translate\"\n        required\n      ></adapt-rx-select>\n    </div>\n\n    <div class=\"form-group\">\n      <adapt-tag-field\n        [formControlName]=\"'tags'\"\n        required\n        [suppressManual]=\"true\"\n        [label]=\"'com.bmc.arsys.rx.client.admin.search-filters-editor.form-control.tags.label' | translate\"\n        placeholder=\"\"\n        [search]=\"tagSuggestions\"\n        [openDropdownOnFocus]=\"true\"\n      ></adapt-tag-field>\n    </div>\n  </form>\n</div>\n\n<div class=\"dp-footer\">\n  <button\n    class=\"btn btn-primary mr-2\"\n    (click)=\"save()\"\n    [disabled]=\"this.searchFilterEditorFormGroup.invalid || !this.searchFilterEditorFormGroup.dirty\"\n  >\n    {{ 'com.bmc.arsys.rx.client.common.save.label' | translate }}\n  </button>\n\n  <button class=\"btn btn-secondary\" (click)=\"cancel()\">\n    {{ 'com.bmc.arsys.rx.client.common.cancel.label' | translate }}\n  </button>\n</div>\n","import { Component, OnInit, ViewChild, TemplateRef, ChangeDetectionStrategy } from '@angular/core';\nimport { BaseViewComponent } from '@helix/platform/view/runtime';\nimport { AdaptDockedPanelService } from '@bmc-ux/adapt-angular';\nimport { DataCellTemplateParams } from '@bmc-ux/adapt-table';\nimport { ISearchFilter } from './search-filter.interface';\n\nimport {\n  IRecordGridActionButton,\n  IRecordGridColumn,\n  IRecordGridConfig,\n  RecordGridComponent,\n  RecordGridFilterMode,\n  RowSelectionMode\n} from '@helix/platform/view/components';\n\nimport { Observable, of } from 'rxjs';\nimport { IRecordDefinition, RX_RECORD_DEFINITION } from '@helix/platform/record/api';\nimport { RxSearchFiltersService } from './search-filters.service';\nimport { IRowDataItem } from '@helix/platform/view/api';\nimport { SearchFiltersEditorComponent } from './search-filters-editor/search-filters-editor.component';\nimport { RxModalService, RX_MODAL } from '@helix/platform/ui-kit';\nimport { RxNotificationService } from '@helix/platform/shared/api';\nimport { TranslateService } from '@ngx-translate/core';\nimport { noop } from 'lodash';\n\n@Component({\n  selector: 'rx-search-filters',\n  changeDetection: ChangeDetectionStrategy.OnPush,\n  templateUrl: './search-filters.component.html'\n})\nexport class RxSearchFiltersComponent extends BaseViewComponent implements OnInit {\n  constructor(\n    private rxModalService: RxModalService,\n    private rxNotificationService: RxNotificationService,\n    private adaptDockedPanelService: AdaptDockedPanelService,\n    private rxSearchFiltersService: RxSearchFiltersService,\n    private translateService: TranslateService\n  ) {\n    super();\n  }\n\n  @ViewChild(RecordGridComponent, { static: true })\n  grid: RecordGridComponent;\n\n  @ViewChild('tagsTemplate', { static: true })\n  tagsTemplate: TemplateRef<DataCellTemplateParams>;\n\n  public recordGridConfig$: Observable<IRecordGridConfig>;\n  public searchFilters: ISearchFilter[] = [];\n\n  ngOnInit() {\n    this.initializeRecordGrid();\n  }\n\n  private initializeRecordGrid(): void {\n    const gridColumns: IRecordGridColumn[] = [\n      {\n        fieldId: 'id',\n        title: this.translateService.instant('com.bmc.arsys.rx.client.admin.search-filters.grid.column.id.title'),\n        visible: false\n      },\n      {\n        fieldId: 'name',\n        title: this.translateService.instant(\n          'com.bmc.arsys.rx.client.admin.search-filters.grid.column.search-filter-name.title'\n        ),\n        clickable: true,\n        actions: [\n          {\n            name: (previousActionResult: any, rowDataItem: IRowDataItem) => {\n              this.openEditor(rowDataItem);\n            }\n          }\n        ]\n      },\n      {\n        fieldId: 'tagsOperator',\n        title: this.translateService.instant(\n          'com.bmc.arsys.rx.client.admin.search-filters.grid.column.relationship.title'\n        )\n      },\n      {\n        fieldId: 'tags',\n        title: this.translateService.instant('com.bmc.arsys.rx.client.admin.search-filters.grid.column.tags.title'),\n        cellTemplate: this.tagsTemplate\n      }\n    ];\n\n    const gridRecordDefinition: IRecordDefinition = {\n      fieldDefinitions: [\n        {\n          id: 'id',\n          resourceType: RX_RECORD_DEFINITION.resourceTypes.character\n        },\n        {\n          id: 'name',\n          resourceType: RX_RECORD_DEFINITION.resourceTypes.character\n        },\n        {\n          id: 'tagsOperator',\n          resourceType: RX_RECORD_DEFINITION.resourceTypes.character\n        },\n        {\n          id: 'tags',\n          resourceType: RX_RECORD_DEFINITION.resourceTypes.character\n        }\n      ]\n    };\n\n    const actionButtons: IRecordGridActionButton[] = [\n      {\n        label: this.translateService.instant('com.bmc.arsys.rx.client.common.delete.label'),\n        style: 'tertiary',\n        iconCls: 'trash',\n        actions: [{ name: () => this.deleteSearchFilters() }]\n      }\n    ];\n\n    this.recordGridConfig$ = of({\n      columns: gridColumns,\n      emptyStateLabelText: this.translateService.instant(\n        'com.bmc.arsys.rx.client.admin.search-filters.grid.empty-state.label'\n      ),\n      enableRowSelection: RowSelectionMode.Multiple,\n      enableFiltering: false,\n      recordIdField: 'id',\n      styles: 'flex-fill',\n      useExternalFiltering: false,\n      getRecordDefinition: () => of(gridRecordDefinition),\n      getData: () => this.rxSearchFiltersService.getSearchFilters(),\n      actionButtons,\n      filterMode: RecordGridFilterMode.Basic\n    });\n  }\n\n  private deleteSearchFilters(): void {\n    const searchFilterIds = this.grid.api.getSelectedRows().map((row) => row.id as string);\n\n    this.rxModalService\n      .confirm({\n        title: this.translateService.instant('com.bmc.arsys.rx.client.common.warning.label'),\n        modalStyle: RX_MODAL.modalStyles.warning,\n        message: this.translateService.instant(\n          'com.bmc.arsys.rx.client.admin.search-filters.delete-confirmation.message'\n        )\n      })\n      .then((result: boolean) => {\n        if (result) {\n          this.rxSearchFiltersService.deleteSearchFilters(searchFilterIds).subscribe(() => {\n            this.rxNotificationService.addSuccessMessage(\n              this.translateService.instant('com.bmc.arsys.rx.client.admin.search-filters.delete-success.message')\n            );\n            this.grid.api.refresh().subscribe();\n          });\n        }\n      });\n  }\n\n  openEditor(data?: IRowDataItem): void {\n    this.adaptDockedPanelService\n      .open({\n        title: this.translateService.instant(\n          data\n            ? 'com.bmc.arsys.rx.client.admin.search-filters-editor.edit.title'\n            : 'com.bmc.arsys.rx.client.admin.search-filters-editor.new.title'\n        ),\n        content: SearchFiltersEditorComponent,\n        data: data\n      })\n      .then(() => {\n        this.grid.api.refresh().subscribe();\n      })\n      .catch(noop);\n  }\n}\n","<rx-admin-settings header=\"{{ 'com.bmc.arsys.rx.client.admin.search-filters.header.label' | translate }}\">\n  <div>\n    <button adapt-button type=\"button\" btn-type=\"tertiary\" (click)=\"openEditor()\">\n      <span class=\"d-icon-plus_circle\"></span>\n      {{ 'com.bmc.arsys.rx.client.admin.search-filters.new-search-filter.button.label' | translate }}\n    </button>\n  </div>\n\n  <rx-record-grid class=\"mt-2 h-100\" [config]=\"recordGridConfig$\"></rx-record-grid>\n</rx-admin-settings>\n\n<ng-template #tagsTemplate let-dataItem=\"dataItem\">\n  <div class=\"d-flex flex-row flex-wrap\">\n    <ng-container *ngFor=\"let tag of dataItem.tags\">\n      <adapt-tag [type]=\"'active'\" [removable]=\"false\">\n        {{ tag | truncate: 10 }}\n      </adapt-tag>\n    </ng-container>\n  </div>\n</ng-template>\n","import { CommonModule } from '@angular/common';\nimport { ComponentFactoryResolver, NgModule } from '@angular/core';\nimport { ReactiveFormsModule } from '@angular/forms';\n\nimport {\n  AdaptButtonModule,\n  AdaptMetatagModule,\n  AdaptRxFormControlModule,\n  AdaptRxSelectModule,\n  AdaptRxTextfieldModule,\n  AdaptTagModule,\n  AdaptTruncatePipeModule\n} from '@bmc-ux/adapt-angular';\n\nimport { RX_APPLICATION } from '@helix/platform/shared/api';\nimport { AdminSettingsModule } from '@helix/platform/shared/components';\nimport { RxViewComponentRegistryService } from '@helix/platform/view/api';\nimport { RecordGridModule } from '@helix/platform/view/components';\nimport { TranslateModule } from '@ngx-translate/core';\nimport { SearchFiltersEditorComponent } from './search-filters-editor/search-filters-editor.component';\nimport { RxSearchFiltersComponent } from './search-filters.component';\n\n@NgModule({\n  declarations: [RxSearchFiltersComponent, SearchFiltersEditorComponent],\n  imports: [\n    CommonModule,\n    ReactiveFormsModule,\n    TranslateModule,\n    AdaptButtonModule,\n    AdaptMetatagModule,\n    AdaptRxFormControlModule,\n    AdaptRxSelectModule,\n    AdaptRxTextfieldModule,\n    AdaptTagModule,\n    AdaptTruncatePipeModule,\n    AdminSettingsModule,\n    RecordGridModule\n  ],\n  exports: [RxSearchFiltersComponent],\n  entryComponents: [RxSearchFiltersComponent]\n})\nexport class SearchFiltersRegistrationModule {\n  constructor(\n    private componentFactoryResolver: ComponentFactoryResolver,\n    private rxViewComponentRegistryService: RxViewComponentRegistryService\n  ) {\n    rxViewComponentRegistryService.register({\n      type: 'rx-search-filters',\n      componentFactory: this.componentFactoryResolver.resolveComponentFactory(RxSearchFiltersComponent),\n      name: 'Search filters',\n      isPageComponent: true,\n      availableInBundles: [RX_APPLICATION.settingsBundleId]\n    });\n  }\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { FormsModule } from '@angular/forms';\nimport {\n  AdaptAccordionModule,\n  AdaptBusyModule,\n  AdaptButtonModule,\n  AdaptDockedPanelModule,\n  AdaptEmptyStateModule,\n  AdaptModalModule,\n  AdaptSidebarModule,\n  AdaptTreeModule\n} from '@bmc-ux/adapt-angular';\nimport { AdminSettingsModule, RxFormBuilderModule } from '@helix/platform/shared/components';\nimport { RxBusyIndicatorModule } from '@helix/platform/ui-kit';\nimport { ViewActionsModule } from '@helix/platform/view/actions';\nimport { RecordGridModule, ViewComponentsModule } from '@helix/platform/view/components';\nimport { RuntimeViewModule } from '@helix/platform/view/runtime';\nimport { TranslateModule } from '@ngx-translate/core';\nimport { AdminCommonSettingsBladeComponent } from './admin-common-settings-blade/admin-common-settings-blade.component';\nimport { AdminCommonSettingsEditorComponent } from './admin-common-settings-editor/admin-common-settings-editor.component';\nimport { AdminCommonSettingsComponent } from './admin-common-settings/admin-common-settings.component';\nimport { AdminComponentsRoutingModule } from './admin-components-routing.module';\nimport { AdminSettingsExplorerComponent } from './admin-settings-explorer/admin-settings-explorer.component';\nimport { ApplicationIssuesRegistrationModule } from './application-issues/application-issues-registration.module';\nimport { ApprovalConfigurationRegistrationModule } from './approval-configuration/approval-configuration-registration.module';\nimport { ApprovalNotificationsRegistrationModule } from './approval-notifications/approval-notifications-registration.module';\nimport { BmcServiceCloudAccountRegistrationModule } from './bmc-service-cloud-account/bmc-service-cloud-account-registration.module';\nimport { ChatbotsRegistrationModule } from './chatbots/chatbots-registration.module';\nimport { CognitiveConsumptionRegistrationModule } from './cognitive-consumption/cognitive-consumption-registration.module';\nimport { CognitiveSearchRegistrationModule } from './cognitive-search/cognitive-search-registration.module';\nimport { CognitiveServiceRegistrationModule } from './cognitive-service/cognitive-service-registration.module';\nimport { CognitiveTrainingRegistrationModule } from './cognitive-training/cognitive-training-registration.module';\nimport { ComaroundKnowledgeRegistrationModule } from './comaround-knowledge/comaround-knowledge-registration.module';\nimport { ConnectorMappingRegistrationModule } from './connection-mapping/connector-mapping';\nimport { DataSourceMappingModule } from './connection-mapping/data-source-mapping/data-source-mapping.module';\nimport { WebApiMappingRegistrationModule } from './connection-mapping/web-api-mapping/web-api-mapping-registration.module';\nimport { ConnectorConfigurationRegistrationModule } from './connector-configuration/connector-configuration-registration.module';\nimport { DataSourceConnectionsRegistrationModule } from './data-source-connections/data-source-connections-registration.module';\nimport { EmailProfilesRegistrationModule } from './email-profiles/email-profiles-registration.module';\nimport { FunctionalRolesRegistrationModule } from './functional-roles/functional-roles-registration.module';\nimport { HkmAccessMappingRegistrationModule } from './hkm-access-mapping/hkm-access-mapping-registration.module';\nimport { IframeSecurityRegistrationModule } from './iframe-security/iframe-security-registration.module';\nimport { JitterbitApisRegistrationModule } from './ipaas/jitterbit-apis/jitterbit-apis-registration.module';\nimport { JitterbitConfigurationRegistrationModule } from './ipaas/jitterbit-configuration/jitterbit-configuration-registration.module';\nimport { MulesoftApisRegistrationModule } from './ipaas/mulesoft-apis/mulesoft-apis-registration.module';\nimport { MulesoftConfigurationRegistrationModule } from './ipaas/mulesoft-configuration/mulesoft-configuration-registration.module';\nimport { IssueReportingConfigurationModule } from './issue-reporting-configuration/issue-reporting-configuration-registration.module';\nimport { ManageTenantRegistrationModule } from './manage-tenant/manage-tenant-registration.module';\nimport { OutgoingMailboxStatusRegistrationModule } from './outgoing-mailbox-status/outgoing-mailbox-status-registration.module';\nimport { PermissionsPolicyHeaderRegistrationModule } from './permissions-policy-header/permissions-policy-header-registration.module';\nimport { RealTimeTranslationRegistrationModule } from './real-time-translation';\nimport { RolePermissionsRegistrationModule } from './role-permissions';\nimport { RssoOauthRegistrationModule } from './rsso-oauth/rsso-oauth-registration.module';\nimport { RulePoolManagementRegistrationModule } from './rule-pool-management/rule-pool-management-registration.module';\nimport { ServerInformationRegistrationModule } from './server-information';\nimport { ServerLogsRegistrationModule } from './server-logs/server-logs-registration.module';\nimport { ServicesProviderRegionRegistrationModule } from './services-provider-region';\nimport { RxAdminCommonSettingsService } from './services/admin-common-settings.service';\nimport { SummarizationServiceRegistrationModule } from './summarization-service';\nimport { SummarizationTestingRegistrationModule } from './summarization-testing/summarization-testing-registration.module';\nimport { ToneAnalysisTestingRegistrationModule } from './tone-analysis-testing/tone-analysis-testing-registration.module';\nimport { VirtualChatConfigurationRegistrationModule } from './virtual-chat-configuration/virtual-chat-configuration-registration.module';\nimport { WebApiConnectionsRegistrationModule } from './web-api-connections/web-api-connections-registration.module';\nimport { WebhookCallbackConfigurationRegistrationModule } from './webhook-callback-configuration/webhook-callback-configuration-registration.module';\nimport { SearchFiltersRegistrationModule } from './search-filters';\n\n@NgModule({\n  imports: [\n    AdaptDockedPanelModule,\n    AdaptModalModule,\n    AdaptTreeModule,\n    AdaptEmptyStateModule,\n    AdaptSidebarModule,\n    AdaptButtonModule,\n    AdaptBusyModule.forRoot(),\n    AdaptAccordionModule,\n    BmcServiceCloudAccountRegistrationModule,\n    AdminComponentsRoutingModule,\n    AdminSettingsModule,\n    ApplicationIssuesRegistrationModule,\n    ApprovalConfigurationRegistrationModule,\n    ApprovalNotificationsRegistrationModule,\n    ChatbotsRegistrationModule,\n    CognitiveConsumptionRegistrationModule,\n    CognitiveSearchRegistrationModule,\n    CognitiveServiceRegistrationModule,\n    CognitiveTrainingRegistrationModule,\n    ComaroundKnowledgeRegistrationModule,\n    CommonModule,\n    ConnectorConfigurationRegistrationModule,\n    ConnectorMappingRegistrationModule,\n    DataSourceConnectionsRegistrationModule,\n    DataSourceMappingModule,\n    EmailProfilesRegistrationModule,\n    FormsModule,\n    FunctionalRolesRegistrationModule,\n    IframeSecurityRegistrationModule,\n    IssueReportingConfigurationModule,\n    JitterbitApisRegistrationModule,\n    JitterbitConfigurationRegistrationModule,\n    ManageTenantRegistrationModule,\n    MulesoftApisRegistrationModule,\n    MulesoftConfigurationRegistrationModule,\n    OutgoingMailboxStatusRegistrationModule,\n    RecordGridModule,\n    RolePermissionsRegistrationModule,\n    RulePoolManagementRegistrationModule,\n    RuntimeViewModule,\n    RxFormBuilderModule,\n    RxBusyIndicatorModule,\n    ServerInformationRegistrationModule,\n    ServerLogsRegistrationModule,\n    ServicesProviderRegionRegistrationModule,\n    SummarizationServiceRegistrationModule,\n    SummarizationTestingRegistrationModule,\n    RealTimeTranslationRegistrationModule,\n    RssoOauthRegistrationModule,\n    TranslateModule,\n    VirtualChatConfigurationRegistrationModule,\n    ViewActionsModule,\n    ViewComponentsModule,\n    WebApiMappingRegistrationModule,\n    WebApiConnectionsRegistrationModule,\n    WebhookCallbackConfigurationRegistrationModule,\n    ToneAnalysisTestingRegistrationModule,\n    PermissionsPolicyHeaderRegistrationModule,\n    HkmAccessMappingRegistrationModule,\n    SearchFiltersRegistrationModule\n  ],\n  providers: [RxAdminCommonSettingsService],\n  declarations: [\n    AdminSettingsExplorerComponent,\n    AdminCommonSettingsComponent,\n    AdminCommonSettingsEditorComponent,\n    AdminCommonSettingsBladeComponent\n  ]\n})\nexport class AdminComponentsModule {}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './index';\n"],"names":["_map","map","filter","flatten","take","_filter","parseInt","dataPageType","authTypes","authTypeOptions","noop","fieldIds"],"mappings":"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"}