{"version":3,"file":"helix-platform-document-designer.umd.js","sources":["../../../../node_modules/tslib/tslib.es6.js","../../../../libs/platform/document/designer/document-designer/+state/document-designer.actions.ts","../../../../libs/platform/document/designer/document-designer.constant.ts","../../../../libs/platform/document/designer/document-designer/+state/document-designer.selectors.ts","../../../../libs/platform/document/designer/document-designer.service.ts","../../../../libs/platform/document/designer/document-designer/document-designer.component.ts","../../../../libs/platform/document/designer/document-designer/document-designer.component.html","../../../../libs/platform/document/designer/document-designer-page/document-designer-page.component.ts","../../../../libs/platform/document/designer/document-designer-page/document-designer-page.component.html","../../../../libs/platform/document/designer/document-designer/+state/document-designer-model.reducer.ts","../../../../libs/platform/document/designer/document-designer/+state/document-designer.effects.ts","../../../../libs/platform/document/designer/document-designer/document-designer.module.ts","../../../../libs/platform/document/designer/document-designer-page/document-designer-page.module.ts","../../../../libs/platform/document/designer/helix-platform-document-designer.ts"],"sourcesContent":["/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    if (typeof b !== \"function\" && b !== null)\r\n        throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n});\r\n\r\nexport function __exportStar(m, o) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n}\r\n\r\nexport function __spreadArray(to, from, pack) {\r\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\r\n        if (ar || !(i in from)) {\r\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\r\n            ar[i] = from[i];\r\n        }\r\n    }\r\n    return to.concat(ar || Array.prototype.slice.call(from));\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nvar __setModuleDefault = Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, state, kind, f) {\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\r\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, state, value, kind, f) {\r\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\r\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\r\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\r\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\r\n}\r\n","import { IDocumentDefinition } from '@helix/platform/document/api';\nimport { createAction, props } from '@ngrx/store';\nimport { IDocumentDefinitionModel } from '../../document-designer.types';\nimport { IInitDocumentDesignerActionPayload } from './document-designer.types';\n\nexport const init = createAction('[Document Designer] Init', props<{ payload: IInitDocumentDesignerActionPayload }>());\n\nexport const loadDefinition = createAction('[Document Designer] Load Definition');\n\nexport const loadDefinitionSuccess = createAction(\n  '[Document Designer] Load Definition Success',\n  props<{ definition: IDocumentDefinition }>()\n);\n\nexport const initDefinitionData = createAction(\n  '[Document Designer] Init Definition Model',\n  props<{ definition: IDocumentDefinition; definitionModel: IDocumentDefinitionModel }>()\n);\n\nexport const markDesignerPristine = createAction('[Document Designer] Mark Designer Pristine');\n\nexport const markDesignerDirty = createAction('[Document Designer] Mark Designer Dirty');\n\nexport const updateDefinitionModelFromDesigner = createAction(\n  '[Document Designer] Update Definition Model From Designer',\n  props<{ definitionModelFromDesigner: IDocumentDefinitionModel }>()\n);\n\nexport const toggleDesignMode = createAction('[Document Designer] Toggle Design Mode');\n\nexport const revertCustomization = createAction('[Document Designer] Revert Customization');\n\nexport const saveDefinition = createAction('[Document Designer] Save Definition');\n\nexport const saveDefinitionSuccess = createAction(\n  '[Document Designer] Save Definition Success',\n  props<{ savedDefinitionName: string }>()\n);\n\nexport const saveDefinitionError = createAction('[Document Designer] Save Definition Error');\n\nexport const destroy = createAction('[Document Designer] Destroy');\n","export const RX_DOCUMENT_DESIGNER = {\n  featureSelector: 'documentDesigner'\n};\n","import { createFeatureSelector, createSelector } from '@ngrx/store';\nimport { RX_DOCUMENT_DESIGNER } from '../../document-designer.constant';\nimport { IDocumentDesignerModel, IDocumentDesignerState } from './document-designer.types';\n\nexport const documentDesignerStateSelector = createFeatureSelector<IDocumentDesignerState>(\n  RX_DOCUMENT_DESIGNER.featureSelector\n);\n\nexport const documentDesignerModelSelector = createSelector(\n  documentDesignerStateSelector,\n  (documentDesignerState: IDocumentDesignerState) => documentDesignerState.model\n);\n\nexport const bundleIdSelector = createSelector(\n  documentDesignerModelSelector,\n  (documentDesignerModel: IDocumentDesignerModel) => documentDesignerModel.bundleId\n);\n\nexport const definitionNameSelector = createSelector(\n  documentDesignerModelSelector,\n  (documentDesignerModel: IDocumentDesignerModel) => documentDesignerModel.definitionName\n);\n\nexport const isDesignModeSelector = createSelector(\n  documentDesignerModelSelector,\n  (documentDesignerModel: IDocumentDesignerModel) => documentDesignerModel.isDesignMode\n);\n\nexport const definitionModelFromDefinitionSelector = createSelector(\n  documentDesignerModelSelector,\n  (documentDesignerModel: IDocumentDesignerModel) => documentDesignerModel.definitionModelFromDefinition\n);\n\nexport const definitionModelSelector = createSelector(\n  documentDesignerModelSelector,\n  (documentDesignerModel: IDocumentDesignerModel) => documentDesignerModel.definitionModel\n);\n\nexport const isDirtySelector = createSelector(\n  documentDesignerModelSelector,\n  (documentDesignerModel: IDocumentDesignerModel) => documentDesignerModel.isDirty\n);\n\nexport const savedDefinitionNameSelector = createSelector(\n  documentDesignerModelSelector,\n  (documentDesignerModel: IDocumentDesignerModel) => documentDesignerModel.savedDefinitionName\n);\n\nexport const originalDefinitionSelector = createSelector(\n  documentDesignerModelSelector,\n  (documentDesignerModel: IDocumentDesignerModel) => documentDesignerModel.originalDefinition\n);\n","import { Injectable } from '@angular/core';\nimport { IDocumentDefinition } from '@helix/platform/document/api';\nimport { IDocumentDefinitionModel } from './document-designer.types';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class DocumentDesignerService {\n  getDefinitionFromDefinitionModel(model: IDocumentDefinitionModel, bundleId: string): IDocumentDefinition {\n    return {\n      lastUpdateTime: model.lastUpdateTime,\n      lastChangedBy: model.lastChangedBy,\n      owner: model.owner,\n      name: `${bundleId}:${model.name}`,\n      description: model.description,\n      overlayGroupId: model.overlayGroupId,\n      scope: model.customizationOptions.scope,\n      guid: model.guid,\n      allowOverlay: model.customizationOptions.allowOverlay,\n      overlayDescriptor: model.overlayDescriptor,\n      documentSchema: model.documentSchema\n    };\n  }\n}\n","import {\n  Component,\n  EventEmitter,\n  Input,\n  OnChanges,\n  OnDestroy,\n  OnInit,\n  Output,\n  Renderer2,\n  SimpleChanges,\n  ViewChild\n} from '@angular/core';\nimport { FormControl } from '@angular/forms';\nimport { AdaptSidebarComponent } from '@bmc-ux/adapt-angular';\nimport { IDocumentDefinition } from '@helix/platform/document/api';\nimport { RX_RECORD_DEFINITION } from '@helix/platform/record/api';\nimport {\n  IDesignerConfiguration,\n  IFormBuilderConfig,\n  IFormBuilderEvent,\n  IPlainObject,\n  RxGlobalCacheService,\n  RxNotificationService,\n  RxOverlayService\n} from '@helix/platform/shared/api';\nimport {\n  CustomizationOptionsComponent,\n  ITextareaFormControlOptions,\n  ITextFormControlOptions,\n  RX_REVERT_CUSTOMIZATION,\n  RxRevertCustomizationComponent,\n  TextareaFormControlComponent,\n  TextFormControlComponent\n} from '@helix/platform/shared/components';\nimport {\n  IBreadcrumbItem,\n  IValidationIssue,\n  IValidationIssueSection,\n  ValidationIssueType\n} from '@helix/platform/ui-kit';\nimport { RxJsonParserService } from '@helix/platform/utils';\nimport { Store } from '@ngrx/store';\nimport { TranslateService } from '@ngx-translate/core';\nimport { isEmpty, isUndefined, some, trim } from 'lodash';\nimport { combineLatest, Observable, of, ReplaySubject, Subject } from 'rxjs';\nimport {\n  filter,\n  map,\n  shareReplay,\n  skip,\n  startWith,\n  switchMap,\n  take,\n  takeUntil,\n  tap,\n  withLatestFrom\n} from 'rxjs/operators';\nimport { DocumentDesignerService } from '../document-designer.service';\nimport { IDocumentDefinitionModel } from '../document-designer.types';\nimport * as DocumentDesignerActions from './+state/document-designer.actions';\nimport {\n  bundleIdSelector,\n  definitionModelFromDefinitionSelector,\n  definitionModelSelector,\n  isDesignModeSelector,\n  isDirtySelector,\n  originalDefinitionSelector,\n  savedDefinitionNameSelector\n} from './+state/document-designer.selectors';\n\n@Component({\n  selector: 'rx-document-designer',\n  templateUrl: './document-designer.component.html',\n  styleUrls: ['./document-designer.component.scss']\n})\nexport class DocumentDesignerComponent implements OnInit, OnChanges, OnDestroy {\n  @Input()\n  configuration: IDesignerConfiguration;\n\n  @Output()\n  definitionSaved: EventEmitter<string> = new EventEmitter();\n\n  @Output()\n  definitionErrorLoading: EventEmitter<void> = new EventEmitter();\n\n  @Output()\n  closeDesigner: EventEmitter<void> = new EventEmitter<void>();\n\n  @ViewChild(AdaptSidebarComponent, { static: false })\n  inspectorSidebar: AdaptSidebarComponent;\n\n  schemaFormControl: FormControl = new FormControl('', { updateOn: 'blur' });\n  private isDirty$: Observable<boolean> = this.store$.select(isDirtySelector);\n  private definitionModel$: Observable<IDocumentDefinitionModel> = this.store$.select(definitionModelSelector);\n  private isDesignMode$ = this.store$.select(isDesignModeSelector);\n  private bundleId$ = this.store$.select(bundleIdSelector);\n  private destroyed$ = new ReplaySubject<boolean>(1);\n  private originalDefinition$ = this.store$.select(originalDefinitionSelector);\n  private inspectorFocusEditorSubject = new Subject<{ editorName: string; data: IPlainObject }>();\n  inspectorFocusEditor$ = this.inspectorFocusEditorSubject.asObservable();\n\n  private bundleFriendlyName$ = this.bundleId$.pipe(\n    switchMap((bundleId) => this.rxGlobalCacheService.getBundleFriendlyName(bundleId))\n  );\n\n  private validationIssues$: Observable<IValidationIssueSection[]> = this.definitionModel$.pipe(\n    map((definitionModel: IDocumentDefinitionModel) => this.validate(definitionModel)),\n    shareReplay(1)\n  );\n\n  private hasValidationErrors$: Observable<boolean> = this.validationIssues$.pipe(\n    map((issueSections) =>\n      some(issueSections, {\n        issues: [{ type: ValidationIssueType.Error }]\n      })\n    )\n  );\n\n  private definitionFromDefinitionModel$: Observable<IDocumentDefinition> = this.definitionModel$.pipe(\n    withLatestFrom(this.bundleId$),\n    map(([definitionModel, bundleId]) =>\n      this.documentDesignerService.getDefinitionFromDefinitionModel(definitionModel, bundleId)\n    )\n  );\n\n  private areNewDefinitionsAllowed$ = this.store$\n    .select(bundleIdSelector)\n    .pipe(switchMap((bundleId) => this.rxOverlayService.areNewDefinitionsAllowed(bundleId)));\n\n  private isReadOnly$ = this.definitionFromDefinitionModel$.pipe(\n    filter((definition) => !!definition.lastUpdateTime),\n    withLatestFrom(this.areNewDefinitionsAllowed$),\n    map(\n      ([definition, areNewDefinitionsAllowed]) =>\n        !areNewDefinitionsAllowed || !this.rxOverlayService.isCustomizationEnabled('allowOverlay', definition)\n    ),\n    tap((isReadOnly: boolean) => {\n      if (isReadOnly) {\n        this.rxNotificationService.addWarningMessage(\n          this.translateService.instant('com.bmc.arsys.rx.client.designer.read-only-definition-warning.message')\n        );\n      }\n    }),\n    startWith(false),\n    shareReplay(1)\n  );\n\n  private isSaveButtonDisabled$: Observable<boolean> = combineLatest([\n    this.hasValidationErrors$,\n    this.isDirty$,\n    this.isReadOnly$\n  ]).pipe(\n    map(([hasValidationErrors, isDirty, isReadOnly]) => hasValidationErrors || !isDirty || isReadOnly),\n    startWith(true)\n  );\n\n  private definitionForJsonViewer$: Observable<IDocumentDefinition> = this.isDesignMode$.pipe(\n    switchMap((isDesignMode: boolean) =>\n      isDesignMode\n        ? of(null)\n        : combineLatest([this.definitionFromDefinitionModel$, this.originalDefinition$]).pipe(\n            map(([definitionFromDefinitionModel, originalDefinition]) => ({\n              ...originalDefinition,\n              ...definitionFromDefinitionModel\n            }))\n          )\n    )\n  );\n\n  private breadcrumbItems$: Observable<IBreadcrumbItem[]> = this.definitionModel$.pipe(\n    map((definitionModel) => [\n      {\n        label:\n          definitionModel.name ||\n          `<${this.translateService.instant('com.bmc.arsys.rx.client.document-designer.new-document.label')}>`,\n        data: {}\n      }\n    ])\n  );\n\n  private definitionInspectorConfig$ = this.definitionModel$.pipe(\n    map((definitionModel) => {\n      const isCustomizationAllowed = Boolean(definitionModel.lastUpdateTime)\n        ? this.rxOverlayService.isCustomizationEnabled('allowOverlay', definitionModel)\n        : true;\n\n      return this.getFormBuilderConfig(definitionModel, isCustomizationAllowed);\n    })\n  );\n\n  vm$ = combineLatest([\n    this.breadcrumbItems$,\n    this.bundleFriendlyName$,\n    this.definitionModel$,\n    this.hasValidationErrors$,\n    this.isReadOnly$,\n    this.definitionForJsonViewer$,\n    this.isSaveButtonDisabled$,\n    this.definitionInspectorConfig$,\n    this.validationIssues$\n  ]).pipe(\n    map(\n      ([\n        breadcrumbItems,\n        bundleFriendlyName,\n        definitionModel,\n        hasValidationErrors,\n        isReadOnly,\n        definitionForJsonViewer,\n        isSaveButtonDisabled,\n        definitionInspectorConfig,\n        validationIssues\n      ]) => ({\n        breadcrumbItems,\n        bundleFriendlyName,\n        definitionModel,\n        hasValidationErrors,\n        isReadOnly,\n        definitionForJsonViewer,\n        isSaveButtonDisabled,\n        definitionInspectorConfig,\n        validationIssues\n      })\n    )\n  );\n\n  constructor(\n    private store$: Store<any>,\n    private renderer: Renderer2,\n    private rxGlobalCacheService: RxGlobalCacheService,\n    private rxJsonParserService: RxJsonParserService,\n    private rxNotificationService: RxNotificationService,\n    private rxOverlayService: RxOverlayService,\n    private translateService: TranslateService,\n    private documentDesignerService: DocumentDesignerService\n  ) {}\n\n  ngOnInit(): void {\n    this.schemaFormControl.valueChanges.pipe(takeUntil(this.destroyed$)).subscribe((documentSchema) => {\n      this.store$.dispatch(\n        DocumentDesignerActions.updateDefinitionModelFromDesigner({\n          definitionModelFromDesigner: { documentSchema } as IDocumentDefinitionModel\n        })\n      );\n    });\n\n    this.store$\n      .select(definitionModelFromDefinitionSelector)\n      .pipe(takeUntil(this.destroyed$))\n      .subscribe((definitionModel) => {\n        this.schemaFormControl.patchValue(definitionModel.documentSchema, { emitEvent: false });\n      });\n\n    this.store$\n      .select(savedDefinitionNameSelector)\n      .pipe(skip(1), takeUntil(this.destroyed$), filter(Boolean))\n      .subscribe((savedDefinitionName: string) => {\n        this.definitionSaved.emit(savedDefinitionName);\n      });\n  }\n\n  ngOnChanges(changes: SimpleChanges): void {\n    if (changes.configuration.currentValue) {\n      this.store$.dispatch(DocumentDesignerActions.init({ payload: this.configuration }));\n    }\n  }\n\n  onEditorEvent(event: IFormBuilderEvent): void {\n    if (event.type === RX_REVERT_CUSTOMIZATION.events.revertCustomization) {\n      this.store$.dispatch(DocumentDesignerActions.revertCustomization());\n    }\n  }\n\n  canDeactivate(): boolean {\n    let canDeactivate = true;\n\n    this.isDirty$.pipe(take(1)).subscribe((isDirty) => {\n      canDeactivate = !isDirty;\n    });\n\n    return canDeactivate;\n  }\n\n  onCorrectIssue(validationIssue: IValidationIssue) {\n    if (validationIssue.data.propertyName === 'documentSchema') {\n      this.renderer.selectRootElement('#document-schema').focus();\n    } else {\n      this.inspectorSidebar.openPanel(0);\n\n      // need to wait until inspector will be visible\n      // there are no way to focus to invisible elements\n      setTimeout(\n        () =>\n          this.inspectorFocusEditorSubject.next({\n            editorName: validationIssue.data.propertyName,\n            data: validationIssue.data.data\n          }),\n        10\n      );\n    }\n  }\n\n  onSave(): void {\n    this.store$.dispatch(DocumentDesignerActions.saveDefinition());\n  }\n\n  onToggleDesignMode(): void {\n    this.store$.dispatch(DocumentDesignerActions.toggleDesignMode());\n  }\n\n  onDefinitionModelChange(definitionModel: IDocumentDefinitionModel): void {\n    this.store$.dispatch(\n      DocumentDesignerActions.updateDefinitionModelFromDesigner({ definitionModelFromDesigner: definitionModel })\n    );\n  }\n\n  onDefinitionInspectorInitialized(): void {\n    setTimeout(\n      () =>\n        this.inspectorFocusEditorSubject.next({\n          editorName: 'name',\n          data: {}\n        }),\n      10\n    );\n  }\n\n  private getFormBuilderConfig(\n    definitionModel: IDocumentDefinitionModel,\n    isCustomizationAllowed: boolean\n  ): IFormBuilderConfig {\n    return [\n      {\n        label: this.translateService.instant('com.bmc.arsys.rx.client.common.general-items.label'),\n        controls: [\n          {\n            name: 'name',\n            component: TextFormControlComponent,\n            isDisabled: Boolean(definitionModel.lastUpdateTime),\n            options: {\n              label: this.translateService.instant('com.bmc.arsys.rx.client.common.name.label'),\n              required: true\n            } as ITextFormControlOptions\n          },\n          {\n            name: 'description',\n            component: TextareaFormControlComponent,\n            options: {\n              label: this.translateService.instant('com.bmc.arsys.rx.client.common.description.label'),\n              rows: 3\n            } as ITextareaFormControlOptions\n          },\n          {\n            component: RxRevertCustomizationComponent,\n            options: {\n              allowOverlay: definitionModel.customizationOptions.allowOverlay,\n              scope: definitionModel.customizationOptions.scope,\n              overlayGroupId: definitionModel.overlayGroupId,\n              overlayDescriptor: definitionModel.overlayDescriptor\n            }\n          },\n          {\n            name: 'customizationOptions',\n            component: CustomizationOptionsComponent,\n            isDisabled: !isCustomizationAllowed,\n            options: {\n              definitionTypeDisplayName: this.translateService\n                .instant('com.bmc.arsys.rx.client.document-definition.label')\n                .toLowerCase(),\n              allowOverlay: definitionModel.customizationOptions.allowOverlay,\n              scope: definitionModel.customizationOptions.scope,\n              overlayGroupId: definitionModel.overlayGroupId,\n              overlayDescriptor: definitionModel.overlayDescriptor\n            }\n          }\n        ]\n      }\n    ] as IFormBuilderConfig;\n  }\n\n  private validate(definitionModel: IDocumentDefinitionModel): IValidationIssueSection[] {\n    const validationIssues: IValidationIssue[] = [];\n\n    if (isEmpty(trim(definitionModel.name))) {\n      validationIssues.push({\n        type: ValidationIssueType.Error,\n        description: this.translateService.instant(\n          'com.bmc.arsys.rx.client.designer.validation.cannot-be-blank.message',\n          {\n            propertyName: this.translateService.instant('com.bmc.arsys.rx.client.document-designer.document-name.label')\n          }\n        ),\n        data: {\n          propertyName: 'name'\n        }\n      });\n    }\n\n    if (definitionModel.name && !RX_RECORD_DEFINITION.validDefinitionNameRegex.test(definitionModel.name)) {\n      validationIssues.push({\n        type: ValidationIssueType.Error,\n        description: this.translateService.instant(\n          'com.bmc.arsys.rx.client.designer.validation.invalid-definition-name.message',\n          {\n            propertyName: this.translateService.instant('com.bmc.arsys.rx.client.document-designer.document-name.label')\n          }\n        ),\n        data: {\n          propertyName: 'name'\n        }\n      });\n    }\n\n    if (isEmpty(trim(definitionModel.documentSchema))) {\n      validationIssues.push({\n        type: ValidationIssueType.Error,\n        description: this.translateService.instant(\n          'com.bmc.arsys.rx.client.designer.validation.cannot-be-blank.message',\n          {\n            propertyName: this.translateService.instant(\n              'com.bmc.arsys.rx.client.document-designer.document-schema.label'\n            )\n          }\n        ),\n        data: {\n          propertyName: 'documentSchema'\n        }\n      });\n    } else if (isUndefined(this.rxJsonParserService.tryParseJson(definitionModel.documentSchema))) {\n      validationIssues.push({\n        type: ValidationIssueType.Error,\n        description: this.translateService.instant(\n          'com.bmc.arsys.rx.client.document-designer.validation.json-is-not-valid.message'\n        ),\n        data: {\n          propertyName: 'documentSchema'\n        }\n      });\n    }\n\n    return validationIssues.length\n      ? [\n          {\n            title: this.translateService.instant('com.bmc.arsys.rx.client.document-designer.title'),\n            issues: validationIssues\n          }\n        ]\n      : [];\n  }\n\n  ngOnDestroy(): void {\n    this.inspectorFocusEditorSubject.complete();\n    this.destroyed$.next(true);\n    this.destroyed$.complete();\n    this.store$.dispatch(DocumentDesignerActions.destroy());\n  }\n}\n","<ng-container *ngIf=\"vm$ | async as vm\">\n  <rx-designer-header\n    [bundleName]=\"vm.bundleFriendlyName\"\n    [breadcrumbItems]=\"vm.breadcrumbItems\"\n    [isDesignMode]=\"!vm.definitionForJsonViewer\"\n    [isSaveButtonDisabled]=\"vm.isSaveButtonDisabled\"\n    (toggleDesignMode)=\"onToggleDesignMode()\"\n    (save)=\"onSave()\"\n    (closeDesigner)=\"closeDesigner.emit()\"\n  ></rx-designer-header>\n\n  <div class=\"rx-designer-component\" [hidden]=\"!!vm.definitionForJsonViewer\">\n    <adapt-sidebar position=\"right\" panelWidth=\"280px\" [openedId]=\"0\">\n      <adapt-sidebar-item\n        headerTitle=\"{{ 'com.bmc.arsys.rx.client.common.properties.label' | translate }}\"\n        tooltipText=\"{{ 'com.bmc.arsys.rx.client.common.properties.label' | translate }}\"\n        iconClass=\"d-icon-pencil\"\n      >\n        <rx-form-builder\n          [config]=\"vm.definitionInspectorConfig\"\n          [focusEditor$]=\"inspectorFocusEditor$\"\n          (editorEvent)=\"onEditorEvent($event)\"\n          [isReadOnly]=\"vm.isReadOnly\"\n          [model]=\"vm.definitionModel\"\n          (formInitialized)=\"onDefinitionInspectorInitialized()\"\n          (modelChange)=\"onDefinitionModelChange($event)\"\n        ></rx-form-builder>\n      </adapt-sidebar-item>\n\n      <adapt-sidebar-item\n        headerTitle=\"{{ 'com.bmc.arsys.rx.client.designer.validation-issues.label' | translate }}\"\n        tooltipText=\"{{ 'com.bmc.arsys.rx.client.designer.validation-issues.label' | translate }}\"\n        [iconClass]=\"vm.hasValidationErrors ? 'd-icon-exclamation_triangle text-danger' : 'd-icon-exclamation_triangle'\"\n      >\n        <rx-validation-issues\n          [definitionTypeDisplayName]=\"'com.bmc.arsys.rx.client.document-definition.label' | translate\"\n          [issueSections]=\"vm.validationIssues\"\n          (correctIssue)=\"onCorrectIssue($event)\"\n        ></rx-validation-issues>\n      </adapt-sidebar-item>\n\n      <div class=\"main rx-designer-container h-100\">\n        <adapt-rx-control-label\n          [label]=\"'com.bmc.arsys.rx.client.document-designer.document-schema.label' | translate\"\n          [showRequiredLabel]=\"true\"\n        >\n        </adapt-rx-control-label>\n\n        <textarea\n          [formControl]=\"schemaFormControl\"\n          [readonly]=\"vm.isReadOnly\"\n          class=\"form-control h-100\"\n          name=\"documentSchema\"\n          required\n          id=\"document-schema\"\n          rx-id=\"document-schema\"\n        ></textarea>\n      </div>\n    </adapt-sidebar>\n  </div>\n\n  <adapt-code-viewer\n    *ngIf=\"vm.definitionForJsonViewer\"\n    [code]=\"vm.definitionForJsonViewer | json\"\n    [lang]=\"'javascript'\"\n    [hasToolbar]=\"false\"\n    [theme]=\"'light'\"\n    class=\"full-size\"\n  >\n  </adapt-code-viewer>\n</ng-container>\n","import { Component, OnDestroy, OnInit, ViewChild } from '@angular/core';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport {\n  IComponentCanDeactivate,\n  IDesignerConfiguration,\n  RX_APPLICATION,\n  RxBundleCacheService,\n  RxComponentCanDeactivateGuard,\n  RxDefinitionNameService,\n  RxPageTitleService\n} from '@helix/platform/shared/api';\nimport { RxUtilityModalsService } from '@helix/platform/ui-kit';\nimport { TranslateService } from '@ngx-translate/core';\nimport { Subscription } from 'rxjs';\nimport { DocumentDesignerComponent } from '../document-designer/document-designer.component';\n\n@Component({\n  selector: 'rx-document-designer-page',\n  templateUrl: './document-designer-page.component.html'\n})\nexport class DocumentDesignerPageComponent implements OnInit, OnDestroy, IComponentCanDeactivate {\n  configuration: IDesignerConfiguration;\n  isInitialized = false;\n\n  private definitionsRoute = 'document-definitions';\n  private pageTitle = this.translateService.instant('com.bmc.arsys.rx.client.document-designer.title');\n\n  private isNewDefinition: boolean;\n  private subscription: Subscription;\n\n  @ViewChild(DocumentDesignerComponent)\n  private designerComponent: DocumentDesignerComponent;\n\n  constructor(\n    private activatedRoute: ActivatedRoute,\n    private router: Router,\n    private rxBundleCacheService: RxBundleCacheService,\n    private rxComponentCanDeactivateGuard: RxComponentCanDeactivateGuard,\n    private rxDefinitionNameService: RxDefinitionNameService,\n    private rxPageTitleService: RxPageTitleService,\n    private rxUtilityModalsService: RxUtilityModalsService,\n    private translateService: TranslateService\n  ) {}\n\n  ngOnInit(): void {\n    this.rxComponentCanDeactivateGuard.setPageComponent(this);\n\n    this.subscription = this.activatedRoute.params.subscribe(({ definitionName, bundleId }) => {\n      this.rxBundleCacheService.bundleId = bundleId || this.rxDefinitionNameService.getBundleId(definitionName);\n\n      this.isInitialized = true;\n      this.isNewDefinition = !definitionName;\n\n      this.configuration = {\n        ...this.configuration,\n        bundleId: this.rxBundleCacheService.bundleId,\n        definitionName\n      };\n\n      this.rxPageTitleService.set([this.rxDefinitionNameService.getDisplayName(definitionName), this.pageTitle]);\n    });\n  }\n\n  ngOnDestroy(): void {\n    this.subscription.unsubscribe();\n    this.rxComponentCanDeactivateGuard.setPageComponent(null);\n  }\n\n  canDeactivate(): boolean {\n    return this.designerComponent?.canDeactivate() ?? true;\n  }\n\n  confirmDeactivation(): Promise<boolean> {\n    return this.rxUtilityModalsService.confirmUnsavedChanges();\n  }\n\n  onCloseDesigner(): void {\n    this.router.navigate([\n      RX_APPLICATION.innovationStudioBundleId,\n      this.rxBundleCacheService.bundleId,\n      this.definitionsRoute\n    ]);\n  }\n\n  onDefinitionSaved(definitionName: string): void {\n    if (this.isNewDefinition) {\n      this.router.navigate(['edit2', definitionName], { relativeTo: this.activatedRoute.parent });\n    }\n  }\n\n  onDefinitionErrorLoading(): void {\n    this.router.navigate(['new2', this.rxBundleCacheService.bundleId], { relativeTo: this.activatedRoute.parent });\n  }\n}\n","<rx-document-designer\n  *ngIf=\"isInitialized\"\n  [configuration]=\"configuration\"\n  (definitionSaved)=\"onDefinitionSaved($event)\"\n  (definitionErrorLoading)=\"onDefinitionErrorLoading()\"\n  (closeDesigner)=\"onCloseDesigner()\"\n></rx-document-designer>\n","import { createReducer, on } from '@ngrx/store';\nimport { IDocumentDefinitionModel } from '../../document-designer.types';\nimport * as DocumentDesignerActions from './document-designer.actions';\nimport { IDocumentDesignerModel } from './document-designer.types';\n\nconst initialModel: IDocumentDefinitionModel = {\n  name: null,\n  documentSchema: null,\n  customizationOptions: { allowOverlay: null, scope: null }\n};\n\nexport const initialState: IDocumentDesignerModel = {\n  bundleId: null,\n  definitionName: null,\n  isDesignMode: true,\n  definitionModel: initialModel,\n  definitionModelFromDefinition: initialModel,\n  isDirty: false,\n  savedDefinitionName: null,\n  originalDefinition: null\n};\n\nconst reducer = createReducer(\n  initialState,\n\n  on(DocumentDesignerActions.init, (state: IDocumentDesignerModel, { payload }) => ({\n    ...initialState,\n    bundleId: payload.bundleId,\n    definitionName: payload.definitionName\n  })),\n\n  on(DocumentDesignerActions.initDefinitionData, (state: IDocumentDesignerModel, { definition, definitionModel }) => ({\n    ...state,\n    definitionModel,\n    definitionModelFromDefinition: definitionModel,\n    originalDefinition: definition\n  })),\n\n  on(DocumentDesignerActions.markDesignerPristine, (state: IDocumentDesignerModel) => ({\n    ...state,\n    isDirty: false\n  })),\n\n  on(DocumentDesignerActions.markDesignerDirty, (state: IDocumentDesignerModel) => ({\n    ...state,\n    isDirty: true\n  })),\n\n  on(DocumentDesignerActions.toggleDesignMode, (state: IDocumentDesignerModel) => ({\n    ...state,\n    isDesignMode: !state.isDesignMode\n  })),\n\n  on(\n    DocumentDesignerActions.updateDefinitionModelFromDesigner,\n    (state: IDocumentDesignerModel, { definitionModelFromDesigner }) => ({\n      ...state,\n      definitionModel: { ...state.definitionModel, ...definitionModelFromDesigner }\n    })\n  ),\n\n  on(DocumentDesignerActions.saveDefinitionSuccess, (state: IDocumentDesignerModel, { savedDefinitionName }) => ({\n    ...state,\n    savedDefinitionName\n  })),\n\n  on(DocumentDesignerActions.destroy, (state: IDocumentDesignerModel) => ({\n    ...initialState\n  }))\n);\n\nexport function documentDesignerModelReducer(state, action) {\n  return reducer(state, action);\n}\n","import { HttpResponse } from '@angular/common/http';\nimport { ErrorHandler, Injectable } from '@angular/core';\nimport { IDocumentDefinition, RxDocumentDefinitionService } from '@helix/platform/document/api';\nimport { RxDefinitionNameService, RxDefinitionUpdateService, RxNotificationService } from '@helix/platform/shared/api';\nimport { Actions, createEffect, ofType } from '@ngrx/effects';\nimport { Store } from '@ngrx/store';\nimport { TranslateService } from '@ngx-translate/core';\nimport { last } from 'lodash';\nimport { of } from 'rxjs';\nimport { catchError, filter, map, switchMap, tap, withLatestFrom } from 'rxjs/operators';\nimport { DocumentDesignerService } from '../../document-designer.service';\nimport * as DocumentDesignerActions from './document-designer.actions';\nimport {\n  bundleIdSelector,\n  definitionModelSelector,\n  definitionNameSelector,\n  originalDefinitionSelector\n} from './document-designer.selectors';\n\n@Injectable()\nexport class DocumentDesignerEffects {\n  constructor(\n    private store$: Store<any>,\n    private actions$: Actions,\n    private errorHandler: ErrorHandler,\n    private rxDefinitionUpdateService: RxDefinitionUpdateService,\n    private documentDesignerService: DocumentDesignerService,\n    private rxNotificationService: RxNotificationService,\n    private translateService: TranslateService,\n    private rxDocumentDefinitionService: RxDocumentDefinitionService,\n    private rxDefinitionNameService: RxDefinitionNameService\n  ) {}\n\n  initDocumentDesigner$ = createEffect(() =>\n    this.actions$.pipe(\n      ofType(DocumentDesignerActions.init),\n      map((action) => DocumentDesignerActions.loadDefinition())\n    )\n  );\n\n  loadDefinition$ = createEffect(() =>\n    this.actions$.pipe(\n      ofType(DocumentDesignerActions.loadDefinition),\n      withLatestFrom(this.store$.select(definitionNameSelector)),\n      switchMap(([action, definitionName]) =>\n        definitionName\n          ? this.rxDocumentDefinitionService.get(definitionName)\n          : this.rxDocumentDefinitionService.getNew()\n      ),\n      map((definition: IDocumentDefinition) =>\n        DocumentDesignerActions.loadDefinitionSuccess({\n          definition\n        })\n      )\n    )\n  );\n\n  loadDefinitionSuccess$ = createEffect(() =>\n    this.actions$.pipe(\n      ofType(DocumentDesignerActions.loadDefinitionSuccess),\n      map((action) => {\n        let definitionModelFromDefinition = {\n          customizationOptions: {\n            scope: action.definition.scope,\n            allowOverlay: action.definition.allowOverlay\n          },\n          description: action.definition.description,\n          documentSchema: action.definition.documentSchema,\n          guid: action.definition.guid,\n          lastChangedBy: action.definition.lastChangedBy,\n          lastUpdateTime: action.definition.lastUpdateTime,\n          name: this.rxDefinitionNameService.getDisplayName(action.definition.name),\n          overlayDescriptor: action.definition.overlayDescriptor,\n          overlayGroupId: action.definition.overlayGroupId,\n          owner: action.definition.owner\n        };\n\n        return DocumentDesignerActions.initDefinitionData({\n          definition: action.definition,\n          definitionModel: definitionModelFromDefinition\n        });\n      })\n    )\n  );\n\n  revertCustomization$ = createEffect(() =>\n    this.actions$.pipe(\n      ofType(DocumentDesignerActions.revertCustomization),\n      withLatestFrom(this.store$.select(definitionModelSelector), this.store$.select(bundleIdSelector)),\n      switchMap(([_, definitionModel, bundleId]) =>\n        this.rxDocumentDefinitionService.revertCustomization(`${bundleId}:${definitionModel.name}`)\n      ),\n      map(() => DocumentDesignerActions.loadDefinition())\n    )\n  );\n\n  markPristine$ = createEffect(() =>\n    this.actions$.pipe(\n      ofType(DocumentDesignerActions.initDefinitionData, DocumentDesignerActions.saveDefinition),\n      map(() => DocumentDesignerActions.markDesignerPristine())\n    )\n  );\n\n  markDirty$ = createEffect(() =>\n    this.actions$.pipe(\n      ofType(DocumentDesignerActions.updateDefinitionModelFromDesigner, DocumentDesignerActions.saveDefinitionError),\n      map(() => DocumentDesignerActions.markDesignerDirty())\n    )\n  );\n\n  saveDefinition$ = createEffect(() =>\n    this.actions$.pipe(\n      ofType(DocumentDesignerActions.saveDefinition),\n      withLatestFrom(\n        this.store$.select(definitionModelSelector),\n        this.store$.select(originalDefinitionSelector),\n        this.store$.select(bundleIdSelector)\n      ),\n      switchMap(([_, definitionModel, originalDefinition, bundleId]) => {\n        const definition = this.documentDesignerService.getDefinitionFromDefinitionModel(definitionModel, bundleId);\n\n        return (\n          definition.lastUpdateTime\n            ? this.rxDefinitionUpdateService.execute(\n                this.rxDocumentDefinitionService.update.bind(this.rxDocumentDefinitionService, {\n                  ...originalDefinition,\n                  ...definition\n                })\n              )\n            : this.rxDocumentDefinitionService.create(definition)\n        ).pipe(\n          map((response: HttpResponse<any>) => {\n            const definitionName =\n              decodeURIComponent(last(response?.headers.get('location').split('/')) || '') ||\n              this.rxDefinitionNameService.getDefinitionName(bundleId, definitionModel.name);\n\n            return DocumentDesignerActions.saveDefinitionSuccess({\n              savedDefinitionName: definitionName\n            });\n          }),\n          catchError((error) => {\n            this.errorHandler.handleError(error);\n\n            return of(DocumentDesignerActions.saveDefinitionError());\n          })\n        );\n      })\n    )\n  );\n\n  saveDefinitionSuccess$ = createEffect(() =>\n    this.actions$.pipe(\n      ofType(DocumentDesignerActions.saveDefinitionSuccess),\n      withLatestFrom(this.store$.select(definitionNameSelector)),\n      tap(() => {\n        this.rxNotificationService.addSuccessMessage(\n          this.translateService.instant('com.bmc.arsys.rx.client.designer.definition-saved-successfully.message', {\n            definitionTypeDisplayName: this.translateService.instant(\n              'com.bmc.arsys.rx.client.document-definition.label'\n            )\n          })\n        );\n      }),\n      filter(([action, definitionName]) => !!definitionName),\n      map(() => DocumentDesignerActions.loadDefinition())\n    )\n  );\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\nimport { AdaptCodeViewerModule, AdaptRxLabelModule, AdaptSidebarModule, AdaptTabsModule } from '@bmc-ux/adapt-angular';\nimport { RxDesignerHeaderModule, RxFormBuilderModule } from '@helix/platform/shared/components';\nimport { RxJsonViewerModule, RxValidationIssuesModule } from '@helix/platform/ui-kit';\nimport { TranslateModule } from '@ngx-translate/core';\nimport { DocumentDesignerComponent } from './document-designer.component';\nimport { StoreModule } from '@ngrx/store';\nimport { EffectsModule } from '@ngrx/effects';\nimport { RX_DOCUMENT_DESIGNER } from '../document-designer.constant';\nimport { documentDesignerModelReducer } from './+state/document-designer-model.reducer';\nimport { DocumentDesignerEffects } from './+state/document-designer.effects';\n\n@NgModule({\n  declarations: [DocumentDesignerComponent],\n  exports: [DocumentDesignerComponent],\n  imports: [\n    AdaptCodeViewerModule,\n    AdaptRxLabelModule,\n    AdaptSidebarModule,\n    AdaptTabsModule,\n    CommonModule,\n    FormsModule,\n    TranslateModule,\n    RxDesignerHeaderModule,\n    RxFormBuilderModule,\n    RxJsonViewerModule,\n    RxValidationIssuesModule,\n    ReactiveFormsModule,\n    StoreModule.forFeature(RX_DOCUMENT_DESIGNER.featureSelector, {\n      model: documentDesignerModelReducer\n    }),\n    EffectsModule.forFeature([DocumentDesignerEffects])\n  ]\n})\nexport class DocumentDesignerModule {}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { TranslateModule } from '@ngx-translate/core';\nimport { DocumentDesignerModule } from '../document-designer/document-designer.module';\nimport { DocumentDesignerPageComponent } from './document-designer-page.component';\n\n@NgModule({\n  declarations: [DocumentDesignerPageComponent],\n  exports: [DocumentDesignerPageComponent],\n  imports: [CommonModule, DocumentDesignerModule, TranslateModule]\n})\nexport class DocumentDesignerPageModule {\n}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './index';\n"],"names":["createAction","props","createFeatureSelector","createSelector","Injectable","EventEmitter","FormControl","ReplaySubject","Subject","switchMap","map","shareReplay","some","ValidationIssueType","withLatestFrom","filter","tap","startWith","combineLatest","of","takeUntil","DocumentDesignerActions.updateDefinitionModelFromDesigner","skip","DocumentDesignerActions.init","RX_REVERT_CUSTOMIZATION","DocumentDesignerActions.revertCustomization","take","DocumentDesignerActions.saveDefinition","DocumentDesignerActions.toggleDesignMode","TextFormControlComponent","TextareaFormControlComponent","RxRevertCustomizationComponent","CustomizationOptionsComponent","isEmpty","trim","RX_RECORD_DEFINITION","isUndefined","DocumentDesignerActions.destroy","AdaptSidebarComponent","Component","Input","Output","ViewChild","RX_APPLICATION","createReducer","on","DocumentDesignerActions.initDefinitionData","DocumentDesignerActions.markDesignerPristine","DocumentDesignerActions.markDesignerDirty","DocumentDesignerActions.saveDefinitionSuccess","createEffect","ofType","DocumentDesignerActions.loadDefinition","DocumentDesignerActions.loadDefinitionSuccess","DocumentDesignerActions.saveDefinitionError","last","catchError","AdaptCodeViewerModule","AdaptRxLabelModule","AdaptSidebarModule","AdaptTabsModule","CommonModule","FormsModule","TranslateModule","RxDesignerHeaderModule","RxFormBuilderModule","RxJsonViewerModule","RxValidationIssuesModule","ReactiveFormsModule","StoreModule","EffectsModule","NgModule"],"mappings":"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"}